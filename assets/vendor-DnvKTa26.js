var zi=Object.defineProperty;var qi=(t,e,n)=>e in t?zi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>qi(t,typeof e!="symbol"?e+"":e,n);var hr={exports:{}},gr={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(y,x){var A=y.length;y.push(x);e:for(;0<A;){var N=A-1>>>1,B=y[N];if(0<i(B,x))y[N]=x,y[A]=B,A=N;else break e}}function n(y){return y.length===0?null:y[0]}function r(y){if(y.length===0)return null;var x=y[0],A=y.pop();if(A!==x){y[0]=A;e:for(var N=0,B=y.length,z=B>>>1;N<z;){var q=2*(N+1)-1,ie=y[q],X=q+1,Q=y[X];if(0>i(ie,A))X<B&&0>i(Q,ie)?(y[N]=Q,y[X]=A,N=X):(y[N]=ie,y[q]=A,N=q);else if(X<B&&0>i(Q,A))y[N]=Q,y[X]=A,N=X;else break e}}return x}function i(y,x){var A=y.sortIndex-x.sortIndex;return A!==0?A:y.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,u=null,d=3,p=!1,m=!1,h=!1,g=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(y){for(var x=n(c);x!==null;){if(x.callback===null)r(c);else if(x.startTime<=y)r(c),x.sortIndex=x.expirationTime,e(a,x);else break;x=n(c)}}function k(y){if(h=!1,I(y),!m)if(n(a)!==null)m=!0,v(C);else{var x=n(c);x!==null&&$(k,x.startTime-y)}}function C(y,x){m=!1,h&&(h=!1,w(O),O=-1),p=!0;var A=d;try{for(I(x),u=n(a);u!==null&&(!(u.expirationTime>x)||y&&!R());){var N=u.callback;if(typeof N=="function"){u.callback=null,d=u.priorityLevel;var B=N(u.expirationTime<=x);x=t.unstable_now(),typeof B=="function"?u.callback=B:u===n(a)&&r(a),I(x)}else r(a);u=n(a)}if(u!==null)var z=!0;else{var q=n(c);q!==null&&$(k,q.startTime-x),z=!1}return z}finally{u=null,d=A,p=!1}}var E=!1,L=null,O=-1,D=5,U=-1;function R(){return!(t.unstable_now()-U<D)}function _(){if(L!==null){var y=t.unstable_now();U=y;var x=!0;try{x=L(!0,y)}finally{x?P():(E=!1,L=null)}}else E=!1}var P;if(typeof S=="function")P=function(){S(_)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,b=M.port2;M.port1.onmessage=_,P=function(){b.postMessage(null)}}else P=function(){g(_,0)};function v(y){L=y,E||(E=!0,P())}function $(y,x){O=g(function(){y(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(y){y.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,v(C))},t.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<y?Math.floor(1e3/y):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(y){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var A=d;d=x;try{return y()}finally{d=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(y,x){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var A=d;d=y;try{return x()}finally{d=A}},t.unstable_scheduleCallback=function(y,x,A){var N=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?N+A:N):A=N,y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=A+B,y={id:f++,callback:x,priorityLevel:y,startTime:A,expirationTime:B,sortIndex:-1},A>N?(y.sortIndex=A,e(c,y),n(a)===null&&y===n(c)&&(h?(w(O),O=-1):h=!0,$(k,A-N))):(y.sortIndex=B,e(a,y),m||p||(m=!0,v(C))),y},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(y){var x=d;return function(){var A=d;d=x;try{return y.apply(this,arguments)}finally{d=A}}}})(gr);hr.exports=gr;var cu=hr.exports;const T=t=>typeof t=="string",ze=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},Un=t=>t==null?"":""+t,Wi=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Zi=/###/g,Pn=t=>t&&t.indexOf("###")>-1?t.replace(Zi,"."):t,_n=t=>!t||T(t),Ge=(t,e,n)=>{const r=T(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(_n(t))return{};const s=Pn(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return _n(t)?{}:{obj:t,k:Pn(r[i])}},Hn=(t,e,n)=>{const{obj:r,k:i}=Ge(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),l=Ge(t,o,Object);for(;l.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),l=Ge(t,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n},Ji=(t,e,n,r)=>{const{obj:i,k:s}=Ge(t,e,Object);i[s]=i[s]||[],i[s].push(n)},it=(t,e)=>{const{obj:n,k:r}=Ge(t,e);if(n)return n[r]},Gi=(t,e,n)=>{const r=it(t,n);return r!==void 0?r:it(e,n)},pr=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?T(t[r])||t[r]instanceof String||T(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):pr(t[r],e[r],n):t[r]=e[r]);return t},Te=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xi=t=>T(t)?t.replace(/[&<>"'\/]/g,e=>Yi[e]):t;class Qi{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const es=[" ",",","?","!",";"],ts=new Qi(20),ns=(t,e,n)=>{e=e||"",n=n||"";const r=es.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=ts.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},jt=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let a=s;a<r.length;++a)if(a!==s&&(l+=n),l+=r[a],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&a<r.length-1)continue;s+=a-s+1;break}i=o}return i},st=t=>t&&t.replace("_","-"),rs={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class ot{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||rs,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(T(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ot(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ot(this.logger,e)}}var ae=new ot;class ht{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,a]=o;for(let c=0;c<a;c++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,a]=o;for(let c=0;c<a;c++)l.apply(l,[e,...r])})}}class Dn extends ht{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],r&&(Array.isArray(r)?l.push(...r):T(r)&&s?l.push(...r.split(s)):l.push(r)));const a=it(this.data,l);return!a&&!n&&!r&&e.indexOf(".")>-1&&(e=l[0],n=l[1],r=l.slice(2).join(".")),a||!o||!T(r)?a:jt(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,n];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),i=n,n=l[1]),this.addNamespaces(n),Hn(this.data,l,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(T(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=n,n=l[1]),this.addNamespaces(n);let a=it(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?pr(a,r,s):a={...a,...r},Hn(this.data,l,a),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var mr={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const Mn={};class at extends ht{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Wi(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ae.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ns(e,r,i);if(o&&!l){const a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:T(s)?[s]:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return{key:e,namespaces:T(s)?[s]:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],n),a=l[l.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(f){const k=n.nsSeparator||this.options.nsSeparator;return i?{res:`${a}${k}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:`${a}${k}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:o}const u=this.resolve(e,n);let d=u&&u.res;const p=u&&u.usedKey||o,m=u&&u.exactUsedKey||o,h=Object.prototype.toString.apply(d),g=["[object Number]","[object Function]","[object RegExp]"],w=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,I=!T(d)&&typeof d!="boolean"&&typeof d!="number";if(S&&d&&I&&g.indexOf(h)<0&&!(T(w)&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...n,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(u.res=k,u.usedParams=this.getUsedParamsDetails(n),u):k}if(s){const k=Array.isArray(d),C=k?[]:{},E=k?m:p;for(const L in d)if(Object.prototype.hasOwnProperty.call(d,L)){const O=`${E}${s}${L}`;C[L]=this.translate(O,{...n,joinArrays:!1,ns:l}),C[L]===O&&(C[L]=d[L])}d=C}}else if(S&&T(w)&&Array.isArray(d))d=d.join(w),d&&(d=this.extendTranslation(d,e,n,r));else{let k=!1,C=!1;const E=n.count!==void 0&&!T(n.count),L=at.hasDefaultValue(n),O=E?this.pluralResolver.getSuffix(c,n.count,n):"",D=n.ordinal&&E?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",U=E&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),R=U&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${O}`]||n[`defaultValue${D}`]||n.defaultValue;!this.isValidLookup(d)&&L&&(k=!0,d=R),this.isValidLookup(d)||(C=!0,d=o);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:d,M=L&&R!==d&&this.options.updateMissing;if(C||k||M){if(this.logger.log(M?"updateKey":"missingKey",c,a,o,M?R:d),s){const y=this.resolve(o,{...n,keySeparator:!1});y&&y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let b=[];const v=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&v&&v[0])for(let y=0;y<v.length;y++)b.push(v[y]);else this.options.saveMissingTo==="all"?b=this.languageUtils.toResolveHierarchy(n.lng||this.language):b.push(n.lng||this.language);const $=(y,x,A)=>{const N=L&&A!==d?A:P;this.options.missingKeyHandler?this.options.missingKeyHandler(y,a,x,N,M,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(y,a,x,N,M,n),this.emit("missingKey",y,a,x,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?b.forEach(y=>{const x=this.pluralResolver.getSuffixes(y,n);U&&n[`defaultValue${this.options.pluralSeparator}zero`]&&x.indexOf(`${this.options.pluralSeparator}zero`)<0&&x.push(`${this.options.pluralSeparator}zero`),x.forEach(A=>{$([y],o+A,n[`defaultValue${A}`]||R)})}):$(b,o,R))}d=this.extendTranslation(d,e,n,u,r),C&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${o}`),(C||k)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${o}`:o,k?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(u.res=d,u.usedParams=this.getUsedParamsDetails(n),u):d}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=T(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(c){const d=e.match(this.interpolator.nestingRegexp);f=d&&d.length}let u=r.replace&&!T(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,r.lng||this.language||i.usedLng,r),c){const d=e.match(this.interpolator.nestingRegexp),p=d&&d.length;f<p&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,p=new Array(d),m=0;m<d;m++)p[m]=arguments[m];return s&&s[0]===p[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):o.translate(...p,n)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,a=T(l)?[l]:l;return e!=null&&a&&a.length&&r.applyPostProcessor!==!1&&(e=mr.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,l;return T(e)&&(e=[e]),e.forEach(a=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(a,n),f=c.key;i=f;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=n.count!==void 0&&!T(n.count),p=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(T(n.context)||typeof n.context=="number")&&n.context!=="",h=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);u.forEach(g=>{this.isValidLookup(r)||(l=g,!Mn[`${h[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Mn[`${h[0]}-${g}`]=!0,this.logger.warn(`key "${i}" for languages "${h.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(w=>{if(this.isValidLookup(r))return;o=w;const S=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(S,f,w,g,n);else{let k;d&&(k=this.pluralResolver.getSuffix(w,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(S.push(f+k),n.ordinal&&k.indexOf(E)===0&&S.push(f+k.replace(E,this.options.pluralSeparator)),p&&S.push(f+C)),m){const L=`${f}${this.options.contextSeparator}${n.context}`;S.push(L),d&&(S.push(L+k),n.ordinal&&k.indexOf(E)===0&&S.push(L+k.replace(E,this.options.pluralSeparator)),p&&S.push(L+C))}}let I;for(;I=S.pop();)this.isValidLookup(r)||(s=I,r=this.getResource(w,g,I,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!T(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const $t=t=>t.charAt(0).toUpperCase()+t.slice(1);class jn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ae.create("languageUtils")}getScriptPartFromCode(e){if(e=st(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=st(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(T(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$t(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$t(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=$t(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),T(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return T(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):T(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let is=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ss={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const os=["v1","v2","v3"],as=["v4"],Fn={zero:0,one:1,two:2,few:3,many:4,other:5},ls=()=>{const t={};return is.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:ss[e.fc]}})}),t};class cs{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ae.create("pluralResolver"),(!this.options.compatibilityJSON||as.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ls(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=st(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!e.match(/-|_/))return;const a=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(a,n)}return this.pluralRulesCache[s]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>Fn[i]-Fn[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!os.includes(this.options.compatibilityJSON)}}const Vn=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Gi(t,e,n);return!s&&i&&T(n)&&(s=jt(t,n,r),s===void 0&&(s=jt(e,n,r))),s},It=t=>t.replace(/\$/g,"$$$$");class us{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ae.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:l,suffixEscaped:a,formatSeparator:c,unescapeSuffix:f,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:h,nestingOptionsSeparator:g,maxReplaces:w,alwaysFormat:S}=e.interpolation;this.escape=n!==void 0?n:Xi,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Te(s):o||"{{",this.suffix=l?Te(l):a||"}}",this.formatSeparator=c||",",this.unescapePrefix=f?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=d?Te(d):p||Te("$t("),this.nestingSuffix=m?Te(m):h||Te(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=w||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,l;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=p=>{if(p.indexOf(this.formatSeparator)<0){const w=Vn(n,a,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...i,...n,interpolationkey:p}):w}const m=p.split(this.formatSeparator),h=m.shift().trim(),g=m.join(this.formatSeparator).trim();return this.format(Vn(n,a,h,this.options.keySeparator,this.options.ignoreJSONStructure),g,r,{...i,...n,interpolationkey:h})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,u=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>It(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?It(this.escape(p)):It(p)}].forEach(p=>{for(l=0;s=p.regex.exec(e);){const m=s[1].trim();if(o=c(m),o===void 0)if(typeof f=="function"){const g=f(e,s,i);o=T(g)?g:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(u){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else!T(o)&&!this.useRawValueToEscape&&(o=Un(o));const h=p.safeValue(o);if(e=e.replace(s[0],h),u?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const l=(a,c)=>{const f=this.nestingOptionsSeparator;if(a.indexOf(f)<0)return a;const u=a.split(new RegExp(`${f}[ ]*{`));let d=`{${u[1]}`;a=u[0],d=this.interpolate(d,o);const p=d.match(/'/g),m=d.match(/"/g);(p&&p.length%2===0&&!m||m.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),c&&(o={...c,...o})}catch(h){return this.logger.warn(`failed parsing options string in nesting for key ${a}`,h),`${a}${f}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,a};for(;i=this.nestingRegexp.exec(e);){let a=[];o={...r},o=o.replace&&!T(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const f=i[1].split(this.formatSeparator).map(u=>u.trim());i[1]=f.shift(),a=f,c=!0}if(s=n(l.call(this,i[1].trim(),o),o),s&&i[0]===e&&!T(s))return s;T(s)||(s=Un(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=a.reduce((f,u)=>this.format(f,u,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const fs=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...a]=o.split(":"),c=a.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();n[f]||(n[f]=c),c==="false"&&(n[f]=!1),c==="true"&&(n[f]=!0),isNaN(c)||(n[f]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Ue=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let l=e[o];return l||(l=t(st(r),i),e[o]=l),l(n)}};class ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ae.create("formatter"),this.options=e,this.formats={number:Ue((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:Ue((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:Ue((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:Ue((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:Ue((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ue(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(a=>a.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,a)=>{const{formatName:c,formatOptions:f}=fs(a);if(this.formats[c]){let u=l;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=d.locale||d.lng||i.locale||i.lng||r;u=this.formats[c](l,p,{...f,...i,...d})}catch(d){this.logger.warn(d)}return u}else this.logger.warn(`there was no format function for ${c}`);return l},e)}}const hs=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class gs extends ht{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ae.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},l={},a={};return e.forEach(c=>{let f=!0;n.forEach(u=>{const d=`${c}|${u}`;!r.reload&&this.store.hasResourceBundle(c,u)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,f=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),a[u]===void 0&&(a[u]=!0)))}),f||(l[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(a)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const l={};this.queue.forEach(a=>{Ji(a.loaded,[s],o),hs(a,e),n&&a.errors.push(n),a.pendingCount===0&&!a.done&&(Object.keys(a.loaded).forEach(c=>{l[c]||(l[c]={});const f=a.loaded[c];f.length&&f.forEach(u=>{l[c][u]===void 0&&(l[c][u]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(a=>!a.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const l=(c,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(c&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,f)},a=this.backend[r].bind(this.backend);if(a.length===2){try{const c=a(e,n);c&&typeof c.then=="function"?c.then(f=>l(null,f)).catch(l):l(null,c)}catch(c){l(c)}return}return a(e,n,l)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();T(e)&&(e=this.languageUtils.toResolveHierarchy(e)),T(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,l),this.loaded(e,o,l)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const a={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let f;c.length===5?f=c(e,n,r,i,a):f=c(e,n,r,i),f&&typeof f.then=="function"?f.then(u=>l(null,u)).catch(l):l(null,f)}catch(f){l(f)}else c(e,n,r,i,l,a)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const Kn=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),T(t[1])&&(e.defaultValue=t[1]),T(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),zn=t=>(T(t.ns)&&(t.ns=[t.ns]),T(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),T(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),tt=()=>{},ps=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ye extends ht{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=zn(e),this.services={},this.logger=ae,this.modules={external:[]},ps(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(T(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=Kn();this.options={...i,...this.options,...zn(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?ae.init(s(this.modules.logger),this.options):ae.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=ds);const u=new jn(this.options);this.store=new Dn(this.options.resources,this.options);const d=this.services;d.logger=ae,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new cs(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(f),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new us(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new gs(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(p){for(var m=arguments.length,h=new Array(m>1?m-1:0),g=1;g<m;g++)h[g-1]=arguments[g];e.emit(p,...h)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new at(this.services,this.options),this.translator.on("*",function(p){for(var m=arguments.length,h=new Array(m>1?m-1:0),g=1;g<m;g++)h[g-1]=arguments[g];e.emit(p,...h)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=tt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return e.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return e.store[f](...arguments),e}});const a=ze(),c=()=>{const f=(u,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),r(u,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),a}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt;const i=T(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(a=>o(a)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){const i=ze();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=tt),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&mr.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=ze();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(a,function(){return r.t(...arguments)})},l=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=T(a)?a:this.services.languageUtils.getBestMatchFromCodes(a);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,f=>{o(f,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),i}getFixedT(e,n,r){var i=this;const s=function(o,l){let a;if(typeof l!="object"){for(var c=arguments.length,f=new Array(c>2?c-2:0),u=2;u<c;u++)f[u-2]=arguments[u];a=i.options.overloadTranslationOptionHandler([o,l].concat(f))}else a={...l};a.lng=a.lng||s.lng,a.lngs=a.lngs||s.lngs,a.ns=a.ns||s.ns,a.keyPrefix!==""&&(a.keyPrefix=a.keyPrefix||r||s.keyPrefix);const d=i.options.keySeparator||".";let p;return a.keyPrefix&&Array.isArray(o)?p=o.map(m=>`${a.keyPrefix}${d}${m}`):p=a.keyPrefix?`${a.keyPrefix}${d}${o}`:o,i.t(p,a)};return T(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,a)=>{const c=this.services.backendConnector.state[`${l}|${a}`];return c===-1||c===0||c===2};if(n.precheck){const l=n.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=ze();return this.options.ns?(T(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ze();T(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new jn(Kn());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Ye(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Ye(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new Dn(this.store.data,i),s.services.resourceStore=s.store),s.translator=new at(s.services,i),s.translator.on("*",function(l){for(var a=arguments.length,c=new Array(a>1?a-1:0),f=1;f<a;f++)c[f-1]=arguments[f];s.emit(l,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=Ye.createInstance();G.createInstance=Ye.createInstance;G.createInstance;G.dir;G.init;G.loadResources;G.reloadResources;G.use;G.changeLanguage;G.getFixedT;G.t;G.exists;G.setDefaultNamespace;G.hasLoadedNamespace;G.loadNamespaces;G.loadLanguages;const{slice:ms,forEach:ys}=[];function ws(t){return ys.call(ms.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const qn=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,bs=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!qn.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!qn.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},Wn={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=bs(t,encodeURIComponent(e),i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t){this.create(t,"",-1)}};var xs={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Wn.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&Wn.create(n,t,r,i,s)}},vs={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let l=0;l<o.length;l++){const a=o[l].indexOf("=");a>0&&o[l].substring(0,a)===e&&(n=o[l].substring(a+1))}}return n}};let qe=null;const Zn=()=>{if(qe!==null)return qe;try{qe=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{qe=!1}return qe};var Es={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Zn())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Zn()&&window.localStorage.setItem(n,t)}};let We=null;const Jn=()=>{if(We!==null)return We;try{We=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{We=!1}return We};var Ss={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Jn())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Jn()&&window.sessionStorage.setItem(n,t)}},Ls={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},As={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},ks={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},Os={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function $s(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class Is{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=ws(n,this.options||{},$s()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(xs),this.addDetector(vs),this.addDetector(Es),this.addDetector(Ss),this.addDetector(Ls),this.addDetector(As),this.addDetector(ks),this.addDetector(Os)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Is.type="languageDetector";function Gn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function yr(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Cs(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gn(t.outputLen),Gn(t.blockLen)}function lt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rs(t,e){yr(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ct=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wr=t=>t instanceof Uint8Array,Rt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),se=(t,e)=>t<<32-e|t>>>e,Ns=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ns)throw new Error("Non little-endian hardware is not supported");function Bs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function tn(t){if(typeof t=="string"&&(t=Bs(t)),!wr(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Ts(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!wr(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let br=class{clone(){return this._cloneInto()}};function Us(t){const e=r=>t().update(tn(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function xr(t=32){if(Ct&&typeof Ct.getRandomValues=="function")return Ct.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Ps(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,c=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+c,l,r)}let _s=class extends br{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Rt(this.buffer)}update(e){lt(this);const{view:n,buffer:r,blockLen:i}=this;e=tn(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=Rt(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lt(this),Rs(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let u=o;u<i;u++)n[u]=0;Ps(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=Rt(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)l.setUint32(4*u,f[u],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const Hs=(t,e,n)=>t&e^~t&n,Ds=(t,e,n)=>t&e^t&n^e&n,Ms=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),we=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),be=new Uint32Array(64);let js=class extends _s{constructor(){super(64,32,8,!1),this.A=we[0]|0,this.B=we[1]|0,this.C=we[2]|0,this.D=we[3]|0,this.E=we[4]|0,this.F=we[5]|0,this.G=we[6]|0,this.H=we[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:l,H:a}=this;return[e,n,r,i,s,o,l,a]}set(e,n,r,i,s,o,l,a){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=a|0}process(e,n){for(let u=0;u<16;u++,n+=4)be[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const d=be[u-15],p=be[u-2],m=se(d,7)^se(d,18)^d>>>3,h=se(p,17)^se(p,19)^p>>>10;be[u]=h+be[u-7]+m+be[u-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:a,G:c,H:f}=this;for(let u=0;u<64;u++){const d=se(l,6)^se(l,11)^se(l,25),p=f+d+Hs(l,a,c)+Ms[u]+be[u]|0,h=(se(r,2)^se(r,13)^se(r,22))+Ds(r,i,s)|0;f=c,c=a,a=l,l=o+p|0,o=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,a=a+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,i,s,o,l,a,c,f)}roundClean(){be.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ft=Us(()=>new js);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vr=BigInt(0),gt=BigInt(1),Fs=BigInt(2),pt=t=>t instanceof Uint8Array,Vs=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function He(t){if(!pt(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Vs[t[n]];return e}function Er(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function nn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function De(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Y(t){return nn(He(t))}function rn(t){if(!pt(t))throw new Error("Uint8Array expected");return nn(He(Uint8Array.from(t).reverse()))}function Le(t,e){return De(t.toString(16).padStart(e*2,"0"))}function sn(t,e){return Le(t,e).reverse()}function Ks(t){return De(Er(t))}function W(t,e,n){let r;if(typeof e=="string")try{r=De(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(pt(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Ie(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!pt(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function zs(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ws(t){let e;for(e=0;t>vr;t>>=gt,e+=1);return e}function Zs(t,e){return t>>BigInt(e)&gt}const Js=(t,e,n)=>t|(n?gt:vr)<<BigInt(e),on=t=>(Fs<<BigInt(t-1))-gt,Nt=t=>new Uint8Array(t),Yn=t=>Uint8Array.from(t);function Sr(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Nt(t),i=Nt(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},l=(...u)=>n(i,r,...u),a=(u=Nt())=>{i=l(Yn([0]),u),r=l(),u.length!==0&&(i=l(Yn([1]),u),r=l())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=l();const p=r.slice();d.push(p),u+=r.length}return Ie(...d)};return(u,d)=>{o(),a(u);let p;for(;!(p=d(c()));)a();return o(),p}}const Gs={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function et(t,e,n={}){const r=(i,s,o)=>{const l=Gs[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const a=t[i];if(!(o&&a===void 0)&&!l(a,t))throw new Error(`Invalid param ${String(i)}=${a} (${typeof a}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Ys=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Zs,bitLen:Ws,bitMask:on,bitSet:Js,bytesToHex:He,bytesToNumberBE:Y,bytesToNumberLE:rn,concatBytes:Ie,createHmacDrbg:Sr,ensureBytes:W,equalBytes:zs,hexToBytes:De,hexToNumber:nn,numberToBytesBE:Le,numberToBytesLE:sn,numberToHexUnpadded:Er,numberToVarBytesBE:Ks,utf8ToBytes:qs,validateObject:et},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const V=BigInt(0),F=BigInt(1),Oe=BigInt(2),Xs=BigInt(3),Vt=BigInt(4),Xn=BigInt(5),Qn=BigInt(8);BigInt(9);BigInt(16);function K(t,e){const n=t%e;return n>=V?n:e+n}function Qs(t,e,n){if(n<=V||e<V)throw new Error("Expected power/modulo > 0");if(n===F)return V;let r=F;for(;e>V;)e&F&&(r=r*t%n),t=t*t%n,e>>=F;return r}function ee(t,e,n){let r=t;for(;e-- >V;)r*=r,r%=n;return r}function Kt(t,e){if(t===V||e<=V)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=K(t,e),r=e,i=V,s=F;for(;n!==V;){const l=r/n,a=r%n,c=i-s*l;r=n,n=a,i=s,s=c}if(r!==F)throw new Error("invert: does not exist");return K(i,e)}function eo(t){const e=(t-F)/Oe;let n,r,i;for(n=t-F,r=0;n%Oe===V;n/=Oe,r++);for(i=Oe;i<t&&Qs(i,e,t)!==t-F;i++);if(r===1){const o=(t+F)/Vt;return function(a,c){const f=a.pow(c,o);if(!a.eql(a.sqr(f),c))throw new Error("Cannot find square root");return f}}const s=(n+F)/Oe;return function(l,a){if(l.pow(a,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let c=r,f=l.pow(l.mul(l.ONE,i),n),u=l.pow(a,s),d=l.pow(a,n);for(;!l.eql(d,l.ONE);){if(l.eql(d,l.ZERO))return l.ZERO;let p=1;for(let h=l.sqr(d);p<c&&!l.eql(h,l.ONE);p++)h=l.sqr(h);const m=l.pow(f,F<<BigInt(c-p-1));f=l.sqr(m),u=l.mul(u,m),d=l.mul(d,f),c=p}return u}}function to(t){if(t%Vt===Xs){const e=(t+F)/Vt;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Qn===Xn){const e=(t-Xn)/Qn;return function(r,i){const s=r.mul(i,Oe),o=r.pow(s,e),l=r.mul(i,o),a=r.mul(r.mul(l,Oe),o),c=r.mul(l,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return eo(t)}const no=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ro(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=no.reduce((r,i)=>(r[i]="function",r),e);return et(t,n)}function io(t,e,n){if(n<V)throw new Error("Expected power > 0");if(n===V)return t.ONE;if(n===F)return e;let r=t.ONE,i=e;for(;n>V;)n&F&&(r=t.mul(r,i)),i=t.sqr(i),n>>=F;return r}function so(t,e){const n=new Array(e.length),r=e.reduce((s,o,l)=>t.is0(o)?s:(n[l]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,l)=>t.is0(o)?s:(n[l]=t.mul(s,n[l]),t.mul(s,o)),i),n}function Lr(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function oo(t,e,n=!1,r={}){if(t<=V)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Lr(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=to(t),l=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:on(i),ZERO:V,ONE:F,create:a=>K(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return V<=a&&a<t},is0:a=>a===V,isOdd:a=>(a&F)===F,neg:a=>K(-a,t),eql:(a,c)=>a===c,sqr:a=>K(a*a,t),add:(a,c)=>K(a+c,t),sub:(a,c)=>K(a-c,t),mul:(a,c)=>K(a*c,t),pow:(a,c)=>io(l,a,c),div:(a,c)=>K(a*Kt(c,t),t),sqrN:a=>a*a,addN:(a,c)=>a+c,subN:(a,c)=>a-c,mulN:(a,c)=>a*c,inv:a=>Kt(a,t),sqrt:r.sqrt||(a=>o(l,a)),invertBatch:a=>so(l,a),cmov:(a,c,f)=>f?c:a,toBytes:a=>n?sn(a,s):Le(a,s),fromBytes:a=>{if(a.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${a.length}`);return n?rn(a):Y(a)}});return Object.freeze(l)}function Ar(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function kr(t){const e=Ar(t);return e+Math.ceil(e/2)}function ao(t,e,n=!1){const r=t.length,i=Ar(e),s=kr(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Y(t):rn(t),l=K(o,e-F)+F;return n?sn(l,i):Le(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lo=BigInt(0),Bt=BigInt(1);function co(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,l=i;for(;s>lo;)s&Bt&&(o=o.add(l)),l=l.double(),s>>=Bt;return o},precomputeWindow(i,s){const{windows:o,windowSize:l}=r(s),a=[];let c=i,f=c;for(let u=0;u<o;u++){f=c,a.push(f);for(let d=1;d<l;d++)f=f.add(c),a.push(f);c=f.double()}return a},wNAF(i,s,o){const{windows:l,windowSize:a}=r(i);let c=t.ZERO,f=t.BASE;const u=BigInt(2**i-1),d=2**i,p=BigInt(i);for(let m=0;m<l;m++){const h=m*a;let g=Number(o&u);o>>=p,g>a&&(g-=d,o+=Bt);const w=h,S=h+Math.abs(g)-1,I=m%2!==0,k=g<0;g===0?f=f.add(n(I,s[w])):c=c.add(n(k,s[S]))}return{p:c,f}},wNAFCached(i,s,o,l){const a=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,a),a!==1&&s.set(i,l(c))),this.wNAF(a,c,o)}}}function Or(t){return ro(t.Fp),et(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lr(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uo(t){const e=Or(t);et(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:fo,hexToBytes:ho}=Ys,$e={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=$e;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:fo(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=$e,n=typeof t=="string"?ho(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=$e._parseInt(n.subarray(2)),{d:o,l}=$e._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const f=c.toString(16);return f.length&1?`0${f}`:f},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,l=n(s),a=n(o);return`30${n(o+s+4)}02${a}${i}02${l}${r}`}},fe=BigInt(0),te=BigInt(1);BigInt(2);const er=BigInt(3);BigInt(4);function go(t){const e=uo(t),{Fp:n}=e,r=e.toBytes||((m,h,g)=>{const w=h.toAffine();return Ie(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(m=>{const h=m.subarray(1),g=n.fromBytes(h.subarray(0,n.BYTES)),w=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:g,y:w}});function s(m){const{a:h,b:g}=e,w=n.sqr(m),S=n.mul(w,m);return n.add(n.add(S,n.mul(m,h)),g)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&fe<m&&m<e.n}function l(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(m){const{allowedPrivateKeyLengths:h,nByteLength:g,wrapPrivateKey:w,n:S}=e;if(h&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=He(m)),typeof m!="string"||!h.includes(m.length))throw new Error("Invalid key");m=m.padStart(g*2,"0")}let I;try{I=typeof m=="bigint"?m:Y(W("private key",m,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof m}`)}return w&&(I=K(I,S)),l(I),I}const c=new Map;function f(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(h,g,w){if(this.px=h,this.py=g,this.pz=w,h==null||!n.isValid(h))throw new Error("x required");if(g==null||!n.isValid(g))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(h){const{x:g,y:w}=h||{};if(!h||!n.isValid(g)||!n.isValid(w))throw new Error("invalid affine point");if(h instanceof u)throw new Error("projective point not allowed");const S=I=>n.eql(I,n.ZERO);return S(g)&&S(w)?u.ZERO:new u(g,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const g=n.invertBatch(h.map(w=>w.pz));return h.map((w,S)=>w.toAffine(g[S])).map(u.fromAffine)}static fromHex(h){const g=u.fromAffine(i(W("pointHex",h)));return g.assertValidity(),g}static fromPrivateKey(h){return u.BASE.multiply(a(h))}_setWindowSize(h){this._WINDOW_SIZE=h,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:g}=this.toAffine();if(!n.isValid(h)||!n.isValid(g))throw new Error("bad point: x or y not FE");const w=n.sqr(g),S=s(h);if(!n.eql(w,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){f(h);const{px:g,py:w,pz:S}=this,{px:I,py:k,pz:C}=h,E=n.eql(n.mul(g,C),n.mul(I,S)),L=n.eql(n.mul(w,C),n.mul(k,S));return E&&L}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:g}=e,w=n.mul(g,er),{px:S,py:I,pz:k}=this;let C=n.ZERO,E=n.ZERO,L=n.ZERO,O=n.mul(S,S),D=n.mul(I,I),U=n.mul(k,k),R=n.mul(S,I);return R=n.add(R,R),L=n.mul(S,k),L=n.add(L,L),C=n.mul(h,L),E=n.mul(w,U),E=n.add(C,E),C=n.sub(D,E),E=n.add(D,E),E=n.mul(C,E),C=n.mul(R,C),L=n.mul(w,L),U=n.mul(h,U),R=n.sub(O,U),R=n.mul(h,R),R=n.add(R,L),L=n.add(O,O),O=n.add(L,O),O=n.add(O,U),O=n.mul(O,R),E=n.add(E,O),U=n.mul(I,k),U=n.add(U,U),O=n.mul(U,R),C=n.sub(C,O),L=n.mul(U,D),L=n.add(L,L),L=n.add(L,L),new u(C,E,L)}add(h){f(h);const{px:g,py:w,pz:S}=this,{px:I,py:k,pz:C}=h;let E=n.ZERO,L=n.ZERO,O=n.ZERO;const D=e.a,U=n.mul(e.b,er);let R=n.mul(g,I),_=n.mul(w,k),P=n.mul(S,C),M=n.add(g,w),b=n.add(I,k);M=n.mul(M,b),b=n.add(R,_),M=n.sub(M,b),b=n.add(g,S);let v=n.add(I,C);return b=n.mul(b,v),v=n.add(R,P),b=n.sub(b,v),v=n.add(w,S),E=n.add(k,C),v=n.mul(v,E),E=n.add(_,P),v=n.sub(v,E),O=n.mul(D,b),E=n.mul(U,P),O=n.add(E,O),E=n.sub(_,O),O=n.add(_,O),L=n.mul(E,O),_=n.add(R,R),_=n.add(_,R),P=n.mul(D,P),b=n.mul(U,b),_=n.add(_,P),P=n.sub(R,P),P=n.mul(D,P),b=n.add(b,P),R=n.mul(_,b),L=n.add(L,R),R=n.mul(v,b),E=n.mul(M,E),E=n.sub(E,R),R=n.mul(M,_),O=n.mul(v,O),O=n.add(O,R),new u(E,L,O)}subtract(h){return this.add(h.negate())}is0(){return this.equals(u.ZERO)}wNAF(h){return p.wNAFCached(this,c,h,g=>{const w=n.invertBatch(g.map(S=>S.pz));return g.map((S,I)=>S.toAffine(w[I])).map(u.fromAffine)})}multiplyUnsafe(h){const g=u.ZERO;if(h===fe)return g;if(l(h),h===te)return this;const{endo:w}=e;if(!w)return p.unsafeLadder(this,h);let{k1neg:S,k1:I,k2neg:k,k2:C}=w.splitScalar(h),E=g,L=g,O=this;for(;I>fe||C>fe;)I&te&&(E=E.add(O)),C&te&&(L=L.add(O)),O=O.double(),I>>=te,C>>=te;return S&&(E=E.negate()),k&&(L=L.negate()),L=new u(n.mul(L.px,w.beta),L.py,L.pz),E.add(L)}multiply(h){l(h);let g=h,w,S;const{endo:I}=e;if(I){const{k1neg:k,k1:C,k2neg:E,k2:L}=I.splitScalar(g);let{p:O,f:D}=this.wNAF(C),{p:U,f:R}=this.wNAF(L);O=p.constTimeNegate(k,O),U=p.constTimeNegate(E,U),U=new u(n.mul(U.px,I.beta),U.py,U.pz),w=O.add(U),S=D.add(R)}else{const{p:k,f:C}=this.wNAF(g);w=k,S=C}return u.normalizeZ([w,S])[0]}multiplyAndAddUnsafe(h,g,w){const S=u.BASE,I=(C,E)=>E===fe||E===te||!C.equals(S)?C.multiplyUnsafe(E):C.multiply(E),k=I(this,g).add(I(h,w));return k.is0()?void 0:k}toAffine(h){const{px:g,py:w,pz:S}=this,I=this.is0();h==null&&(h=I?n.ONE:n.inv(S));const k=n.mul(g,h),C=n.mul(w,h),E=n.mul(S,h);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:k,y:C}}isTorsionFree(){const{h,isTorsionFree:g}=e;if(h===te)return!0;if(g)return g(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:g}=e;return h===te?this:g?g(u,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),r(u,this,h)}toHex(h=!0){return He(this.toRawBytes(h))}}u.BASE=new u(e.Gx,e.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=co(u,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:o}}function po(t){const e=Or(t);return et(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function mo(t){const e=po(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(b){return fe<b&&b<n.ORDER}function l(b){return K(b,r)}function a(b){return Kt(b,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:d}=go({...e,toBytes(b,v,$){const y=v.toAffine(),x=n.toBytes(y.x),A=Ie;return $?A(Uint8Array.from([v.hasEvenY()?2:3]),x):A(Uint8Array.from([4]),x,n.toBytes(y.y))},fromBytes(b){const v=b.length,$=b[0],y=b.subarray(1);if(v===i&&($===2||$===3)){const x=Y(y);if(!o(x))throw new Error("Point is not on curve");const A=u(x);let N=n.sqrt(A);const B=(N&te)===te;return($&1)===1!==B&&(N=n.neg(N)),{x,y:N}}else if(v===s&&$===4){const x=n.fromBytes(y.subarray(0,n.BYTES)),A=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x,y:A}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=b=>He(Le(b,e.nByteLength));function m(b){const v=r>>te;return b>v}function h(b){return m(b)?l(-b):b}const g=(b,v,$)=>Y(b.slice(v,$));class w{constructor(v,$,y){this.r=v,this.s=$,this.recovery=y,this.assertValidity()}static fromCompact(v){const $=e.nByteLength;return v=W("compactSignature",v,$*2),new w(g(v,0,$),g(v,$,2*$))}static fromDER(v){const{r:$,s:y}=$e.toSig(W("DER",v));return new w($,y)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const{r:$,s:y,recovery:x}=this,A=L(W("msgHash",v));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const N=x===2||x===3?$+e.n:$;if(N>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const B=x&1?"03":"02",z=c.fromHex(B+p(N)),q=a(N),ie=l(-A*q),X=l(y*q),Q=c.BASE.multiplyAndAddUnsafe(z,ie,X);if(!Q)throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return De(this.toDERHex())}toDERHex(){return $e.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return De(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const S={isValidPrivateKey(b){try{return f(b),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const b=kr(e.n);return ao(e.randomBytes(b),e.n)},precompute(b=8,v=c.BASE){return v._setWindowSize(b),v.multiply(BigInt(3)),v}};function I(b,v=!0){return c.fromPrivateKey(b).toRawBytes(v)}function k(b){const v=b instanceof Uint8Array,$=typeof b=="string",y=(v||$)&&b.length;return v?y===i||y===s:$?y===2*i||y===2*s:b instanceof c}function C(b,v,$=!0){if(k(b))throw new Error("first arg must be private key");if(!k(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(f(b)).toRawBytes($)}const E=e.bits2int||function(b){const v=Y(b),$=b.length*8-e.nBitLength;return $>0?v>>BigInt($):v},L=e.bits2int_modN||function(b){return l(E(b))},O=on(e.nBitLength);function D(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(fe<=b&&b<O))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Le(b,e.nByteLength)}function U(b,v,$=R){if(["recovered","canonical"].some(ke=>ke in $))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:x}=e;let{lowS:A,prehash:N,extraEntropy:B}=$;A==null&&(A=!0),b=W("msgHash",b),N&&(b=W("prehashed msgHash",y(b)));const z=L(b),q=f(v),ie=[D(q),D(z)];if(B!=null){const ke=B===!0?x(n.BYTES):B;ie.push(W("extraEntropy",ke))}const X=Ie(...ie),Q=z;function Ot(ke){const Ce=E(ke);if(!d(Ce))return;const Nn=a(Ce),Re=c.BASE.multiply(Ce).toAffine(),ne=l(Re.x);if(ne===fe)return;const Ne=l(Nn*l(Q+ne*q));if(Ne===fe)return;let Bn=(Re.x===ne?0:2)|Number(Re.y&te),Tn=Ne;return A&&m(Ne)&&(Tn=h(Ne),Bn^=1),new w(ne,Tn,Bn)}return{seed:X,k2sig:Ot}}const R={lowS:e.lowS,prehash:!1},_={lowS:e.lowS,prehash:!1};function P(b,v,$=R){const{seed:y,k2sig:x}=U(b,v,$),A=e;return Sr(A.hash.outputLen,A.nByteLength,A.hmac)(y,x)}c.BASE._setWindowSize(8);function M(b,v,$,y=_){var Re;const x=b;if(v=W("msgHash",v),$=W("publicKey",$),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:A,prehash:N}=y;let B,z;try{if(typeof x=="string"||x instanceof Uint8Array)try{B=w.fromDER(x)}catch(ne){if(!(ne instanceof $e.Err))throw ne;B=w.fromCompact(x)}else if(typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint"){const{r:ne,s:Ne}=x;B=new w(ne,Ne)}else throw new Error("PARSE");z=c.fromHex($)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&B.hasHighS())return!1;N&&(v=e.hash(v));const{r:q,s:ie}=B,X=L(v),Q=a(ie),Ot=l(X*Q),ke=l(q*Q),Ce=(Re=c.BASE.multiplyAndAddUnsafe(z,Ot,ke))==null?void 0:Re.toAffine();return Ce?l(Ce.x)===q:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:C,sign:P,verify:M,ProjectivePoint:c,Signature:w,utils:S}}let $r=class extends br{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Cs(e);const r=tn(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return lt(this),this.iHash.update(e),this}digestInto(e){lt(this),yr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ir=(t,e,n)=>new $r(t,e).update(n).digest();Ir.create=(t,e)=>new $r(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yo(t){return{hash:t,hmac:(e,...n)=>Ir(t,e,Ts(...n)),randomBytes:xr}}function wo(t,e){const n=r=>mo({...t,...yo(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ct=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cr=BigInt(1),ut=BigInt(2),tr=(t,e)=>(t+e/ut)/e;function Rr(t){const e=mt,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),a=BigInt(88),c=t*t*t%e,f=c*c*t%e,u=ee(f,n,e)*f%e,d=ee(u,n,e)*f%e,p=ee(d,ut,e)*c%e,m=ee(p,i,e)*p%e,h=ee(m,s,e)*m%e,g=ee(h,l,e)*h%e,w=ee(g,a,e)*g%e,S=ee(w,l,e)*h%e,I=ee(S,n,e)*f%e,k=ee(I,o,e)*m%e,C=ee(k,r,e)*c%e,E=ee(C,ut,e);if(!zt.eql(zt.sqr(E),t))throw new Error("Cannot find square root");return E}const zt=oo(mt,void 0,void 0,{sqrt:Rr}),Fe=wo({a:BigInt(0),b:BigInt(7),Fp:zt,n:ct,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ct,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Cr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),l=tr(s*t,e),a=tr(-r*t,e);let c=K(t-l*n-a*i,e),f=K(-l*r-a*s,e);const u=c>o,d=f>o;if(u&&(c=e-c),d&&(f=e-f),c>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:c,k2neg:d,k2:f}}}},Ft),yt=BigInt(0),Nr=t=>typeof t=="bigint"&&yt<t&&t<mt,bo=t=>typeof t=="bigint"&&yt<t&&t<ct,nr={};function ft(t,...e){let n=nr[t];if(n===void 0){const r=Ft(Uint8Array.from(t,i=>i.charCodeAt(0)));n=Ie(r,r),nr[t]=n}return Ft(Ie(n,...e))}const an=t=>t.toRawBytes(!0).slice(1),qt=t=>Le(t,32),Tt=t=>K(t,mt),Xe=t=>K(t,ct),ln=Fe.ProjectivePoint,xo=(t,e,n)=>ln.BASE.multiplyAndAddUnsafe(t,e,n);function Wt(t){let e=Fe.utils.normPrivateKeyToScalar(t),n=ln.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Xe(-e),bytes:an(n)}}function Br(t){if(!Nr(t))throw new Error("bad x: need 0 < x < p");const e=Tt(t*t),n=Tt(e*t+BigInt(7));let r=Rr(n);r%ut!==yt&&(r=Tt(-r));const i=new ln(t,r,Cr);return i.assertValidity(),i}function Tr(...t){return Xe(Y(ft("BIP0340/challenge",...t)))}function vo(t){return Wt(t).bytes}function Eo(t,e,n=xr(32)){const r=W("message",t),{bytes:i,scalar:s}=Wt(e),o=W("auxRand",n,32),l=qt(s^Y(ft("BIP0340/aux",o))),a=ft("BIP0340/nonce",l,i,r),c=Xe(Y(a));if(c===yt)throw new Error("sign failed: k is zero");const{bytes:f,scalar:u}=Wt(c),d=Tr(f,i,r),p=new Uint8Array(64);if(p.set(f,0),p.set(qt(Xe(u+d*s)),32),!Ur(p,r,i))throw new Error("sign: Invalid signature produced");return p}function Ur(t,e,n){const r=W("signature",t,64),i=W("message",e),s=W("publicKey",n,32);try{const o=Br(Y(s)),l=Y(r.subarray(0,32));if(!Nr(l))return!1;const a=Y(r.subarray(32,64));if(!bo(a))return!1;const c=Tr(qt(l),an(o),i),f=xo(o,a,Xe(-c));return!(!f||!f.hasEvenY()||f.toAffine().x!==l)}catch{return!1}}const Ze={getPublicKey:vo,sign:Eo,verify:Ur,utils:{randomPrivateKey:Fe.utils.randomPrivateKey,lift_x:Br,pointToBytes:an,numberToBytesBE:Le,bytesToNumberBE:Y,taggedHash:ft,mod:K}},Ut=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cn=t=>t instanceof Uint8Array,Pt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),oe=(t,e)=>t<<32-e|t>>>e,So=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!So)throw new Error("Non little-endian hardware is not supported");const Lo=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function J(t){if(!cn(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Lo[t[n]];return e}function Me(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ao(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Qe(t){if(typeof t=="string"&&(t=Ao(t)),!cn(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function wt(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!cn(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class Pr{clone(){return this._cloneInto()}}function _r(t){const e=r=>t().update(Qe(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Hr(t=32){if(Ut&&typeof Ut.getRandomValues=="function")return Ut.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Zt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function ko(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Dr(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Oo(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zt(t.outputLen),Zt(t.blockLen)}function $o(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Io(t,e){Dr(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const le={number:Zt,bool:ko,bytes:Dr,hash:Oo,exists:$o,output:Io};function Co(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,c=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+c,l,r)}class Ro extends Pr{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Pt(this.buffer)}update(e){le.exists(this);const{view:n,buffer:r,blockLen:i}=this;e=Qe(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=Pt(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){le.exists(this),le.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let u=o;u<i;u++)n[u]=0;Co(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=Pt(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)l.setUint32(4*u,f[u],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const No=(t,e,n)=>t&e^~t&n,Bo=(t,e,n)=>t&e^t&n^e&n,To=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ve=new Uint32Array(64);class Mr extends Ro{constructor(){super(64,32,8,!1),this.A=xe[0]|0,this.B=xe[1]|0,this.C=xe[2]|0,this.D=xe[3]|0,this.E=xe[4]|0,this.F=xe[5]|0,this.G=xe[6]|0,this.H=xe[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:l,H:a}=this;return[e,n,r,i,s,o,l,a]}set(e,n,r,i,s,o,l,a){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=a|0}process(e,n){for(let u=0;u<16;u++,n+=4)ve[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const d=ve[u-15],p=ve[u-2],m=oe(d,7)^oe(d,18)^d>>>3,h=oe(p,17)^oe(p,19)^p>>>10;ve[u]=h+ve[u-7]+m+ve[u-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:a,G:c,H:f}=this;for(let u=0;u<64;u++){const d=oe(l,6)^oe(l,11)^oe(l,25),p=f+d+No(l,a,c)+To[u]+ve[u]|0,h=(oe(r,2)^oe(r,13)^oe(r,22))+Bo(r,i,s)|0;f=c,c=a,a=l,l=o+p|0,o=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,a=a+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,i,s,o,l,a,c,f)}roundClean(){ve.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Uo extends Mr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Ve=_r(()=>new Mr);_r(()=>new Uo);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ke(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function pe(...t){const e=(i,s)=>o=>i(s(o)),n=Array.from(t).reverse().reduce((i,s)=>i?e(i,s.encode):s.encode,void 0),r=t.reduce((i,s)=>i?e(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}function me(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(Ke(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function ye(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function bt(t,e="="){if(Ke(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function jr(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function rr(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],s=Array.from(t);for(s.forEach(o=>{if(Ke(o),o<0||o>=e)throw new Error(`Wrong integer: ${o}`)});;){let o=0,l=!0;for(let a=r;a<s.length;a++){const c=s[a],f=e*o+c;if(!Number.isSafeInteger(f)||e*o/e!==o||f-c!==e*o)throw new Error("convertRadix: carry overflow");if(o=f%n,s[a]=Math.floor(f/n),!Number.isSafeInteger(s[a])||s[a]*n+o!==f)throw new Error("convertRadix: carry overflow");if(l)s[a]?l=!1:r=a;else continue}if(i.push(o),l)break}for(let o=0;o<t.length-1&&t[o]===0;o++)i.push(0);return i.reverse()}const Fr=(t,e)=>e?Fr(e,t%e):t,dt=(t,e)=>t+(e-Fr(t,e));function Jt(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(dt(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${dt(e,n)}`);let i=0,s=0;const o=2**n-1,l=[];for(const a of t){if(Ke(a),a>=2**e)throw new Error(`convertRadix2: invalid data word=${a} from=${e}`);if(i=i<<e|a,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)l.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&l.push(i>>>0),l}function Po(t){return Ke(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return rr(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(rr(e,t,2**8))}}}function Ae(t,e=!1){if(Ke(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(dt(8,t)>32||dt(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Jt(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Jt(n,t,8,e))}}}function ir(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}const _o=pe(Ae(4),me("0123456789ABCDEF"),ye("")),Ho=pe(Ae(5),me("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),bt(5),ye(""));pe(Ae(5),me("0123456789ABCDEFGHIJKLMNOPQRSTUV"),bt(5),ye(""));pe(Ae(5),me("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ye(""),jr(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const ge=pe(Ae(6),me("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),bt(6),ye("")),Do=pe(Ae(6),me("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),bt(6),ye("")),un=t=>pe(Po(58),me(t),ye("")),Gt=un("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");un("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");un("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const sr=[0,2,3,5,6,7,9,10,11],Mo={encode(t){let e="";for(let n=0;n<t.length;n+=8){const r=t.subarray(n,n+8);e+=Gt.encode(r).padStart(sr[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){const r=t.slice(n,n+11),i=sr.indexOf(r.length),s=Gt.decode(r);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(e)}},Yt=pe(me("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ye("")),or=[996825010,642813549,513874426,1027748829,705979059];function Je(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<or.length;r++)(e>>r&1)===1&&(n^=or[r]);return n}function ar(t,e,n=1){const r=t.length;let i=1;for(let s=0;s<r;s++){const o=t.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);i=Je(i)^o>>5}i=Je(i);for(let s=0;s<r;s++)i=Je(i)^t.charCodeAt(s)&31;for(let s of e)i=Je(i)^s;for(let s=0;s<6;s++)i=Je(i);return i^=n,Yt.encode(Jt([i%2**30],30,5,!1))}function Vr(t){const e=t==="bech32"?1:734539939,n=Ae(5),r=n.decode,i=n.encode,s=ir(r);function o(f,u,d=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof u}`);const p=f.length+7+u.length;if(d!==!1&&p>d)throw new TypeError(`Length ${p} exceeds limit ${d}`);return f=f.toLowerCase(),`${f}1${Yt.encode(u)}${ar(f,u,e)}`}function l(f,u=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||u!==!1&&f.length>u)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${u})`);const d=f.toLowerCase();if(f!==d&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=d;const p=f.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');const m=f.slice(0,p),h=f.slice(p+1);if(h.length<6)throw new Error("Data must be at least 6 characters long");const g=Yt.decode(h).slice(0,-6),w=ar(m,g,e);if(!h.endsWith(w))throw new Error(`Invalid checksum in ${f}: expected "${w}"`);return{prefix:m,words:g}}const a=ir(l);function c(f){const{prefix:u,words:d}=l(f,!1);return{prefix:u,words:d,bytes:r(d)}}return{encode:o,decode:l,decodeToBytes:c,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:s,toWords:i}}const je=Vr("bech32");Vr("bech32m");const jo={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},Fo=pe(Ae(4),me("0123456789abcdef"),ye(""),jr(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),Vo={utf8:jo,hex:Fo,base16:_o,base32:Ho,base64:ge,base64url:Do,base58:Gt,base58xmr:Mo};`${Object.keys(Vo).join(", ")}`;function _t(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function lr(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Ko(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function de(t,...e){if(!Ko(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Z=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),zo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zo)throw new Error("Non little-endian hardware is not supported");function qo(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Wo(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Zo=(t,e)=>(Object.assign(e,t),e),Se=16,Jo=283;function fn(t){return t<<1^Jo&-(t>>7)}function _e(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(e&1),t=fn(t);return n}const Xt=(()=>{let t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=fn(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return e})(),Go=Xt.map((t,e)=>Xt.indexOf(e)),Yo=t=>t<<24|t>>>8,Ht=t=>t<<8|t>>>24;function Kr(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((c,f)=>e(t[f])),r=n.map(Ht),i=r.map(Ht),s=i.map(Ht),o=new Uint32Array(256*256),l=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let c=0;c<256;c++)for(let f=0;f<256;f++){const u=c*256+f;o[u]=n[c]^r[f],l[u]=i[c]^s[f],a[u]=t[c]<<8|t[f]}return{sbox:t,sbox2:a,T0:n,T1:r,T2:i,T3:s,T01:o,T23:l}}const dn=Kr(Xt,t=>_e(t,3)<<24|t<<16|t<<8|_e(t,2)),zr=Kr(Go,t=>_e(t,11)<<24|_e(t,13)<<16|_e(t,9)<<8|_e(t,14)),Xo=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=fn(n))t[e]=n;return t})();function qr(t){de(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=dn,r=Z(t),i=r.length,s=l=>ce(n,l,l,l,l),o=new Uint32Array(e+28);o.set(r);for(let l=i;l<o.length;l++){let a=o[l-1];l%i===0?a=s(Yo(a))^Xo[l/i-1]:i>6&&l%i===4&&(a=s(a)),o[l]=o[l-i]^a}return o}function Qo(t){const e=qr(t),n=e.slice(),r=e.length,{sbox2:i}=dn,{T0:s,T1:o,T2:l,T3:a}=zr;for(let c=0;c<r;c+=4)for(let f=0;f<4;f++)n[c+f]=e[r-c-4+f];e.fill(0);for(let c=4;c<r-4;c++){const f=n[c],u=ce(i,f,f,f,f);n[c]=s[u&255]^o[u>>>8&255]^l[u>>>16&255]^a[u>>>24]}return n}function Ee(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function ce(t,e,n,r,i){return t[e&255|n&65280]|t[r>>>16&255|i>>>16&65280]<<16}function cr(t,e,n,r,i){const{sbox2:s,T01:o,T23:l}=dn;let a=0;e^=t[a++],n^=t[a++],r^=t[a++],i^=t[a++];const c=t.length/4-2;for(let m=0;m<c;m++){const h=t[a++]^Ee(o,l,e,n,r,i),g=t[a++]^Ee(o,l,n,r,i,e),w=t[a++]^Ee(o,l,r,i,e,n),S=t[a++]^Ee(o,l,i,e,n,r);e=h,n=g,r=w,i=S}const f=t[a++]^ce(s,e,n,r,i),u=t[a++]^ce(s,n,r,i,e),d=t[a++]^ce(s,r,i,e,n),p=t[a++]^ce(s,i,e,n,r);return{s0:f,s1:u,s2:d,s3:p}}function ea(t,e,n,r,i){const{sbox2:s,T01:o,T23:l}=zr;let a=0;e^=t[a++],n^=t[a++],r^=t[a++],i^=t[a++];const c=t.length/4-2;for(let m=0;m<c;m++){const h=t[a++]^Ee(o,l,e,i,r,n),g=t[a++]^Ee(o,l,n,e,i,r),w=t[a++]^Ee(o,l,r,n,e,i),S=t[a++]^Ee(o,l,i,r,n,e);e=h,n=g,r=w,i=S}const f=t[a++]^ce(s,e,i,r,n),u=t[a++]^ce(s,n,e,i,r),d=t[a++]^ce(s,r,n,e,i),p=t[a++]^ce(s,i,r,n,e);return{s0:f,s1:u,s2:d,s3:p}}function Wr(t,e){if(!e)return new Uint8Array(t);if(de(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);return e}function ta(t){if(de(t),t.length%Se!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Se}`)}function na(t,e,n){let r=t.length;const i=r%Se;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=Z(t);if(e){let a=Se-i;a||(a=Se),r=r+a}const o=Wr(r,n),l=Z(o);return{b:s,o:l,out:o}}function ra(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function ia(t){const e=new Uint8Array(16),n=Z(e);e.set(t);const r=Se-t.length;for(let i=Se-r;i<Se;i++)e[i]=r;return n}const Zr=Zo({blockSize:16,nonceLength:16},function(e,n,r={}){de(e),de(n,16);const i=!r.disablePadding;return{encrypt:(s,o)=>{const l=qr(e),{b:a,o:c,out:f}=na(s,i,o),u=Z(n);let d=u[0],p=u[1],m=u[2],h=u[3],g=0;for(;g+4<=a.length;)d^=a[g+0],p^=a[g+1],m^=a[g+2],h^=a[g+3],{s0:d,s1:p,s2:m,s3:h}=cr(l,d,p,m,h),c[g++]=d,c[g++]=p,c[g++]=m,c[g++]=h;if(i){const w=ia(s.subarray(g*4));d^=w[0],p^=w[1],m^=w[2],h^=w[3],{s0:d,s1:p,s2:m,s3:h}=cr(l,d,p,m,h),c[g++]=d,c[g++]=p,c[g++]=m,c[g++]=h}return l.fill(0),f},decrypt:(s,o)=>{ta(s);const l=Qo(e),a=Z(n),c=Wr(s.length,o),f=Z(s),u=Z(c);let d=a[0],p=a[1],m=a[2],h=a[3];for(let g=0;g+4<=f.length;){const w=d,S=p,I=m,k=h;d=f[g+0],p=f[g+1],m=f[g+2],h=f[g+3];const{s0:C,s1:E,s2:L,s3:O}=ea(l,d,p,m,h);u[g++]=C^w,u[g++]=E^S,u[g++]=L^I,u[g++]=O^k}return l.fill(0),ra(c,i)}}}),Jr=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),sa=Jr("expand 16-byte k"),oa=Jr("expand 32-byte k"),aa=Z(sa),Gr=Z(oa);Gr.slice();function H(t,e){return t<<e|t>>>32-e}function Qt(t){return t.byteOffset%4===0}const nt=64,la=16,Yr=2**32-1,ur=new Uint32Array;function ca(t,e,n,r,i,s,o,l){const a=i.length,c=new Uint8Array(nt),f=Z(c),u=Qt(i)&&Qt(s),d=u?Z(i):ur,p=u?Z(s):ur;for(let m=0;m<a;o++){if(t(e,n,r,f,o,l),o>=Yr)throw new Error("arx: counter overflow");const h=Math.min(nt,a-m);if(u&&h===nt){const g=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let w=0,S;w<la;w++)S=g+w,p[S]=d[S]^f[w];m+=nt;continue}for(let g=0,w;g<h;g++)w=m+g,s[w]=i[w]^c[g];m+=h}}function ua(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=qo({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return _t(i),_t(o),lr(s),lr(n),(l,a,c,f,u=0)=>{de(l),de(a),de(c);const d=c.length;if(f||(f=new Uint8Array(d)),de(f),_t(u),u<0||u>=Yr)throw new Error("arx: counter overflow");if(f.length<d)throw new Error(`arx: output (${f.length}) is shorter than data (${d})`);const p=[];let m=l.length,h,g;if(m===32)h=l.slice(),p.push(h),g=Gr;else if(m===16&&n)h=new Uint8Array(32),h.set(l),h.set(l,16),g=aa,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);Qt(a)||(a=a.slice(),p.push(a));const w=Z(h);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,w,Z(a.subarray(0,16)),w),a=a.subarray(16)}const S=16-i;if(S!==a.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const k=new Uint8Array(12);k.set(a,s?0:12-a.length),a=k,p.push(a)}const I=Z(a);for(ca(t,g,w,I,c,f,u,o);p.length>0;)p.pop().fill(0);return f}}function fa(t,e,n,r,i,s=20){let o=t[0],l=t[1],a=t[2],c=t[3],f=e[0],u=e[1],d=e[2],p=e[3],m=e[4],h=e[5],g=e[6],w=e[7],S=i,I=n[0],k=n[1],C=n[2],E=o,L=l,O=a,D=c,U=f,R=u,_=d,P=p,M=m,b=h,v=g,$=w,y=S,x=I,A=k,N=C;for(let z=0;z<s;z+=2)E=E+U|0,y=H(y^E,16),M=M+y|0,U=H(U^M,12),E=E+U|0,y=H(y^E,8),M=M+y|0,U=H(U^M,7),L=L+R|0,x=H(x^L,16),b=b+x|0,R=H(R^b,12),L=L+R|0,x=H(x^L,8),b=b+x|0,R=H(R^b,7),O=O+_|0,A=H(A^O,16),v=v+A|0,_=H(_^v,12),O=O+_|0,A=H(A^O,8),v=v+A|0,_=H(_^v,7),D=D+P|0,N=H(N^D,16),$=$+N|0,P=H(P^$,12),D=D+P|0,N=H(N^D,8),$=$+N|0,P=H(P^$,7),E=E+R|0,N=H(N^E,16),v=v+N|0,R=H(R^v,12),E=E+R|0,N=H(N^E,8),v=v+N|0,R=H(R^v,7),L=L+_|0,y=H(y^L,16),$=$+y|0,_=H(_^$,12),L=L+_|0,y=H(y^L,8),$=$+y|0,_=H(_^$,7),O=O+P|0,x=H(x^O,16),M=M+x|0,P=H(P^M,12),O=O+P|0,x=H(x^O,8),M=M+x|0,P=H(P^M,7),D=D+U|0,A=H(A^D,16),b=b+A|0,U=H(U^b,12),D=D+U|0,A=H(A^D,8),b=b+A|0,U=H(U^b,7);let B=0;r[B++]=o+E|0,r[B++]=l+L|0,r[B++]=a+O|0,r[B++]=c+D|0,r[B++]=f+U|0,r[B++]=u+R|0,r[B++]=d+_|0,r[B++]=p+P|0,r[B++]=m+M|0,r[B++]=h+b|0,r[B++]=g+v|0,r[B++]=w+$|0,r[B++]=S+y|0,r[B++]=I+x|0,r[B++]=k+A|0,r[B++]=C+N|0}const Xr=ua(fa,{counterRight:!1,counterLength:4,allowShortKeys:!1});class Qr extends Pr{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,le.hash(e);const r=Qe(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return le.exists(this),this.iHash.update(e),this}digestInto(e){le.exists(this),le.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const xt=(t,e,n)=>new Qr(t,e).update(n).digest();xt.create=(t,e)=>new Qr(t,e);function da(t,e,n){return le.hash(t),xt(t,Qe(n),Qe(e))}const Dt=new Uint8Array([0]),fr=new Uint8Array;function ha(t,e,n,r=32){if(le.hash(t),le.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=fr);const s=new Uint8Array(i*t.outputLen),o=xt.create(t,e),l=o._cloneInto(),a=new Uint8Array(o.outputLen);for(let c=0;c<i;c++)Dt[0]=c+1,l.update(c===0?fr:a).update(n).update(Dt).digestInto(a),s.set(a,t.outputLen*c),o._cloneInto(l);return o.destroy(),l.destroy(),a.fill(0),Dt.fill(0),s.slice(0,r)}var ga=Object.defineProperty,j=(t,e)=>{for(var n in e)ga(t,n,{get:e[n],enumerable:!0})},Pe=Symbol("verified"),pa=t=>t instanceof Object;function hn(t){if(!pa(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var ma={};j(ma,{Queue:()=>xa,QueueNode:()=>ei,binarySearch:()=>gn,insertEventIntoAscendingList:()=>ba,insertEventIntoDescendingList:()=>wa,normalizeURL:()=>ya,utf8Decoder:()=>he,utf8Encoder:()=>re});var he=new TextDecoder("utf-8"),re=new TextEncoder;function ya(t){t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function wa(t,e){const[n,r]=gn(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:i.created_at-e.created_at);return r||t.splice(n,0,e),t}function ba(t,e){const[n,r]=gn(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:e.created_at-i.created_at);return r||t.splice(n,0,e),t}function gn(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=e(t[i]);if(s===0)return[i,!0];s<0?r=i-1:n=i+1}return[n,!1]}var ei=class{constructor(t){Be(this,"value");Be(this,"next",null);Be(this,"prev",null);this.value=t}},xa=class{constructor(){Be(this,"first");Be(this,"last");this.first=null,this.last=null}enqueue(t){const e=new ei(t);return this.last?this.last===this.first?(this.last=e,this.last.prev=this.first,this.first.next=e):(e.prev=this.last,this.last.next=e,this.last=e):(this.first=e,this.last=e),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const t=this.first;return this.first=t.next,t.value}},va=class{generateSecretKey(){return Ze.utils.randomPrivateKey()}getPublicKey(t){return J(Ze.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=J(Ze.getPublicKey(e)),n.id=rt(n),n.sig=J(Ze.sign(rt(n),e)),n[Pe]=!0,n}verifyEvent(t){if(typeof t[Pe]=="boolean")return t[Pe];const e=rt(t);if(e!==t.id)return t[Pe]=!1,!1;try{const n=Ze.verify(t.sig,e,t.pubkey);return t[Pe]=n,n}catch{return t[Pe]=!1,!1}}};function Ea(t){if(!hn(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function rt(t){let e=Ve(re.encode(Ea(t)));return J(e)}var vt=new va,Sa=vt.generateSecretKey,ti=vt.getPublicKey,ue=vt.finalizeEvent,pn=vt.verifyEvent,La={};j(La,{Application:()=>kl,BadgeAward:()=>Ba,BadgeDefinition:()=>bl,BlockedRelaysList:()=>rl,BookmarkList:()=>el,Bookmarksets:()=>ml,Calendar:()=>Bl,CalendarEventRSVP:()=>Tl,ChannelCreation:()=>ai,ChannelHideMessage:()=>ui,ChannelMessage:()=>ci,ChannelMetadata:()=>li,ChannelMuteUser:()=>fi,ClassifiedListing:()=>Il,ClientAuth:()=>hi,CommunitiesList:()=>tl,CommunityDefinition:()=>_l,CommunityPostApproval:()=>Va,Contacts:()=>Ca,CreateOrUpdateProduct:()=>El,CreateOrUpdateStall:()=>vl,Curationsets:()=>yl,Date:()=>Rl,DirectMessageRelaysList:()=>al,DraftClassifiedListing:()=>Cl,DraftLong:()=>Ll,Emojisets:()=>Al,EncryptedDirectMessage:()=>Ra,EventDeletion:()=>Na,FileMetadata:()=>_a,FileServerPreference:()=>ll,Followsets:()=>hl,GenericRepost:()=>Ua,Genericlists:()=>gl,GiftWrap:()=>di,HTTPAuth:()=>wn,Handlerinformation:()=>Pl,Handlerrecommendation:()=>Ul,Highlights:()=>Ga,InterestsList:()=>sl,Interestsets:()=>xl,JobFeedback:()=>qa,JobRequest:()=>Ka,JobResult:()=>za,Label:()=>Fa,LightningPubRPC:()=>ul,LiveChatMessage:()=>Ha,LiveEvent:()=>Ol,LongFormArticle:()=>Sl,Metadata:()=>Oa,Mutelist:()=>Ya,NWCWalletInfo:()=>cl,NWCWalletRequest:()=>gi,NWCWalletResponse:()=>fl,NostrConnect:()=>dl,OpenTimestamps:()=>Pa,Pinlist:()=>Xa,PrivateDirectMessage:()=>Ta,ProblemTracker:()=>Da,ProfileBadges:()=>wl,PublicChatsList:()=>nl,Reaction:()=>yn,RecommendRelay:()=>Ia,RelayList:()=>Qa,Relaysets:()=>pl,Report:()=>Ma,Reporting:()=>ja,Repost:()=>mn,Seal:()=>oi,SearchRelaysList:()=>il,ShortTextNote:()=>$a,Time:()=>Nl,UserEmojiList:()=>ol,UserStatuses:()=>$l,Zap:()=>Ja,ZapGoal:()=>Wa,ZapRequest:()=>Za,classifyKind:()=>Aa,isEphemeralKind:()=>ii,isKind:()=>ka,isParameterizedReplaceableKind:()=>si,isRegularKind:()=>ni,isReplaceableKind:()=>ri});function ni(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function ri(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function ii(t){return 2e4<=t&&t<3e4}function si(t){return 3e4<=t&&t<4e4}function Aa(t){return ni(t)?"regular":ri(t)?"replaceable":ii(t)?"ephemeral":si(t)?"parameterized":"unknown"}function ka(t,e){const n=e instanceof Array?e:[e];return hn(t)&&n.includes(t.kind)||!1}var Oa=0,$a=1,Ia=2,Ca=3,Ra=4,Na=5,mn=6,yn=7,Ba=8,oi=13,Ta=14,Ua=16,ai=40,li=41,ci=42,ui=43,fi=44,Pa=1040,di=1059,_a=1063,Ha=1311,Da=1971,Ma=1984,ja=1984,Fa=1985,Va=4550,Ka=5999,za=6999,qa=7e3,Wa=9041,Za=9734,Ja=9735,Ga=9802,Ya=1e4,Xa=10001,Qa=10002,el=10003,tl=10004,nl=10005,rl=10006,il=10007,sl=10015,ol=10030,al=10050,ll=10096,cl=13194,ul=21e3,hi=22242,gi=23194,fl=23195,dl=24133,wn=27235,hl=3e4,gl=30001,pl=30002,ml=30003,yl=30004,wl=30008,bl=30009,xl=30015,vl=30017,El=30018,Sl=30023,Ll=30024,Al=30030,kl=30078,Ol=30311,$l=30315,Il=30402,Cl=30403,Rl=31922,Nl=31923,Bl=31924,Tl=31925,Ul=31989,Pl=31990,_l=34550,Hl={};j(Hl,{getHex64:()=>bn,getInt:()=>pi,getSubscriptionId:()=>Dl,matchEventId:()=>Ml,matchEventKind:()=>Fl,matchEventPubkey:()=>jl});function bn(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function pi(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Dl(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return t.slice(r+1,s)}function Ml(t,e){return e===bn(t,"id")}function jl(t,e){return e===bn(t,"pubkey")}function Fl(t,e){return e===pi(t,"kind")}var Vl={};j(Vl,{makeAuthEvent:()=>Kl});function Kl(t,e){return{kind:hi,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}var zl;try{zl=WebSocket}catch{}var ql;try{ql=WebSocket}catch{}var Wl={};j(Wl,{BECH32_REGEX:()=>mi,Bech32MaxSize:()=>xn,NostrTypeGuard:()=>Zl,decode:()=>Et,encodeBytes:()=>Lt,naddrEncode:()=>tc,neventEncode:()=>ec,noteEncode:()=>Xl,nprofileEncode:()=>Ql,npubEncode:()=>Yl,nsecEncode:()=>Gl});var Zl={isNProfile:t=>/^nprofile1[a-z\d]+$/.test(t||""),isNEvent:t=>/^nevent1[a-z\d]+$/.test(t||""),isNAddr:t=>/^naddr1[a-z\d]+$/.test(t||""),isNSec:t=>/^nsec1[a-z\d]{58}$/.test(t||""),isNPub:t=>/^npub1[a-z\d]{58}$/.test(t||""),isNote:t=>/^note1[a-z\d]+$/.test(t||""),isNcryptsec:t=>/^ncryptsec1[a-z\d]+$/.test(t||"")},xn=5e3,mi=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Jl(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=t&255,e}function Et(t){var i,s,o,l,a,c,f;let{prefix:e,words:n}=je.decode(t,xn),r=new Uint8Array(je.fromWords(n));switch(e){case"nprofile":{let u=Mt(r);if(!((i=u[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(u[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:J(u[0][0]),relays:u[1]?u[1].map(d=>he.decode(d)):[]}}}case"nevent":{let u=Mt(r);if(!((s=u[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(u[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(u[2]&&u[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(u[3]&&u[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:J(u[0][0]),relays:u[1]?u[1].map(d=>he.decode(d)):[],author:(o=u[2])!=null&&o[0]?J(u[2][0]):void 0,kind:(l=u[3])!=null&&l[0]?parseInt(J(u[3][0]),16):void 0}}}case"naddr":{let u=Mt(r);if(!((a=u[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((c=u[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(u[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((f=u[3])!=null&&f[0]))throw new Error("missing TLV 3 for naddr");if(u[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:he.decode(u[0][0]),pubkey:J(u[2][0]),kind:parseInt(J(u[3][0]),16),relays:u[1]?u[1].map(d=>he.decode(d)):[]}}}case"nsec":return{type:e,data:r};case"npub":case"note":return{type:e,data:J(r)};default:throw new Error(`unknown prefix ${e}`)}}function Mt(t){let e={},n=t;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);e[r]=e[r]||[],e[r].push(s)}return e}function Gl(t){return Lt("nsec",t)}function Yl(t){return Lt("npub",Me(t))}function Xl(t){return Lt("note",Me(t))}function St(t,e){let n=je.toWords(e);return je.encode(t,n,xn)}function Lt(t,e){return St(t,e)}function Ql(t){let e=vn({0:[Me(t.pubkey)],1:(t.relays||[]).map(n=>re.encode(n))});return St("nprofile",e)}function ec(t){let e;t.kind!==void 0&&(e=Jl(t.kind));let n=vn({0:[Me(t.id)],1:(t.relays||[]).map(r=>re.encode(r)),2:t.author?[Me(t.author)]:[],3:e?[new Uint8Array(e)]:[]});return St("nevent",n)}function tc(t){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,t.kind,!1);let n=vn({0:[re.encode(t.identifier)],1:(t.relays||[]).map(r=>re.encode(r)),2:[Me(t.pubkey)],3:[new Uint8Array(e)]});return St("naddr",n)}function vn(t){let e=[];return Object.entries(t).reverse().forEach(([n,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(n)],0),s.set([i.length],1),s.set(i,2),e.push(s)})}),wt(...e)}var nc={};j(nc,{decrypt:()=>rc,encrypt:()=>yi});async function yi(t,e,n){const r=t instanceof Uint8Array?J(t):t,i=Fe.getSharedSecret(r,"02"+e),s=wi(i);let o=Uint8Array.from(Hr(16)),l=re.encode(n),a=Zr(s,o).encrypt(l),c=ge.encode(new Uint8Array(a)),f=ge.encode(new Uint8Array(o.buffer));return`${c}?iv=${f}`}async function rc(t,e,n){const r=t instanceof Uint8Array?J(t):t;let[i,s]=n.split("?iv="),o=Fe.getSharedSecret(r,"02"+e),l=wi(o),a=ge.decode(s),c=ge.decode(i),f=Zr(l,a).decrypt(c);return he.decode(f)}function wi(t){return t.slice(1,33)}var ic={};j(ic,{NIP05_REGEX:()=>En,isNip05:()=>sc,isValid:()=>lc,queryProfile:()=>bi,searchDomain:()=>ac,useFetchImplementation:()=>oc});var En=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,sc=t=>En.test(t||""),At;try{At=fetch}catch{}function oc(t){At=t}async function ac(t,e=""){try{const n=`https://${t}/.well-known/nostr.json?name=${e}`,r=await At(n,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function bi(t){var i;const e=t.match(En);if(!e)return null;const[,n="_",r]=e;try{const s=`https://${r}/.well-known/nostr.json?name=${n}`,o=await At(s,{redirect:"manual"});if(o.status!==200)throw Error("Wrong response code");const l=await o.json(),a=l.names[n];return a?{pubkey:a,relays:(i=l.relays)==null?void 0:i[a]}:null}catch{return null}}async function lc(t,e){const n=await bi(e);return n?n.pubkey===t:!1}var cc={};j(cc,{parse:()=>uc});function uc(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let i=t.tags.length-1;i>=0;i--){const s=t.tags[i];if(s[0]==="e"&&s[1]){const[o,l,a,c,f]=s,u={id:l,relays:a?[a]:[],author:f};if(c==="root"){e.root=u;continue}if(c==="reply"){e.reply=u;continue}if(c==="mention"){e.mentions.push(u);continue}n?r=u:n=u,e.mentions.push(u);continue}if(s[0]==="q"&&s[1]){const[o,l,a]=s;e.quotes.push({id:l,relays:a?[a]:[]})}if(s[0]==="p"&&s[1]){e.profiles.push({pubkey:s[1],relays:s[2]?[s[2]]:[]});continue}}return e.root||(e.root=r||n||e.reply),e.reply||(e.reply=n||e.root),[e.reply,e.root].forEach(i=>{if(!i)return;let s=e.mentions.indexOf(i);if(s!==-1&&e.mentions.splice(s,1),i.author){let o=e.profiles.find(l=>l.pubkey===i.author);o&&o.relays&&(i.relays||(i.relays=[]),o.relays.forEach(l=>{var a;((a=i.relays)==null?void 0:a.indexOf(l))===-1&&i.relays.push(l)}),o.relays=i.relays)}}),e.mentions.forEach(i=>{if(i.author){let s=e.profiles.find(o=>o.pubkey===i.author);s&&s.relays&&(i.relays||(i.relays=[]),s.relays.forEach(o=>{i.relays.indexOf(o)===-1&&i.relays.push(o)}),s.relays=i.relays)}}),e}var fc={};j(fc,{fetchRelayInformation:()=>hc,useFetchImplementation:()=>dc});var xi;try{xi=fetch}catch{}function dc(t){xi=t}async function hc(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var gc={};j(gc,{fastEventHash:()=>Ei,getPow:()=>vi,minePow:()=>pc});function vi(t){let e=0;for(let n=0;n<64;n+=8){const r=parseInt(t.substring(n,n+8),16);if(r===0)e+=32;else{e+=Math.clz32(r);break}}return e}function pc(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),i[1]=(++n).toString(),r.id=Ei(r),vi(r.id)>=e)break}return r}function Ei(t){return J(Ve(re.encode(JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]))))}var mc={};j(mc,{finishRepostEvent:()=>yc,getRepostedEvent:()=>wc,getRepostedEventPointer:()=>Si});function yc(t,e,n,r){return ue({kind:mn,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:t.content===""?"":JSON.stringify(e),created_at:t.created_at},r)}function Si(t){if(t.kind!==mn)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(e!==void 0)return{id:e[1],relays:[e[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function wc(t,{skipVerification:e}={}){const n=Si(t);if(n===void 0||t.content==="")return;let r;try{r=JSON.parse(t.content)}catch{return}if(r.id===n.id&&!(!e&&!pn(r)))return r}var bc={};j(bc,{NOSTR_URI_REGEX:()=>kt,parse:()=>vc,test:()=>xc});var kt=new RegExp(`nostr:(${mi.source})`);function xc(t){return typeof t=="string"&&new RegExp(`^${kt.source}$`).test(t)}function vc(t){const e=t.match(new RegExp(`^${kt.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:Et(e[1])}}var Ec={};j(Ec,{finishReactionEvent:()=>Sc,getReactedEventPointer:()=>Lc});function Sc(t,e,n){const r=e.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return ue({...t,kind:yn,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Lc(t){if(t.kind!==yn)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(e===void 0||n===void 0))return{id:e[1],relays:[e[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var Ac={};j(Ac,{matchAll:()=>kc,regex:()=>Sn,replaceAll:()=>Oc});var Sn=()=>new RegExp(`\\b${kt.source}\\b`,"g");function*kc(t){const e=t.matchAll(Sn());for(const n of e)try{const[r,i]=n;yield{uri:r,value:i,decoded:Et(i),start:n.index,end:n.index+r.length}}catch{}}function Oc(t,e){return t.replaceAll(Sn(),(n,r)=>e({uri:n,value:r,decoded:Et(r)}))}var $c={};j($c,{channelCreateEvent:()=>Ic,channelHideMessageEvent:()=>Nc,channelMessageEvent:()=>Rc,channelMetadataEvent:()=>Cc,channelMuteUserEvent:()=>Bc});var Ic=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ue({kind:ai,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},Cc=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ue({kind:li,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Rc=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),ue({kind:ci,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Nc=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ue({kind:ui,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Bc=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ue({kind:fi,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)},Tc={};j(Tc,{EMOJI_SHORTCODE_REGEX:()=>Li,matchAll:()=>Uc,regex:()=>Ln,replaceAll:()=>Pc});var Li=/:(\w+):/,Ln=()=>new RegExp(`\\B${Li.source}\\B`,"g");function*Uc(t){const e=t.matchAll(Ln());for(const n of e)try{const[r,i]=n;yield{shortcode:r,name:i,start:n.index,end:n.index+r.length}}catch{}}function Pc(t,e){return t.replaceAll(Ln(),(n,r)=>e({shortcode:n,name:r}))}var _c={};j(_c,{useFetchImplementation:()=>Hc,validateGithub:()=>Dc});var An;try{An=fetch}catch{}function Hc(t){An=t}async function Dc(t,e,n){try{return await(await An(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}}var Mc={};j(Mc,{decrypt:()=>In,encrypt:()=>$n,getConversationKey:()=>kn,v2:()=>zc});var Ai=1,ki=65535;function kn(t,e){const n=Fe.getSharedSecret(t,"02"+e).subarray(1,33);return da(Ve,n,"nip44-v2")}function Oi(t,e){const n=ha(Ve,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function On(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)}function jc(t){if(!Number.isSafeInteger(t)||t<Ai||t>ki)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e}function Fc(t){const e=re.encode(t),n=e.length,r=jc(n),i=new Uint8Array(On(n)-n);return wt(r,e,i)}function Vc(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<Ai||e>ki||n.length!==e||t.length!==2+On(e))throw new Error("invalid padding");return he.decode(n)}function $i(t,e,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=wt(n,e);return xt(Ve,t,r)}function Kc(t){if(typeof t!="string")throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(t[0]==="#")throw new Error("unknown encryption version");let n;try{n=ge.decode(t)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(i!==2)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function $n(t,e,n=Hr(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:s}=Oi(e,n),o=Fc(t),l=Xr(r,i,o),a=$i(s,l,n);return ge.encode(wt(new Uint8Array([2]),n,l,a))}function In(t,e){const{nonce:n,ciphertext:r,mac:i}=Kc(t),{chacha_key:s,chacha_nonce:o,hmac_key:l}=Oi(e,n),a=$i(l,r,n);if(!Wo(a,i))throw new Error("invalid MAC");const c=Xr(s,o,r);return Vc(c)}var zc={utils:{getConversationKey:kn,calcPaddedLen:On},encrypt:$n,decrypt:In},qc={};j(qc,{makeNwcRequestEvent:()=>Zc,parseConnectionString:()=>Wc});function Wc(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),s=n.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}async function Zc(t,e,n){const i=await yi(e,t,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:gi,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]};return ue(s,e)}var Jc={};j(Jc,{getZapEndpoint:()=>Yc,makeZapReceipt:()=>eu,makeZapRequest:()=>Xc,useFetchImplementation:()=>Gc,validateZapRequest:()=>Qc});var Cn;try{Cn=fetch}catch{}function Gc(t){Cn=t}async function Yc(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:o}=je.decode(n,1e3),l=je.fromWords(o);e=he.decode(l)}else if(r){let[o,l]=r.split("@");e=new URL(`/.well-known/lnurlp/${o}`,`https://${l}`).toString()}else return null;let s=await(await Cn(e)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Xc({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&s.tags.push(["e",e]),s}function Qc(t){let e;try{e=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!hn(e))return"Zap request is not a valid Nostr event.";if(!pn(e))return"Invalid signature on zap request.";let n=e.tags.find(([s,o])=>s==="p"&&o);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find(([s,o])=>s==="e"&&o);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function eu({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t),s=i.tags.filter(([l])=>l==="e"||l==="p"||l==="a"),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",i.pubkey],["bolt11",n],["description",t]]};return e&&o.tags.push(["preimage",e]),o}var tu={};j(tu,{createRumor:()=>Bi,createSeal:()=>Ti,createWrap:()=>Ui,unwrapEvent:()=>Pi,unwrapManyEvents:()=>iu,wrapEvent:()=>en,wrapManyEvents:()=>ru});var nu=2*24*60*60,Ii=()=>Math.round(Date.now()/1e3),Ci=()=>Math.round(Ii()-Math.random()*nu),Ri=(t,e)=>kn(t,e),Ni=(t,e,n)=>$n(JSON.stringify(t),Ri(e,n)),dr=(t,e)=>JSON.parse(In(t.content,Ri(e,t.pubkey)));function Bi(t,e){const n={created_at:Ii(),content:"",tags:[],...t,pubkey:ti(e)};return n.id=rt(n),n}function Ti(t,e,n){return ue({kind:oi,content:Ni(t,e,n),created_at:Ci(),tags:[]},e)}function Ui(t,e){const n=Sa();return ue({kind:di,content:Ni(t,n,e),created_at:Ci(),tags:[["p",e]]},n)}function en(t,e,n){const r=Bi(t,e),i=Ti(r,e,n);return Ui(i,n)}function ru(t,e,n){if(!n||n.length===0)throw new Error("At least one recipient is required.");const r=ti(e),i=[en(t,e,r)];return n.forEach(s=>{i.push(en(t,e,s))}),i}function Pi(t,e){const n=dr(t,e);return dr(n,e)}function iu(t,e){let n=[];return t.forEach(r=>{n.push(Pi(r,e))}),n.sort((r,i)=>r.created_at-i.created_at),n}var su={};j(su,{getToken:()=>ou,hashPayload:()=>Rn,unpackEventFromToken:()=>Hi,validateEvent:()=>Ki,validateEventKind:()=>Mi,validateEventMethodTag:()=>Fi,validateEventPayloadTag:()=>Vi,validateEventTimestamp:()=>Di,validateEventUrlTag:()=>ji,validateToken:()=>au});var _i="Nostr ";async function ou(t,e,n,r=!1,i){const s={kind:wn,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&s.tags.push(["payload",Rn(i)]);const o=await n(s);return(r?_i:"")+ge.encode(re.encode(JSON.stringify(o)))}async function au(t,e,n){const r=await Hi(t).catch(s=>{throw s});return await Ki(r,e,n).catch(s=>{throw s})}async function Hi(t){if(!t)throw new Error("Missing token");t=t.replace(_i,"");const e=he.decode(ge.decode(t));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function Di(t){return t.created_at?Math.round(new Date().getTime()/1e3)-t.created_at<60:!1}function Mi(t){return t.kind===wn}function ji(t,e){const n=t.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===e:!1}function Fi(t,e){const n=t.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===e.toLowerCase():!1}function Rn(t){const e=Ve(re.encode(JSON.stringify(t)));return J(e)}function Vi(t,e){const n=t.tags.find(i=>i[0]==="payload");if(!n)return!1;const r=Rn(e);return n.length>0&&n[1]===r}async function Ki(t,e,n,r){if(!pn(t))throw new Error("Invalid nostr event, signature invalid");if(!Mi(t))throw new Error("Invalid nostr event, kind invalid");if(!Di(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ji(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!Fi(t,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Vi(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}export{Is as B,ti as a,Sa as g,G as i,Wl as n,cu as s};
