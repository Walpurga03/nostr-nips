var Jt=Object.defineProperty;var en=(e,s,o)=>s in e?Jt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o;var ct=(e,s,o)=>en(e,typeof s!="symbol"?s+"":s,o);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function o(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=o(c);fetch(c.href,h)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,o){this.props=e,this.context=s,this.refs=D$1,this.updater=o||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,o){this.props=e,this.context=s,this.refs=D$1,this.updater=o||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,o){var a,c={},h=null,g=null;if(s!=null)for(a in s.ref!==void 0&&(g=s.ref),s.key!==void 0&&(h=""+s.key),s)J.call(s,a)&&!L$1.hasOwnProperty(a)&&(c[a]=s[a]);var _=arguments.length-2;if(_===1)c.children=o;else if(1<_){for(var b=Array(_),$=0;$<_;$++)b[$]=arguments[$+2];c.children=b}if(e&&e.defaultProps)for(a in _=e.defaultProps,_)c[a]===void 0&&(c[a]=_[a]);return{$$typeof:l$1,type:e,key:h,ref:g,props:c,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return s[o]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,o,a,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(h){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:g=!0}}if(g)return g=e,c=c(g),e=a===""?"."+Q$1(g,0):a,I$1(c)?(o="",e!=null&&(o=e.replace(P$1,"$&/")+"/"),R$1(c,s,o,"",function($){return $})):c!=null&&(O$1(c)&&(c=N$1(c,o+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+e)),s.push(c)),1;if(g=0,a=a===""?".":a+":",I$1(e))for(var _=0;_<e.length;_++){h=e[_];var b=a+Q$1(h,_);g+=R$1(h,s,o,b,c)}else if(b=A$1(e),typeof b=="function")for(e=b.call(e),_=0;!(h=e.next()).done;)h=h.value,b=a+Q$1(h,_++),g+=R$1(h,s,o,b,c);else if(h==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return g}function S$1(e,s,o){if(e==null)return e;var a=[],c=0;return R$1(e,a,"","",function(h){return s.call(o,h,c++)}),a}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,o){S$1(e,function(){s.apply(this,arguments)},o)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,s,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),c=e.key,h=e.ref,g=e._owner;if(s!=null){if(s.ref!==void 0&&(h=s.ref,g=K$1.current),s.key!==void 0&&(c=""+s.key),e.type&&e.type.defaultProps)var _=e.type.defaultProps;for(b in s)J.call(s,b)&&!L$1.hasOwnProperty(b)&&(a[b]=s[b]===void 0&&_!==void 0?_[b]:s[b])}var b=arguments.length-2;if(b===1)a.children=o;else if(1<b){_=Array(b);for(var $=0;$<b;$++)_[$]=arguments[$+2];a.children=_}return{$$typeof:l$1,type:e.type,key:c,ref:h,props:a,_owner:g}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,o){return U$1.current.useImperativeHandle(e,s,o)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,o){return U$1.current.useReducer(e,s,o)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,o){return U$1.current.useSyncExternalStore(e,s,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,o){var a,c={},h=null,g=null;o!==void 0&&(h=""+o),s.key!==void 0&&(h=""+s.key),s.ref!==void 0&&(g=s.ref);for(a in s)m$1.call(s,a)&&!p$1.hasOwnProperty(a)&&(c[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps,s)c[a]===void 0&&(c[a]=s[a]);return{$$typeof:k,type:e,key:h,ref:g,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(vt,xt){var Rt=vt.length;vt.push(xt);e:for(;0<Rt;){var $t=Rt-1>>>1,Ct=vt[$t];if(0<c(Ct,xt))vt[$t]=xt,vt[Rt]=Ct,Rt=$t;else break e}}function o(vt){return vt.length===0?null:vt[0]}function a(vt){if(vt.length===0)return null;var xt=vt[0],Rt=vt.pop();if(Rt!==xt){vt[0]=Rt;e:for(var $t=0,Ct=vt.length,Nt=Ct>>>1;$t<Nt;){var At=2*($t+1)-1,Pt=vt[At],Tt=At+1,Lt=vt[Tt];if(0>c(Pt,Rt))Tt<Ct&&0>c(Lt,Pt)?(vt[$t]=Lt,vt[Tt]=Rt,$t=Tt):(vt[$t]=Pt,vt[At]=Rt,$t=At);else if(Tt<Ct&&0>c(Lt,Rt))vt[$t]=Lt,vt[Tt]=Rt,$t=Tt;else break e}}return xt}function c(vt,xt){var Rt=vt.sortIndex-xt.sortIndex;return Rt!==0?Rt:vt.id-xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var g=Date,_=g.now();e.unstable_now=function(){return g.now()-_}}var b=[],$=[],_e=1,j=null,et=3,tt=!1,nt=!1,rt=!1,ot=typeof setTimeout=="function"?setTimeout:null,it=typeof clearTimeout=="function"?clearTimeout:null,st=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(vt){for(var xt=o($);xt!==null;){if(xt.callback===null)a($);else if(xt.startTime<=vt)a($),xt.sortIndex=xt.expirationTime,s(b,xt);else break;xt=o($)}}function lt(vt){if(rt=!1,at(vt),!nt)if(o(b)!==null)nt=!0,ht(wt);else{var xt=o($);xt!==null&&Et(lt,xt.startTime-vt)}}function wt(vt,xt){nt=!1,rt&&(rt=!1,it(yt),yt=-1),tt=!0;var Rt=et;try{for(at(xt),j=o(b);j!==null&&(!(j.expirationTime>xt)||vt&&!dt());){var $t=j.callback;if(typeof $t=="function"){j.callback=null,et=j.priorityLevel;var Ct=$t(j.expirationTime<=xt);xt=e.unstable_now(),typeof Ct=="function"?j.callback=Ct:j===o(b)&&a(b),at(xt)}else a(b);j=o(b)}if(j!==null)var Nt=!0;else{var At=o($);At!==null&&Et(lt,At.startTime-xt),Nt=!1}return Nt}finally{j=null,et=Rt,tt=!1}}var gt=!1,pt=null,yt=-1,St=5,kt=-1;function dt(){return!(e.unstable_now()-kt<St)}function mt(){if(pt!==null){var vt=e.unstable_now();kt=vt;var xt=!0;try{xt=pt(!0,vt)}finally{xt?bt():(gt=!1,pt=null)}}else gt=!1}var bt;if(typeof st=="function")bt=function(){st(mt)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,ft=_t.port2;_t.port1.onmessage=mt,bt=function(){ft.postMessage(null)}}else bt=function(){ot(mt,0)};function ht(vt){pt=vt,gt||(gt=!0,bt())}function Et(vt,xt){yt=ot(function(){vt(e.unstable_now())},xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(vt){vt.callback=null},e.unstable_continueExecution=function(){nt||tt||(nt=!0,ht(wt))},e.unstable_forceFrameRate=function(vt){0>vt||125<vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<vt?Math.floor(1e3/vt):5},e.unstable_getCurrentPriorityLevel=function(){return et},e.unstable_getFirstCallbackNode=function(){return o(b)},e.unstable_next=function(vt){switch(et){case 1:case 2:case 3:var xt=3;break;default:xt=et}var Rt=et;et=xt;try{return vt()}finally{et=Rt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(vt,xt){switch(vt){case 1:case 2:case 3:case 4:case 5:break;default:vt=3}var Rt=et;et=vt;try{return xt()}finally{et=Rt}},e.unstable_scheduleCallback=function(vt,xt,Rt){var $t=e.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?$t+Rt:$t):Rt=$t,vt){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=Rt+Ct,vt={id:_e++,callback:xt,priorityLevel:vt,startTime:Rt,expirationTime:Ct,sortIndex:-1},Rt>$t?(vt.sortIndex=Rt,s($,vt),o(b)===null&&vt===o($)&&(rt?(it(yt),yt=-1):rt=!0,Et(lt,Rt-$t))):(vt.sortIndex=Ct,s(b,vt),nt||tt||(nt=!0,ht(wt))),vt},e.unstable_shouldYield=dt,e.unstable_wrapCallback=function(vt){var xt=et;return function(){var Rt=et;et=xt;try{return vt.apply(this,arguments)}finally{et=Rt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,o,a){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,o,a){if(s===null||typeof s>"u"||pa(e,s,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,o,a,c,h,g){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=s,this.sanitizeURL=h,this.removeEmptyString=g}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,o,a){var c=z.hasOwnProperty(s)?z[s]:null;(c!==null?c.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,o,c,a)&&(o=null),a||c===null?oa(s)&&(o===null?e.removeAttribute(s):e.setAttribute(s,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(s=c.attributeName,a=c.attributeNamespace,o===null?e.removeAttribute(s):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?e.setAttributeNS(a,s,o):e.setAttribute(s,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var a=$}Reflect.construct(e,[],s)}else{try{s.call()}catch($){a=$}e.call(s.prototype)}else{try{throw Error()}catch($){a=$}e()}}catch($){if($&&a&&typeof $.stack=="string"){for(var c=$.stack.split(`
`),h=a.stack.split(`
`),g=c.length-1,_=h.length-1;1<=g&&0<=_&&c[g]!==h[_];)_--;for(;1<=g&&0<=_;g--,_--)if(c[g]!==h[_]){if(g!==1||_!==1)do if(g--,_--,0>_||c[g]!==h[_]){var b=`
`+c[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=_);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),a=""+e[s];if(!e.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,h=o.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(e,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var o=s.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==o?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var o=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Za(e,s){var o=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;o=Sa(s.value!=null?s.value:o),e._wrapperState={initialChecked:a,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var o=Sa(s.value),a=s.type;if(o!=null)a==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,o):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db(e,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,o||s===e.value||(e.value=s),e.defaultValue=s}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function cb(e,s,o){(s!=="number"||Xa(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var eb=Array.isArray;function fb(e,s,o,a){if(e=e.options,s){s={};for(var c=0;c<o.length;c++)s["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=s.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&a&&(e[o].defaultSelected=!0)}else{for(o=""+Sa(o),s=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}s!==null||e[c].disabled||(s=e[c])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}s=o}s==null&&(s=""),o=s}e._wrapperState={initialValue:Sa(o)}}function ib(e,s){var o=Sa(s.value),a=Sa(s.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),s.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),a!=null&&(e.defaultValue=""+a)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,a,c){MSApp.execUnsafeLocalFunction(function(){return e(s,o,a,c)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var o in s)if(s.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=rb(o,s[o],a);o==="float"&&(o="cssFloat"),a?e.setProperty(o,c):e[o]=c}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,o){if(Ib)return e(s,o);Ib=!0;try{return Gb(e,s,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var o=e.stateNode;if(o===null)return null;var a=Db(o);if(a===null)return null;o=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(p(231,s,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,o,a,c,h,g,_,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(o,$)}catch(_e){this.onError(_e)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,o,a,c,h,g,_,b){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,o,a,c,h,g,_,b){if(Tb.apply(this,arguments),Ob){if(Ob){var $=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=$)}}function Vb(e){var s=e,o=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(o=s.return),e=s.return;while(e)}return s.tag===3?o:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var o=e,a=s;;){var c=o.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===o)return Xb(c),e;if(h===a)return Xb(c),s;h=h.sibling}throw Error(p(188))}if(o.return!==a.return)o=c,a=h;else{for(var g=!1,_=c.child;_;){if(_===o){g=!0,o=c,a=h;break}if(_===a){g=!0,a=c,o=h;break}_=_.sibling}if(!g){for(_=h.child;_;){if(_===o){g=!0,o=h,a=c;break}if(_===a){g=!0,a=h,o=c;break}_=_.sibling}if(!g)throw Error(p(189))}}if(o.alternate!==a)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var o=e.pendingLanes;if(o===0)return 0;var a=0,c=e.suspendedLanes,h=e.pingedLanes,g=o&268435455;if(g!==0){var _=g&~c;_!==0?a=tc(_):(h&=g,h!==0&&(a=tc(h)))}else g=o&~c,g!==0?a=tc(g):h!==0&&(a=tc(h));if(a===0)return 0;if(s!==0&&s!==a&&!(s&c)&&(c=a&-a,h=s&-s,c>=h||c===16&&(h&4194240)!==0))return s;if(a&4&&(a|=o&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=a;0<s;)o=31-oc(s),c=1<<o,a|=e[o],s&=~c;return a}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var o=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-oc(h),_=1<<g,b=c[g];b===-1?(!(_&o)||_&a)&&(c[g]=vc(_,s)):b<=s&&(e.expiredLanes|=_),h&=~_}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],o=0;31>o;o++)s.push(e);return s}function Ac(e,s,o){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=o}function Bc(e,s){var o=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-oc(o),h=1<<c;s[c]=0,a[c]=-1,e[c]=-1,o&=~h}}function Cc(e,s){var o=e.entangledLanes|=s;for(e=e.entanglements;o;){var a=31-oc(o),c=1<<a;c&s|e[a]&s&&(e[a]|=s),o&=~c}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,o,a,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:s,domEventName:o,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=a,s=e.targetContainers,c!==null&&s.indexOf(c)===-1&&s.push(c),e)}function Uc(e,s,o,a,c){switch(s){case"focusin":return Lc=Tc(Lc,e,s,o,a,c),!0;case"dragenter":return Mc=Tc(Mc,e,s,o,a,c),!0;case"mouseover":return Nc=Tc(Nc,e,s,o,a,c),!0;case"pointerover":var h=c.pointerId;return Oc.set(h,Tc(Oc.get(h)||null,e,s,o,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Pc.set(h,Tc(Pc.get(h)||null,e,s,o,a,c)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var o=Vb(s);if(o!==null){if(s=o.tag,s===13){if(s=Wb(o),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var o=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);wb=a,o.target.dispatchEvent(a),wb=null}else return s=Cb(o),s!==null&&Fc(s),e.blockedOn=o,!1;s.shift()}return!0}function Zc(e,s,o){Xc(e)&&o.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(c){return ad(c,e)}if(0<Kc.length){ad(Kc[0],e);for(var o=1;o<Kc.length;o++){var a=Kc[o];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),o=0;o<Qc.length;o++)a=Qc[o],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,o,a){var c=C,h=cd.transition;cd.transition=null;try{C=1,fd(e,s,o,a)}finally{C=c,cd.transition=h}}function gd(e,s,o,a){var c=C,h=cd.transition;cd.transition=null;try{C=4,fd(e,s,o,a)}finally{C=c,cd.transition=h}}function fd(e,s,o,a){if(dd){var c=Yc(e,s,o,a);if(c===null)hd(e,s,a,id,o),Sc(e,a);else if(Uc(c,e,s,o,a))a.stopPropagation();else if(Sc(e,a),s&4&&-1<Rc.indexOf(e)){for(;c!==null;){var h=Cb(c);if(h!==null&&Ec(h),h=Yc(e,s,o,a),h===null&&hd(e,s,a,id,o),h===c)break;c=h}c!==null&&a.stopPropagation()}else hd(e,s,a,null,o)}}var id=null;function Yc(e,s,o,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(o=s.tag,o===13){if(e=Wb(s),e!==null)return e;e=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,o=s.length,a,c="value"in kd?kd.value:kd.textContent,h=c.length;for(e=0;e<o&&s[e]===c[e];e++);var g=o-e;for(a=1;a<=g&&s[o-a]===c[h-a];a++);return md=c.slice(e,1<a?1-a:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(o,a,c,h,g){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=" ",fe$1=!1;function ge$1(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe$1=!0,ee$1);case"textInput":return e=s.data,e===ee$1&&fe$1?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge$1(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,o,a){Eb(a),s=oe(s,"onChange"),0<s.length&&(o=new td("onChange","change",null,o,a),e.push({event:o,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,o){e==="focusin"?(Ae(),pe=s,qe=o,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var o=Object.keys(e),a=Object.keys(s);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!ja.call(s,c)||!He(e[c],s[c]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var o=Je(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=s&&a>=s)return{node:o,offset:s-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),o=e.focusedElem,a=e.selectionRange;if(s!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(a!==null&&Ne(o)){if(s=a.start,e=a.end,e===void 0&&(e=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(e,o.value.length);else if(e=(s=o.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!e.extend&&h>a&&(c=a,a=h,h=c),c=Ke(o,h);var g=Ke(o,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(s=s.createRange(),s.setStart(c.node,c.offset),e.removeAllRanges(),h>a?(e.addRange(s),e.extend(g.node,g.offset)):(s.setEnd(g.node,g.offset),e.addRange(s)))}}for(s=[],e=o;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)e=s[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(s=new td("onSelect","select",null,s,o),e.push({event:s,listeners:a}),s.target=Qe)))}function Ve(e,s){var o={};return o[e.toLowerCase()]=s.toLowerCase(),o["Webkit"+e]="webkit"+s,o["Moz"+e]="moz"+s,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ye)return Xe[e]=s[o];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,o){var a=e.type||"unknown-event";e.currentTarget=o,Ub(a,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],c=a.event;a=a.listeners;e:{var h=void 0;if(s)for(var g=a.length-1;0<=g;g--){var _=a[g],b=_.instance,$=_.currentTarget;if(_=_.listener,b!==h&&c.isPropagationStopped())break e;nf(c,_,$),h=b}else for(g=0;g<a.length;g++){if(_=a[g],b=_.instance,$=_.currentTarget,_=_.listener,b!==h&&c.isPropagationStopped())break e;nf(c,_,$),h=b}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var o=s[of];o===void 0&&(o=s[of]=new Set);var a=e+"__bubble";o.has(a)||(pf(s,e,2,!1),o.add(a))}function qf(e,s,o){var a=0;s&&(a|=4),pf(o,e,a,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,e),qf(o,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,o,a){switch(jd(s)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}o=c.bind(null,s,o,e),c=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(s,o,{capture:!0,passive:c}):e.addEventListener(s,o,!0):c!==void 0?e.addEventListener(s,o,{passive:c}):e.addEventListener(s,o,!1)}function hd(e,s,o,a,c){var h=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var _=a.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;g=g.return}for(;_!==null;){if(g=Wc(_),g===null)return;if(b=g.tag,b===5||b===6){a=h=g;continue e}_=_.parentNode}}a=a.return}Jb(function(){var $=h,_e=xb(o),j=[];e:{var et=df.get(e);if(et!==void 0){var tt=td,nt=e;switch(e){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":tt=Rd;break;case"focusin":nt="focus",tt=Fd;break;case"focusout":nt="blur",tt=Fd;break;case"beforeblur":case"afterblur":tt=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Vd;break;case $e:case af:case bf:tt=Hd;break;case cf:tt=Xd;break;case"scroll":tt=vd;break;case"wheel":tt=Zd;break;case"copy":case"cut":case"paste":tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Td}var rt=(s&4)!==0,ot=!rt&&e==="scroll",it=rt?et!==null?et+"Capture":null:et;rt=[];for(var st=$,at;st!==null;){at=st;var lt=at.stateNode;if(at.tag===5&&lt!==null&&(at=lt,it!==null&&(lt=Kb(st,it),lt!=null&&rt.push(tf(st,lt,at)))),ot)break;st=st.return}0<rt.length&&(et=new tt(et,nt,null,o,_e),j.push({event:et,listeners:rt}))}}if(!(s&7)){e:{if(et=e==="mouseover"||e==="pointerover",tt=e==="mouseout"||e==="pointerout",et&&o!==wb&&(nt=o.relatedTarget||o.fromElement)&&(Wc(nt)||nt[uf]))break e;if((tt||et)&&(et=_e.window===_e?_e:(et=_e.ownerDocument)?et.defaultView||et.parentWindow:window,tt?(nt=o.relatedTarget||o.toElement,tt=$,nt=nt?Wc(nt):null,nt!==null&&(ot=Vb(nt),nt!==ot||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(tt=null,nt=$),tt!==nt)){if(rt=Bd,lt="onMouseLeave",it="onMouseEnter",st="mouse",(e==="pointerout"||e==="pointerover")&&(rt=Td,lt="onPointerLeave",it="onPointerEnter",st="pointer"),ot=tt==null?et:ue(tt),at=nt==null?et:ue(nt),et=new rt(lt,st+"leave",tt,o,_e),et.target=ot,et.relatedTarget=at,lt=null,Wc(_e)===$&&(rt=new rt(it,st+"enter",nt,o,_e),rt.target=at,rt.relatedTarget=ot,lt=rt),ot=lt,tt&&nt)t:{for(rt=tt,it=nt,st=0,at=rt;at;at=vf(at))st++;for(at=0,lt=it;lt;lt=vf(lt))at++;for(;0<st-at;)rt=vf(rt),st--;for(;0<at-st;)it=vf(it),at--;for(;st--;){if(rt===it||it!==null&&rt===it.alternate)break t;rt=vf(rt),it=vf(it)}rt=null}else rt=null;tt!==null&&wf(j,et,tt,rt,!1),nt!==null&&ot!==null&&wf(j,ot,nt,rt,!0)}}e:{if(et=$?ue($):window,tt=et.nodeName&&et.nodeName.toLowerCase(),tt==="select"||tt==="input"&&et.type==="file")var wt=ve;else if(me(et))if(we)wt=Fe;else{wt=De;var gt=Ce}else(tt=et.nodeName)&&tt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(wt=Ee);if(wt&&(wt=wt(e,$))){ne(j,wt,o,_e);break e}gt&&gt(e,et,$),e==="focusout"&&(gt=et._wrapperState)&&gt.controlled&&et.type==="number"&&cb(et,"number",et.value)}switch(gt=$?ue($):window,e){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=$,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,o,_e);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,o,_e)}var pt;if(ae)e:{switch(e){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie?ge$1(e,o)&&(yt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(de&&o.locale!=="ko"&&(ie||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie&&(pt=nd()):(kd=_e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),gt=oe($,yt),0<gt.length&&(yt=new Ld(yt,e,null,o,_e),j.push({event:yt,listeners:gt}),pt?yt.data=pt:(pt=he(o),pt!==null&&(yt.data=pt)))),(pt=ce?je(e,o):ke(e,o))&&($=oe($,"onBeforeInput"),0<$.length&&(_e=new Ld("onBeforeInput","beforeinput",null,o,_e),j.push({event:_e,listeners:$}),_e.data=pt))}se(j,s)})}function tf(e,s,o){return{instance:e,listener:s,currentTarget:o}}function oe(e,s){for(var o=s+"Capture",a=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Kb(e,o),h!=null&&a.unshift(tf(e,h,c)),h=Kb(e,s),h!=null&&a.push(tf(e,h,c))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,o,a,c){for(var h=s._reactName,g=[];o!==null&&o!==a;){var _=o,b=_.alternate,$=_.stateNode;if(b!==null&&b===a)break;_.tag===5&&$!==null&&(_=$,c?(b=Kb(o,h),b!=null&&g.unshift(tf(o,b,_))):c||(b=Kb(o,h),b!=null&&g.push(tf(o,b,_)))),o=o.return}g.length!==0&&e.push({event:s,listeners:g})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,o){if(s=zf(s),zf(e)!==s&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var o=s,a=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){e.removeChild(c),bd(s);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return e;s--}else o==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var o=e.parentNode;o;){if(s=o[uf]||o[Of]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(e=Mf(e);e!==null;){if(o=e[Of])return o;e=Mf(e)}return s}e=o,o=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var o=e.type.contextTypes;if(!o)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in o)c[h]=s[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,o){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,o)}function bg(e,s,o){var a=e.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in s))throw Error(p(108,Ra(e)||"Unknown",c));return A({},o,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,o){var a=e.stateNode;if(!a)throw Error(p(169));o?(e=bg(e,s,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var o=eg;for(C=1;e<o.length;e++){var a=o[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(c){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),c}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var c=32-oc(a)-1;a&=~(1<<c),o+=1;var h=32-oc(s)+c;if(30<h){var g=c-c%5;h=(a&(1<<g)-1).toString(32),a>>=g,c-=g,rg=1<<32-oc(s)+c|o<<c|a,sg=h+e}else rg=1<<h|o<<c|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=e,s=e.deletions,s===null?(e.deletions=[o],e.flags|=16):s.push(o)}function Cg(e,s){switch(e.tag){case 5:var o=e.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=s,o.return=e,e.child=o,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var o=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(o.nextSibling);var a=xg;s&&Cg(e,s)?Ag(a,o):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var a=o.stateNode}if(!a)throw Error(p(147,e));var c=a,h=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===h?s.ref:(s=function(g){var _=c.refs;g===null?delete _[h]:_[h]=g},s._stringRef=h,s)}if(typeof e!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(it,st){if(e){var at=it.deletions;at===null?(it.deletions=[st],it.flags|=16):at.push(st)}}function o(it,st){if(!e)return null;for(;st!==null;)s(it,st),st=st.sibling;return null}function a(it,st){for(it=new Map;st!==null;)st.key!==null?it.set(st.key,st):it.set(st.index,st),st=st.sibling;return it}function c(it,st){return it=Pg(it,st),it.index=0,it.sibling=null,it}function h(it,st,at){return it.index=at,e?(at=it.alternate,at!==null?(at=at.index,at<st?(it.flags|=2,st):at):(it.flags|=2,st)):(it.flags|=1048576,st)}function g(it){return e&&it.alternate===null&&(it.flags|=2),it}function _(it,st,at,lt){return st===null||st.tag!==6?(st=Qg(at,it.mode,lt),st.return=it,st):(st=c(st,at),st.return=it,st)}function b(it,st,at,lt){var wt=at.type;return wt===ya?_e(it,st,at.props.children,lt,at.key):st!==null&&(st.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Ha&&Ng(wt)===st.type)?(lt=c(st,at.props),lt.ref=Lg(it,st,at),lt.return=it,lt):(lt=Rg(at.type,at.key,at.props,null,it.mode,lt),lt.ref=Lg(it,st,at),lt.return=it,lt)}function $(it,st,at,lt){return st===null||st.tag!==4||st.stateNode.containerInfo!==at.containerInfo||st.stateNode.implementation!==at.implementation?(st=Sg(at,it.mode,lt),st.return=it,st):(st=c(st,at.children||[]),st.return=it,st)}function _e(it,st,at,lt,wt){return st===null||st.tag!==7?(st=Tg(at,it.mode,lt,wt),st.return=it,st):(st=c(st,at),st.return=it,st)}function j(it,st,at){if(typeof st=="string"&&st!==""||typeof st=="number")return st=Qg(""+st,it.mode,at),st.return=it,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return at=Rg(st.type,st.key,st.props,null,it.mode,at),at.ref=Lg(it,null,st),at.return=it,at;case wa:return st=Sg(st,it.mode,at),st.return=it,st;case Ha:var lt=st._init;return j(it,lt(st._payload),at)}if(eb(st)||Ka(st))return st=Tg(st,it.mode,at,null),st.return=it,st;Mg(it,st)}return null}function et(it,st,at,lt){var wt=st!==null?st.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return wt!==null?null:_(it,st,""+at,lt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===wt?b(it,st,at,lt):null;case wa:return at.key===wt?$(it,st,at,lt):null;case Ha:return wt=at._init,et(it,st,wt(at._payload),lt)}if(eb(at)||Ka(at))return wt!==null?null:_e(it,st,at,lt,null);Mg(it,at)}return null}function tt(it,st,at,lt,wt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return it=it.get(at)||null,_(st,it,""+lt,wt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return it=it.get(lt.key===null?at:lt.key)||null,b(st,it,lt,wt);case wa:return it=it.get(lt.key===null?at:lt.key)||null,$(st,it,lt,wt);case Ha:var gt=lt._init;return tt(it,st,at,gt(lt._payload),wt)}if(eb(lt)||Ka(lt))return it=it.get(at)||null,_e(st,it,lt,wt,null);Mg(st,lt)}return null}function nt(it,st,at,lt){for(var wt=null,gt=null,pt=st,yt=st=0,St=null;pt!==null&&yt<at.length;yt++){pt.index>yt?(St=pt,pt=null):St=pt.sibling;var kt=et(it,pt,at[yt],lt);if(kt===null){pt===null&&(pt=St);break}e&&pt&&kt.alternate===null&&s(it,pt),st=h(kt,st,yt),gt===null?wt=kt:gt.sibling=kt,gt=kt,pt=St}if(yt===at.length)return o(it,pt),I&&tg(it,yt),wt;if(pt===null){for(;yt<at.length;yt++)pt=j(it,at[yt],lt),pt!==null&&(st=h(pt,st,yt),gt===null?wt=pt:gt.sibling=pt,gt=pt);return I&&tg(it,yt),wt}for(pt=a(it,pt);yt<at.length;yt++)St=tt(pt,it,yt,at[yt],lt),St!==null&&(e&&St.alternate!==null&&pt.delete(St.key===null?yt:St.key),st=h(St,st,yt),gt===null?wt=St:gt.sibling=St,gt=St);return e&&pt.forEach(function(dt){return s(it,dt)}),I&&tg(it,yt),wt}function rt(it,st,at,lt){var wt=Ka(at);if(typeof wt!="function")throw Error(p(150));if(at=wt.call(at),at==null)throw Error(p(151));for(var gt=wt=null,pt=st,yt=st=0,St=null,kt=at.next();pt!==null&&!kt.done;yt++,kt=at.next()){pt.index>yt?(St=pt,pt=null):St=pt.sibling;var dt=et(it,pt,kt.value,lt);if(dt===null){pt===null&&(pt=St);break}e&&pt&&dt.alternate===null&&s(it,pt),st=h(dt,st,yt),gt===null?wt=dt:gt.sibling=dt,gt=dt,pt=St}if(kt.done)return o(it,pt),I&&tg(it,yt),wt;if(pt===null){for(;!kt.done;yt++,kt=at.next())kt=j(it,kt.value,lt),kt!==null&&(st=h(kt,st,yt),gt===null?wt=kt:gt.sibling=kt,gt=kt);return I&&tg(it,yt),wt}for(pt=a(it,pt);!kt.done;yt++,kt=at.next())kt=tt(pt,it,yt,kt.value,lt),kt!==null&&(e&&kt.alternate!==null&&pt.delete(kt.key===null?yt:kt.key),st=h(kt,st,yt),gt===null?wt=kt:gt.sibling=kt,gt=kt);return e&&pt.forEach(function(mt){return s(it,mt)}),I&&tg(it,yt),wt}function ot(it,st,at,lt){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var wt=at.key,gt=st;gt!==null;){if(gt.key===wt){if(wt=at.type,wt===ya){if(gt.tag===7){o(it,gt.sibling),st=c(gt,at.props.children),st.return=it,it=st;break e}}else if(gt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Ha&&Ng(wt)===gt.type){o(it,gt.sibling),st=c(gt,at.props),st.ref=Lg(it,gt,at),st.return=it,it=st;break e}o(it,gt);break}else s(it,gt);gt=gt.sibling}at.type===ya?(st=Tg(at.props.children,it.mode,lt,at.key),st.return=it,it=st):(lt=Rg(at.type,at.key,at.props,null,it.mode,lt),lt.ref=Lg(it,st,at),lt.return=it,it=lt)}return g(it);case wa:e:{for(gt=at.key;st!==null;){if(st.key===gt)if(st.tag===4&&st.stateNode.containerInfo===at.containerInfo&&st.stateNode.implementation===at.implementation){o(it,st.sibling),st=c(st,at.children||[]),st.return=it,it=st;break e}else{o(it,st);break}else s(it,st);st=st.sibling}st=Sg(at,it.mode,lt),st.return=it,it=st}return g(it);case Ha:return gt=at._init,ot(it,st,gt(at._payload),lt)}if(eb(at))return nt(it,st,at,lt);if(Ka(at))return rt(it,st,at,lt);Mg(it,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,st!==null&&st.tag===6?(o(it,st.sibling),st=c(st,at),st.return=it,it=st):(o(it,st),st=Qg(at,it.mode,lt),st.return=it,it=st),g(it)):o(it,st)}return ot}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),e===o)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,o,a){var c=s.interleaved;return c===null?(o.next=o,gh(s)):(o.next=c.next,c.next=o),s.interleaved=o,ih(e,a)}function ih(e,s){e.lanes|=s;var o=e.alternate;for(o!==null&&(o.lanes|=s),o=e,e=e.return;e!==null;)e.childLanes|=s,o=e.alternate,o!==null&&(o.childLanes|=s),o=e,e=e.return;return o.tag===3?o.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var c=a.pending;return c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s,ih(e,o)}return c=a.interleaved,c===null?(s.next=s,gh(a)):(s.next=c.next,c.next=s),a.interleaved=s,ih(e,o)}function oh(e,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var a=s.lanes;a&=e.pendingLanes,o|=a,s.lanes=o,Cc(e,o)}}function ph(e,s){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};h===null?c=h=g:h=h.next=g,o=o.next}while(o!==null);h===null?c=h=s:h=h.next=s}else c=h=s;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=s:e.next=s,o.lastBaseUpdate=s}function qh(e,s,o,a){var c=e.updateQueue;jh=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var b=_,$=b.next;b.next=null,g===null?h=$:g.next=$,g=b;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,_=_e.lastBaseUpdate,_!==g&&(_===null?_e.firstBaseUpdate=$:_.next=$,_e.lastBaseUpdate=b))}if(h!==null){var j=c.baseState;g=0,_e=$=b=null,_=h;do{var et=_.lane,tt=_.eventTime;if((a&et)===et){_e!==null&&(_e=_e.next={eventTime:tt,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var nt=e,rt=_;switch(et=s,tt=o,rt.tag){case 1:if(nt=rt.payload,typeof nt=="function"){j=nt.call(tt,j,et);break e}j=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=rt.payload,et=typeof nt=="function"?nt.call(tt,j,et):nt,et==null)break e;j=A({},j,et);break e;case 2:jh=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,et=c.effects,et===null?c.effects=[_]:et.push(_))}else tt={eventTime:tt,lane:et,tag:_.tag,payload:_.payload,callback:_.callback,next:null},_e===null?($=_e=tt,b=j):_e=_e.next=tt,g|=et;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;et=_,_=et.next,et.next=null,c.lastBaseUpdate=et,c.shared.pending=null}}while(!0);if(_e===null&&(b=j),c.baseState=b,c.firstBaseUpdate=$,c.lastBaseUpdate=_e,s=c.shared.interleaved,s!==null){c=s;do g|=c.lane,c=c.next;while(c!==s)}else h===null&&(c.shared.lanes=0);rh|=g,e.lanes=g,e.memoizedState=j}}function sh(e,s,o){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var a=e[s],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(p(191,c));c.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),o=lb(s,e.type);s!==o&&(G(vh,e),G(uh,o))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var o=0;o<s.length&&o<e.length;o++)if(!He(e[o],s[o]))return!1;return!0}function Nh(e,s,o,a,c,h){if(Hh=h,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=o(a,c),Jh){h=0;do{if(Jh=!1,Kh=0,25<=h)throw Error(p(301));h+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=o(a,c)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),o=s.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=e;var a=N,c=a.baseQueue,h=o.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}a.baseQueue=c=h,o.pending=null}if(c!==null){h=c.next,a=a.baseState;var _=g=null,b=null,$=h;do{var _e=$.lane;if((Hh&_e)===_e)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),a=$.hasEagerState?$.eagerState:e(a,$.action);else{var j={lane:_e,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(_=b=j,g=a):b=b.next=j,M.lanes|=_e,rh|=_e}$=$.next}while($!==null&&$!==h);b===null?g=a:b.next=_,He(a,s.memoizedState)||(dh=!0),s.memoizedState=a,s.baseState=g,s.baseQueue=b,o.lastRenderedState=a}if(e=o.interleaved,e!==null){c=e;do h=c.lane,M.lanes|=h,rh|=h,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function Xh(e){var s=Uh(),o=s.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=e;var a=o.dispatch,c=o.pending,h=s.memoizedState;if(c!==null){o.pending=null;var g=c=c.next;do h=e(h,g.action),g=g.next;while(g!==c);He(h,s.memoizedState)||(dh=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),o.lastRenderedState=h}return[h,a]}function Yh(){}function Zh(e,s){var o=M,a=Uh(),c=s(),h=!He(a.memoizedState,c);if(h&&(a.memoizedState=c,dh=!0),a=a.queue,$h(ai.bind(null,o,a,e),[e]),a.getSnapshot!==s||h||O!==null&&O.memoizedState.tag&1){if(o.flags|=2048,bi(9,ci.bind(null,o,a,c,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(o,s,c)}return c}function di(e,s,o){e.flags|=16384,e={getSnapshot:s,value:o},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(o=s.stores,o===null?s.stores=[e]:o.push(e))}function ci(e,s,o,a){s.value=o,s.getSnapshot=a,ei(s)&&fi(e)}function ai(e,s,o){return o(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var o=s();return!He(e,o)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,o,a){return e={tag:e,create:s,destroy:o,deps:a,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(o=s.lastEffect,o===null?s.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,o,a){var c=Th();M.flags|=e,c.memoizedState=bi(1|s,o,void 0,a===void 0?null:a)}function li(e,s,o,a){var c=Uh();a=a===void 0?null:a;var h=void 0;if(N!==null){var g=N.memoizedState;if(h=g.destroy,a!==null&&Mh(a,g.deps)){c.memoizedState=bi(s,o,h,a);return}}M.flags|=e,c.memoizedState=bi(1|s,o,h,a)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,o){return o=o!=null?o.concat([e]):null,li(4,4,pi.bind(null,s,e),o)}function ri(){}function si(e,s){var o=Uh();s=s===void 0?null:s;var a=o.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(o.memoizedState=[e,s],e)}function ti(e,s){var o=Uh();s=s===void 0?null:s;var a=o.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(e=e(),o.memoizedState=[e,s],e)}function ui(e,s,o){return Hh&21?(He(o,s)||(o=yc(),M.lanes|=o,rh|=o,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=o)}function vi(e,s){var o=C;C=o!==0&&4>o?o:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=o,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,s,o){var a=yi(e);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,o);else if(o=hh(e,s,o,a),o!==null){var c=R();gi(o,e,a,c),Bi(o,s,a)}}function ii(e,s,o){var a=yi(e),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var g=s.lastRenderedState,_=h(g,o);if(c.hasEagerState=!0,c.eagerState=_,He(_,g)){var b=s.interleaved;b===null?(c.next=c,gh(s)):(c.next=b.next,b.next=c),s.interleaved=c;return}}catch{}finally{}o=hh(e,s,c,a),o!==null&&(c=R(),gi(o,e,a,c),Bi(o,s,a))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var o=e.pending;o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s}function Bi(e,s,o){if(o&4194240){var a=s.lanes;a&=e.pendingLanes,o|=a,s.lanes=o,Cc(e,o)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,o){return o=o!=null?o.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),o)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var o=Th();return s=s===void 0?null:s,e=e(),o.memoizedState=[e,s],e},useReducer:function(e,s,o){var a=Th();return s=o!==void 0?o(s):s,a.memoizedState=a.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=xi.bind(null,M,e),[a.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,o){var a=M,c=Th();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=s(),Q===null)throw Error(p(349));Hh&30||di(a,s,o)}c.memoizedState=o;var h={value:o,getSnapshot:s};return c.queue=h,mi(ai.bind(null,a,h,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,h,o,s),void 0,null),o},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var o=sg,a=rg;o=(a&~(1<<32-oc(a)-1)).toString(32)+o,s=":"+s+"R"+o,o=Kh++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Lh++,s=":"+s+"r"+o.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var o in e)s[o]===void 0&&(s[o]=e[o]);return s}return s}function Di(e,s,o,a){s=e.memoizedState,o=o(a,s),o=o==null?s:A({},s,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,o){e=e._reactInternals;var a=R(),c=yi(e),h=mh(a,c);h.payload=s,o!=null&&(h.callback=o),s=nh(e,h,c),s!==null&&(gi(s,e,c,a),oh(s,e,c))},enqueueReplaceState:function(e,s,o){e=e._reactInternals;var a=R(),c=yi(e),h=mh(a,c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=nh(e,h,c),s!==null&&(gi(s,e,c,a),oh(s,e,c))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var o=R(),a=yi(e),c=mh(o,a);c.tag=2,s!=null&&(c.callback=s),s=nh(e,c,a),s!==null&&(gi(s,e,a,o),oh(s,e,a))}};function Fi(e,s,o,a,c,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,g):s.prototype&&s.prototype.isPureReactComponent?!Ie(o,a)||!Ie(c,h):!0}function Gi(e,s,o){var a=!1,c=Vf,h=s.contextType;return typeof h=="object"&&h!==null?h=eh(h):(c=Zf(s)?Xf:H.current,a=s.contextTypes,h=(a=a!=null)?Yf(e,c):Vf),s=new s(o,h),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),s}function Hi(e,s,o,a){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,a),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,o,a){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs={},kh(e);var h=s.contextType;typeof h=="object"&&h!==null?c.context=eh(h):(h=Zf(s)?Xf:H.current,c.context=Yf(e,h)),c.state=e.memoizedState,h=s.getDerivedStateFromProps,typeof h=="function"&&(Di(e,s,h,o),c.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(s=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),s!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(e,o,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var o="",a=s;do o+=Pa(a),a=a.return;while(a);var c=o}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:s,stack:c,digest:null}}function Ki(e,s,o){return{value:e,source:null,stack:o??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,o){o=mh(-1,o),o.tag=3,o.payload={element:null};var a=s.value;return o.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,s)},o}function Qi(e,s,o){o=mh(-1,o),o.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=s.value;o.payload=function(){return a(c)},o.callback=function(){Li(e,s)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(o.callback=function(){Li(e,s),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})}),o}function Si(e,s,o){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var c=new Set;a.set(s,c)}else c=a.get(s),c===void 0&&(c=new Set,a.set(s,c));c.has(o)||(c.add(o),e=Ti.bind(null,e,s,o),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,o,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===s?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=mh(-1,1),s.tag=2,nh(o,s,1))),o.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,o,a){s.child=e===null?Vg(s,null,o,a):Ug(s,e.child,o,a)}function Yi(e,s,o,a,c){o=o.render;var h=s.ref;return ch(s,c),a=Nh(e,s,o,a,h,c),o=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~c,Zi(e,s,c)):(I&&o&&vg(s),s.flags|=1,Xi(e,s,a,c),s.child)}function $i(e,s,o,a,c){if(e===null){var h=o.type;return typeof h=="function"&&!aj(h)&&h.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=h,bj(e,s,h,a,c)):(e=Rg(o.type,null,a,s,s.mode,c),e.ref=s.ref,e.return=s,s.child=e)}if(h=e.child,!(e.lanes&c)){var g=h.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(g,a)&&e.ref===s.ref)return Zi(e,s,c)}return s.flags|=1,e=Pg(h,a),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,o,a,c){if(e!==null){var h=e.memoizedProps;if(Ie(h,a)&&e.ref===s.ref)if(dh=!1,s.pendingProps=a=h,(e.lanes&c)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,c)}return cj(e,s,o,a,c)}function dj(e,s,o){var a=s.pendingProps,c=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=o;else{if(!(o&1073741824))return e=h!==null?h.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:o,G(ej,fj),fj|=a}else h!==null?(a=h.baseLanes|o,s.memoizedState=null):a=o,G(ej,fj),fj|=a;return Xi(e,s,c,o),s.child}function gj(e,s){var o=s.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,o,a,c){var h=Zf(o)?Xf:H.current;return h=Yf(s,h),ch(s,c),o=Nh(e,s,o,a,h,c),a=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~c,Zi(e,s,c)):(I&&a&&vg(s),s.flags|=1,Xi(e,s,o,c),s.child)}function hj(e,s,o,a,c){if(Zf(o)){var h=!0;cg(s)}else h=!1;if(ch(s,c),s.stateNode===null)ij(e,s),Gi(s,o,a),Ii(s,o,a,c),a=!0;else if(e===null){var g=s.stateNode,_=s.memoizedProps;g.props=_;var b=g.context,$=o.contextType;typeof $=="object"&&$!==null?$=eh($):($=Zf(o)?Xf:H.current,$=Yf(s,$));var _e=o.getDerivedStateFromProps,j=typeof _e=="function"||typeof g.getSnapshotBeforeUpdate=="function";j||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==a||b!==$)&&Hi(s,g,a,$),jh=!1;var et=s.memoizedState;g.state=et,qh(s,a,g,c),b=s.memoizedState,_!==a||et!==b||Wf.current||jh?(typeof _e=="function"&&(Di(s,o,_e,a),b=s.memoizedState),(_=jh||Fi(s,o,_,a,et,b,$))?(j||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=b),g.props=a,g.state=b,g.context=$,a=_):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{g=s.stateNode,lh(e,s),_=s.memoizedProps,$=s.type===s.elementType?_:Ci(s.type,_),g.props=$,j=s.pendingProps,et=g.context,b=o.contextType,typeof b=="object"&&b!==null?b=eh(b):(b=Zf(o)?Xf:H.current,b=Yf(s,b));var tt=o.getDerivedStateFromProps;(_e=typeof tt=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==j||et!==b)&&Hi(s,g,a,b),jh=!1,et=s.memoizedState,g.state=et,qh(s,a,g,c);var nt=s.memoizedState;_!==j||et!==nt||Wf.current||jh?(typeof tt=="function"&&(Di(s,o,tt,a),nt=s.memoizedState),($=jh||Fi(s,o,$,a,et,nt,b)||!1)?(_e||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,nt,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,nt,b)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&et===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&et===e.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=nt),g.props=a,g.state=nt,g.context=b,a=$):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&et===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&et===e.memoizedState||(s.flags|=1024),a=!1)}return jj(e,s,o,a,h,c)}function jj(e,s,o,a,c,h){gj(e,s);var g=(s.flags&128)!==0;if(!a&&!g)return c&&dg(s,o,!1),Zi(e,s,h);a=s.stateNode,Wi.current=s;var _=g&&typeof o.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,e!==null&&g?(s.child=Ug(s,e.child,null,h),s.child=Ug(s,null,_,h)):Xi(e,s,_,h),s.memoizedState=a.state,c&&dg(s,o,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,o,a,c){return Ig(),Jg(c),s.flags|=256,Xi(e,s,o,a),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,o){var a=s.pendingProps,c=L.current,h=!1,g=(s.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(h=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),G(L,c&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(g=a.children,e=a.fallback,h?(a=s.mode,h=s.child,g={mode:"hidden",children:g},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=g):h=pj(g,a,0,null),e=Tg(e,a,o,null),h.return=s,e.return=s,h.sibling=e,s.child=h,s.child.memoizedState=nj(o),s.memoizedState=mj,e):qj(s,g));if(c=e.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return rj(e,s,g,a,_,c,o);if(h){h=a.fallback,g=s.mode,c=e.child,_=c.sibling;var b={mode:"hidden",children:a.children};return!(g&1)&&s.child!==c?(a=s.child,a.childLanes=0,a.pendingProps=b,s.deletions=null):(a=Pg(c,b),a.subtreeFlags=c.subtreeFlags&14680064),_!==null?h=Pg(_,h):(h=Tg(h,g,o,null),h.flags|=2),h.return=s,a.return=s,a.sibling=h,s.child=a,a=h,h=s.child,g=e.child.memoizedState,g=g===null?nj(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},h.memoizedState=g,h.childLanes=e.childLanes&~o,s.memoizedState=mj,a}return h=e.child,e=h.sibling,a=Pg(h,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=o),a.return=s,a.sibling=null,e!==null&&(o=s.deletions,o===null?(s.deletions=[e],s.flags|=16):o.push(e)),s.child=a,s.memoizedState=null,a}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,o,a){return a!==null&&Jg(a),Ug(s,e.child,null,o),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,o,a,c,h,g){if(o)return s.flags&256?(s.flags&=-257,a=Ki(Error(p(422))),sj(e,s,g,a)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(h=a.fallback,c=s.mode,a=pj({mode:"visible",children:a.children},c,0,null),h=Tg(h,c,g,null),h.flags|=2,a.return=s,h.return=s,a.sibling=h,s.child=a,s.mode&1&&Ug(s,e.child,null,g),s.child.memoizedState=nj(g),s.memoizedState=mj,h);if(!(s.mode&1))return sj(e,s,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var _=a.dgst;return a=_,h=Error(p(419)),a=Ki(h,a,void 0),sj(e,s,g,a)}if(_=(g&e.childLanes)!==0,dh||_){if(a=Q,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,ih(e,c),gi(a,e,c,-1))}return tj(),a=Ki(Error(p(421))),sj(e,s,g,a)}return c.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),c._reactRetry=s,null):(e=h.treeContext,yg=Lf(c.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,a.children),s.flags|=4096,s)}function vj(e,s,o){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s),bh(e.return,s,o)}function wj(e,s,o,a,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(h.isBackwards=s,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=o,h.tailMode=c)}function xj(e,s,o){var a=s.pendingProps,c=a.revealOrder,h=a.tail;if(Xi(e,s,a.children,o),a=L.current,a&2)a=a&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,o,s);else if(e.tag===19)vj(e,o,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(L,a),!(s.mode&1))s.memoizedState=null;else switch(c){case"forwards":for(o=s.child,c=null;o!==null;)e=o.alternate,e!==null&&Ch(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=s.child,s.child=null):(c=o.sibling,o.sibling=null),wj(s,!1,c,o,h);break;case"backwards":for(o=null,c=s.child,s.child=null;c!==null;){if(e=c.alternate,e!==null&&Ch(e)===null){s.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}wj(s,!0,o,null,h);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,o){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(o&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,o=Pg(e,e.pendingProps),s.child=o,o.return=s;e.sibling!==null;)e=e.sibling,o=o.sibling=Pg(e,e.pendingProps),o.return=s;o.sibling=null}return s.child}function yj(e,s,o){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,c=s.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=c;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):o&s.child.childLanes?oj(e,s,o):(G(L,L.current&1),e=Zi(e,s,o),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(a=(o&s.childLanes)!==0,e.flags&128){if(a)return xj(e,s,o);s.flags|=128}if(c=s.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,o)}return Zi(e,s,o)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(e,s,o,a){var c=e.memoizedProps;if(c!==a){e=s.stateNode,xh(uh.current);var h=null;switch(o){case"input":c=Ya(e,c),a=Ya(e,a),h=[];break;case"select":c=A({},c,{value:void 0}),a=A({},a,{value:void 0}),h=[];break;case"textarea":c=gb(e,c),a=gb(e,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(o,a);var g;o=null;for($ in c)if(!a.hasOwnProperty($)&&c.hasOwnProperty($)&&c[$]!=null)if($==="style"){var _=c[$];for(g in _)_.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?h||(h=[]):(h=h||[]).push($,null));for($ in a){var b=a[$];if(_=c!=null?c[$]:void 0,a.hasOwnProperty($)&&b!==_&&(b!=null||_!=null))if($==="style")if(_){for(g in _)!_.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in b)b.hasOwnProperty(g)&&_[g]!==b[g]&&(o||(o={}),o[g]=b[g])}else o||(h||(h=[]),h.push($,o)),o=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,_=_?_.__html:void 0,b!=null&&_!==b&&(h=h||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea.hasOwnProperty($)?(b!=null&&$==="onScroll"&&D("scroll",e),h||_===b||(h=[])):(h=h||[]).push($,b))}o&&(h=h||[]).push("style",o);var $=h;(s.updateQueue=$)&&(s.flags|=4)}};Cj=function(e,s,o,a){o!==a&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(s)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=o,s}function Ej(e,s,o){var a=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return a=s.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var c=xh(wh.current);if(o=s.type,e!==null&&s.stateNode!=null)Bj(e,s,o,a,c),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){a=s.stateNode,o=s.type;var h=s.memoizedProps;switch(a[Of]=s,a[Pf]=h,e=(s.mode&1)!==0,o){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,h),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},D("invalid",a);break;case"textarea":hb(a,h),D("invalid",a)}ub(o,h),c=null;for(var g in h)if(h.hasOwnProperty(g)){var _=h[g];g==="children"?typeof _=="string"?a.textContent!==_&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,_,e),c=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,_,e),c=["children",""+_]):ea.hasOwnProperty(g)&&_!=null&&g==="onScroll"&&D("scroll",a)}switch(o){case"input":Va(a),db(a,h,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}a=c,s.updateQueue=a,a!==null&&(s.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(o,{is:a.is}):(e=g.createElement(o),o==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,o),e[Of]=s,e[Pf]=a,zj(e,s,!1,!1),s.stateNode=e;e:{switch(g=vb(o,a),o){case"dialog":D("cancel",e),D("close",e),c=a;break;case"iframe":case"object":case"embed":D("load",e),c=a;break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],e);c=a;break;case"source":D("error",e),c=a;break;case"img":case"image":case"link":D("error",e),D("load",e),c=a;break;case"details":D("toggle",e),c=a;break;case"input":Za(e,a),c=Ya(e,a),D("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),c=gb(e,a),D("invalid",e);break;default:c=a}ub(o,c),_=c;for(h in _)if(_.hasOwnProperty(h)){var b=_[h];h==="style"?sb(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(e,b)):h==="children"?typeof b=="string"?(o!=="textarea"||b!=="")&&ob(e,b):typeof b=="number"&&ob(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?b!=null&&h==="onScroll"&&D("scroll",e):b!=null&&ta(e,h,b,g))}switch(o){case"input":Va(e),db(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?fb(e,!!a.multiple,h,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(p(166));if(o=xh(wh.current),xh(uh.current),Gg(s)){if(a=s.stateNode,o=s.memoizedProps,a[Of]=s,(h=a.nodeValue!==o)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,o,(e.mode&1)!==0)}h&&(s.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Of]=s,s.stateNode=a}return S(s),null;case 13:if(E(L),a=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,h=!1;else if(h=Gg(s),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(p(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));h[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),h=!1}else zg!==null&&(Fj(zg),zg=null),h=!0;if(!h)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),h=s.memoizedState,h===null)return S(s),null;if(a=(s.flags&128)!==0,g=h.rendering,g===null)if(a)Dj(h,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(g=Ch(e),g!==null){for(s.flags|=128,Dj(h,!1),a=g.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=o,o=s.child;o!==null;)h=o,e=a,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}h.tail!==null&&B()>Gj&&(s.flags|=128,a=!0,Dj(h,!1),s.lanes=4194304)}else{if(!a)if(e=Ch(g),e!==null){if(s.flags|=128,a=!0,o=e.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Dj(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!I)return S(s),null}else 2*B()-h.renderingStartTime>Gj&&o!==1073741824&&(s.flags|=128,a=!0,Dj(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(o=h.last,o!==null?o.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=B(),s.sibling=null,o=L.current,G(L,a?o&1|2:o&1),s):(S(s),null);case 22:case 23:return Hj(),a=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){W(e,s,a)}else o.current=null}function Mj(e,s,o){try{o()}catch(a){W(e,s,a)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var g=0,_=-1,b=-1,$=0,_e=0,j=e,et=null;t:for(;;){for(var tt;j!==o||c!==0&&j.nodeType!==3||(_=g+c),j!==h||a!==0&&j.nodeType!==3||(b=g+a),j.nodeType===3&&(g+=j.nodeValue.length),(tt=j.firstChild)!==null;)et=j,j=tt;for(;;){if(j===e)break t;if(et===o&&++$===c&&(_=g),et===h&&++_e===a&&(b=g),(tt=j.nextSibling)!==null)break;j=et,et=j.parentNode}j=tt}o=_===-1||b===-1?null:{start:_,end:b}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:e,selectionRange:o},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var nt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var rt=nt.memoizedProps,ot=nt.memoizedState,it=s.stateNode,st=it.getSnapshotBeforeUpdate(s.elementType===s.type?rt:Ci(s.type,rt),ot);it.__reactInternalSnapshotBeforeUpdate=st}break;case 3:var at=s.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(lt){W(s,s.return,lt)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return nt=Nj,Nj=!1,nt}function Pj(e,s,o){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Mj(s,o,h)}c=c.next}while(c!==a)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var a=o.create;o.destroy=a()}o=o.next}while(o!==s)}}function Rj(e){var s=e.ref;if(s!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(e,s):o.insertBefore(e,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(e,o)):(s=o,s.appendChild(e)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,s,o),e=e.sibling;e!==null;)Vj(e,s,o),e=e.sibling}function Wj(e,s,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?o.insertBefore(e,s):o.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,s,o),e=e.sibling;e!==null;)Wj(e,s,o),e=e.sibling}var X=null,Xj=!1;function Yj(e,s,o){for(o=o.child;o!==null;)Zj(e,s,o),o=o.sibling}function Zj(e,s,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Lj(o,s);case 6:var a=X,c=Xj;X=null,Yj(e,s,o),X=a,Xj=c,X!==null&&(Xj?(e=X,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Xj?(e=X,o=o.stateNode,e.nodeType===8?Kf(e.parentNode,o):e.nodeType===1&&Kf(e,o),bd(e)):Kf(X,o.stateNode));break;case 4:a=X,c=Xj,X=o.stateNode.containerInfo,Xj=!0,Yj(e,s,o),X=a,Xj=c;break;case 0:case 11:case 14:case 15:if(!U&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,g=h.destroy;h=h.tag,g!==void 0&&(h&2||h&4)&&Mj(o,s,g),c=c.next}while(c!==a)}Yj(e,s,o);break;case 1:if(!U&&(Lj(o,s),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(_){W(o,s,_)}Yj(e,s,o);break;case 21:Yj(e,s,o);break;case 22:o.mode&1?(U=(a=U)||o.memoizedState!==null,Yj(e,s,o),U=a):Yj(e,s,o);break;default:Yj(e,s,o)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Kj),s.forEach(function(a){var c=bk.bind(null,e,a);o.has(a)||(o.add(a),a.then(c,c))})}}function ck(e,s){var o=s.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var h=e,g=s,_=g;e:for(;_!==null;){switch(_.tag){case 5:X=_.stateNode,Xj=!1;break e;case 3:X=_.stateNode.containerInfo,Xj=!0;break e;case 4:X=_.stateNode.containerInfo,Xj=!0;break e}_=_.return}if(X===null)throw Error(p(160));Zj(h,g,c),X=null,Xj=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch($){W(c,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(rt){W(e,e.return,rt)}try{Pj(5,e,e.return)}catch(rt){W(e,e.return,rt)}}break;case 1:ck(s,e),ek(e),a&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(s,e),ek(e),a&512&&o!==null&&Lj(o,o.return),e.flags&32){var c=e.stateNode;try{ob(c,"")}catch(rt){W(e,e.return,rt)}}if(a&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,g=o!==null?o.memoizedProps:h,_=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&ab(c,h),vb(_,g);var $=vb(_,h);for(g=0;g<b.length;g+=2){var _e=b[g],j=b[g+1];_e==="style"?sb(c,j):_e==="dangerouslySetInnerHTML"?nb(c,j):_e==="children"?ob(c,j):ta(c,_e,j,$)}switch(_){case"input":bb(c,h);break;case"textarea":ib(c,h);break;case"select":var et=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var tt=h.value;tt!=null?fb(c,!!h.multiple,tt,!1):et!==!!h.multiple&&(h.defaultValue!=null?fb(c,!!h.multiple,h.defaultValue,!0):fb(c,!!h.multiple,h.multiple?[]:"",!1))}c[Pf]=h}catch(rt){W(e,e.return,rt)}}break;case 6:if(ck(s,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(rt){W(e,e.return,rt)}}break;case 3:if(ck(s,e),ek(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(rt){W(e,e.return,rt)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B())),a&4&&ak(e);break;case 22:if(_e=o!==null&&o.memoizedState!==null,e.mode&1?(U=($=U)||_e,ck(s,e),U=$):ck(s,e),ek(e),a&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!_e&&e.mode&1)for(V=e,_e=e.child;_e!==null;){for(j=V=_e;V!==null;){switch(et=V,tt=et.child,et.tag){case 0:case 11:case 14:case 15:Pj(4,et,et.return);break;case 1:Lj(et,et.return);var nt=et.stateNode;if(typeof nt.componentWillUnmount=="function"){a=et,o=et.return;try{s=a,nt.props=s.memoizedProps,nt.state=s.memoizedState,nt.componentWillUnmount()}catch(rt){W(a,o,rt)}}break;case 5:Lj(et,et.return);break;case 22:if(et.memoizedState!==null){gk(j);continue}}tt!==null?(tt.return=et,V=tt):gk(j)}_e=_e.sibling}e:for(_e=null,j=e;;){if(j.tag===5){if(_e===null){_e=j;try{c=j.stateNode,$?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=j.stateNode,b=j.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,_.style.display=rb("display",g))}catch(rt){W(e,e.return,rt)}}}else if(j.tag===6){if(_e===null)try{j.stateNode.nodeValue=$?"":j.memoizedProps}catch(rt){W(e,e.return,rt)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;_e===j&&(_e=null),j=j.return}_e===j&&(_e=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:ck(s,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var o=e.return;o!==null;){if(Tj(o)){var a=o;break e}o=o.return}throw Error(p(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ob(c,""),a.flags&=-33);var h=Uj(e);Wj(e,h,c);break;case 3:case 4:var g=a.stateNode.containerInfo,_=Uj(e);Vj(e,_,g);break;default:throw Error(p(161))}}catch(b){W(e,e.return,b)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,o){V=e,ik(e)}function ik(e,s,o){for(var a=(e.mode&1)!==0;V!==null;){var c=V,h=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Jj;if(!g){var _=c.alternate,b=_!==null&&_.memoizedState!==null||U;_=Jj;var $=U;if(Jj=g,(U=b)&&!$)for(V=c;V!==null;)g=V,b=g.child,g.tag===22&&g.memoizedState!==null?jk(c):b!==null?(b.return=g,V=b):jk(c);for(;h!==null;)V=h,ik(h),h=h.sibling;V=c,Jj=_,U=$}kk(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,V=h):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!U)if(o===null)a.componentDidMount();else{var c=s.elementType===s.type?o.memoizedProps:Ci(s.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=s.updateQueue;h!==null&&sh(s,h,a);break;case 3:var g=s.updateQueue;if(g!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}sh(s,g,o)}break;case 5:var _=s.stateNode;if(o===null&&s.flags&4){o=_;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&o.focus();break;case"img":b.src&&(o.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var _e=$.memoizedState;if(_e!==null){var j=_e.dehydrated;j!==null&&bd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch(et){W(s,s.return,et)}}if(s===e){V=null;break}if(o=s.sibling,o!==null){o.return=s.return,V=o;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var o=s.sibling;if(o!==null){o.return=s.return,V=o;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Qj(4,s)}catch(b){W(s,o,b)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var c=s.return;try{a.componentDidMount()}catch(b){W(s,c,b)}}var h=s.return;try{Rj(s)}catch(b){W(s,h,b)}break;case 5:var g=s.return;try{Rj(s)}catch(b){W(s,g,b)}}}catch(b){W(s,s.return,b)}if(s===e){V=null;break}var _=s.sibling;if(_!==null){_.return=s.return,V=_;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,o,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,o,a),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=o),T===4&&Ck(e,Z)),Dk(e,a),o===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var o=e.callbackNode;wc(e,s);var a=uc(e,e===Q?Z:0);if(a===0)o!==null&&bc(o),e.callbackNode=null,e.callbackPriority=0;else if(s=a&-a,e.callbackPriority!==s){if(o!=null&&bc(o),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(a)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Fk(o,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=o}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var o=e.callbackNode;if(Hk()&&e.callbackNode!==o)return null;var a=uc(e,e===Q?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||s)s=Ik(e,a);else{s=a;var c=K;K|=2;var h=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(_){Mk(e,_)}while(!0);$g(),mk.current=h,K=c,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(c=xc(e),c!==0&&(a=c,s=Nk(e,c))),s===1)throw o=pk,Kk(e,0),Ck(e,a),Dk(e,B()),o;if(s===6)Ck(e,a);else{if(c=e.current.alternate,!(a&30)&&!Ok(c)&&(s=Ik(e,a),s===2&&(h=xc(e),h!==0&&(a=h,s=Nk(e,h))),s===1))throw o=pk,Kk(e,0),Ck(e,a),Dk(e,B()),o;switch(e.finishedWork=c,e.finishedLanes=a,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){R(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(s=e.eventTimes,c=-1;0<a;){var g=31-oc(a);h=1<<g,g=s[g],g>c&&(c=g),a&=~h}if(a=c,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===o?Gk.bind(null,e):null}function Nk(e,s){var o=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=o,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],h=c.getSnapshot;c=c.value;try{if(!He(h(),c))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var o=31-oc(s),a=1<<o;e[o]=-1,s&=~a}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var o=Ik(e,s);if(e.tag!==0&&o===2){var a=xc(e);a!==0&&(s=a,o=Nk(e,a))}if(o===1)throw o=pk,Kk(e,0),Ck(e,s),Dk(e,B()),o;if(o===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var o=K;K|=1;try{return e(s)}finally{K=o,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var o=ok.transition,a=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=a,ok.transition=o,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var a=o;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(o=fh[s],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,h=o.pending;if(h!==null){var g=h.next;h.next=c,a.next=g}o.pending=a}fh=null}return e}function Mk(e,s){do{var o=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,o===null||o.return===null){T=1,pk=s,Y=null;break}e:{var h=e,g=o.return,_=o,b=s;if(s=Z,_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,_e=_,j=_e.tag;if(!(_e.mode&1)&&(j===0||j===11||j===15)){var et=_e.alternate;et?(_e.updateQueue=et.updateQueue,_e.memoizedState=et.memoizedState,_e.lanes=et.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var tt=Ui(g);if(tt!==null){tt.flags&=-257,Vi(tt,g,_,h,s),tt.mode&1&&Si(h,$,s),s=tt,b=$;var nt=s.updateQueue;if(nt===null){var rt=new Set;rt.add(b),s.updateQueue=rt}else nt.add(b);break e}else{if(!(s&1)){Si(h,$,s),tj();break e}b=Error(p(426))}}else if(I&&_.mode&1){var ot=Ui(g);if(ot!==null){!(ot.flags&65536)&&(ot.flags|=256),Vi(ot,g,_,h,s),Jg(Ji(b,_));break e}}h=b=Ji(b,_),T!==4&&(T=2),sk===null?sk=[h]:sk.push(h),h=g;do{switch(h.tag){case 3:h.flags|=65536,s&=-s,h.lanes|=s;var it=Ni(h,b,s);ph(h,it);break e;case 1:_=b;var st=h.type,at=h.stateNode;if(!(h.flags&128)&&(typeof st.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){h.flags|=65536,s&=-s,h.lanes|=s;var lt=Qi(h,_,s);ph(h,lt);break e}}h=h.return}while(h!==null)}Sk(o)}catch(wt){s=wt,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var o=K;K|=2;var a=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(c){Mk(e,c)}while(!0);if($g(),K=o,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var o=s.alternate;if(e=s.return,s.flags&32768){if(o=Ij(o,s),o!==null){o.flags&=32767,Y=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(o=Ej(o,s,fj),o!==null){Y=o;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,o){var a=C,c=ok.transition;try{ok.transition=null,C=1,Wk(e,s,o,a)}finally{ok.transition=c,C=a}return null}function Wk(e,s,o,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var h=o.lanes|o.childLanes;if(Bc(e,h),e===Q&&(Y=Q=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),h=(o.flags&15990)!==0,o.subtreeFlags&15990||h){h=ok.transition,ok.transition=null;var g=C;C=1;var _=K;K|=4,nk.current=null,Oj(e,o),dk(o,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=o,hk(o),dc(),K=_,C=g,ok.transition=h}else e.current=o;if(vk&&(vk=!1,wk=e,xk=c),h=e.pendingLanes,h===0&&(Ri=null),mc(o.stateNode),Dk(e,B()),s!==null)for(a=e.onRecoverableError,o=0;o<s.length;o++)c=s[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),h=e.pendingLanes,h&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,o=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var c=K;for(K|=4,V=e.current;V!==null;){var h=V,g=h.child;if(V.flags&16){var _=h.deletions;if(_!==null){for(var b=0;b<_.length;b++){var $=_[b];for(V=$;V!==null;){var _e=V;switch(_e.tag){case 0:case 11:case 15:Pj(8,_e,h)}var j=_e.child;if(j!==null)j.return=_e,V=j;else for(;V!==null;){_e=V;var et=_e.sibling,tt=_e.return;if(Sj(_e),_e===$){V=null;break}if(et!==null){et.return=tt,V=et;break}V=tt}}}var nt=h.alternate;if(nt!==null){var rt=nt.child;if(rt!==null){nt.child=null;do{var ot=rt.sibling;rt.sibling=null,rt=ot}while(rt!==null)}}V=h}}if(h.subtreeFlags&2064&&g!==null)g.return=h,V=g;else e:for(;V!==null;){if(h=V,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Pj(9,h,h.return)}var it=h.sibling;if(it!==null){it.return=h.return,V=it;break e}V=h.return}}var st=e.current;for(V=st;V!==null;){g=V;var at=g.child;if(g.subtreeFlags&2064&&at!==null)at.return=g,V=at;else e:for(g=st;V!==null;){if(_=V,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:Qj(9,_)}}catch(wt){W(_,_.return,wt)}if(_===g){V=null;break e}var lt=_.sibling;if(lt!==null){lt.return=_.return,V=lt;break e}V=_.return}}if(K=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=o,ok.transition=s}}return!1}function Xk(e,s,o){s=Ji(o,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,o){if(e.tag===3)Xk(e,e,o);else for(;s!==null;){if(s.tag===3){Xk(s,e,o);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(o,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,o){var a=e.pingCache;a!==null&&a.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&o,Q===e&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=o),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var o=R();e=ih(e,s),e!==null&&(Ac(e,s,o),Dk(e,o))}function uj(e){var s=e.memoizedState,o=0;s!==null&&(o=s.retryLane),Yk(e,o)}function bk(e,s){var o=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(s),Yk(e,o)}var Vk;Vk=function(e,s,o){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&o)&&!(s.flags&128))return dh=!1,yj(e,s,o);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;ij(e,s),e=s.pendingProps;var c=Yf(s,H.current);ch(s,o),c=Nh(null,s,a,e,c,o);var h=Sh();return s.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(a)?(h=!0,cg(s)):h=!1,s.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(s),c.updater=Ei,s.stateNode=c,c._reactInternals=s,Ii(s,a,e,o),s=jj(null,s,a,!0,h,o)):(s.tag=0,I&&h&&vg(s),Xi(null,s,c,o),s=s.child),s;case 16:a=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,c=a._init,a=c(a._payload),s.type=a,c=s.tag=Zk(a),e=Ci(a,e),c){case 0:s=cj(null,s,a,e,o);break e;case 1:s=hj(null,s,a,e,o);break e;case 11:s=Yi(null,s,a,e,o);break e;case 14:s=$i(null,s,a,Ci(a.type,e),o);break e}throw Error(p(306,a,""))}return s;case 0:return a=s.type,c=s.pendingProps,c=s.elementType===a?c:Ci(a,c),cj(e,s,a,c,o);case 1:return a=s.type,c=s.pendingProps,c=s.elementType===a?c:Ci(a,c),hj(e,s,a,c,o);case 3:e:{if(kj(s),e===null)throw Error(p(387));a=s.pendingProps,h=s.memoizedState,c=h.element,lh(e,s),qh(s,a,null,o);var g=s.memoizedState;if(a=g.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){c=Ji(Error(p(423)),s),s=lj(e,s,a,o,c);break e}else if(a!==c){c=Ji(Error(p(424)),s),s=lj(e,s,a,o,c);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,o=Vg(s,null,a,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),a===c){s=Zi(e,s,o);break e}Xi(e,s,a,o)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),a=s.type,c=s.pendingProps,h=e!==null?e.memoizedProps:null,g=c.children,Ef(a,c)?g=null:h!==null&&Ef(a,h)&&(s.flags|=32),gj(e,s),Xi(e,s,g,o),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,o);case 4:return yh(s,s.stateNode.containerInfo),a=s.pendingProps,e===null?s.child=Ug(s,null,a,o):Xi(e,s,a,o),s.child;case 11:return a=s.type,c=s.pendingProps,c=s.elementType===a?c:Ci(a,c),Yi(e,s,a,c,o);case 7:return Xi(e,s,s.pendingProps,o),s.child;case 8:return Xi(e,s,s.pendingProps.children,o),s.child;case 12:return Xi(e,s,s.pendingProps.children,o),s.child;case 10:e:{if(a=s.type._context,c=s.pendingProps,h=s.memoizedProps,g=c.value,G(Wg,a._currentValue),a._currentValue=g,h!==null)if(He(h.value,g)){if(h.children===c.children&&!Wf.current){s=Zi(e,s,o);break e}}else for(h=s.child,h!==null&&(h.return=s);h!==null;){var _=h.dependencies;if(_!==null){g=h.child;for(var b=_.firstContext;b!==null;){if(b.context===a){if(h.tag===1){b=mh(-1,o&-o),b.tag=2;var $=h.updateQueue;if($!==null){$=$.shared;var _e=$.pending;_e===null?b.next=b:(b.next=_e.next,_e.next=b),$.pending=b}}h.lanes|=o,b=h.alternate,b!==null&&(b.lanes|=o),bh(h.return,o,s),_.lanes|=o;break}b=b.next}}else if(h.tag===10)g=h.type===s.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(p(341));g.lanes|=o,_=g.alternate,_!==null&&(_.lanes|=o),bh(g,o,s),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===s){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}Xi(e,s,c.children,o),s=s.child}return s;case 9:return c=s.type,a=s.pendingProps.children,ch(s,o),c=eh(c),a=a(c),s.flags|=1,Xi(e,s,a,o),s.child;case 14:return a=s.type,c=Ci(a,s.pendingProps),c=Ci(a.type,c),$i(e,s,a,c,o);case 15:return bj(e,s,s.type,s.pendingProps,o);case 17:return a=s.type,c=s.pendingProps,c=s.elementType===a?c:Ci(a,c),ij(e,s),s.tag=1,Zf(a)?(e=!0,cg(s)):e=!1,ch(s,o),Gi(s,a,c),Ii(s,a,c,o),jj(null,s,a,!0,e,o);case 19:return xj(e,s,o);case 22:return dj(e,s,o)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,o,a){return new $k(e,s,o,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var o=e.alternate;return o===null?(o=Bg(e.tag,s,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=s,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Rg(e,s,o,a,c,h){var g=2;if(a=e,typeof e=="function")aj(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ya:return Tg(o.children,c,h,s);case za:g=8,c|=8;break;case Aa:return e=Bg(12,o,s,c|2),e.elementType=Aa,e.lanes=h,e;case Ea:return e=Bg(13,o,s,c),e.elementType=Ea,e.lanes=h,e;case Fa:return e=Bg(19,o,s,c),e.elementType=Fa,e.lanes=h,e;case Ia:return pj(o,c,h,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:g=10;break e;case Ca:g=9;break e;case Da:g=11;break e;case Ga:g=14;break e;case Ha:g=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(g,o,s,c),s.elementType=e,s.type=a,s.lanes=h,s}function Tg(e,s,o,a){return e=Bg(7,e,a,s),e.lanes=o,e}function pj(e,s,o,a){return e=Bg(22,e,a,s),e.elementType=Ia,e.lanes=o,e.stateNode={isHidden:!1},e}function Qg(e,s,o){return e=Bg(6,e,null,s),e.lanes=o,e}function Sg(e,s,o){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=o,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,o,a,c){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(e,s,o,a,c,h,g,_,b){return e=new al(e,s,o,_,b),s===1?(s=1,h===!0&&(s|=8)):s=0,h=Bg(3,null,null,s),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(h),e}function cl(e,s,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:s,implementation:o}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var o=e.type;if(Zf(o))return bg(e,o,s)}return s}function el(e,s,o,a,c,h,g,_,b){return e=bl(o,a,!0,e,c,h,g,_,b),e.context=dl(null),o=e.current,a=R(),c=yi(o),h=mh(a,c),h.callback=s??null,nh(o,h,c),e.current.lanes=c,Ac(e,c,a),Dk(e,a),e}function fl(e,s,o,a){var c=s.current,h=R(),g=yi(c);return o=dl(o),s.context===null?s.context=o:s.pendingContext=o,s=mh(h,g),s.payload={element:e},a=a===void 0?null:a,a!==null&&(s.callback=a),e=nh(c,s,g),e!==null&&(gi(e,c,g,h),oh(e,c,g)),g}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<s?o:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var o=0;o<Qc.length&&s!==0&&s<Qc[o].priority;o++);Qc.splice(o,0,e),o===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,o,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var $=gl(g);h.call($)}}var g=el(s,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=g,e[uf]=g.current,sf(e.nodeType===8?e.parentNode:e),Rk(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var _=a;a=function(){var $=gl(b);_.call($)}}var b=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=b,e[uf]=b.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,b,o,a)}),b}function rl(e,s,o,a,c){var h=o._reactRootContainer;if(h){var g=h;if(typeof c=="function"){var _=c;c=function(){var b=gl(g);_.call(b)}}fl(s,g,e,c)}else g=ql(o,s,e,c,a);return gl(g)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var o=tc(s.pendingLanes);o!==0&&(Cc(s,o|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var c=R();gi(a,e,1,c)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var o=R();gi(s,e,134217728,o)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),o=ih(e,s);if(o!==null){var a=R();gi(o,e,s,a)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var o=C;try{return C=e,s()}finally{C=o}};yb=function(e,s,o){switch(s){case"input":if(bb(e,o),s=o.name,o.type==="radio"&&s!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var a=o[s];if(a!==e&&a.form===e.form){var c=Db(a);if(!c)throw Error(p(90));Wa(a),bb(a,c)}}}break;case"textarea":ib(e,o);break;case"select":s=o.value,s!=null&&fb(e,!!o.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,o)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var o=!1,a="",c=kl;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(c=s.onRecoverableError)),s=bl(e,1,!1,null,null,o,!1,a,c),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,o){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,o)};reactDom_production_min.hydrateRoot=function(e,s,o){if(!nl(e))throw Error(p(405));var a=o!=null&&o.hydratedSources||null,c=!1,h="",g=kl;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),s=el(s,null,e,1,o??null,c,!1,h,g),e[uf]=s.current,sf(e),a)for(e=0;e<a.length;e++)o=a[e],c=o._getVersion,c=c(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,c]:s.mutableSourceEagerHydrationData.push(o,c);return new ml(s)};reactDom_production_min.render=function(e,s,o){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,o)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,o,a){if(!ol(o))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,o,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;const warn=(...e)=>{console!=null&&console.warn&&(isString(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},alreadyWarned={},warnOnce=(...e)=>{isString(e[0])&&alreadyWarned[e[0]]||(isString(e[0])&&(alreadyWarned[e[0]]=new Date),warn(...e))},loadedClb=(e,s)=>()=>{if(e.isInitialized)s();else{const o=()=>{setTimeout(()=>{e.off("initialized",o)},0),s()};e.on("initialized",o)}},loadNamespaces=(e,s,o)=>{e.loadNamespaces(s,loadedClb(e,o))},loadLanguages=(e,s,o,a)=>{isString(o)&&(o=[o]),o.forEach(c=>{e.options.ns.indexOf(c)<0&&e.options.ns.push(c)}),e.loadLanguages(s,loadedClb(e,a))},hasLoadedNamespace=(e,s,o={})=>!s.languages||!s.languages.length?(warnOnce("i18n.languages were undefined or empty",s.languages),!0):s.hasLoadedNamespace(e,{lng:o.lng,precheck:(a,c)=>{var h;if(((h=o.bindI18n)==null?void 0:h.indexOf("languageChanging"))>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!c(a.isLanguageChangingTo,e))return!1}}),isString=e=>typeof e=="string",isObject=e=>typeof e=="object"&&e!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=e=>htmlEntities[e],unescape=e=>e.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=(e={})=>{defaultOptions={...defaultOptions,...e}},getDefaults$1=()=>defaultOptions;let i18nInstance;const setI18n=e=>{i18nInstance=e},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(e){setDefaults(e.options.react),setI18n(e)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(o=>{this.usedNamespaces[o]||(this.usedNamespaces[o]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(e,s)=>{const o=reactExports.useRef();return reactExports.useEffect(()=>{o.current=e},[e,s]),o.current},alwaysNewT=(e,s,o,a)=>e.getFixedT(s,o,a),useMemoizedT=(e,s,o,a)=>reactExports.useCallback(alwaysNewT(e,s,o,a),[e,s,o,a]),useTranslation=(e,s={})=>{var lt,wt,gt,pt;const{i18n:o}=s,{i18n:a,defaultNS:c}=reactExports.useContext(I18nContext)||{},h=o||a||getI18n();if(h&&!h.reportNamespaces&&(h.reportNamespaces=new ReportNamespaces),!h){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const yt=(kt,dt)=>isString(dt)?dt:isObject(dt)&&isString(dt.defaultValue)?dt.defaultValue:Array.isArray(kt)?kt[kt.length-1]:kt,St=[yt,{},!1];return St.t=yt,St.i18n={},St.ready=!1,St}(lt=h.options.react)!=null&&lt.wait&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const g={...getDefaults$1(),...h.options.react,...s},{useSuspense:_,keyPrefix:b}=g;let $=e||c||((wt=h.options)==null?void 0:wt.defaultNS);$=isString($)?[$]:$||["translation"],(pt=(gt=h.reportNamespaces).addUsedNamespaces)==null||pt.call(gt,$);const _e=(h.isInitialized||h.initializedStoreOnce)&&$.every(yt=>hasLoadedNamespace(yt,h,g)),j=useMemoizedT(h,s.lng||null,g.nsMode==="fallback"?$:$[0],b),et=()=>j,tt=()=>alwaysNewT(h,s.lng||null,g.nsMode==="fallback"?$:$[0],b),[nt,rt]=reactExports.useState(et);let ot=$.join();s.lng&&(ot=`${s.lng}${ot}`);const it=usePrevious(ot),st=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:yt,bindI18nStore:St}=g;st.current=!0,!_e&&!_&&(s.lng?loadLanguages(h,s.lng,$,()=>{st.current&&rt(tt)}):loadNamespaces(h,$,()=>{st.current&&rt(tt)})),_e&&it&&it!==ot&&st.current&&rt(tt);const kt=()=>{st.current&&rt(tt)};return yt&&(h==null||h.on(yt,kt)),St&&(h==null||h.store.on(St,kt)),()=>{st.current=!1,h&&(yt==null||yt.split(" ").forEach(dt=>h.off(dt,kt))),St&&h&&St.split(" ").forEach(dt=>h.store.off(dt,kt))}},[h,ot]),reactExports.useEffect(()=>{st.current&&_e&&rt(et)},[h,b,_e]);const at=[nt,h,_e];if(at.t=nt,at.i18n=h,at.ready=_e,_e||!_e&&!_)return at;throw new Promise(yt=>{s.lng?loadLanguages(h,s.lng,$,()=>yt()):loadNamespaces(h,$,()=>yt())})},menuItems=[{id:"home",label:"Startseite"},{id:"nip1",label:"NIP-01"},{id:"nip2",label:"NIP-02"}],Navbar=({setActivePage:e,activePage:s})=>{const{i18n:o}=useTranslation(),[a,c]=reactExports.useState(!1),h=b=>{o.changeLanguage(b)},g=()=>{c(!a)},_=b=>{e(b),c(!1),window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"language-switcher",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("de"),children:"DE"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("en"),children:"EN"})]}),a&&jsxRuntimeExports.jsx("div",{className:"blur-background"}),jsxRuntimeExports.jsxs("nav",{className:"navbar",children:[jsxRuntimeExports.jsx("div",{className:"menu-icon",onClick:g,children:""}),jsxRuntimeExports.jsx("ul",{className:a?"show":"",children:menuItems.map(({id:b,label:$})=>jsxRuntimeExports.jsx("li",{onClick:()=>_(b),className:s===b?"active":"",children:$},b))})]})]})},SECTIONS=[{title:"what_are_nips",contents:["nips_intro","nips_docs","nips_website"]},{title:"what_are_relays",contents:["relays_intro"]},{title:"what_are_clients",contents:["clients_intro"]},{title:"summary",contents:["summary_text"]}],Home=()=>{const{t:e,ready:s}=useTranslation("home");return s?jsxRuntimeExports.jsxs("article",{className:"home",children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsx("h1",{children:e("welcome")}),jsxRuntimeExports.jsx("p",{className:"intro",children:e("nostr_intro")})]}),SECTIONS.map(({title:o,contents:a})=>jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{children:e(o)}),a.map(c=>jsxRuntimeExports.jsx("p",{children:e(c)},c))]},o))]}):jsxRuntimeExports.jsx("div",{className:"loading",children:"Loading..."})};var node={};Object.defineProperty(node,"__esModule",{value:!0});node.is_node=void 0;function is_node(){return is_node_===null&&(is_node_=typeof commonjsGlobal=="object"&&is_node_process(commonjsGlobal)),is_node_}node.is_node=is_node;function is_node_process(e){return e!==null&&typeof e.process=="object"&&e.process!==null&&typeof e.process.versions=="object"&&e.process.versions!==null&&typeof e.process.versions.node<"u"}var is_node_=null,WebSocket$1={},global$2,hasRequiredGlobal$2;function requireGlobal$2(){if(hasRequiredGlobal$2)return global$2;hasRequiredGlobal$2=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return global$2=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),global$2}const name="websocket",description="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version$1="1.0.35",repository={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage="https://github.com/theturtle32/WebSocket-Node",engines={node:">=4.0.0"},dependencies={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config={verbose:!1},scripts={test:"tape test/unit/*.js",gulp:"gulp"},main="index",directories={lib:"./lib"},browser$2="lib/browser.js",license="Apache-2.0",require$$0={name,description,keywords,author,contributors,version:version$1,repository,homepage,engines,dependencies,devDependencies,config,scripts,main,directories,browser:browser$2,license};var version,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version=require$$0.version),version}var browser$1,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1;hasRequiredBrowser=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=requireGlobal$2()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var s=e.WebSocket||e.MozWebSocket,o=requireVersion();function a(c,h){var g;return h?g=new s(c,h):g=new s(c),g}return s&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(c){Object.defineProperty(a,c,{get:function(){return s[c]}})}),browser$1={w3cwebsocket:s?a:null,version:o},browser$1}var EventTarget={},HashSet={},UniqueSet={},SetContainer={},Container={},ForOfAdaptor={},hasRequiredForOfAdaptor;function requireForOfAdaptor(){if(hasRequiredForOfAdaptor)return ForOfAdaptor;hasRequiredForOfAdaptor=1,Object.defineProperty(ForOfAdaptor,"__esModule",{value:!0}),ForOfAdaptor.ForOfAdaptor=void 0;var e=function(){function s(o,a){this.it_=o,this.last_=a}return s.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var o=this.it_;return this.it_=this.it_.next(),{done:!1,value:o.value}},s.prototype[Symbol.iterator]=function(){return this},s}();return ForOfAdaptor.ForOfAdaptor=e,ForOfAdaptor}var hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return Container;hasRequiredContainer=1;var e=commonjsGlobal&&commonjsGlobal.__values||function(a){var c=typeof Symbol=="function"&&Symbol.iterator,h=c&&a[c],g=0;if(h)return h.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&g>=a.length&&(a=void 0),{value:a&&a[g++],done:!a}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Container,"__esModule",{value:!0}),Container.Container=void 0;var s=requireForOfAdaptor(),o=function(){function a(){}return a.prototype.empty=function(){return this.size()===0},a.prototype.rbegin=function(){return this.end().reverse()},a.prototype.rend=function(){return this.begin().reverse()},a.prototype[Symbol.iterator]=function(){return new s.ForOfAdaptor(this.begin(),this.end())},a.prototype.toJSON=function(){var c,h,g=[];try{for(var _=e(this),b=_.next();!b.done;b=_.next()){var $=b.value;g.push($)}}catch(_e){c={error:_e}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(c)throw c.error}}return g},a}();return Container.Container=o,Container}var NativeArrayIterator={},hasRequiredNativeArrayIterator;function requireNativeArrayIterator(){if(hasRequiredNativeArrayIterator)return NativeArrayIterator;hasRequiredNativeArrayIterator=1;var e=commonjsGlobal&&commonjsGlobal.__read||function(o,a){var c=typeof Symbol=="function"&&o[Symbol.iterator];if(!c)return o;var h=c.call(o),g,_=[],b;try{for(;(a===void 0||a-- >0)&&!(g=h.next()).done;)_.push(g.value)}catch($){b={error:$}}finally{try{g&&!g.done&&(c=h.return)&&c.call(h)}finally{if(b)throw b.error}}return _};Object.defineProperty(NativeArrayIterator,"__esModule",{value:!0}),NativeArrayIterator.NativeArrayIterator=void 0;var s=function(){function o(a,c){this.data_=a,this.index_=c}return o.prototype.index=function(){return this.index_},Object.defineProperty(o.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),o.prototype.prev=function(){return--this.index_,this},o.prototype.next=function(){return++this.index_,this},o.prototype.advance=function(a){return this.index_+=a,this},o.prototype.equals=function(a){return this.data_===a.data_&&this.index_===a.index_},o.prototype.swap=function(a){var c,h;c=e([a.data_,this.data_],2),this.data_=c[0],a.data_=c[1],h=e([a.index_,this.index_],2),this.index_=h[0],a.index_=h[1]},o}();return NativeArrayIterator.NativeArrayIterator=s,NativeArrayIterator}var hasRequiredSetContainer;function requireSetContainer(){if(hasRequiredSetContainer)return SetContainer;hasRequiredSetContainer=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var c=function(h,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(_[$]=b[$])},c(h,g)};return function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(h,g);function _(){this.constructor=h}h.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}}();Object.defineProperty(SetContainer,"__esModule",{value:!0}),SetContainer.SetContainer=void 0;var s=requireContainer(),o=requireNativeArrayIterator(),a=function(c){e(h,c);function h(g){var _=c.call(this)||this;return _.data_=g(_),_}return h.prototype.assign=function(g,_){this.clear(),this.insert(g,_)},h.prototype.clear=function(){this.data_.clear()},h.prototype.begin=function(){return this.data_.begin()},h.prototype.end=function(){return this.data_.end()},h.prototype.has=function(g){return!this.find(g).equals(this.end())},h.prototype.size=function(){return this.data_.size()},h.prototype.push=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];if(g.length===0)return this.size();var b=new o.NativeArrayIterator(g,0),$=new o.NativeArrayIterator(g,g.length);return this._Insert_by_range(b,$),this.size()},h.prototype.insert=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];return g.length===1?this._Insert_by_key(g[0]):g[0].next instanceof Function&&g[1].next instanceof Function?this._Insert_by_range(g[0],g[1]):this._Insert_by_hint(g[0],g[1])},h.prototype.erase=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];return g.length===1&&!(g[0]instanceof this.end().constructor&&g[0].source()===this)?this._Erase_by_val(g[0]):g.length===1?this._Erase_by_range(g[0]):this._Erase_by_range(g[0],g[1])},h.prototype._Erase_by_range=function(g,_){_===void 0&&(_=g.next());var b=this.data_.erase(g,_);return this._Handle_erase(g,_),b},h}(s.Container);return SetContainer.SetContainer=a,SetContainer}var ErrorGenerator={},InvalidArgument={},LogicError={},Exception={},hasRequiredException;function requireException(){if(hasRequiredException)return Exception;hasRequiredException=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var o=function(a,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(h[_]=g[_])},o(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(a,c);function h(){this.constructor=a}a.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(Exception,"__esModule",{value:!0}),Exception.Exception=void 0;var s=function(o){e(a,o);function a(c){var h=this.constructor,g=o.call(this,c)||this,_=h.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(g,_):g.__proto__=_,g}return Object.defineProperty(a.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),a.prototype.what=function(){return this.message},a.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},a}(Error);return Exception.Exception=s,Exception}var hasRequiredLogicError;function requireLogicError(){if(hasRequiredLogicError)return LogicError;hasRequiredLogicError=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(g[b]=_[b])},a(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(LogicError,"__esModule",{value:!0}),LogicError.LogicError=void 0;var s=requireException(),o=function(a){e(c,a);function c(h){return a.call(this,h)||this}return c}(s.Exception);return LogicError.LogicError=o,LogicError}var hasRequiredInvalidArgument;function requireInvalidArgument(){if(hasRequiredInvalidArgument)return InvalidArgument;hasRequiredInvalidArgument=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(g[b]=_[b])},a(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(InvalidArgument,"__esModule",{value:!0}),InvalidArgument.InvalidArgument=void 0;var s=requireLogicError(),o=function(a){e(c,a);function c(h){return a.call(this,h)||this}return c}(s.LogicError);return InvalidArgument.InvalidArgument=o,InvalidArgument}var OutOfRange={},hasRequiredOutOfRange;function requireOutOfRange(){if(hasRequiredOutOfRange)return OutOfRange;hasRequiredOutOfRange=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(g[b]=_[b])},a(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(OutOfRange,"__esModule",{value:!0}),OutOfRange.OutOfRange=void 0;var s=requireLogicError(),o=function(a){e(c,a);function c(h){return a.call(this,h)||this}return c}(s.LogicError);return OutOfRange.OutOfRange=o,OutOfRange}var hasRequiredErrorGenerator;function requireErrorGenerator(){return hasRequiredErrorGenerator||(hasRequiredErrorGenerator=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorGenerator=void 0;var s=requireInvalidArgument(),o=requireOutOfRange();(function(a){function c(tt){if(typeof tt=="string")return tt;var nt=tt.constructor.name;return tt.constructor.__MODULE&&(nt="".concat(tt.constructor.__MODULE,".").concat(nt)),"std.".concat(nt)}a.get_class_name=c;function h(tt,nt){return new o.OutOfRange("Error on ".concat(c(tt),".").concat(nt,"(): it's empty container."))}a.empty=h;function g(tt,nt,rt){return new o.OutOfRange("Error on ".concat(c(tt),".").concat(nt,"(): parametric index is negative -> (index = ").concat(rt,")."))}a.negative_index=g;function _(tt,nt,rt,ot){return new o.OutOfRange("Error on ".concat(c(tt),".").concat(nt,"(): parametric index is equal or greater than size -> (index = ").concat(rt,", size: ").concat(ot,")."))}a.excessive_index=_;function b(tt,nt){return new s.InvalidArgument("Error on ".concat(c(tt),".").concat(nt,"(): parametric iterator is not this container's own."))}a.not_my_iterator=b;function $(tt,nt){return new s.InvalidArgument("Error on ".concat(c(tt),".").concat(nt,"(): parametric iterator, it already has been erased."))}a.erased_iterator=$;function _e(tt,nt,rt){return new o.OutOfRange("Error on ".concat(c(tt),".").concat(nt,"(): parametric iterator is directing negative position -> (index = ").concat(rt,")."))}a.negative_iterator=_e;function j(tt,nt){nt===void 0&&(nt="end");var rt=c(tt);return new o.OutOfRange("Error on ".concat(rt,".Iterator.value: cannot access to the ").concat(rt,".").concat(nt,"().value."))}a.iterator_end_value=j;function et(tt,nt,rt){throw new o.OutOfRange("Error on ".concat(c(tt),".").concat(nt,"(): unable to find the matched key -> ").concat(rt))}a.key_nout_found=et})(e.ErrorGenerator||(e.ErrorGenerator={}))}(ErrorGenerator)),ErrorGenerator}var hasRequiredUniqueSet;function requireUniqueSet(){if(hasRequiredUniqueSet)return UniqueSet;hasRequiredUniqueSet=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var g=function(_,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var j in _e)Object.prototype.hasOwnProperty.call(_e,j)&&($[j]=_e[j])},g(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(_,b);function $(){this.constructor=_}_.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}(),s=commonjsGlobal&&commonjsGlobal.__read||function(g,_){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var $=b.call(g),_e,j=[],et;try{for(;(_===void 0||_-- >0)&&!(_e=$.next()).done;)j.push(_e.value)}catch(tt){et={error:tt}}finally{try{_e&&!_e.done&&(b=$.return)&&b.call($)}finally{if(et)throw et.error}}return j},o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(g,_,b){if(b||arguments.length===2)for(var $=0,_e=_.length,j;$<_e;$++)(j||!($ in _))&&(j||(j=Array.prototype.slice.call(_,0,$)),j[$]=_[$]);return g.concat(j||Array.prototype.slice.call(_))};Object.defineProperty(UniqueSet,"__esModule",{value:!0}),UniqueSet.UniqueSet=void 0;var a=requireSetContainer(),c=requireErrorGenerator(),h=function(g){e(_,g);function _(){return g!==null&&g.apply(this,arguments)||this}return _.prototype.count=function(b){return this.find(b).equals(this.end())?0:1},_.prototype.insert=function(){for(var b=[],$=0;$<arguments.length;$++)b[$]=arguments[$];return g.prototype.insert.apply(this,o([],s(b),!1))},_.prototype._Insert_by_range=function(b,$){for(;!b.equals($);b=b.next())this._Insert_by_key(b.value)},_.prototype.extract=function(b){return b instanceof this.end().constructor?this._Extract_by_iterator(b):this._Extract_by_val(b)},_.prototype._Extract_by_val=function(b){var $=this.find(b);if($.equals(this.end())===!0)throw c.ErrorGenerator.key_nout_found(this,"extract",b);return this._Erase_by_range($),b},_.prototype._Extract_by_iterator=function(b){return b.equals(this.end())===!0||this.has(b.value)===!1?this.end():(this._Erase_by_range(b),b)},_.prototype._Erase_by_val=function(b){var $=this.find(b);return $.equals(this.end())===!0?0:(this._Erase_by_range($),1)},_.prototype.merge=function(b){for(var $=b.begin();!$.equals(b.end());)this.has($.value)===!1?(this.insert($.value),$=b.erase($)):$=$.next()},_}(a.SetContainer);return UniqueSet.UniqueSet=h,UniqueSet}var IHashContainer={},IAssociativeContainer={},hasRequiredIAssociativeContainer;function requireIAssociativeContainer(){return hasRequiredIAssociativeContainer||(hasRequiredIAssociativeContainer=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__read||function(a,c){var h=typeof Symbol=="function"&&a[Symbol.iterator];if(!h)return a;var g=h.call(a),_,b=[],$;try{for(;(c===void 0||c-- >0)&&!(_=g.next()).done;)b.push(_.value)}catch(_e){$={error:_e}}finally{try{_&&!_.done&&(h=g.return)&&h.call(g)}finally{if($)throw $.error}}return b},o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(a,c,h){if(h||arguments.length===2)for(var g=0,_=c.length,b;g<_;g++)(b||!(g in c))&&(b||(b=Array.prototype.slice.call(c,0,g)),b[g]=c[g]);return a.concat(b||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.IAssociativeContainer=void 0,function(a){function c(h){for(var g=[],_=1;_<arguments.length;_++)g[_-1]=arguments[_];var b,$;return g.length>=1&&g[0]instanceof Array?(b=function(){var _e=g[0];h.push.apply(h,o([],s(_e),!1))},$=g.slice(1)):g.length>=2&&g[0].next instanceof Function&&g[1].next instanceof Function?(b=function(){var _e=g[0],j=g[1];h.assign(_e,j)},$=g.slice(2)):(b=null,$=g),{ramda:b,tail:$}}a.construct=c}(e.IAssociativeContainer||(e.IAssociativeContainer={}))}(IAssociativeContainer)),IAssociativeContainer}var hash$3={},uid={},Global={},hasRequiredGlobal$1;function requireGlobal$1(){if(hasRequiredGlobal$1)return Global;hasRequiredGlobal$1=1,Object.defineProperty(Global,"__esModule",{value:!0}),Global._Get_root=void 0;var e=node;function s(){return o===null&&(o=(0,e.is_node)()?commonjsGlobal:self,o.__s_iUID===void 0&&(o.__s_iUID=0)),o}Global._Get_root=s;var o=null;return Global}var hasRequiredUid;function requireUid(){if(hasRequiredUid)return uid;hasRequiredUid=1,Object.defineProperty(uid,"__esModule",{value:!0}),uid.get_uid=void 0;var e=requireGlobal$1();function s(o){if(o instanceof Object){if(o.hasOwnProperty("__get_m_iUID")===!1){var a=++(0,e._Get_root)().__s_iUID;Object.defineProperty(o,"__get_m_iUID",{value:function(){return a}})}return o.__get_m_iUID()}else return o===void 0?-1:0}return uid.get_uid=s,uid}var hasRequiredHash;function requireHash(){if(hasRequiredHash)return hash$3;hasRequiredHash=1;var e=commonjsGlobal&&commonjsGlobal.__values||function(b){var $=typeof Symbol=="function"&&Symbol.iterator,_e=$&&b[$],j=0;if(_e)return _e.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&j>=b.length&&(b=void 0),{value:b&&b[j++],done:!b}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(hash$3,"__esModule",{value:!0}),hash$3.hash=void 0;var s=requireUid();function o(){for(var b,$,_e=[],j=0;j<arguments.length;j++)_e[j]=arguments[j];var et=g;try{for(var tt=e(_e),nt=tt.next();!nt.done;nt=tt.next()){var rt=nt.value;rt=rt&&rt.valueOf();var ot=typeof rt;if(ot==="boolean")et=a(rt,et);else if(ot==="number"||ot==="bigint")et=c(rt,et);else if(ot==="string")et=h(rt,et);else if(rt instanceof Object&&rt.hashCode instanceof Function){var it=rt.hashCode();if(_e.length===1)return it;et=et^it,et*=_}else et=c((0,s.get_uid)(rt),et)}}catch(st){b={error:st}}finally{try{nt&&!nt.done&&($=tt.return)&&$.call(tt)}finally{if(b)throw b.error}}return Math.abs(et)}hash$3.hash=o;function a(b,$){return $^=b?1:0,$*=_,$}function c(b,$){return h(b.toString(),$)}function h(b,$){for(var _e=0;_e<b.length;++_e)$^=b.charCodeAt(_e),$*=_;return Math.abs($)}var g=2166136261,_=16777619;return hash$3}var comparators={},hasRequiredComparators;function requireComparators(){if(hasRequiredComparators)return comparators;hasRequiredComparators=1,Object.defineProperty(comparators,"__esModule",{value:!0}),comparators.greater_equal=comparators.greater=comparators.less_equal=comparators.less=comparators.not_equal_to=comparators.equal_to=void 0;var e=requireUid();function s(_,b){return _=_&&_.valueOf(),b=b&&b.valueOf(),_ instanceof Object&&_.equals instanceof Function?_.equals(b):_===b}comparators.equal_to=s;function o(_,b){return!s(_,b)}comparators.not_equal_to=o;function a(_,b){return _=_.valueOf(),b=b.valueOf(),_ instanceof Object?_.less instanceof Function?_.less(b):(0,e.get_uid)(_)<(0,e.get_uid)(b):_<b}comparators.less=a;function c(_,b){return a(_,b)||s(_,b)}comparators.less_equal=c;function h(_,b){return!c(_,b)}comparators.greater=h;function g(_,b){return!a(_,b)}return comparators.greater_equal=g,comparators}var hasRequiredIHashContainer;function requireIHashContainer(){return hasRequiredIHashContainer||(hasRequiredIHashContainer=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__read||function(g,_){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var $=b.call(g),_e,j=[],et;try{for(;(_===void 0||_-- >0)&&!(_e=$.next()).done;)j.push(_e.value)}catch(tt){et={error:tt}}finally{try{_e&&!_e.done&&(b=$.return)&&b.call($)}finally{if(et)throw et.error}}return j},o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(g,_,b){if(b||arguments.length===2)for(var $=0,_e=_.length,j;$<_e;$++)(j||!($ in _))&&(j||(j=Array.prototype.slice.call(_,0,$)),j[$]=_[$]);return g.concat(j||Array.prototype.slice.call(_))};Object.defineProperty(e,"__esModule",{value:!0}),e.IHashContainer=void 0;var a=requireIAssociativeContainer(),c=requireHash(),h=requireComparators();(function(g){function _(b,$,_e){for(var j=[],et=3;et<arguments.length;et++)j[et-3]=arguments[et];var tt=null,nt=c.hash,rt=h.equal_to;if(j.length===1&&j[0]instanceof $){var ot=j[0];nt=ot.hash_function(),rt=ot.key_eq(),tt=function(){var st=ot.begin(),at=ot.end();b.assign(st,at)}}else{var it=a.IAssociativeContainer.construct.apply(a.IAssociativeContainer,o([b],s(j),!1));tt=it.ramda,it.tail.length>=1&&(nt=it.tail[0]),it.tail.length>=2&&(rt=it.tail[1])}_e(nt,rt),tt!==null&&tt()}g.construct=_})(e.IHashContainer||(e.IHashContainer={}))}(IHashContainer)),IHashContainer}var SetElementList={},ListContainer={},ListIterator={},hasRequiredListIterator;function requireListIterator(){if(hasRequiredListIterator)return ListIterator;hasRequiredListIterator=1,Object.defineProperty(ListIterator,"__esModule",{value:!0}),ListIterator.ListIterator=void 0;var e=requireErrorGenerator(),s=function(){function o(a,c,h){this.prev_=a,this.next_=c,this.value_=h}return o._Set_prev=function(a,c){a.prev_=c},o._Set_next=function(a,c){a.next_=c},o.prototype.prev=function(){return this.prev_},o.prototype.next=function(){return this.next_},Object.defineProperty(o.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),o.prototype._Try_value=function(){if(this.value_===void 0&&this.equals(this.source().end())===!0)throw e.ErrorGenerator.iterator_end_value(this.source())},o.prototype.equals=function(a){return this===a},o}();return ListIterator.ListIterator=s,ListIterator}var Repeater={},hasRequiredRepeater;function requireRepeater(){if(hasRequiredRepeater)return Repeater;hasRequiredRepeater=1,Object.defineProperty(Repeater,"__esModule",{value:!0}),Repeater.Repeater=void 0;var e=function(){function s(o,a){this.index_=o,this.value_=a}return s.prototype.index=function(){return this.index_},Object.defineProperty(s.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),s.prototype.next=function(){return++this.index_,this},s.prototype.equals=function(o){return this.index_===o.index_},s}();return Repeater.Repeater=e,Repeater}var global$1={},hasRequiredGlobal;function requireGlobal(){if(hasRequiredGlobal)return global$1;hasRequiredGlobal=1,Object.defineProperty(global$1,"__esModule",{value:!0}),global$1.next=global$1.prev=global$1.advance=global$1.distance=global$1.size=global$1.empty=void 0;var e=requireInvalidArgument();function s(b){return b instanceof Array?b.length!==0:b.empty()}global$1.empty=s;function o(b){return b instanceof Array?b.length:b.size()}global$1.size=o;function a(b,$){if(b.index instanceof Function)return c(b,$);for(var _e=0;!b.equals($);b=b.next())++_e;return _e}global$1.distance=a;function c(b,$){var _e=b.index(),j=$.index();return b.base instanceof Function?_e-j:j-_e}function h(b,$){if($===0)return b;if(b.advance instanceof Function)return b.advance($);var _e;if($<0){if(!(b.prev instanceof Function))throw new e.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");_e=function(j){return j.prev()},$=-$}else _e=function(j){return j.next()};for(;$-- >0;)b=_e(b);return b}global$1.advance=h;function g(b,$){return $===void 0&&($=1),$===1?b.prev():h(b,-$)}global$1.prev=g;function _(b,$){return $===void 0&&($=1),$===1?b.next():h(b,$)}return global$1.next=_,global$1}var hasRequiredListContainer;function requireListContainer(){if(hasRequiredListContainer)return ListContainer;hasRequiredListContainer=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var $=function(_e,j){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])},$(_e,j)};return function(_e,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");$(_e,j);function et(){this.constructor=_e}_e.prototype=j===null?Object.create(j):(et.prototype=j.prototype,new et)}}(),s=commonjsGlobal&&commonjsGlobal.__read||function($,_e){var j=typeof Symbol=="function"&&$[Symbol.iterator];if(!j)return $;var et=j.call($),tt,nt=[],rt;try{for(;(_e===void 0||_e-- >0)&&!(tt=et.next()).done;)nt.push(tt.value)}catch(ot){rt={error:ot}}finally{try{tt&&!tt.done&&(j=et.return)&&j.call(et)}finally{if(rt)throw rt.error}}return nt};Object.defineProperty(ListContainer,"__esModule",{value:!0}),ListContainer.ListContainer=void 0;var o=requireContainer(),a=requireListIterator(),c=requireRepeater(),h=requireNativeArrayIterator(),g=requireGlobal(),_=requireErrorGenerator(),b=function($){e(_e,$);function _e(){var j=$.call(this)||this;return j.end_=j._Create_iterator(null,null),j.clear(),j}return _e.prototype.assign=function(j,et){this.clear(),this.insert(this.end(),j,et)},_e.prototype.clear=function(){a.ListIterator._Set_prev(this.end_,this.end_),a.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},_e.prototype.resize=function(j){var et=j-this.size();et>0?this.insert(this.end(),et,void 0):et<0&&this.erase((0,g.advance)(this.end(),-et),this.end())},_e.prototype.begin=function(){return this.begin_},_e.prototype.end=function(){return this.end_},_e.prototype.size=function(){return this.size_},_e.prototype.push_front=function(j){this.insert(this.begin_,j)},_e.prototype.push_back=function(j){this.insert(this.end_,j)},_e.prototype.pop_front=function(){if(this.empty()===!0)throw _.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},_e.prototype.pop_back=function(){if(this.empty()===!0)throw _.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},_e.prototype.push=function(){for(var j=[],et=0;et<arguments.length;et++)j[et]=arguments[et];if(j.length===0)return this.size();var tt=new h.NativeArrayIterator(j,0),nt=new h.NativeArrayIterator(j,j.length);return this._Insert_by_range(this.end(),tt,nt),this.size()},_e.prototype.insert=function(j){for(var et=[],tt=1;tt<arguments.length;tt++)et[tt-1]=arguments[tt];if(j.source()!==this.end_.source())throw _.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(j.erased_===!0)throw _.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return et.length===1?this._Insert_by_repeating_val(j,1,et[0]):et.length===2&&typeof et[0]=="number"?this._Insert_by_repeating_val(j,et[0],et[1]):this._Insert_by_range(j,et[0],et[1])},_e.prototype._Insert_by_repeating_val=function(j,et,tt){var nt=new c.Repeater(0,tt),rt=new c.Repeater(et);return this._Insert_by_range(j,nt,rt)},_e.prototype._Insert_by_range=function(j,et,tt){for(var nt=j.prev(),rt=null,ot=0,it=et;it.equals(tt)===!1;it=it.next()){var st=this._Create_iterator(nt,null,it.value);ot===0&&(rt=st),a.ListIterator._Set_next(nt,st),nt=st,++ot}return j.equals(this.begin())===!0&&(this.begin_=rt),a.ListIterator._Set_next(nt,j),a.ListIterator._Set_prev(j,nt),this.size_+=ot,rt},_e.prototype.erase=function(j,et){return et===void 0&&(et=j.next()),this._Erase_by_range(j,et)},_e.prototype._Erase_by_range=function(j,et){if(j.source()!==this.end_.source())throw _.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(j.erased_===!0)throw _.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(j.equals(this.end_))return this.end_;var tt=j.prev();a.ListIterator._Set_next(tt,et),a.ListIterator._Set_prev(et,tt);for(var nt=j;!nt.equals(et);nt=nt.next())nt.erased_=!0,--this.size_;return j.equals(this.begin_)&&(this.begin_=et),et},_e.prototype.swap=function(j){var et,tt,nt;et=s([j.begin_,this.begin_],2),this.begin_=et[0],j.begin_=et[1],tt=s([j.end_,this.end_],2),this.end_=tt[0],j.end_=tt[1],nt=s([j.size_,this.size_],2),this.size_=nt[0],j.size_=nt[1]},_e}(o.Container);return ListContainer.ListContainer=b,ListContainer}var ReverseIterator={},hasRequiredReverseIterator;function requireReverseIterator(){if(hasRequiredReverseIterator)return ReverseIterator;hasRequiredReverseIterator=1,Object.defineProperty(ReverseIterator,"__esModule",{value:!0}),ReverseIterator.ReverseIterator=void 0;var e=function(){function s(o){this.base_=o.prev()}return s.prototype.source=function(){return this.base_.source()},s.prototype.base=function(){return this.base_.next()},Object.defineProperty(s.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),s.prototype.prev=function(){return this._Create_neighbor(this.base().next())},s.prototype.next=function(){return this._Create_neighbor(this.base_)},s.prototype.equals=function(o){return this.base_.equals(o.base_)},s}();return ReverseIterator.ReverseIterator=e,ReverseIterator}var hasRequiredSetElementList;function requireSetElementList(){return hasRequiredSetElementList||(hasRequiredSetElementList=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var _=function(b,$){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,j){_e.__proto__=j}||function(_e,j){for(var et in j)Object.prototype.hasOwnProperty.call(j,et)&&(_e[et]=j[et])},_(b,$)};return function(b,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");_(b,$);function _e(){this.constructor=b}b.prototype=$===null?Object.create($):(_e.prototype=$.prototype,new _e)}}(),o=commonjsGlobal&&commonjsGlobal.__read||function(_,b){var $=typeof Symbol=="function"&&_[Symbol.iterator];if(!$)return _;var _e=$.call(_),j,et=[],tt;try{for(;(b===void 0||b-- >0)&&!(j=_e.next()).done;)et.push(j.value)}catch(nt){tt={error:nt}}finally{try{j&&!j.done&&($=_e.return)&&$.call(_e)}finally{if(tt)throw tt.error}}return et};Object.defineProperty(e,"__esModule",{value:!0}),e.SetElementList=void 0;var a=requireListContainer(),c=requireListIterator(),h=requireReverseIterator(),g=function(_){s(b,_);function b($){var _e=_.call(this)||this;return _e.associative_=$,_e}return b.prototype._Create_iterator=function($,_e,j){return b.Iterator.create(this,$,_e,j)},b._Swap_associative=function($,_e){var j;j=o([_e.associative_,$.associative_],2),$.associative_=j[0],_e.associative_=j[1]},b.prototype.associative=function(){return this.associative_},b}(a.ListContainer);e.SetElementList=g,function(_){var b=function(_e){s(j,_e);function j(et,tt,nt,rt){var ot=_e.call(this,tt,nt,rt)||this;return ot.source_=et,ot}return j.create=function(et,tt,nt,rt){return new j(et,tt,nt,rt)},j.prototype.reverse=function(){return new $(this)},j.prototype.source=function(){return this.source_.associative()},j}(c.ListIterator);_.Iterator=b;var $=function(_e){s(j,_e);function j(){return _e!==null&&_e.apply(this,arguments)||this}return j.prototype._Create_neighbor=function(et){return new j(et)},j}(h.ReverseIterator);_.ReverseIterator=$}(g=e.SetElementList||(e.SetElementList={})),e.SetElementList=g}(SetElementList)),SetElementList}var SetHashBuckets={},HashBuckets={},hasRequiredHashBuckets;function requireHashBuckets(){if(hasRequiredHashBuckets)return HashBuckets;hasRequiredHashBuckets=1;var e=commonjsGlobal&&commonjsGlobal.__values||function(c){var h=typeof Symbol=="function"&&Symbol.iterator,g=h&&c[h],_=0;if(g)return g.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&_>=c.length&&(c=void 0),{value:c&&c[_++],done:!c}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(HashBuckets,"__esModule",{value:!0}),HashBuckets.HashBuckets=void 0;var s=function(){function c(h,g){this.fetcher_=h,this.hasher_=g,this.max_load_factor_=a,this.data_=[],this.size_=0,this.initialize()}return c.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},c.prototype.rehash=function(h){var g,_,b,$;h=Math.max(h,o);for(var _e=[],j=0;j<h;++j)_e.push([]);try{for(var et=e(this.data_),tt=et.next();!tt.done;tt=et.next()){var nt=tt.value;try{for(var rt=(b=void 0,e(nt)),ot=rt.next();!ot.done;ot=rt.next()){var it=ot.value,st=this.hasher_(this.fetcher_(it))%_e.length;_e[st].push(it)}}catch(at){b={error:at}}finally{try{ot&&!ot.done&&($=rt.return)&&$.call(rt)}finally{if(b)throw b.error}}}}catch(at){g={error:at}}finally{try{tt&&!tt.done&&(_=et.return)&&_.call(et)}finally{if(g)throw g.error}}this.data_=_e},c.prototype.reserve=function(h){h>this.capacity()&&(h=Math.floor(h/this.max_load_factor_),this.rehash(h))},c.prototype.initialize=function(){for(var h=0;h<o;++h)this.data_.push([])},c.prototype.length=function(){return this.data_.length},c.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},c.prototype.at=function(h){return this.data_[h]},c.prototype.load_factor=function(){return this.size_/this.length()},c.prototype.max_load_factor=function(h){if(h===void 0&&(h=null),h===null)return this.max_load_factor_;this.max_load_factor_=h},c.prototype.hash_function=function(){return this.hasher_},c.prototype.index=function(h){return this.hasher_(this.fetcher_(h))%this.length()},c.prototype.insert=function(h){var g=this.capacity();++this.size_>g&&this.reserve(g*2);var _=this.index(h);this.data_[_].push(h)},c.prototype.erase=function(h){for(var g=this.index(h),_=this.data_[g],b=0;b<_.length;++b)if(_[b]===h){_.splice(b,1),--this.size_;break}},c}();HashBuckets.HashBuckets=s;var o=10,a=1;return HashBuckets}var hasRequiredSetHashBuckets;function requireSetHashBuckets(){if(hasRequiredSetHashBuckets)return SetHashBuckets;hasRequiredSetHashBuckets=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var g=function(_,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var j in _e)Object.prototype.hasOwnProperty.call(_e,j)&&($[j]=_e[j])},g(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(_,b);function $(){this.constructor=_}_.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}(),s=commonjsGlobal&&commonjsGlobal.__read||function(g,_){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var $=b.call(g),_e,j=[],et;try{for(;(_===void 0||_-- >0)&&!(_e=$.next()).done;)j.push(_e.value)}catch(tt){et={error:tt}}finally{try{_e&&!_e.done&&(b=$.return)&&b.call($)}finally{if(et)throw et.error}}return j},o=commonjsGlobal&&commonjsGlobal.__values||function(g){var _=typeof Symbol=="function"&&Symbol.iterator,b=_&&g[_],$=0;if(b)return b.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&$>=g.length&&(g=void 0),{value:g&&g[$++],done:!g}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(SetHashBuckets,"__esModule",{value:!0}),SetHashBuckets.SetHashBuckets=void 0;var a=requireHashBuckets(),c=function(g){e(_,g);function _(b,$,_e){var j=g.call(this,h,$)||this;return j.source_=b,j.key_eq_=_e,j}return _._Swap_source=function(b,$){var _e;_e=s([$.source_,b.source_],2),b.source_=_e[0],$.source_=_e[1]},_.prototype.key_eq=function(){return this.key_eq_},_.prototype.find=function(b){var $,_e,j=this.hash_function()(b)%this.length(),et=this.at(j);try{for(var tt=o(et),nt=tt.next();!nt.done;nt=tt.next()){var rt=nt.value;if(this.key_eq_(rt.value,b))return rt}}catch(ot){$={error:ot}}finally{try{nt&&!nt.done&&(_e=tt.return)&&_e.call(tt)}finally{if($)throw $.error}}return this.source_.end()},_}(a.HashBuckets);SetHashBuckets.SetHashBuckets=c;function h(g){return g.value}return SetHashBuckets}var Pair={},hasRequiredPair;function requirePair(){if(hasRequiredPair)return Pair;hasRequiredPair=1,Object.defineProperty(Pair,"__esModule",{value:!0}),Pair.make_pair=Pair.Pair=void 0;var e=requireHash(),s=requireComparators(),o=function(){function c(h,g){this.first=h,this.second=g}return c.prototype.equals=function(h){return(0,s.equal_to)(this.first,h.first)&&(0,s.equal_to)(this.second,h.second)},c.prototype.less=function(h){return(0,s.equal_to)(this.first,h.first)===!1?(0,s.less)(this.first,h.first):(0,s.less)(this.second,h.second)},c.prototype.hashCode=function(){return(0,e.hash)(this.first,this.second)},c}();Pair.Pair=o;function a(c,h){return new o(c,h)}return Pair.make_pair=a,Pair}var hasRequiredHashSet;function requireHashSet(){return hasRequiredHashSet||(hasRequiredHashSet=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var _e=function(j,et){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,nt){tt.__proto__=nt}||function(tt,nt){for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])},_e(j,et)};return function(j,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");_e(j,et);function tt(){this.constructor=j}j.prototype=et===null?Object.create(et):(tt.prototype=et.prototype,new tt)}}(),o=commonjsGlobal&&commonjsGlobal.__read||function(_e,j){var et=typeof Symbol=="function"&&_e[Symbol.iterator];if(!et)return _e;var tt=et.call(_e),nt,rt=[],ot;try{for(;(j===void 0||j-- >0)&&!(nt=tt.next()).done;)rt.push(nt.value)}catch(it){ot={error:it}}finally{try{nt&&!nt.done&&(et=tt.return)&&et.call(tt)}finally{if(ot)throw ot.error}}return rt},a=commonjsGlobal&&commonjsGlobal.__spreadArray||function(_e,j,et){if(et||arguments.length===2)for(var tt=0,nt=j.length,rt;tt<nt;tt++)(rt||!(tt in j))&&(rt||(rt=Array.prototype.slice.call(j,0,tt)),rt[tt]=j[tt]);return _e.concat(rt||Array.prototype.slice.call(j))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashSet=void 0;var c=requireUniqueSet(),h=requireIHashContainer(),g=requireSetElementList(),_=requireSetHashBuckets(),b=requirePair(),$=function(_e){s(j,_e);function j(){for(var et=[],tt=0;tt<arguments.length;tt++)et[tt]=arguments[tt];var nt=_e.call(this,function(rt){return new g.SetElementList(rt)})||this;return h.IHashContainer.construct.apply(h.IHashContainer,a([nt,j,function(rt,ot){nt.buckets_=new _.SetHashBuckets(nt,rt,ot)}],o(et),!1)),nt}return j.prototype.clear=function(){this.buckets_.clear(),_e.prototype.clear.call(this)},j.prototype.swap=function(et){var tt,nt;tt=o([et.data_,this.data_],2),this.data_=tt[0],et.data_=tt[1],g.SetElementList._Swap_associative(this.data_,et.data_),_.SetHashBuckets._Swap_source(this.buckets_,et.buckets_),nt=o([et.buckets_,this.buckets_],2),this.buckets_=nt[0],et.buckets_=nt[1]},j.prototype.find=function(et){return this.buckets_.find(et)},j.prototype.begin=function(et){return et===void 0&&(et=null),et===null?_e.prototype.begin.call(this):this.buckets_.at(et)[0]},j.prototype.end=function(et){if(et===void 0&&(et=null),et===null)return _e.prototype.end.call(this);var tt=this.buckets_.at(et);return tt[tt.length-1].next()},j.prototype.rbegin=function(et){return et===void 0&&(et=null),this.end(et).reverse()},j.prototype.rend=function(et){return et===void 0&&(et=null),this.begin(et).reverse()},j.prototype.bucket_count=function(){return this.buckets_.length()},j.prototype.bucket_size=function(et){return this.buckets_.at(et).length},j.prototype.load_factor=function(){return this.buckets_.load_factor()},j.prototype.hash_function=function(){return this.buckets_.hash_function()},j.prototype.key_eq=function(){return this.buckets_.key_eq()},j.prototype.bucket=function(et){return this.hash_function()(et)%this.buckets_.length()},j.prototype.max_load_factor=function(et){return et===void 0&&(et=null),this.buckets_.max_load_factor(et)},j.prototype.reserve=function(et){this.buckets_.reserve(et)},j.prototype.rehash=function(et){this.buckets_.rehash(et)},j.prototype._Insert_by_key=function(et){var tt=this.find(et);return tt.equals(this.end())===!1?new b.Pair(tt,!1):(this.data_.push(et),tt=tt.prev(),this._Handle_insert(tt,tt.next()),new b.Pair(tt,!0))},j.prototype._Insert_by_hint=function(et,tt){var nt=this.find(tt);return nt.equals(this.end())===!0&&(nt=this.data_.insert(et,tt),this._Handle_insert(nt,nt.next())),nt},j.prototype._Handle_insert=function(et,tt){for(;!et.equals(tt);et=et.next())this.buckets_.insert(et)},j.prototype._Handle_erase=function(et,tt){for(;!et.equals(tt);et=et.next())this.buckets_.erase(et)},j}(c.UniqueSet);e.HashSet=$,function(_e){_e.Iterator=g.SetElementList.Iterator,_e.ReverseIterator=g.SetElementList.ReverseIterator}($=e.HashSet||(e.HashSet={})),e.HashSet=$}(HashSet)),HashSet}var HashMap={},UniqueMap={},MapContainer={},hasRequiredMapContainer;function requireMapContainer(){if(hasRequiredMapContainer)return MapContainer;hasRequiredMapContainer=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var c=function(h,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(_[$]=b[$])},c(h,g)};return function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(h,g);function _(){this.constructor=h}h.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}}();Object.defineProperty(MapContainer,"__esModule",{value:!0}),MapContainer.MapContainer=void 0;var s=requireContainer(),o=requireNativeArrayIterator(),a=function(c){e(h,c);function h(g){var _=c.call(this)||this;return _.data_=g(_),_}return h.prototype.assign=function(g,_){this.clear(),this.insert(g,_)},h.prototype.clear=function(){this.data_.clear()},h.prototype.begin=function(){return this.data_.begin()},h.prototype.end=function(){return this.data_.end()},h.prototype.has=function(g){return!this.find(g).equals(this.end())},h.prototype.size=function(){return this.data_.size()},h.prototype.push=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];var b=new o.NativeArrayIterator(g,0),$=new o.NativeArrayIterator(g,g.length);return this.insert(b,$),this.size()},h.prototype.insert=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];return g.length===1?this.emplace(g[0].first,g[0].second):g[0].next instanceof Function&&g[1].next instanceof Function?this._Insert_by_range(g[0],g[1]):this.emplace_hint(g[0],g[1].first,g[1].second)},h.prototype.erase=function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];return g.length===1&&(!(g[0]instanceof this.end().constructor)||g[0].source()!==this)?this._Erase_by_key(g[0]):g.length===1?this._Erase_by_range(g[0]):this._Erase_by_range(g[0],g[1])},h.prototype._Erase_by_range=function(g,_){_===void 0&&(_=g.next());var b=this.data_.erase(g,_);return this._Handle_erase(g,_),b},h}(s.Container);return MapContainer.MapContainer=a,MapContainer}var hasRequiredUniqueMap;function requireUniqueMap(){if(hasRequiredUniqueMap)return UniqueMap;hasRequiredUniqueMap=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var g=function(_,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var j in _e)Object.prototype.hasOwnProperty.call(_e,j)&&($[j]=_e[j])},g(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(_,b);function $(){this.constructor=_}_.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}(),s=commonjsGlobal&&commonjsGlobal.__read||function(g,_){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var $=b.call(g),_e,j=[],et;try{for(;(_===void 0||_-- >0)&&!(_e=$.next()).done;)j.push(_e.value)}catch(tt){et={error:tt}}finally{try{_e&&!_e.done&&(b=$.return)&&b.call($)}finally{if(et)throw et.error}}return j},o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(g,_,b){if(b||arguments.length===2)for(var $=0,_e=_.length,j;$<_e;$++)(j||!($ in _))&&(j||(j=Array.prototype.slice.call(_,0,$)),j[$]=_[$]);return g.concat(j||Array.prototype.slice.call(_))};Object.defineProperty(UniqueMap,"__esModule",{value:!0}),UniqueMap.UniqueMap=void 0;var a=requireMapContainer(),c=requireErrorGenerator(),h=function(g){e(_,g);function _(){return g!==null&&g.apply(this,arguments)||this}return _.prototype.count=function(b){return this.find(b).equals(this.end())?0:1},_.prototype.get=function(b){var $=this.find(b);if($.equals(this.end())===!0)throw c.ErrorGenerator.key_nout_found(this,"get",b);return $.second},_.prototype.take=function(b,$){var _e=this.find(b);return _e.equals(this.end())?this.emplace(b,$()).first.second:_e.second},_.prototype.set=function(b,$){this.insert_or_assign(b,$)},_.prototype.insert=function(){for(var b=[],$=0;$<arguments.length;$++)b[$]=arguments[$];return g.prototype.insert.apply(this,o([],s(b),!1))},_.prototype._Insert_by_range=function(b,$){for(var _e=b;!_e.equals($);_e=_e.next())this.emplace(_e.value.first,_e.value.second)},_.prototype.insert_or_assign=function(){for(var b=[],$=0;$<arguments.length;$++)b[$]=arguments[$];if(b.length===2)return this._Insert_or_assign_with_key_value(b[0],b[1]);if(b.length===3)return this._Insert_or_assign_with_hint(b[0],b[1],b[2])},_.prototype._Insert_or_assign_with_key_value=function(b,$){var _e=this.emplace(b,$);return _e.second===!1&&(_e.first.second=$),_e},_.prototype._Insert_or_assign_with_hint=function(b,$,_e){var j=this.emplace_hint(b,$,_e);return j.second!==_e&&(j.second=_e),j},_.prototype.extract=function(b){return b instanceof this.end().constructor?this._Extract_by_iterator(b):this._Extract_by_key(b)},_.prototype._Extract_by_key=function(b){var $=this.find(b);if($.equals(this.end())===!0)throw c.ErrorGenerator.key_nout_found(this,"extract",b);var _e=$.value;return this._Erase_by_range($),_e},_.prototype._Extract_by_iterator=function(b){return b.equals(this.end())===!0?this.end():(this._Erase_by_range(b),b)},_.prototype._Erase_by_key=function(b){var $=this.find(b);return $.equals(this.end())===!0?0:(this._Erase_by_range($),1)},_.prototype.merge=function(b){for(var $=b.begin();!$.equals(b.end());)this.has($.first)===!1?(this.insert($.value),$=b.erase($)):$=$.next()},_}(a.MapContainer);return UniqueMap.UniqueMap=h,UniqueMap}var MapElementList={},hasRequiredMapElementList;function requireMapElementList(){return hasRequiredMapElementList||(hasRequiredMapElementList=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var _=function(b,$){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,j){_e.__proto__=j}||function(_e,j){for(var et in j)Object.prototype.hasOwnProperty.call(j,et)&&(_e[et]=j[et])},_(b,$)};return function(b,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");_(b,$);function _e(){this.constructor=b}b.prototype=$===null?Object.create($):(_e.prototype=$.prototype,new _e)}}(),o=commonjsGlobal&&commonjsGlobal.__read||function(_,b){var $=typeof Symbol=="function"&&_[Symbol.iterator];if(!$)return _;var _e=$.call(_),j,et=[],tt;try{for(;(b===void 0||b-- >0)&&!(j=_e.next()).done;)et.push(j.value)}catch(nt){tt={error:nt}}finally{try{j&&!j.done&&($=_e.return)&&$.call(_e)}finally{if(tt)throw tt.error}}return et};Object.defineProperty(e,"__esModule",{value:!0}),e.MapElementList=void 0;var a=requireListContainer(),c=requireListIterator(),h=requireReverseIterator(),g=function(_){s(b,_);function b($){var _e=_.call(this)||this;return _e.associative_=$,_e}return b.prototype._Create_iterator=function($,_e,j){return b.Iterator.create(this,$,_e,j)},b._Swap_associative=function($,_e){var j;j=o([_e.associative_,$.associative_],2),$.associative_=j[0],_e.associative_=j[1]},b.prototype.associative=function(){return this.associative_},b}(a.ListContainer);e.MapElementList=g,function(_){var b=function(_e){s(j,_e);function j(et,tt,nt,rt){var ot=_e.call(this,tt,nt,rt)||this;return ot.list_=et,ot}return j.create=function(et,tt,nt,rt){return new j(et,tt,nt,rt)},j.prototype.reverse=function(){return new $(this)},j.prototype.source=function(){return this.list_.associative()},Object.defineProperty(j.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"second",{get:function(){return this.value.second},set:function(et){this.value.second=et},enumerable:!1,configurable:!0}),j}(c.ListIterator);_.Iterator=b;var $=function(_e){s(j,_e);function j(){return _e!==null&&_e.apply(this,arguments)||this}return j.prototype._Create_neighbor=function(et){return new j(et)},Object.defineProperty(j.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"second",{get:function(){return this.base_.second},set:function(et){this.base_.second=et},enumerable:!1,configurable:!0}),j}(h.ReverseIterator);_.ReverseIterator=$}(g=e.MapElementList||(e.MapElementList={})),e.MapElementList=g}(MapElementList)),MapElementList}var MapHashBuckets={},hasRequiredMapHashBuckets;function requireMapHashBuckets(){if(hasRequiredMapHashBuckets)return MapHashBuckets;hasRequiredMapHashBuckets=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var g=function(_,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var j in _e)Object.prototype.hasOwnProperty.call(_e,j)&&($[j]=_e[j])},g(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(_,b);function $(){this.constructor=_}_.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}(),s=commonjsGlobal&&commonjsGlobal.__read||function(g,_){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var $=b.call(g),_e,j=[],et;try{for(;(_===void 0||_-- >0)&&!(_e=$.next()).done;)j.push(_e.value)}catch(tt){et={error:tt}}finally{try{_e&&!_e.done&&(b=$.return)&&b.call($)}finally{if(et)throw et.error}}return j},o=commonjsGlobal&&commonjsGlobal.__values||function(g){var _=typeof Symbol=="function"&&Symbol.iterator,b=_&&g[_],$=0;if(b)return b.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&$>=g.length&&(g=void 0),{value:g&&g[$++],done:!g}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(MapHashBuckets,"__esModule",{value:!0}),MapHashBuckets.MapHashBuckets=void 0;var a=requireHashBuckets(),c=function(g){e(_,g);function _(b,$,_e){var j=g.call(this,h,$)||this;return j.source_=b,j.key_eq_=_e,j}return _._Swap_source=function(b,$){var _e;_e=s([$.source_,b.source_],2),b.source_=_e[0],$.source_=_e[1]},_.prototype.key_eq=function(){return this.key_eq_},_.prototype.find=function(b){var $,_e,j=this.hash_function()(b)%this.length(),et=this.at(j);try{for(var tt=o(et),nt=tt.next();!nt.done;nt=tt.next()){var rt=nt.value;if(this.key_eq_(rt.first,b))return rt}}catch(ot){$={error:ot}}finally{try{nt&&!nt.done&&(_e=tt.return)&&_e.call(tt)}finally{if($)throw $.error}}return this.source_.end()},_}(a.HashBuckets);MapHashBuckets.MapHashBuckets=c;function h(g){return g.first}return MapHashBuckets}var Entry={},hasRequiredEntry;function requireEntry(){if(hasRequiredEntry)return Entry;hasRequiredEntry=1,Object.defineProperty(Entry,"__esModule",{value:!0}),Entry.Entry=void 0;var e=requireHash(),s=requireComparators(),o=function(){function a(c,h){this.first=c,this.second=h}return a.prototype.equals=function(c){return(0,s.equal_to)(this.first,c.first)},a.prototype.less=function(c){return(0,s.less)(this.first,c.first)},a.prototype.hashCode=function(){return(0,e.hash)(this.first)},a}();return Entry.Entry=o,Entry}var hasRequiredHashMap;function requireHashMap(){return hasRequiredHashMap||(hasRequiredHashMap=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var j=function(et,tt){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,rt){nt.__proto__=rt}||function(nt,rt){for(var ot in rt)Object.prototype.hasOwnProperty.call(rt,ot)&&(nt[ot]=rt[ot])},j(et,tt)};return function(et,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");j(et,tt);function nt(){this.constructor=et}et.prototype=tt===null?Object.create(tt):(nt.prototype=tt.prototype,new nt)}}(),o=commonjsGlobal&&commonjsGlobal.__read||function(j,et){var tt=typeof Symbol=="function"&&j[Symbol.iterator];if(!tt)return j;var nt=tt.call(j),rt,ot=[],it;try{for(;(et===void 0||et-- >0)&&!(rt=nt.next()).done;)ot.push(rt.value)}catch(st){it={error:st}}finally{try{rt&&!rt.done&&(tt=nt.return)&&tt.call(nt)}finally{if(it)throw it.error}}return ot},a=commonjsGlobal&&commonjsGlobal.__spreadArray||function(j,et,tt){if(tt||arguments.length===2)for(var nt=0,rt=et.length,ot;nt<rt;nt++)(ot||!(nt in et))&&(ot||(ot=Array.prototype.slice.call(et,0,nt)),ot[nt]=et[nt]);return j.concat(ot||Array.prototype.slice.call(et))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashMap=void 0;var c=requireUniqueMap(),h=requireIHashContainer(),g=requireMapElementList(),_=requireMapHashBuckets(),b=requireEntry(),$=requirePair(),_e=function(j){s(et,j);function et(){for(var tt=[],nt=0;nt<arguments.length;nt++)tt[nt]=arguments[nt];var rt=j.call(this,function(ot){return new g.MapElementList(ot)})||this;return h.IHashContainer.construct.apply(h.IHashContainer,a([rt,et,function(ot,it){rt.buckets_=new _.MapHashBuckets(rt,ot,it)}],o(tt),!1)),rt}return et.prototype.clear=function(){this.buckets_.clear(),j.prototype.clear.call(this)},et.prototype.swap=function(tt){var nt,rt;nt=o([tt.data_,this.data_],2),this.data_=nt[0],tt.data_=nt[1],g.MapElementList._Swap_associative(this.data_,tt.data_),_.MapHashBuckets._Swap_source(this.buckets_,tt.buckets_),rt=o([tt.buckets_,this.buckets_],2),this.buckets_=rt[0],tt.buckets_=rt[1]},et.prototype.find=function(tt){return this.buckets_.find(tt)},et.prototype.begin=function(tt){return tt===void 0&&(tt=null),tt===null?j.prototype.begin.call(this):this.buckets_.at(tt)[0]},et.prototype.end=function(tt){if(tt===void 0&&(tt=null),tt===null)return j.prototype.end.call(this);var nt=this.buckets_.at(tt);return nt[nt.length-1].next()},et.prototype.rbegin=function(tt){return tt===void 0&&(tt=null),this.end(tt).reverse()},et.prototype.rend=function(tt){return tt===void 0&&(tt=null),this.begin(tt).reverse()},et.prototype.bucket_count=function(){return this.buckets_.length()},et.prototype.bucket_size=function(tt){return this.buckets_.at(tt).length},et.prototype.load_factor=function(){return this.buckets_.load_factor()},et.prototype.hash_function=function(){return this.buckets_.hash_function()},et.prototype.key_eq=function(){return this.buckets_.key_eq()},et.prototype.bucket=function(tt){return this.hash_function()(tt)%this.buckets_.length()},et.prototype.max_load_factor=function(tt){return tt===void 0&&(tt=null),this.buckets_.max_load_factor(tt)},et.prototype.reserve=function(tt){this.buckets_.reserve(tt)},et.prototype.rehash=function(tt){this.buckets_.rehash(tt)},et.prototype.emplace=function(tt,nt){var rt=this.find(tt);return rt.equals(this.end())===!1?new $.Pair(rt,!1):(this.data_.push(new b.Entry(tt,nt)),rt=rt.prev(),this._Handle_insert(rt,rt.next()),new $.Pair(rt,!0))},et.prototype.emplace_hint=function(tt,nt,rt){var ot=this.find(nt);return ot.equals(this.end())===!0&&(ot=this.data_.insert(tt,new b.Entry(nt,rt)),this._Handle_insert(ot,ot.next())),ot},et.prototype._Handle_insert=function(tt,nt){for(;!tt.equals(nt);tt=tt.next())this.buckets_.insert(tt)},et.prototype._Handle_erase=function(tt,nt){for(;!tt.equals(nt);tt=tt.next())this.buckets_.erase(tt)},et}(c.UniqueMap);e.HashMap=_e,function(j){j.Iterator=g.MapElementList.Iterator,j.ReverseIterator=g.MapElementList.ReverseIterator}(_e=e.HashMap||(e.HashMap={})),e.HashMap=_e}(HashMap)),HashMap}var hasRequiredEventTarget;function requireEventTarget(){if(hasRequiredEventTarget)return EventTarget;hasRequiredEventTarget=1;var e=commonjsGlobal&&commonjsGlobal.__values||function(c){var h=typeof Symbol=="function"&&c[Symbol.iterator],g=0;return h?h.call(c):{next:function(){return c&&g>=c.length&&(c=void 0),{value:c&&c[g++],done:!c}}}};Object.defineProperty(EventTarget,"__esModule",{value:!0});var s=requireHashSet(),o=requireHashMap(),a=function(){function c(){this.listeners_=new o.HashMap,this.created_at_=new Date}return c.prototype.dispatchEvent=function(h){var g,_,b=this.listeners_.find(h.type);if(!b.equals(this.listeners_.end())){h.target=this,h.timeStamp=new Date().getTime()-this.created_at_.getTime();try{for(var $=e(b.second),_e=$.next();!_e.done;_e=$.next()){var j=_e.value;j(h)}}catch(et){g={error:et}}finally{try{_e&&!_e.done&&(_=$.return)&&_.call($)}finally{if(g)throw g.error}}}},c.prototype.addEventListener=function(h,g){var _=this.listeners_.find(h);_.equals(this.listeners_.end())&&(_=this.listeners_.emplace(h,new s.HashSet).first),_.second.insert(g)},c.prototype.removeEventListener=function(h,g){var _=this.listeners_.find(h);_.equals(this.listeners_.end())||(_.second.erase(g),_.second.empty()&&this.listeners_.erase(_))},c}();return EventTarget.EventTarget=a,EventTarget}var Event={},hasRequiredEvent;function requireEvent(){if(hasRequiredEvent)return Event;hasRequiredEvent=1,Object.defineProperty(Event,"__esModule",{value:!0});var e=function(){function s(o,a){this.type=o,a&&Object.assign(this,a)}return s}();return Event.Event=e,Event}var CloseEvent={},hasRequiredCloseEvent;function requireCloseEvent(){if(hasRequiredCloseEvent)return CloseEvent;hasRequiredCloseEvent=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)_.hasOwnProperty(b)&&(g[b]=_[b])},a(c,h)};return function(c,h){a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(CloseEvent,"__esModule",{value:!0});var s=requireEvent(),o=function(a){e(c,a);function c(h,g){return a.call(this,h,g)||this}return c}(s.Event);return CloseEvent.CloseEvent=o,CloseEvent}var MessageEvent={},hasRequiredMessageEvent;function requireMessageEvent(){if(hasRequiredMessageEvent)return MessageEvent;hasRequiredMessageEvent=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)_.hasOwnProperty(b)&&(g[b]=_[b])},a(c,h)};return function(c,h){a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(MessageEvent,"__esModule",{value:!0});var s=requireEvent(),o=function(a){e(c,a);function c(h,g){return a.call(this,h,g)||this}return c}(s.Event);return MessageEvent.MessageEvent=o,MessageEvent}var ErrorEvent={},hasRequiredErrorEvent;function requireErrorEvent(){if(hasRequiredErrorEvent)return ErrorEvent;hasRequiredErrorEvent=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)_.hasOwnProperty(b)&&(g[b]=_[b])},a(c,h)};return function(c,h){a(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(ErrorEvent,"__esModule",{value:!0});var s=requireEvent(),o=function(a){e(c,a);function c(h,g){return a.call(this,h,g)||this}return c}(s.Event);return ErrorEvent.ErrorEvent=o,ErrorEvent}var hasRequiredWebSocket;function requireWebSocket(){return hasRequiredWebSocket||(hasRequiredWebSocket=1,function(e){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var j=function(et,tt){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,rt){nt.__proto__=rt}||function(nt,rt){for(var ot in rt)rt.hasOwnProperty(ot)&&(nt[ot]=rt[ot])},j(et,tt)};return function(et,tt){j(et,tt);function nt(){this.constructor=et}et.prototype=tt===null?Object.create(tt):(nt.prototype=tt.prototype,new nt)}}(),o=commonjsGlobal&&commonjsGlobal.__assign||function(){return o=Object.assign||function(j){for(var et,tt=1,nt=arguments.length;tt<nt;tt++){et=arguments[tt];for(var rt in et)Object.prototype.hasOwnProperty.call(et,rt)&&(j[rt]=et[rt])}return j},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=requireBrowser(),c=requireEventTarget(),h=requireEvent(),g=requireCloseEvent(),_=requireMessageEvent(),b=requireErrorEvent(),$=function(j){s(et,j);function et(tt,nt){var rt=j.call(this)||this;return rt.on_={},rt.state_=et.CONNECTING,rt.client_=new a.client,rt.client_.on("connect",rt._Handle_connect.bind(rt)),rt.client_.on("connectFailed",rt._Handle_error.bind(rt)),typeof nt=="string"&&(nt=[nt]),rt.client_.connect(tt,nt),rt}return et.prototype.close=function(tt,nt){this.state_=et.CLOSING,tt===void 0?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(tt,nt,!0)},et.prototype.send=function(tt){if(typeof tt.valueOf()=="string")this.connection_.sendUTF(tt);else{var nt=void 0;tt instanceof Buffer?nt=tt:tt instanceof Blob?nt=new Buffer(tt,"blob"):tt.buffer?nt=new Buffer(tt.buffer):nt=new Buffer(tt),this.connection_.sendBytes(nt)}},Object.defineProperty(et.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"onopen",{get:function(){return this.on_.open},set:function(tt){this._Set_on("open",tt)},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"onclose",{get:function(){return this.on_.close},set:function(tt){this._Set_on("close",tt)},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"onmessage",{get:function(){return this.on_.message},set:function(tt){this._Set_on("message",tt)},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"onerror",{get:function(){return this.on_.error},set:function(tt){this._Set_on("error",tt)},enumerable:!0,configurable:!0}),et.prototype._Set_on=function(tt,nt){this.on_[tt]&&this.removeEventListener(tt,this.on_[tt]),this.addEventListener(tt,nt),this.on_[tt]=nt},et.prototype._Handle_connect=function(tt){this.connection_=tt,this.state_=et.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var nt=new h.Event("open",_e);this.dispatchEvent(nt)},et.prototype._Handle_close=function(tt,nt){var rt=new g.CloseEvent("close",o({},_e,{code:tt,reason:nt}));this.state_=et.CLOSED,this.dispatchEvent(rt)},et.prototype._Handle_message=function(tt){var nt=new _.MessageEvent("message",o({},_e,{data:tt.binaryData?tt.binaryData:tt.utf8Data}));this.dispatchEvent(nt)},et.prototype._Handle_error=function(tt){var nt=new b.ErrorEvent("error",o({},_e,{error:tt,message:tt.message}));this.state_===et.CONNECTING&&(this.state_=et.CLOSED),this.dispatchEvent(nt)},et}(c.EventTarget);e.WebSocket=$,function(j){j.CONNECTING=0,j.OPEN=1,j.CLOSING=2,j.CLOSED=3}($=e.WebSocket||(e.WebSocket={})),e.WebSocket=$;var _e={bubbles:!1,cancelable:!1}}(WebSocket$1)),WebSocket$1}var node_1=node;node_1.is_node()&&(commonjsGlobal.WebSocket=requireWebSocket().WebSocket);function number$3(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bytes$3(e,...s){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(e.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${e.length}`)}function hash$2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$3(e.outputLen),number$3(e.blockLen)}function exists$2(e,s=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(s&&e.finished)throw new Error("Hash#digest() has already been called")}function output$2(e,s){bytes$3(e);const o=s.outputLen;if(e.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}const crypto$3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$2=e=>e instanceof Uint8Array,createView$2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$2=(e,s)=>e<<32-s|e>>>s,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$2)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function toBytes$2(e){if(typeof e=="string"&&(e=utf8ToBytes$4(e)),!u8a$2(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function concatBytes$4(...e){const s=new Uint8Array(e.reduce((a,c)=>a+c.length,0));let o=0;return e.forEach(a=>{if(!u8a$2(a))throw new Error("Uint8Array expected");s.set(a,o),o+=a.length}),s}let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$2(e){const s=a=>e().update(toBytes$2(a)).digest(),o=e();return s.outputLen=o.outputLen,s.blockLen=o.blockLen,s.create=()=>e(),s}function randomBytes$2(e=32){if(crypto$3&&typeof crypto$3.getRandomValues=="function")return crypto$3.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(e,s,o,a){if(typeof e.setBigUint64=="function")return e.setBigUint64(s,o,a);const c=BigInt(32),h=BigInt(4294967295),g=Number(o>>c&h),_=Number(o&h),b=a?4:0,$=a?0:4;e.setUint32(s+b,g,a),e.setUint32(s+$,_,a)}let SHA2$1=class extends Hash$2{constructor(s,o,a,c){super(),this.blockLen=s,this.outputLen=o,this.padOffset=a,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=createView$2(this.buffer)}update(s){exists$2(this);const{view:o,buffer:a,blockLen:c}=this;s=toBytes$2(s);const h=s.length;for(let g=0;g<h;){const _=Math.min(c-this.pos,h-g);if(_===c){const b=createView$2(s);for(;c<=h-g;g+=c)this.process(b,g);continue}a.set(s.subarray(g,g+_),this.pos),this.pos+=_,g+=_,this.pos===c&&(this.process(o,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){exists$2(this),output$2(s,this),this.finished=!0;const{buffer:o,view:a,blockLen:c,isLE:h}=this;let{pos:g}=this;o[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>c-g&&(this.process(a,0),g=0);for(let j=g;j<c;j++)o[j]=0;setBigUint64$2(a,c-8,BigInt(this.length*8),h),this.process(a,0);const _=createView$2(s),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const $=b/4,_e=this.get();if($>_e.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<$;j++)_.setUint32(4*j,_e[j],h)}digest(){const{buffer:s,outputLen:o}=this;this.digestInto(s);const a=s.slice(0,o);return this.destroy(),a}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:o,buffer:a,length:c,finished:h,destroyed:g,pos:_}=this;return s.length=c,s.pos=_,s.finished=h,s.destroyed=g,c%o&&s.buffer.set(a),s}};const Chi$2=(e,s,o)=>e&s^~e&o,Maj$2=(e,s,o)=>e&s^e&o^s&o,SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$2=class extends SHA2$1{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:s,B:o,C:a,D:c,E:h,F:g,G:_,H:b}=this;return[s,o,a,c,h,g,_,b]}set(s,o,a,c,h,g,_,b){this.A=s|0,this.B=o|0,this.C=a|0,this.D=c|0,this.E=h|0,this.F=g|0,this.G=_|0,this.H=b|0}process(s,o){for(let j=0;j<16;j++,o+=4)SHA256_W$2[j]=s.getUint32(o,!1);for(let j=16;j<64;j++){const et=SHA256_W$2[j-15],tt=SHA256_W$2[j-2],nt=rotr$2(et,7)^rotr$2(et,18)^et>>>3,rt=rotr$2(tt,17)^rotr$2(tt,19)^tt>>>10;SHA256_W$2[j]=rt+SHA256_W$2[j-7]+nt+SHA256_W$2[j-16]|0}let{A:a,B:c,C:h,D:g,E:_,F:b,G:$,H:_e}=this;for(let j=0;j<64;j++){const et=rotr$2(_,6)^rotr$2(_,11)^rotr$2(_,25),tt=_e+et+Chi$2(_,b,$)+SHA256_K$2[j]+SHA256_W$2[j]|0,rt=(rotr$2(a,2)^rotr$2(a,13)^rotr$2(a,22))+Maj$2(a,c,h)|0;_e=$,$=b,b=_,_=g+tt|0,g=h,h=c,c=a,a=tt+rt|0}a=a+this.A|0,c=c+this.B|0,h=h+this.C|0,g=g+this.D|0,_=_+this.E|0,b=b+this.F|0,$=$+this.G|0,_e=_e+this.H|0,this.set(a,c,h,g,_,b,$,_e)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$2=wrapConstructor$2(()=>new SHA256$2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$9=BigInt(0),_1n$9=BigInt(1),_2n$5=BigInt(2),u8a$1=e=>e instanceof Uint8Array,hexes$3=Array.from({length:256},(e,s)=>s.toString(16).padStart(2,"0"));function bytesToHex$3(e){if(!u8a$1(e))throw new Error("Uint8Array expected");let s="";for(let o=0;o<e.length;o++)s+=hexes$3[e[o]];return s}function numberToHexUnpadded$1(e){const s=e.toString(16);return s.length&1?`0${s}`:s}function hexToNumber$1(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function hexToBytes$3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const s=e.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const o=new Uint8Array(s/2);for(let a=0;a<o.length;a++){const c=a*2,h=e.slice(c,c+2),g=Number.parseInt(h,16);if(Number.isNaN(g)||g<0)throw new Error("Invalid byte sequence");o[a]=g}return o}function bytesToNumberBE$1(e){return hexToNumber$1(bytesToHex$3(e))}function bytesToNumberLE$1(e){if(!u8a$1(e))throw new Error("Uint8Array expected");return hexToNumber$1(bytesToHex$3(Uint8Array.from(e).reverse()))}function numberToBytesBE$1(e,s){return hexToBytes$3(e.toString(16).padStart(s*2,"0"))}function numberToBytesLE$1(e,s){return numberToBytesBE$1(e,s).reverse()}function numberToVarBytesBE$1(e){return hexToBytes$3(numberToHexUnpadded$1(e))}function ensureBytes$1(e,s,o){let a;if(typeof s=="string")try{a=hexToBytes$3(s)}catch(h){throw new Error(`${e} must be valid hex string, got "${s}". Cause: ${h}`)}else if(u8a$1(s))a=Uint8Array.from(s);else throw new Error(`${e} must be hex string or Uint8Array`);const c=a.length;if(typeof o=="number"&&c!==o)throw new Error(`${e} expected ${o} bytes, got ${c}`);return a}function concatBytes$3(...e){const s=new Uint8Array(e.reduce((a,c)=>a+c.length,0));let o=0;return e.forEach(a=>{if(!u8a$1(a))throw new Error("Uint8Array expected");s.set(a,o),o+=a.length}),s}function equalBytes$2(e,s){if(e.length!==s.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==s[o])return!1;return!0}function utf8ToBytes$3(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function bitLen$1(e){let s;for(s=0;e>_0n$9;e>>=_1n$9,s+=1);return s}function bitGet$1(e,s){return e>>BigInt(s)&_1n$9}const bitSet$1=(e,s,o)=>e|(o?_1n$9:_0n$9)<<BigInt(s),bitMask$1=e=>(_2n$5<<BigInt(e-1))-_1n$9,u8n$1=e=>new Uint8Array(e),u8fr$1=e=>Uint8Array.from(e);function createHmacDrbg$1(e,s,o){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof s!="number"||s<2)throw new Error("qByteLen must be a number");if(typeof o!="function")throw new Error("hmacFn must be a function");let a=u8n$1(e),c=u8n$1(e),h=0;const g=()=>{a.fill(1),c.fill(0),h=0},_=(...j)=>o(c,a,...j),b=(j=u8n$1())=>{c=_(u8fr$1([0]),j),a=_(),j.length!==0&&(c=_(u8fr$1([1]),j),a=_())},$=()=>{if(h++>=1e3)throw new Error("drbg: tried 1000 values");let j=0;const et=[];for(;j<s;){a=_();const tt=a.slice();et.push(tt),j+=a.length}return concatBytes$3(...et)};return(j,et)=>{g(),b(j);let tt;for(;!(tt=et($()));)b();return g(),tt}}const validatorFns$1={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,s)=>s.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function validateObject$1(e,s,o={}){const a=(c,h,g)=>{const _=validatorFns$1[h];if(typeof _!="function")throw new Error(`Invalid validator "${h}", expected function`);const b=e[c];if(!(g&&b===void 0)&&!_(b,e))throw new Error(`Invalid param ${String(c)}=${b} (${typeof b}), expected ${h}`)};for(const[c,h]of Object.entries(s))a(c,h,!1);for(const[c,h]of Object.entries(o))a(c,h,!0);return e}const ut$1=Object.freeze(Object.defineProperty({__proto__:null,bitGet:bitGet$1,bitLen:bitLen$1,bitMask:bitMask$1,bitSet:bitSet$1,bytesToHex:bytesToHex$3,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,concatBytes:concatBytes$3,createHmacDrbg:createHmacDrbg$1,ensureBytes:ensureBytes$1,equalBytes:equalBytes$2,hexToBytes:hexToBytes$3,hexToNumber:hexToNumber$1,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToHexUnpadded:numberToHexUnpadded$1,numberToVarBytesBE:numberToVarBytesBE$1,utf8ToBytes:utf8ToBytes$3,validateObject:validateObject$1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$8=BigInt(0),_1n$8=BigInt(1),_2n$4=BigInt(2),_3n$3=BigInt(3),_4n$1=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(e,s){const o=e%s;return o>=_0n$8?o:s+o}function pow$1(e,s,o){if(o<=_0n$8||s<_0n$8)throw new Error("Expected power/modulo > 0");if(o===_1n$8)return _0n$8;let a=_1n$8;for(;s>_0n$8;)s&_1n$8&&(a=a*e%o),e=e*e%o,s>>=_1n$8;return a}function pow2$1(e,s,o){let a=e;for(;s-- >_0n$8;)a*=a,a%=o;return a}function invert$1(e,s){if(e===_0n$8||s<=_0n$8)throw new Error(`invert: expected positive integers, got n=${e} mod=${s}`);let o=mod$1(e,s),a=s,c=_0n$8,h=_1n$8;for(;o!==_0n$8;){const _=a/o,b=a%o,$=c-h*_;a=o,o=b,c=h,h=$}if(a!==_1n$8)throw new Error("invert: does not exist");return mod$1(c,s)}function tonelliShanks$1(e){const s=(e-_1n$8)/_2n$4;let o,a,c;for(o=e-_1n$8,a=0;o%_2n$4===_0n$8;o/=_2n$4,a++);for(c=_2n$4;c<e&&pow$1(c,s,e)!==e-_1n$8;c++);if(a===1){const g=(e+_1n$8)/_4n$1;return function(b,$){const _e=b.pow($,g);if(!b.eql(b.sqr(_e),$))throw new Error("Cannot find square root");return _e}}const h=(o+_1n$8)/_2n$4;return function(_,b){if(_.pow(b,s)===_.neg(_.ONE))throw new Error("Cannot find square root");let $=a,_e=_.pow(_.mul(_.ONE,c),o),j=_.pow(b,h),et=_.pow(b,o);for(;!_.eql(et,_.ONE);){if(_.eql(et,_.ZERO))return _.ZERO;let tt=1;for(let rt=_.sqr(et);tt<$&&!_.eql(rt,_.ONE);tt++)rt=_.sqr(rt);const nt=_.pow(_e,_1n$8<<BigInt($-tt-1));_e=_.sqr(nt),j=_.mul(j,nt),et=_.mul(et,_e),$=tt}return j}}function FpSqrt$1(e){if(e%_4n$1===_3n$3){const s=(e+_1n$8)/_4n$1;return function(a,c){const h=a.pow(c,s);if(!a.eql(a.sqr(h),c))throw new Error("Cannot find square root");return h}}if(e%_8n$1===_5n$1){const s=(e-_5n$1)/_8n$1;return function(a,c){const h=a.mul(c,_2n$4),g=a.pow(h,s),_=a.mul(c,g),b=a.mul(a.mul(_,_2n$4),g),$=a.mul(_,a.sub(b,a.ONE));if(!a.eql(a.sqr($),c))throw new Error("Cannot find square root");return $}}return tonelliShanks$1(e)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(e){const s={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},o=FIELD_FIELDS$1.reduce((a,c)=>(a[c]="function",a),s);return validateObject$1(e,o)}function FpPow$1(e,s,o){if(o<_0n$8)throw new Error("Expected power > 0");if(o===_0n$8)return e.ONE;if(o===_1n$8)return s;let a=e.ONE,c=s;for(;o>_0n$8;)o&_1n$8&&(a=e.mul(a,c)),c=e.sqr(c),o>>=_1n$8;return a}function FpInvertBatch$1(e,s){const o=new Array(s.length),a=s.reduce((h,g,_)=>e.is0(g)?h:(o[_]=h,e.mul(h,g)),e.ONE),c=e.inv(a);return s.reduceRight((h,g,_)=>e.is0(g)?h:(o[_]=e.mul(h,o[_]),e.mul(h,g)),c),o}function nLength$1(e,s){const o=s!==void 0?s:e.toString(2).length,a=Math.ceil(o/8);return{nBitLength:o,nByteLength:a}}function Field$1(e,s,o=!1,a={}){if(e<=_0n$8)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:c,nByteLength:h}=nLength$1(e,s);if(h>2048)throw new Error("Field lengths over 2048 bytes are not supported");const g=FpSqrt$1(e),_=Object.freeze({ORDER:e,BITS:c,BYTES:h,MASK:bitMask$1(c),ZERO:_0n$8,ONE:_1n$8,create:b=>mod$1(b,e),isValid:b=>{if(typeof b!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof b}`);return _0n$8<=b&&b<e},is0:b=>b===_0n$8,isOdd:b=>(b&_1n$8)===_1n$8,neg:b=>mod$1(-b,e),eql:(b,$)=>b===$,sqr:b=>mod$1(b*b,e),add:(b,$)=>mod$1(b+$,e),sub:(b,$)=>mod$1(b-$,e),mul:(b,$)=>mod$1(b*$,e),pow:(b,$)=>FpPow$1(_,b,$),div:(b,$)=>mod$1(b*invert$1($,e),e),sqrN:b=>b*b,addN:(b,$)=>b+$,subN:(b,$)=>b-$,mulN:(b,$)=>b*$,inv:b=>invert$1(b,e),sqrt:a.sqrt||(b=>g(_,b)),invertBatch:b=>FpInvertBatch$1(_,b),cmov:(b,$,_e)=>_e?$:b,toBytes:b=>o?numberToBytesLE$1(b,h):numberToBytesBE$1(b,h),fromBytes:b=>{if(b.length!==h)throw new Error(`Fp.fromBytes: expected ${h}, got ${b.length}`);return o?bytesToNumberLE$1(b):bytesToNumberBE$1(b)}});return Object.freeze(_)}function getFieldBytesLength$1(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const s=e.toString(2).length;return Math.ceil(s/8)}function getMinHashLength$1(e){const s=getFieldBytesLength$1(e);return s+Math.ceil(s/2)}function mapHashToField$1(e,s,o=!1){const a=e.length,c=getFieldBytesLength$1(s),h=getMinHashLength$1(s);if(a<16||a<h||a>1024)throw new Error(`expected ${h}-1024 bytes of input, got ${a}`);const g=o?bytesToNumberBE$1(e):bytesToNumberLE$1(e),_=mod$1(g,s-_1n$8)+_1n$8;return o?numberToBytesLE$1(_,c):numberToBytesBE$1(_,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$7=BigInt(0),_1n$7=BigInt(1);function wNAF$1(e,s){const o=(c,h)=>{const g=h.negate();return c?g:h},a=c=>{const h=Math.ceil(s/c)+1,g=2**(c-1);return{windows:h,windowSize:g}};return{constTimeNegate:o,unsafeLadder(c,h){let g=e.ZERO,_=c;for(;h>_0n$7;)h&_1n$7&&(g=g.add(_)),_=_.double(),h>>=_1n$7;return g},precomputeWindow(c,h){const{windows:g,windowSize:_}=a(h),b=[];let $=c,_e=$;for(let j=0;j<g;j++){_e=$,b.push(_e);for(let et=1;et<_;et++)_e=_e.add($),b.push(_e);$=_e.double()}return b},wNAF(c,h,g){const{windows:_,windowSize:b}=a(c);let $=e.ZERO,_e=e.BASE;const j=BigInt(2**c-1),et=2**c,tt=BigInt(c);for(let nt=0;nt<_;nt++){const rt=nt*b;let ot=Number(g&j);g>>=tt,ot>b&&(ot-=et,g+=_1n$7);const it=rt,st=rt+Math.abs(ot)-1,at=nt%2!==0,lt=ot<0;ot===0?_e=_e.add(o(at,h[it])):$=$.add(o(lt,h[st]))}return{p:$,f:_e}},wNAFCached(c,h,g,_){const b=c._WINDOW_SIZE||1;let $=h.get(c);return $||($=this.precomputeWindow(c,b),b!==1&&h.set(c,_($))),this.wNAF(b,$,g)}}}function validateBasic$1(e){return validateField$1(e.Fp),validateObject$1(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts$1(e){const s=validateBasic$1(e);validateObject$1(s,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:o,Fp:a,a:c}=s;if(o){if(!a.eql(c,a.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof o!="object"||typeof o.beta!="bigint"||typeof o.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...s})}const{bytesToNumberBE:b2n$1,hexToBytes:h2b$1}=ut$1,DER$1={Err:class extends Error{constructor(s=""){super(s)}},_parseInt(e){const{Err:s}=DER$1;if(e.length<2||e[0]!==2)throw new s("Invalid signature integer tag");const o=e[1],a=e.subarray(2,o+2);if(!o||a.length!==o)throw new s("Invalid signature integer: wrong length");if(a[0]&128)throw new s("Invalid signature integer: negative");if(a[0]===0&&!(a[1]&128))throw new s("Invalid signature integer: unnecessary leading zero");return{d:b2n$1(a),l:e.subarray(o+2)}},toSig(e){const{Err:s}=DER$1,o=typeof e=="string"?h2b$1(e):e;if(!(o instanceof Uint8Array))throw new Error("ui8a expected");let a=o.length;if(a<2||o[0]!=48)throw new s("Invalid signature tag");if(o[1]!==a-2)throw new s("Invalid signature: incorrect length");const{d:c,l:h}=DER$1._parseInt(o.subarray(2)),{d:g,l:_}=DER$1._parseInt(h);if(_.length)throw new s("Invalid signature: left bytes after parsing");return{r:c,s:g}},hexFromSig(e){const s=$=>Number.parseInt($[0],16)&8?"00"+$:$,o=$=>{const _e=$.toString(16);return _e.length&1?`0${_e}`:_e},a=s(o(e.s)),c=s(o(e.r)),h=a.length/2,g=c.length/2,_=o(h),b=o(g);return`30${o(g+h+4)}02${b}${c}02${_}${a}`}},_0n$6=BigInt(0),_1n$6=BigInt(1);BigInt(2);const _3n$2=BigInt(3);BigInt(4);function weierstrassPoints$1(e){const s=validatePointOpts$1(e),{Fp:o}=s,a=s.toBytes||((nt,rt,ot)=>{const it=rt.toAffine();return concatBytes$3(Uint8Array.from([4]),o.toBytes(it.x),o.toBytes(it.y))}),c=s.fromBytes||(nt=>{const rt=nt.subarray(1),ot=o.fromBytes(rt.subarray(0,o.BYTES)),it=o.fromBytes(rt.subarray(o.BYTES,2*o.BYTES));return{x:ot,y:it}});function h(nt){const{a:rt,b:ot}=s,it=o.sqr(nt),st=o.mul(it,nt);return o.add(o.add(st,o.mul(nt,rt)),ot)}if(!o.eql(o.sqr(s.Gy),h(s.Gx)))throw new Error("bad generator point: equation left != right");function g(nt){return typeof nt=="bigint"&&_0n$6<nt&&nt<s.n}function _(nt){if(!g(nt))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function b(nt){const{allowedPrivateKeyLengths:rt,nByteLength:ot,wrapPrivateKey:it,n:st}=s;if(rt&&typeof nt!="bigint"){if(nt instanceof Uint8Array&&(nt=bytesToHex$3(nt)),typeof nt!="string"||!rt.includes(nt.length))throw new Error("Invalid key");nt=nt.padStart(ot*2,"0")}let at;try{at=typeof nt=="bigint"?nt:bytesToNumberBE$1(ensureBytes$1("private key",nt,ot))}catch{throw new Error(`private key must be ${ot} bytes, hex or bigint, not ${typeof nt}`)}return it&&(at=mod$1(at,st)),_(at),at}const $=new Map;function _e(nt){if(!(nt instanceof j))throw new Error("ProjectivePoint expected")}class j{constructor(rt,ot,it){if(this.px=rt,this.py=ot,this.pz=it,rt==null||!o.isValid(rt))throw new Error("x required");if(ot==null||!o.isValid(ot))throw new Error("y required");if(it==null||!o.isValid(it))throw new Error("z required")}static fromAffine(rt){const{x:ot,y:it}=rt||{};if(!rt||!o.isValid(ot)||!o.isValid(it))throw new Error("invalid affine point");if(rt instanceof j)throw new Error("projective point not allowed");const st=at=>o.eql(at,o.ZERO);return st(ot)&&st(it)?j.ZERO:new j(ot,it,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(rt){const ot=o.invertBatch(rt.map(it=>it.pz));return rt.map((it,st)=>it.toAffine(ot[st])).map(j.fromAffine)}static fromHex(rt){const ot=j.fromAffine(c(ensureBytes$1("pointHex",rt)));return ot.assertValidity(),ot}static fromPrivateKey(rt){return j.BASE.multiply(b(rt))}_setWindowSize(rt){this._WINDOW_SIZE=rt,$.delete(this)}assertValidity(){if(this.is0()){if(s.allowInfinityPoint&&!o.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:rt,y:ot}=this.toAffine();if(!o.isValid(rt)||!o.isValid(ot))throw new Error("bad point: x or y not FE");const it=o.sqr(ot),st=h(rt);if(!o.eql(it,st))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:rt}=this.toAffine();if(o.isOdd)return!o.isOdd(rt);throw new Error("Field doesn't support isOdd")}equals(rt){_e(rt);const{px:ot,py:it,pz:st}=this,{px:at,py:lt,pz:wt}=rt,gt=o.eql(o.mul(ot,wt),o.mul(at,st)),pt=o.eql(o.mul(it,wt),o.mul(lt,st));return gt&&pt}negate(){return new j(this.px,o.neg(this.py),this.pz)}double(){const{a:rt,b:ot}=s,it=o.mul(ot,_3n$2),{px:st,py:at,pz:lt}=this;let wt=o.ZERO,gt=o.ZERO,pt=o.ZERO,yt=o.mul(st,st),St=o.mul(at,at),kt=o.mul(lt,lt),dt=o.mul(st,at);return dt=o.add(dt,dt),pt=o.mul(st,lt),pt=o.add(pt,pt),wt=o.mul(rt,pt),gt=o.mul(it,kt),gt=o.add(wt,gt),wt=o.sub(St,gt),gt=o.add(St,gt),gt=o.mul(wt,gt),wt=o.mul(dt,wt),pt=o.mul(it,pt),kt=o.mul(rt,kt),dt=o.sub(yt,kt),dt=o.mul(rt,dt),dt=o.add(dt,pt),pt=o.add(yt,yt),yt=o.add(pt,yt),yt=o.add(yt,kt),yt=o.mul(yt,dt),gt=o.add(gt,yt),kt=o.mul(at,lt),kt=o.add(kt,kt),yt=o.mul(kt,dt),wt=o.sub(wt,yt),pt=o.mul(kt,St),pt=o.add(pt,pt),pt=o.add(pt,pt),new j(wt,gt,pt)}add(rt){_e(rt);const{px:ot,py:it,pz:st}=this,{px:at,py:lt,pz:wt}=rt;let gt=o.ZERO,pt=o.ZERO,yt=o.ZERO;const St=s.a,kt=o.mul(s.b,_3n$2);let dt=o.mul(ot,at),mt=o.mul(it,lt),bt=o.mul(st,wt),_t=o.add(ot,it),ft=o.add(at,lt);_t=o.mul(_t,ft),ft=o.add(dt,mt),_t=o.sub(_t,ft),ft=o.add(ot,st);let ht=o.add(at,wt);return ft=o.mul(ft,ht),ht=o.add(dt,bt),ft=o.sub(ft,ht),ht=o.add(it,st),gt=o.add(lt,wt),ht=o.mul(ht,gt),gt=o.add(mt,bt),ht=o.sub(ht,gt),yt=o.mul(St,ft),gt=o.mul(kt,bt),yt=o.add(gt,yt),gt=o.sub(mt,yt),yt=o.add(mt,yt),pt=o.mul(gt,yt),mt=o.add(dt,dt),mt=o.add(mt,dt),bt=o.mul(St,bt),ft=o.mul(kt,ft),mt=o.add(mt,bt),bt=o.sub(dt,bt),bt=o.mul(St,bt),ft=o.add(ft,bt),dt=o.mul(mt,ft),pt=o.add(pt,dt),dt=o.mul(ht,ft),gt=o.mul(_t,gt),gt=o.sub(gt,dt),dt=o.mul(_t,mt),yt=o.mul(ht,yt),yt=o.add(yt,dt),new j(gt,pt,yt)}subtract(rt){return this.add(rt.negate())}is0(){return this.equals(j.ZERO)}wNAF(rt){return tt.wNAFCached(this,$,rt,ot=>{const it=o.invertBatch(ot.map(st=>st.pz));return ot.map((st,at)=>st.toAffine(it[at])).map(j.fromAffine)})}multiplyUnsafe(rt){const ot=j.ZERO;if(rt===_0n$6)return ot;if(_(rt),rt===_1n$6)return this;const{endo:it}=s;if(!it)return tt.unsafeLadder(this,rt);let{k1neg:st,k1:at,k2neg:lt,k2:wt}=it.splitScalar(rt),gt=ot,pt=ot,yt=this;for(;at>_0n$6||wt>_0n$6;)at&_1n$6&&(gt=gt.add(yt)),wt&_1n$6&&(pt=pt.add(yt)),yt=yt.double(),at>>=_1n$6,wt>>=_1n$6;return st&&(gt=gt.negate()),lt&&(pt=pt.negate()),pt=new j(o.mul(pt.px,it.beta),pt.py,pt.pz),gt.add(pt)}multiply(rt){_(rt);let ot=rt,it,st;const{endo:at}=s;if(at){const{k1neg:lt,k1:wt,k2neg:gt,k2:pt}=at.splitScalar(ot);let{p:yt,f:St}=this.wNAF(wt),{p:kt,f:dt}=this.wNAF(pt);yt=tt.constTimeNegate(lt,yt),kt=tt.constTimeNegate(gt,kt),kt=new j(o.mul(kt.px,at.beta),kt.py,kt.pz),it=yt.add(kt),st=St.add(dt)}else{const{p:lt,f:wt}=this.wNAF(ot);it=lt,st=wt}return j.normalizeZ([it,st])[0]}multiplyAndAddUnsafe(rt,ot,it){const st=j.BASE,at=(wt,gt)=>gt===_0n$6||gt===_1n$6||!wt.equals(st)?wt.multiplyUnsafe(gt):wt.multiply(gt),lt=at(this,ot).add(at(rt,it));return lt.is0()?void 0:lt}toAffine(rt){const{px:ot,py:it,pz:st}=this,at=this.is0();rt==null&&(rt=at?o.ONE:o.inv(st));const lt=o.mul(ot,rt),wt=o.mul(it,rt),gt=o.mul(st,rt);if(at)return{x:o.ZERO,y:o.ZERO};if(!o.eql(gt,o.ONE))throw new Error("invZ was invalid");return{x:lt,y:wt}}isTorsionFree(){const{h:rt,isTorsionFree:ot}=s;if(rt===_1n$6)return!0;if(ot)return ot(j,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:rt,clearCofactor:ot}=s;return rt===_1n$6?this:ot?ot(j,this):this.multiplyUnsafe(s.h)}toRawBytes(rt=!0){return this.assertValidity(),a(j,this,rt)}toHex(rt=!0){return bytesToHex$3(this.toRawBytes(rt))}}j.BASE=new j(s.Gx,s.Gy,o.ONE),j.ZERO=new j(o.ZERO,o.ONE,o.ZERO);const et=s.nBitLength,tt=wNAF$1(j,s.endo?Math.ceil(et/2):et);return{CURVE:s,ProjectivePoint:j,normPrivateKeyToScalar:b,weierstrassEquation:h,isWithinCurveOrder:g}}function validateOpts$1(e){const s=validateBasic$1(e);return validateObject$1(s,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...s})}function weierstrass$1(e){const s=validateOpts$1(e),{Fp:o,n:a}=s,c=o.BYTES+1,h=2*o.BYTES+1;function g(ft){return _0n$6<ft&&ft<o.ORDER}function _(ft){return mod$1(ft,a)}function b(ft){return invert$1(ft,a)}const{ProjectivePoint:$,normPrivateKeyToScalar:_e,weierstrassEquation:j,isWithinCurveOrder:et}=weierstrassPoints$1({...s,toBytes(ft,ht,Et){const vt=ht.toAffine(),xt=o.toBytes(vt.x),Rt=concatBytes$3;return Et?Rt(Uint8Array.from([ht.hasEvenY()?2:3]),xt):Rt(Uint8Array.from([4]),xt,o.toBytes(vt.y))},fromBytes(ft){const ht=ft.length,Et=ft[0],vt=ft.subarray(1);if(ht===c&&(Et===2||Et===3)){const xt=bytesToNumberBE$1(vt);if(!g(xt))throw new Error("Point is not on curve");const Rt=j(xt);let $t=o.sqrt(Rt);const Ct=($t&_1n$6)===_1n$6;return(Et&1)===1!==Ct&&($t=o.neg($t)),{x:xt,y:$t}}else if(ht===h&&Et===4){const xt=o.fromBytes(vt.subarray(0,o.BYTES)),Rt=o.fromBytes(vt.subarray(o.BYTES,2*o.BYTES));return{x:xt,y:Rt}}else throw new Error(`Point of length ${ht} was invalid. Expected ${c} compressed bytes or ${h} uncompressed bytes`)}}),tt=ft=>bytesToHex$3(numberToBytesBE$1(ft,s.nByteLength));function nt(ft){const ht=a>>_1n$6;return ft>ht}function rt(ft){return nt(ft)?_(-ft):ft}const ot=(ft,ht,Et)=>bytesToNumberBE$1(ft.slice(ht,Et));class it{constructor(ht,Et,vt){this.r=ht,this.s=Et,this.recovery=vt,this.assertValidity()}static fromCompact(ht){const Et=s.nByteLength;return ht=ensureBytes$1("compactSignature",ht,Et*2),new it(ot(ht,0,Et),ot(ht,Et,2*Et))}static fromDER(ht){const{r:Et,s:vt}=DER$1.toSig(ensureBytes$1("DER",ht));return new it(Et,vt)}assertValidity(){if(!et(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!et(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ht){return new it(this.r,this.s,ht)}recoverPublicKey(ht){const{r:Et,s:vt,recovery:xt}=this,Rt=pt(ensureBytes$1("msgHash",ht));if(xt==null||![0,1,2,3].includes(xt))throw new Error("recovery id invalid");const $t=xt===2||xt===3?Et+s.n:Et;if($t>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ct=xt&1?"03":"02",Nt=$.fromHex(Ct+tt($t)),At=b($t),Pt=_(-Rt*At),Tt=_(vt*At),Lt=$.BASE.multiplyAndAddUnsafe(Nt,Pt,Tt);if(!Lt)throw new Error("point at infinify");return Lt.assertValidity(),Lt}hasHighS(){return nt(this.s)}normalizeS(){return this.hasHighS()?new it(this.r,_(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$3(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$3(this.toCompactHex())}toCompactHex(){return tt(this.r)+tt(this.s)}}const st={isValidPrivateKey(ft){try{return _e(ft),!0}catch{return!1}},normPrivateKeyToScalar:_e,randomPrivateKey:()=>{const ft=getMinHashLength$1(s.n);return mapHashToField$1(s.randomBytes(ft),s.n)},precompute(ft=8,ht=$.BASE){return ht._setWindowSize(ft),ht.multiply(BigInt(3)),ht}};function at(ft,ht=!0){return $.fromPrivateKey(ft).toRawBytes(ht)}function lt(ft){const ht=ft instanceof Uint8Array,Et=typeof ft=="string",vt=(ht||Et)&&ft.length;return ht?vt===c||vt===h:Et?vt===2*c||vt===2*h:ft instanceof $}function wt(ft,ht,Et=!0){if(lt(ft))throw new Error("first arg must be private key");if(!lt(ht))throw new Error("second arg must be public key");return $.fromHex(ht).multiply(_e(ft)).toRawBytes(Et)}const gt=s.bits2int||function(ft){const ht=bytesToNumberBE$1(ft),Et=ft.length*8-s.nBitLength;return Et>0?ht>>BigInt(Et):ht},pt=s.bits2int_modN||function(ft){return _(gt(ft))},yt=bitMask$1(s.nBitLength);function St(ft){if(typeof ft!="bigint")throw new Error("bigint expected");if(!(_0n$6<=ft&&ft<yt))throw new Error(`bigint expected < 2^${s.nBitLength}`);return numberToBytesBE$1(ft,s.nByteLength)}function kt(ft,ht,Et=dt){if(["recovered","canonical"].some(jt=>jt in Et))throw new Error("sign() legacy options not supported");const{hash:vt,randomBytes:xt}=s;let{lowS:Rt,prehash:$t,extraEntropy:Ct}=Et;Rt==null&&(Rt=!0),ft=ensureBytes$1("msgHash",ft),$t&&(ft=ensureBytes$1("prehashed msgHash",vt(ft)));const Nt=pt(ft),At=_e(ht),Pt=[St(At),St(Nt)];if(Ct!=null){const jt=Ct===!0?xt(o.BYTES):Ct;Pt.push(ensureBytes$1("extraEntropy",jt))}const Tt=concatBytes$3(...Pt),Lt=Nt;function Bt(jt){const Ut=gt(jt);if(!et(Ut))return;const Mt=b(Ut),It=$.BASE.multiply(Ut).toAffine(),Ot=_(It.x);if(Ot===_0n$6)return;const Dt=_(Mt*_(Lt+Ot*At));if(Dt===_0n$6)return;let Kt=(It.x===Ot?0:2)|Number(It.y&_1n$6),Vt=Dt;return Rt&&nt(Dt)&&(Vt=rt(Dt),Kt^=1),new it(Ot,Vt,Kt)}return{seed:Tt,k2sig:Bt}}const dt={lowS:s.lowS,prehash:!1},mt={lowS:s.lowS,prehash:!1};function bt(ft,ht,Et=dt){const{seed:vt,k2sig:xt}=kt(ft,ht,Et),Rt=s;return createHmacDrbg$1(Rt.hash.outputLen,Rt.nByteLength,Rt.hmac)(vt,xt)}$.BASE._setWindowSize(8);function _t(ft,ht,Et,vt=mt){var It;const xt=ft;if(ht=ensureBytes$1("msgHash",ht),Et=ensureBytes$1("publicKey",Et),"strict"in vt)throw new Error("options.strict was renamed to lowS");const{lowS:Rt,prehash:$t}=vt;let Ct,Nt;try{if(typeof xt=="string"||xt instanceof Uint8Array)try{Ct=it.fromDER(xt)}catch(Ot){if(!(Ot instanceof DER$1.Err))throw Ot;Ct=it.fromCompact(xt)}else if(typeof xt=="object"&&typeof xt.r=="bigint"&&typeof xt.s=="bigint"){const{r:Ot,s:Dt}=xt;Ct=new it(Ot,Dt)}else throw new Error("PARSE");Nt=$.fromHex(Et)}catch(Ot){if(Ot.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Rt&&Ct.hasHighS())return!1;$t&&(ht=s.hash(ht));const{r:At,s:Pt}=Ct,Tt=pt(ht),Lt=b(Pt),Bt=_(Tt*Lt),jt=_(At*Lt),Ut=(It=$.BASE.multiplyAndAddUnsafe(Nt,Bt,jt))==null?void 0:It.toAffine();return Ut?_(Ut.x)===At:!1}return{CURVE:s,getPublicKey:at,getSharedSecret:wt,sign:bt,verify:_t,ProjectivePoint:$,Signature:it,utils:st}}let HMAC$2=class extends Hash$2{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,hash$2(s);const a=toBytes$2(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,h=new Uint8Array(c);h.set(a.length>c?s.create().update(a).digest():a);for(let g=0;g<h.length;g++)h[g]^=54;this.iHash.update(h),this.oHash=s.create();for(let g=0;g<h.length;g++)h[g]^=106;this.oHash.update(h),h.fill(0)}update(s){return exists$2(this),this.iHash.update(s),this}digestInto(s){exists$2(this),bytes$3(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:h,blockLen:g,outputLen:_}=this;return s=s,s.finished=c,s.destroyed=h,s.blockLen=g,s.outputLen=_,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(e,s,o)=>new HMAC$2(e,s).update(o).digest();hmac$2.create=(e,s)=>new HMAC$2(e,s);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$1(e){return{hash:e,hmac:(s,...o)=>hmac$2(e,s,concatBytes$4(...o)),randomBytes:randomBytes$2}}function createCurve$1(e,s){const o=a=>weierstrass$1({...e,...getHash$1(a)});return Object.freeze({...o(s),create:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P$1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N$1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$5=BigInt(1),_2n$3=BigInt(2),divNearest$1=(e,s)=>(e+s/_2n$3)/s;function sqrtMod$1(e){const s=secp256k1P$1,o=BigInt(3),a=BigInt(6),c=BigInt(11),h=BigInt(22),g=BigInt(23),_=BigInt(44),b=BigInt(88),$=e*e*e%s,_e=$*$*e%s,j=pow2$1(_e,o,s)*_e%s,et=pow2$1(j,o,s)*_e%s,tt=pow2$1(et,_2n$3,s)*$%s,nt=pow2$1(tt,c,s)*tt%s,rt=pow2$1(nt,h,s)*nt%s,ot=pow2$1(rt,_,s)*rt%s,it=pow2$1(ot,b,s)*ot%s,st=pow2$1(it,_,s)*rt%s,at=pow2$1(st,o,s)*_e%s,lt=pow2$1(at,g,s)*nt%s,wt=pow2$1(lt,a,s)*$%s,gt=pow2$1(wt,_2n$3,s);if(!Fp$1.eql(Fp$1.sqr(gt),e))throw new Error("Cannot find square root");return gt}const Fp$1=Field$1(secp256k1P$1,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1$1=createCurve$1({a:BigInt(0),b:BigInt(7),Fp:Fp$1,n:secp256k1N$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const s=secp256k1N$1,o=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-_1n$5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),c=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),h=o,g=BigInt("0x100000000000000000000000000000000"),_=divNearest$1(h*e,s),b=divNearest$1(-a*e,s);let $=mod$1(e-_*o-b*c,s),_e=mod$1(-_*a-b*h,s);const j=$>g,et=_e>g;if(j&&($=s-$),et&&(_e=s-_e),$>g||_e>g)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:j,k1:$,k2neg:et,k2:_e}}}},sha256$2),_0n$5=BigInt(0),fe=e=>typeof e=="bigint"&&_0n$5<e&&e<secp256k1P$1,ge=e=>typeof e=="bigint"&&_0n$5<e&&e<secp256k1N$1,TAGGED_HASH_PREFIXES$1={};function taggedHash$1(e,...s){let o=TAGGED_HASH_PREFIXES$1[e];if(o===void 0){const a=sha256$2(Uint8Array.from(e,c=>c.charCodeAt(0)));o=concatBytes$3(a,a),TAGGED_HASH_PREFIXES$1[e]=o}return sha256$2(concatBytes$3(o,...s))}const pointToBytes$1=e=>e.toRawBytes(!0).slice(1),numTo32b$1=e=>numberToBytesBE$1(e,32),modP$1=e=>mod$1(e,secp256k1P$1),modN$1=e=>mod$1(e,secp256k1N$1),Point$1=secp256k1$1.ProjectivePoint,GmulAdd$1=(e,s,o)=>Point$1.BASE.multiplyAndAddUnsafe(e,s,o);function schnorrGetExtPubKey$1(e){let s=secp256k1$1.utils.normPrivateKeyToScalar(e),o=Point$1.fromPrivateKey(s);return{scalar:o.hasEvenY()?s:modN$1(-s),bytes:pointToBytes$1(o)}}function lift_x$1(e){if(!fe(e))throw new Error("bad x: need 0 < x < p");const s=modP$1(e*e),o=modP$1(s*e+BigInt(7));let a=sqrtMod$1(o);a%_2n$3!==_0n$5&&(a=modP$1(-a));const c=new Point$1(e,a,_1n$5);return c.assertValidity(),c}function challenge$1(...e){return modN$1(bytesToNumberBE$1(taggedHash$1("BIP0340/challenge",...e)))}function schnorrGetPublicKey$1(e){return schnorrGetExtPubKey$1(e).bytes}function schnorrSign$1(e,s,o=randomBytes$2(32)){const a=ensureBytes$1("message",e),{bytes:c,scalar:h}=schnorrGetExtPubKey$1(s),g=ensureBytes$1("auxRand",o,32),_=numTo32b$1(h^bytesToNumberBE$1(taggedHash$1("BIP0340/aux",g))),b=taggedHash$1("BIP0340/nonce",_,c,a),$=modN$1(bytesToNumberBE$1(b));if($===_0n$5)throw new Error("sign failed: k is zero");const{bytes:_e,scalar:j}=schnorrGetExtPubKey$1($),et=challenge$1(_e,c,a),tt=new Uint8Array(64);if(tt.set(_e,0),tt.set(numTo32b$1(modN$1(j+et*h)),32),!schnorrVerify$1(tt,a,c))throw new Error("sign: Invalid signature produced");return tt}function schnorrVerify$1(e,s,o){const a=ensureBytes$1("signature",e,64),c=ensureBytes$1("message",s),h=ensureBytes$1("publicKey",o,32);try{const g=lift_x$1(bytesToNumberBE$1(h)),_=bytesToNumberBE$1(a.subarray(0,32));if(!fe(_))return!1;const b=bytesToNumberBE$1(a.subarray(32,64));if(!ge(b))return!1;const $=challenge$1(numTo32b$1(_),pointToBytes$1(g),c),_e=GmulAdd$1(g,b,modN$1(-$));return!(!_e||!_e.hasEvenY()||_e.toAffine().x!==_)}catch{return!1}}const schnorr$1={getPublicKey:schnorrGetPublicKey$1,sign:schnorrSign$1,verify:schnorrVerify$1,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x:lift_x$1,pointToBytes:pointToBytes$1,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,taggedHash:taggedHash$1,mod:mod$1}},crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a=e=>e instanceof Uint8Array,createView$1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$1=(e,s)=>e<<32-s|e>>>s,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");const hexes$2=Array.from({length:256},(e,s)=>s.toString(16).padStart(2,"0"));function bytesToHex$2(e){if(!u8a(e))throw new Error("Uint8Array expected");let s="";for(let o=0;o<e.length;o++)s+=hexes$2[e[o]];return s}function hexToBytes$2(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const s=e.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const o=new Uint8Array(s/2);for(let a=0;a<o.length;a++){const c=a*2,h=e.slice(c,c+2),g=Number.parseInt(h,16);if(Number.isNaN(g)||g<0)throw new Error("Invalid byte sequence");o[a]=g}return o}function utf8ToBytes$2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function toBytes$1(e){if(typeof e=="string"&&(e=utf8ToBytes$2(e)),!u8a(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function concatBytes$2(...e){const s=new Uint8Array(e.reduce((a,c)=>a+c.length,0));let o=0;return e.forEach(a=>{if(!u8a(a))throw new Error("Uint8Array expected");s.set(a,o),o+=a.length}),s}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor$1(e){const s=a=>e().update(toBytes$1(a)).digest(),o=e();return s.outputLen=o.outputLen,s.blockLen=o.blockLen,s.create=()=>e(),s}function randomBytes$1(e=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function number$2(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bool$1(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function bytes$2(e,...s){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(e.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${e.length}`)}function hash$1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(e.outputLen),number$2(e.blockLen)}function exists$1(e,s=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(s&&e.finished)throw new Error("Hash#digest() has already been called")}function output$1(e,s){bytes$2(e);const o=s.outputLen;if(e.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}const assert={number:number$2,bool:bool$1,bytes:bytes$2,hash:hash$1,exists:exists$1,output:output$1};function setBigUint64$1(e,s,o,a){if(typeof e.setBigUint64=="function")return e.setBigUint64(s,o,a);const c=BigInt(32),h=BigInt(4294967295),g=Number(o>>c&h),_=Number(o&h),b=a?4:0,$=a?0:4;e.setUint32(s+b,g,a),e.setUint32(s+$,_,a)}class SHA2 extends Hash$1{constructor(s,o,a,c){super(),this.blockLen=s,this.outputLen=o,this.padOffset=a,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=createView$1(this.buffer)}update(s){assert.exists(this);const{view:o,buffer:a,blockLen:c}=this;s=toBytes$1(s);const h=s.length;for(let g=0;g<h;){const _=Math.min(c-this.pos,h-g);if(_===c){const b=createView$1(s);for(;c<=h-g;g+=c)this.process(b,g);continue}a.set(s.subarray(g,g+_),this.pos),this.pos+=_,g+=_,this.pos===c&&(this.process(o,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){assert.exists(this),assert.output(s,this),this.finished=!0;const{buffer:o,view:a,blockLen:c,isLE:h}=this;let{pos:g}=this;o[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>c-g&&(this.process(a,0),g=0);for(let j=g;j<c;j++)o[j]=0;setBigUint64$1(a,c-8,BigInt(this.length*8),h),this.process(a,0);const _=createView$1(s),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const $=b/4,_e=this.get();if($>_e.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<$;j++)_.setUint32(4*j,_e[j],h)}digest(){const{buffer:s,outputLen:o}=this;this.digestInto(s);const a=s.slice(0,o);return this.destroy(),a}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:o,buffer:a,length:c,finished:h,destroyed:g,pos:_}=this;return s.length=c,s.pos=_,s.finished=h,s.destroyed=g,c%o&&s.buffer.set(a),s}}const Chi$1=(e,s,o)=>e&s^~e&o,Maj$1=(e,s,o)=>e&s^e&o^s&o,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:s,B:o,C:a,D:c,E:h,F:g,G:_,H:b}=this;return[s,o,a,c,h,g,_,b]}set(s,o,a,c,h,g,_,b){this.A=s|0,this.B=o|0,this.C=a|0,this.D=c|0,this.E=h|0,this.F=g|0,this.G=_|0,this.H=b|0}process(s,o){for(let j=0;j<16;j++,o+=4)SHA256_W$1[j]=s.getUint32(o,!1);for(let j=16;j<64;j++){const et=SHA256_W$1[j-15],tt=SHA256_W$1[j-2],nt=rotr$1(et,7)^rotr$1(et,18)^et>>>3,rt=rotr$1(tt,17)^rotr$1(tt,19)^tt>>>10;SHA256_W$1[j]=rt+SHA256_W$1[j-7]+nt+SHA256_W$1[j-16]|0}let{A:a,B:c,C:h,D:g,E:_,F:b,G:$,H:_e}=this;for(let j=0;j<64;j++){const et=rotr$1(_,6)^rotr$1(_,11)^rotr$1(_,25),tt=_e+et+Chi$1(_,b,$)+SHA256_K$1[j]+SHA256_W$1[j]|0,rt=(rotr$1(a,2)^rotr$1(a,13)^rotr$1(a,22))+Maj$1(a,c,h)|0;_e=$,$=b,b=_,_=g+tt|0,g=h,h=c,c=a,a=tt+rt|0}a=a+this.A|0,c=c+this.B|0,h=h+this.C|0,g=g+this.D|0,_=_+this.E|0,b=b+this.F|0,$=$+this.G|0,_e=_e+this.H|0,this.set(a,c,h,g,_,b,$,_e)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class SHA224 extends SHA256$1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const sha256$1=wrapConstructor$1(()=>new SHA256$1);wrapConstructor$1(()=>new SHA224);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function chain$1(...e){const s=(c,h)=>g=>c(h(g)),o=Array.from(e).reverse().reduce((c,h)=>c?s(c,h.encode):h.encode,void 0),a=e.reduce((c,h)=>c?s(c,h.decode):h.decode,void 0);return{encode:o,decode:a}}function alphabet$1(e){return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return s.map(o=>{if(assertNumber(o),o<0||o>=e.length)throw new Error(`Digit index outside alphabet: ${o} (alphabet: ${e.length})`);return e[o]})},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("alphabet.decode input should be array of strings");return s.map(o=>{if(typeof o!="string")throw new Error(`alphabet.decode: not string element=${o}`);const a=e.indexOf(o);if(a===-1)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return a})}}}function join$1(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("join.encode input should be array of strings");for(let o of s)if(typeof o!="string")throw new Error(`join.encode: non-string input=${o}`);return s.join(e)},decode:s=>{if(typeof s!="string")throw new Error("join.decode input should be string");return s.split(e)}}}function padding(e,s="="){if(assertNumber(e),typeof s!="string")throw new Error("padding chr should be string");return{encode(o){if(!Array.isArray(o)||o.length&&typeof o[0]!="string")throw new Error("padding.encode input should be array of strings");for(let a of o)if(typeof a!="string")throw new Error(`padding.encode: non-string input=${a}`);for(;o.length*e%8;)o.push(s);return o},decode(o){if(!Array.isArray(o)||o.length&&typeof o[0]!="string")throw new Error("padding.encode input should be array of strings");for(let c of o)if(typeof c!="string")throw new Error(`padding.decode: non-string input=${c}`);let a=o.length;if(a*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;a>0&&o[a-1]===s;a--)if(!((a-1)*e%8))throw new Error("Invalid padding: string has too much padding");return o.slice(0,a)}}}function normalize$1(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:s=>s,decode:s=>e(s)}}function convertRadix(e,s,o){if(s<2)throw new Error(`convertRadix: wrong from=${s}, base cannot be less than 2`);if(o<2)throw new Error(`convertRadix: wrong to=${o}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let a=0;const c=[],h=Array.from(e);for(h.forEach(g=>{if(assertNumber(g),g<0||g>=s)throw new Error(`Wrong integer: ${g}`)});;){let g=0,_=!0;for(let b=a;b<h.length;b++){const $=h[b],_e=s*g+$;if(!Number.isSafeInteger(_e)||s*g/s!==g||_e-$!==s*g)throw new Error("convertRadix: carry overflow");if(g=_e%o,h[b]=Math.floor(_e/o),!Number.isSafeInteger(h[b])||h[b]*o+g!==_e)throw new Error("convertRadix: carry overflow");if(_)h[b]?_=!1:a=b;else continue}if(c.push(g),_)break}for(let g=0;g<e.length-1&&e[g]===0;g++)c.push(0);return c.reverse()}const gcd$1=(e,s)=>s?gcd$1(s,e%s):e,radix2carry$1=(e,s)=>e+(s-gcd$1(e,s));function convertRadix2$1(e,s,o,a){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(s<=0||s>32)throw new Error(`convertRadix2: wrong from=${s}`);if(o<=0||o>32)throw new Error(`convertRadix2: wrong to=${o}`);if(radix2carry$1(s,o)>32)throw new Error(`convertRadix2: carry overflow from=${s} to=${o} carryBits=${radix2carry$1(s,o)}`);let c=0,h=0;const g=2**o-1,_=[];for(const b of e){if(assertNumber(b),b>=2**s)throw new Error(`convertRadix2: invalid data word=${b} from=${s}`);if(c=c<<s|b,h+s>32)throw new Error(`convertRadix2: carry overflow pos=${h} from=${s}`);for(h+=s;h>=o;h-=o)_.push((c>>h-o&g)>>>0);c&=2**h-1}if(c=c<<o-h&g,!a&&h>=s)throw new Error("Excess padding");if(!a&&c)throw new Error(`Non-zero padding: ${c}`);return a&&h>0&&_.push(c>>>0),_}function radix(e){return assertNumber(e),{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(s),2**8,e)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(s,e,2**8))}}}function radix2$1(e,s=!1){if(assertNumber(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry$1(8,e)>32||radix2carry$1(e,8)>32)throw new Error("radix2: carry overflow");return{encode:o=>{if(!(o instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2$1(Array.from(o),8,e,!s)},decode:o=>{if(!Array.isArray(o)||o.length&&typeof o[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2$1(o,e,8,s))}}}function unsafeWrapper$1(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...s){try{return e.apply(null,s)}catch{}}}const base16=chain$1(radix2$1(4),alphabet$1("0123456789ABCDEF"),join$1("")),base32=chain$1(radix2$1(5),alphabet$1("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join$1(""));chain$1(radix2$1(5),alphabet$1("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join$1(""));chain$1(radix2$1(5),alphabet$1("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join$1(""),normalize$1(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const base64=chain$1(radix2$1(6),alphabet$1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join$1("")),base64url=chain$1(radix2$1(6),alphabet$1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join$1("")),genBase58=e=>chain$1(radix(58),alphabet$1(e),join$1("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11],base58xmr={encode(e){let s="";for(let o=0;o<e.length;o+=8){const a=e.subarray(o,o+8);s+=base58.encode(a).padStart(XMR_BLOCK_LEN[a.length],"1")}return s},decode(e){let s=[];for(let o=0;o<e.length;o+=11){const a=e.slice(o,o+11),c=XMR_BLOCK_LEN.indexOf(a.length),h=base58.decode(a);for(let g=0;g<h.length-c;g++)if(h[g]!==0)throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(h.slice(h.length-c)))}return Uint8Array.from(s)}},BECH_ALPHABET$1=chain$1(alphabet$1("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join$1("")),POLYMOD_GENERATORS$1=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod$1(e){const s=e>>25;let o=(e&33554431)<<5;for(let a=0;a<POLYMOD_GENERATORS$1.length;a++)(s>>a&1)===1&&(o^=POLYMOD_GENERATORS$1[a]);return o}function bechChecksum$1(e,s,o=1){const a=e.length;let c=1;for(let h=0;h<a;h++){const g=e.charCodeAt(h);if(g<33||g>126)throw new Error(`Invalid prefix (${e})`);c=bech32Polymod$1(c)^g>>5}c=bech32Polymod$1(c);for(let h=0;h<a;h++)c=bech32Polymod$1(c)^e.charCodeAt(h)&31;for(let h of s)c=bech32Polymod$1(c)^h;for(let h=0;h<6;h++)c=bech32Polymod$1(c);return c^=o,BECH_ALPHABET$1.encode(convertRadix2$1([c%2**30],30,5,!1))}function genBech32$1(e){const s=e==="bech32"?1:734539939,o=radix2$1(5),a=o.decode,c=o.encode,h=unsafeWrapper$1(a);function g(_e,j,et=90){if(typeof _e!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof _e}`);if(!Array.isArray(j)||j.length&&typeof j[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof j}`);const tt=_e.length+7+j.length;if(et!==!1&&tt>et)throw new TypeError(`Length ${tt} exceeds limit ${et}`);return _e=_e.toLowerCase(),`${_e}1${BECH_ALPHABET$1.encode(j)}${bechChecksum$1(_e,j,s)}`}function _(_e,j=90){if(typeof _e!="string")throw new Error(`bech32.decode input should be string, not ${typeof _e}`);if(_e.length<8||j!==!1&&_e.length>j)throw new TypeError(`Wrong string length: ${_e.length} (${_e}). Expected (8..${j})`);const et=_e.toLowerCase();if(_e!==et&&_e!==_e.toUpperCase())throw new Error("String must be lowercase or uppercase");_e=et;const tt=_e.lastIndexOf("1");if(tt===0||tt===-1)throw new Error('Letter "1" must be present between prefix and data only');const nt=_e.slice(0,tt),rt=_e.slice(tt+1);if(rt.length<6)throw new Error("Data must be at least 6 characters long");const ot=BECH_ALPHABET$1.decode(rt).slice(0,-6),it=bechChecksum$1(nt,ot,s);if(!rt.endsWith(it))throw new Error(`Invalid checksum in ${_e}: expected "${it}"`);return{prefix:nt,words:ot}}const b=unsafeWrapper$1(_);function $(_e){const{prefix:j,words:et}=_(_e,!1);return{prefix:j,words:et,bytes:a(et)}}return{encode:g,decode:_,decodeToBytes:$,decodeUnsafe:b,fromWords:a,fromWordsUnsafe:h,toWords:c}}const bech32$1=genBech32$1("bech32");genBech32$1("bech32m");const utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},hex=chain$1(radix2$1(4),alphabet$1("0123456789abcdef"),join$1(""),normalize$1(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),CODERS={utf8,hex,base16,base32,base64,base64url,base58,base58xmr};`${Object.keys(CODERS).join(", ")}`;function number$1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function bool(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function isBytes$3(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function bytes$1(e,...s){if(!isBytes$3(e))throw new Error("Uint8Array expected");if(s.length>0&&!s.includes(e.length))throw new Error(`Uint8Array expected of length ${s}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function checkOpts(e,s){if(s==null||typeof s!="object")throw new Error("options must be defined");return Object.assign(e,s)}function equalBytes$1(e,s){if(e.length!==s.length)return!1;let o=0;for(let a=0;a<e.length;a++)o|=e[a]^s[a];return o===0}const wrapCipher=(e,s)=>(Object.assign(s,e),s),BLOCK_SIZE=16,POLY=283;function mul2(e){return e<<1^POLY&-(e>>7)}function mul(e,s){let o=0;for(;s>0;s>>=1)o^=e&-(s&1),e=mul2(e);return o}const sbox=(()=>{let e=new Uint8Array(256);for(let o=0,a=1;o<256;o++,a^=mul2(a))e[o]=a;const s=new Uint8Array(256);s[0]=99;for(let o=0;o<255;o++){let a=e[255-o];a|=a<<8,s[e[o]]=(a^a>>4^a>>5^a>>6^a>>7^99)&255}return s})(),invSbox=sbox.map((e,s)=>sbox.indexOf(s)),rotr32_8=e=>e<<24|e>>>8,rotl32_8=e=>e<<8|e>>>24;function genTtable(e,s){if(e.length!==256)throw new Error("Wrong sbox length");const o=new Uint32Array(256).map(($,_e)=>s(e[_e])),a=o.map(rotl32_8),c=a.map(rotl32_8),h=c.map(rotl32_8),g=new Uint32Array(256*256),_=new Uint32Array(256*256),b=new Uint16Array(256*256);for(let $=0;$<256;$++)for(let _e=0;_e<256;_e++){const j=$*256+_e;g[j]=o[$]^a[_e],_[j]=c[$]^h[_e],b[j]=e[$]<<8|e[_e]}return{sbox:e,sbox2:b,T0:o,T1:a,T2:c,T3:h,T01:g,T23:_}}const tableEncoding=genTtable(sbox,e=>mul(e,3)<<24|e<<16|e<<8|mul(e,2)),tableDecoding=genTtable(invSbox,e=>mul(e,11)<<24|mul(e,13)<<16|mul(e,9)<<8|mul(e,14)),xPowers=(()=>{const e=new Uint8Array(16);for(let s=0,o=1;s<16;s++,o=mul2(o))e[s]=o;return e})();function expandKeyLE(e){bytes$1(e);const s=e.length;if(![16,24,32].includes(s))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${s}`);const{sbox2:o}=tableEncoding,a=u32(e),c=a.length,h=_=>applySbox(o,_,_,_,_),g=new Uint32Array(s+28);g.set(a);for(let _=c;_<g.length;_++){let b=g[_-1];_%c===0?b=h(rotr32_8(b))^xPowers[_/c-1]:c>6&&_%c===4&&(b=h(b)),g[_]=g[_-c]^b}return g}function expandKeyDecLE(e){const s=expandKeyLE(e),o=s.slice(),a=s.length,{sbox2:c}=tableEncoding,{T0:h,T1:g,T2:_,T3:b}=tableDecoding;for(let $=0;$<a;$+=4)for(let _e=0;_e<4;_e++)o[$+_e]=s[a-$-4+_e];s.fill(0);for(let $=4;$<a-4;$++){const _e=o[$],j=applySbox(c,_e,_e,_e,_e);o[$]=h[j&255]^g[j>>>8&255]^_[j>>>16&255]^b[j>>>24]}return o}function apply0123(e,s,o,a,c,h){return e[o<<8&65280|a>>>8&255]^s[c>>>8&65280|h>>>24&255]}function applySbox(e,s,o,a,c){return e[s&255|o&65280]|e[a>>>16&255|c>>>16&65280]<<16}function encrypt$2(e,s,o,a,c){const{sbox2:h,T01:g,T23:_}=tableEncoding;let b=0;s^=e[b++],o^=e[b++],a^=e[b++],c^=e[b++];const $=e.length/4-2;for(let nt=0;nt<$;nt++){const rt=e[b++]^apply0123(g,_,s,o,a,c),ot=e[b++]^apply0123(g,_,o,a,c,s),it=e[b++]^apply0123(g,_,a,c,s,o),st=e[b++]^apply0123(g,_,c,s,o,a);s=rt,o=ot,a=it,c=st}const _e=e[b++]^applySbox(h,s,o,a,c),j=e[b++]^applySbox(h,o,a,c,s),et=e[b++]^applySbox(h,a,c,s,o),tt=e[b++]^applySbox(h,c,s,o,a);return{s0:_e,s1:j,s2:et,s3:tt}}function decrypt$2(e,s,o,a,c){const{sbox2:h,T01:g,T23:_}=tableDecoding;let b=0;s^=e[b++],o^=e[b++],a^=e[b++],c^=e[b++];const $=e.length/4-2;for(let nt=0;nt<$;nt++){const rt=e[b++]^apply0123(g,_,s,c,a,o),ot=e[b++]^apply0123(g,_,o,s,c,a),it=e[b++]^apply0123(g,_,a,o,s,c),st=e[b++]^apply0123(g,_,c,a,o,s);s=rt,o=ot,a=it,c=st}const _e=e[b++]^applySbox(h,s,c,a,o),j=e[b++]^applySbox(h,o,s,c,a),et=e[b++]^applySbox(h,a,o,s,c),tt=e[b++]^applySbox(h,c,a,o,s);return{s0:_e,s1:j,s2:et,s3:tt}}function getDst(e,s){if(!s)return new Uint8Array(e);if(bytes$1(s),s.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${s.length}`);return s}function validateBlockDecrypt(e){if(bytes$1(e),e.length%BLOCK_SIZE!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${BLOCK_SIZE}`)}function validateBlockEncrypt(e,s,o){let a=e.length;const c=a%BLOCK_SIZE;if(!s&&c!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const h=u32(e);if(s){let b=BLOCK_SIZE-c;b||(b=BLOCK_SIZE),a=a+b}const g=getDst(a,o),_=u32(g);return{b:h,o:_,out:g}}function validatePCKS(e,s){if(!s)return e;const o=e.length;if(!o)throw new Error("aes/pcks5: empty ciphertext not allowed");const a=e[o-1];if(a<=0||a>16)throw new Error(`aes/pcks5: wrong padding byte: ${a}`);const c=e.subarray(0,-a);for(let h=0;h<a;h++)if(e[o-h-1]!==a)throw new Error("aes/pcks5: wrong padding");return c}function padPCKS(e){const s=new Uint8Array(16),o=u32(s);s.set(e);const a=BLOCK_SIZE-e.length;for(let c=BLOCK_SIZE-a;c<BLOCK_SIZE;c++)s[c]=a;return o}const cbc=wrapCipher({blockSize:16,nonceLength:16},function(s,o,a={}){bytes$1(s),bytes$1(o,16);const c=!a.disablePadding;return{encrypt:(h,g)=>{const _=expandKeyLE(s),{b,o:$,out:_e}=validateBlockEncrypt(h,c,g),j=u32(o);let et=j[0],tt=j[1],nt=j[2],rt=j[3],ot=0;for(;ot+4<=b.length;)et^=b[ot+0],tt^=b[ot+1],nt^=b[ot+2],rt^=b[ot+3],{s0:et,s1:tt,s2:nt,s3:rt}=encrypt$2(_,et,tt,nt,rt),$[ot++]=et,$[ot++]=tt,$[ot++]=nt,$[ot++]=rt;if(c){const it=padPCKS(h.subarray(ot*4));et^=it[0],tt^=it[1],nt^=it[2],rt^=it[3],{s0:et,s1:tt,s2:nt,s3:rt}=encrypt$2(_,et,tt,nt,rt),$[ot++]=et,$[ot++]=tt,$[ot++]=nt,$[ot++]=rt}return _.fill(0),_e},decrypt:(h,g)=>{validateBlockDecrypt(h);const _=expandKeyDecLE(s),b=u32(o),$=getDst(h.length,g),_e=u32(h),j=u32($);let et=b[0],tt=b[1],nt=b[2],rt=b[3];for(let ot=0;ot+4<=_e.length;){const it=et,st=tt,at=nt,lt=rt;et=_e[ot+0],tt=_e[ot+1],nt=_e[ot+2],rt=_e[ot+3];const{s0:wt,s1:gt,s2:pt,s3:yt}=decrypt$2(_,et,tt,nt,rt);j[ot++]=wt^it,j[ot++]=gt^st,j[ot++]=pt^at,j[ot++]=yt^lt}return _.fill(0),validatePCKS($,c)}}}),_utf8ToBytes=e=>Uint8Array.from(e.split("").map(s=>s.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);sigma32_32.slice();function rotl(e,s){return e<<s|e>>>32-s}function isAligned32(e){return e.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(e,s,o,a,c,h,g,_){const b=c.length,$=new Uint8Array(BLOCK_LEN),_e=u32($),j=isAligned32(c)&&isAligned32(h),et=j?u32(c):U32_EMPTY,tt=j?u32(h):U32_EMPTY;for(let nt=0;nt<b;g++){if(e(s,o,a,_e,g,_),g>=MAX_COUNTER)throw new Error("arx: counter overflow");const rt=Math.min(BLOCK_LEN,b-nt);if(j&&rt===BLOCK_LEN){const ot=nt/4;if(nt%4!==0)throw new Error("arx: invalid block position");for(let it=0,st;it<BLOCK_LEN32;it++)st=ot+it,tt[st]=et[st]^_e[it];nt+=BLOCK_LEN;continue}for(let ot=0,it;ot<rt;ot++)it=nt+ot,h[it]=c[it]^$[ot];nt+=rt}}function createCipher(e,s){const{allowShortKeys:o,extendNonceFn:a,counterLength:c,counterRight:h,rounds:g}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},s);if(typeof e!="function")throw new Error("core must be a function");return number$1(c),number$1(g),bool(h),bool(o),(_,b,$,_e,j=0)=>{bytes$1(_),bytes$1(b),bytes$1($);const et=$.length;if(_e||(_e=new Uint8Array(et)),bytes$1(_e),number$1(j),j<0||j>=MAX_COUNTER)throw new Error("arx: counter overflow");if(_e.length<et)throw new Error(`arx: output (${_e.length}) is shorter than data (${et})`);const tt=[];let nt=_.length,rt,ot;if(nt===32)rt=_.slice(),tt.push(rt),ot=sigma32_32;else if(nt===16&&o)rt=new Uint8Array(32),rt.set(_),rt.set(_,16),ot=sigma16_32,tt.push(rt);else throw new Error(`arx: invalid 32-byte key, got length=${nt}`);isAligned32(b)||(b=b.slice(),tt.push(b));const it=u32(rt);if(a){if(b.length!==24)throw new Error("arx: extended nonce must be 24 bytes");a(ot,it,u32(b.subarray(0,16)),it),b=b.subarray(16)}const st=16-c;if(st!==b.length)throw new Error(`arx: nonce must be ${st} or 16 bytes`);if(st!==12){const lt=new Uint8Array(12);lt.set(b,h?0:12-b.length),b=lt,tt.push(b)}const at=u32(b);for(runCipher(e,ot,it,at,$,_e,j,g);tt.length>0;)tt.pop().fill(0);return _e}}function chachaCore(e,s,o,a,c,h=20){let g=e[0],_=e[1],b=e[2],$=e[3],_e=s[0],j=s[1],et=s[2],tt=s[3],nt=s[4],rt=s[5],ot=s[6],it=s[7],st=c,at=o[0],lt=o[1],wt=o[2],gt=g,pt=_,yt=b,St=$,kt=_e,dt=j,mt=et,bt=tt,_t=nt,ft=rt,ht=ot,Et=it,vt=st,xt=at,Rt=lt,$t=wt;for(let Nt=0;Nt<h;Nt+=2)gt=gt+kt|0,vt=rotl(vt^gt,16),_t=_t+vt|0,kt=rotl(kt^_t,12),gt=gt+kt|0,vt=rotl(vt^gt,8),_t=_t+vt|0,kt=rotl(kt^_t,7),pt=pt+dt|0,xt=rotl(xt^pt,16),ft=ft+xt|0,dt=rotl(dt^ft,12),pt=pt+dt|0,xt=rotl(xt^pt,8),ft=ft+xt|0,dt=rotl(dt^ft,7),yt=yt+mt|0,Rt=rotl(Rt^yt,16),ht=ht+Rt|0,mt=rotl(mt^ht,12),yt=yt+mt|0,Rt=rotl(Rt^yt,8),ht=ht+Rt|0,mt=rotl(mt^ht,7),St=St+bt|0,$t=rotl($t^St,16),Et=Et+$t|0,bt=rotl(bt^Et,12),St=St+bt|0,$t=rotl($t^St,8),Et=Et+$t|0,bt=rotl(bt^Et,7),gt=gt+dt|0,$t=rotl($t^gt,16),ht=ht+$t|0,dt=rotl(dt^ht,12),gt=gt+dt|0,$t=rotl($t^gt,8),ht=ht+$t|0,dt=rotl(dt^ht,7),pt=pt+mt|0,vt=rotl(vt^pt,16),Et=Et+vt|0,mt=rotl(mt^Et,12),pt=pt+mt|0,vt=rotl(vt^pt,8),Et=Et+vt|0,mt=rotl(mt^Et,7),yt=yt+bt|0,xt=rotl(xt^yt,16),_t=_t+xt|0,bt=rotl(bt^_t,12),yt=yt+bt|0,xt=rotl(xt^yt,8),_t=_t+xt|0,bt=rotl(bt^_t,7),St=St+kt|0,Rt=rotl(Rt^St,16),ft=ft+Rt|0,kt=rotl(kt^ft,12),St=St+kt|0,Rt=rotl(Rt^St,8),ft=ft+Rt|0,kt=rotl(kt^ft,7);let Ct=0;a[Ct++]=g+gt|0,a[Ct++]=_+pt|0,a[Ct++]=b+yt|0,a[Ct++]=$+St|0,a[Ct++]=_e+kt|0,a[Ct++]=j+dt|0,a[Ct++]=et+mt|0,a[Ct++]=tt+bt|0,a[Ct++]=nt+_t|0,a[Ct++]=rt+ft|0,a[Ct++]=ot+ht|0,a[Ct++]=it+Et|0,a[Ct++]=st+vt|0,a[Ct++]=at+xt|0,a[Ct++]=lt+Rt|0,a[Ct++]=wt+$t|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1});let HMAC$1=class extends Hash$1{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,assert.hash(s);const a=toBytes$1(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,h=new Uint8Array(c);h.set(a.length>c?s.create().update(a).digest():a);for(let g=0;g<h.length;g++)h[g]^=54;this.iHash.update(h),this.oHash=s.create();for(let g=0;g<h.length;g++)h[g]^=106;this.oHash.update(h),h.fill(0)}update(s){return assert.exists(this),this.iHash.update(s),this}digestInto(s){assert.exists(this),assert.bytes(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:h,blockLen:g,outputLen:_}=this;return s=s,s.finished=c,s.destroyed=h,s.blockLen=g,s.outputLen=_,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$1=(e,s,o)=>new HMAC$1(e,s).update(o).digest();hmac$1.create=(e,s)=>new HMAC$1(e,s);function extract(e,s,o){return assert.hash(e),hmac$1(e,toBytes$1(o),toBytes$1(s))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(e,s,o,a=32){if(assert.hash(e),assert.number(a),a>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const c=Math.ceil(a/e.outputLen);o===void 0&&(o=EMPTY_BUFFER);const h=new Uint8Array(c*e.outputLen),g=hmac$1.create(e,s),_=g._cloneInto(),b=new Uint8Array(g.outputLen);for(let $=0;$<c;$++)HKDF_COUNTER[0]=$+1,_.update($===0?EMPTY_BUFFER:b).update(o).update(HKDF_COUNTER).digestInto(b),h.set(b,e.outputLen*$),g._cloneInto(_);return g.destroy(),_.destroy(),b.fill(0),HKDF_COUNTER.fill(0),h.slice(0,a)}var __defProp=Object.defineProperty,__export=(e,s)=>{for(var o in s)__defProp(e,o,{get:s[o],enumerable:!0})},verifiedSymbol=Symbol("verified"),isRecord=e=>e instanceof Object;function validateEvent(e){if(!isRecord(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let s=0;s<e.tags.length;s++){let o=e.tags[s];if(!Array.isArray(o))return!1;for(let a=0;a<o.length;a++)if(typeof o[a]=="object")return!1}return!0}var utils_exports={};__export(utils_exports,{Queue:()=>Queue$1,QueueNode:()=>QueueNode,binarySearch:()=>binarySearch,insertEventIntoAscendingList:()=>insertEventIntoAscendingList,insertEventIntoDescendingList:()=>insertEventIntoDescendingList,normalizeURL:()=>normalizeURL,utf8Decoder:()=>utf8Decoder,utf8Encoder:()=>utf8Encoder});var utf8Decoder=new TextDecoder("utf-8"),utf8Encoder=new TextEncoder;function normalizeURL(e){e.indexOf("://")===-1&&(e="wss://"+e);let s=new URL(e);return s.pathname=s.pathname.replace(/\/+/g,"/"),s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),(s.port==="80"&&s.protocol==="ws:"||s.port==="443"&&s.protocol==="wss:")&&(s.port=""),s.searchParams.sort(),s.hash="",s.toString()}function insertEventIntoDescendingList(e,s){const[o,a]=binarySearch(e,c=>s.id===c.id?0:s.created_at===c.created_at?-1:c.created_at-s.created_at);return a||e.splice(o,0,s),e}function insertEventIntoAscendingList(e,s){const[o,a]=binarySearch(e,c=>s.id===c.id?0:s.created_at===c.created_at?-1:s.created_at-c.created_at);return a||e.splice(o,0,s),e}function binarySearch(e,s){let o=0,a=e.length-1;for(;o<=a;){const c=Math.floor((o+a)/2),h=s(e[c]);if(h===0)return[c,!0];h<0?a=c-1:o=c+1}return[o,!1]}var QueueNode=class{constructor(e){ct(this,"value");ct(this,"next",null);ct(this,"prev",null);this.value=e}},Queue$1=class{constructor(){ct(this,"first");ct(this,"last");this.first=null,this.last=null}enqueue(s){const o=new QueueNode(s);return this.last?this.last===this.first?(this.last=o,this.last.prev=this.first,this.first.next=o):(o.prev=this.last,this.last.next=o,this.last=o):(this.first=o,this.last=o),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const o=this.first;return this.first=null,this.last=null,o.value}const s=this.first;return this.first=s.next,s.value}},JS=class{generateSecretKey(){return schnorr$1.utils.randomPrivateKey()}getPublicKey(e){return bytesToHex$2(schnorr$1.getPublicKey(e))}finalizeEvent(e,s){const o=e;return o.pubkey=bytesToHex$2(schnorr$1.getPublicKey(s)),o.id=getEventHash$1(o),o.sig=bytesToHex$2(schnorr$1.sign(getEventHash$1(o),s)),o[verifiedSymbol]=!0,o}verifyEvent(e){if(typeof e[verifiedSymbol]=="boolean")return e[verifiedSymbol];const s=getEventHash$1(e);if(s!==e.id)return e[verifiedSymbol]=!1,!1;try{const o=schnorr$1.verify(e.sig,s,e.pubkey);return e[verifiedSymbol]=o,o}catch{return e[verifiedSymbol]=!1,!1}}};function serializeEvent(e){if(!validateEvent(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function getEventHash$1(e){let s=sha256$1(utf8Encoder.encode(serializeEvent(e)));return bytesToHex$2(s)}var i=new JS,generateSecretKey=i.generateSecretKey,getPublicKey=i.getPublicKey,finalizeEvent=i.finalizeEvent,verifyEvent=i.verifyEvent,kinds_exports={};__export(kinds_exports,{Application:()=>Application,BadgeAward:()=>BadgeAward,BadgeDefinition:()=>BadgeDefinition,BlockedRelaysList:()=>BlockedRelaysList,BookmarkList:()=>BookmarkList,Bookmarksets:()=>Bookmarksets,Calendar:()=>Calendar,CalendarEventRSVP:()=>CalendarEventRSVP,ChannelCreation:()=>ChannelCreation,ChannelHideMessage:()=>ChannelHideMessage,ChannelMessage:()=>ChannelMessage,ChannelMetadata:()=>ChannelMetadata,ChannelMuteUser:()=>ChannelMuteUser,ClassifiedListing:()=>ClassifiedListing,ClientAuth:()=>ClientAuth,CommunitiesList:()=>CommunitiesList,CommunityDefinition:()=>CommunityDefinition,CommunityPostApproval:()=>CommunityPostApproval,Contacts:()=>Contacts,CreateOrUpdateProduct:()=>CreateOrUpdateProduct,CreateOrUpdateStall:()=>CreateOrUpdateStall,Curationsets:()=>Curationsets,Date:()=>Date2,DirectMessageRelaysList:()=>DirectMessageRelaysList,DraftClassifiedListing:()=>DraftClassifiedListing,DraftLong:()=>DraftLong,Emojisets:()=>Emojisets,EncryptedDirectMessage:()=>EncryptedDirectMessage,EventDeletion:()=>EventDeletion,FileMetadata:()=>FileMetadata,FileServerPreference:()=>FileServerPreference,Followsets:()=>Followsets,GenericRepost:()=>GenericRepost,Genericlists:()=>Genericlists,GiftWrap:()=>GiftWrap,HTTPAuth:()=>HTTPAuth,Handlerinformation:()=>Handlerinformation,Handlerrecommendation:()=>Handlerrecommendation,Highlights:()=>Highlights,InterestsList:()=>InterestsList,Interestsets:()=>Interestsets,JobFeedback:()=>JobFeedback,JobRequest:()=>JobRequest,JobResult:()=>JobResult,Label:()=>Label,LightningPubRPC:()=>LightningPubRPC,LiveChatMessage:()=>LiveChatMessage,LiveEvent:()=>LiveEvent,LongFormArticle:()=>LongFormArticle,Metadata:()=>Metadata,Mutelist:()=>Mutelist,NWCWalletInfo:()=>NWCWalletInfo,NWCWalletRequest:()=>NWCWalletRequest,NWCWalletResponse:()=>NWCWalletResponse,NostrConnect:()=>NostrConnect,OpenTimestamps:()=>OpenTimestamps,Pinlist:()=>Pinlist,PrivateDirectMessage:()=>PrivateDirectMessage,ProblemTracker:()=>ProblemTracker,ProfileBadges:()=>ProfileBadges,PublicChatsList:()=>PublicChatsList,Reaction:()=>Reaction,RecommendRelay:()=>RecommendRelay,RelayList:()=>RelayList,Relaysets:()=>Relaysets,Report:()=>Report,Reporting:()=>Reporting,Repost:()=>Repost,Seal:()=>Seal,SearchRelaysList:()=>SearchRelaysList,ShortTextNote:()=>ShortTextNote,Time:()=>Time,UserEmojiList:()=>UserEmojiList,UserStatuses:()=>UserStatuses,Zap:()=>Zap,ZapGoal:()=>ZapGoal,ZapRequest:()=>ZapRequest,classifyKind:()=>classifyKind,isEphemeralKind:()=>isEphemeralKind,isParameterizedReplaceableKind:()=>isParameterizedReplaceableKind,isRegularKind:()=>isRegularKind,isReplaceableKind:()=>isReplaceableKind});function isRegularKind(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function isReplaceableKind(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function isEphemeralKind(e){return 2e4<=e&&e<3e4}function isParameterizedReplaceableKind(e){return 3e4<=e&&e<4e4}function classifyKind(e){return isRegularKind(e)?"regular":isReplaceableKind(e)?"replaceable":isEphemeralKind(e)?"ephemeral":isParameterizedReplaceableKind(e)?"parameterized":"unknown"}var Metadata=0,ShortTextNote=1,RecommendRelay=2,Contacts=3,EncryptedDirectMessage=4,EventDeletion=5,Repost=6,Reaction=7,BadgeAward=8,Seal=13,PrivateDirectMessage=14,GenericRepost=16,ChannelCreation=40,ChannelMetadata=41,ChannelMessage=42,ChannelHideMessage=43,ChannelMuteUser=44,OpenTimestamps=1040,FileMetadata=1063,LiveChatMessage=1311,ProblemTracker=1971,Report=1984,Reporting=1984,Label=1985,CommunityPostApproval=4550,JobRequest=5999,JobResult=6999,JobFeedback=7e3,ZapGoal=9041,ZapRequest=9734,Zap=9735,Highlights=9802,Mutelist=1e4,Pinlist=10001,RelayList=10002,BookmarkList=10003,CommunitiesList=10004,PublicChatsList=10005,BlockedRelaysList=10006,SearchRelaysList=10007,InterestsList=10015,UserEmojiList=10030,DirectMessageRelaysList=10050,GiftWrap=10059,FileServerPreference=10096,NWCWalletInfo=13194,LightningPubRPC=21e3,ClientAuth=22242,NWCWalletRequest=23194,NWCWalletResponse=23195,NostrConnect=24133,HTTPAuth=27235,Followsets=3e4,Genericlists=30001,Relaysets=30002,Bookmarksets=30003,Curationsets=30004,ProfileBadges=30008,BadgeDefinition=30009,Interestsets=30015,CreateOrUpdateStall=30017,CreateOrUpdateProduct=30018,LongFormArticle=30023,DraftLong=30024,Emojisets=30030,Application=30078,LiveEvent=30311,UserStatuses=30315,ClassifiedListing=30402,DraftClassifiedListing=30403,Date2=31922,Time=31923,Calendar=31924,CalendarEventRSVP=31925,Handlerrecommendation=31989,Handlerinformation=31990,CommunityDefinition=34550;function matchFilter(e,s){if(e.ids&&e.ids.indexOf(s.id)===-1||e.kinds&&e.kinds.indexOf(s.kind)===-1||e.authors&&e.authors.indexOf(s.pubkey)===-1)return!1;for(let o in e)if(o[0]==="#"){let a=o.slice(1),c=e[`#${a}`];if(c&&!s.tags.find(([h,g])=>h===o.slice(1)&&c.indexOf(g)!==-1))return!1}return!(e.since&&s.created_at<e.since||e.until&&s.created_at>e.until)}function matchFilters(e,s){for(let o=0;o<e.length;o++)if(matchFilter(e[o],s))return!0;return!1}var fakejson_exports={};__export(fakejson_exports,{getHex64:()=>getHex64,getInt:()=>getInt,getSubscriptionId:()=>getSubscriptionId,matchEventId:()=>matchEventId,matchEventKind:()=>matchEventKind,matchEventPubkey:()=>matchEventPubkey});function getHex64(e,s){let o=s.length+3,a=e.indexOf(`"${s}":`)+o,c=e.slice(a).indexOf('"')+a+1;return e.slice(c,c+64)}function getInt(e,s){let o=s.length,a=e.indexOf(`"${s}":`)+o+3,c=e.slice(a),h=Math.min(c.indexOf(","),c.indexOf("}"));return parseInt(c.slice(0,h),10)}function getSubscriptionId(e){let s=e.slice(0,22).indexOf('"EVENT"');if(s===-1)return null;let o=e.slice(s+7+1).indexOf('"');if(o===-1)return null;let a=s+7+1+o,c=e.slice(a+1,80).indexOf('"');if(c===-1)return null;let h=a+1+c;return e.slice(a+1,h)}function matchEventId(e,s){return s===getHex64(e,"id")}function matchEventPubkey(e,s){return s===getHex64(e,"pubkey")}function matchEventKind(e,s){return s===getInt(e,"kind")}var nip42_exports={};__export(nip42_exports,{makeAuthEvent:()=>makeAuthEvent});function makeAuthEvent(e,s){return{kind:ClientAuth,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",s]],content:""}}var _WebSocket;try{_WebSocket=WebSocket}catch{}var _WebSocket2;try{_WebSocket2=WebSocket}catch{}var nip19_exports={};__export(nip19_exports,{BECH32_REGEX:()=>BECH32_REGEX$1,Bech32MaxSize:()=>Bech32MaxSize,NostrTypeGuard:()=>NostrTypeGuard,decode:()=>decode,encodeBytes:()=>encodeBytes,naddrEncode:()=>naddrEncode,neventEncode:()=>neventEncode,noteEncode:()=>noteEncode,nprofileEncode:()=>nprofileEncode,npubEncode:()=>npubEncode,nsecEncode:()=>nsecEncode});var NostrTypeGuard={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNRelay:e=>/^nrelay1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},Bech32MaxSize=5e3,BECH32_REGEX$1=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function integerToUint8Array(e){const s=new Uint8Array(4);return s[0]=e>>24&255,s[1]=e>>16&255,s[2]=e>>8&255,s[3]=e&255,s}function decode(e){var c,h,g,_,b,$,_e;let{prefix:s,words:o}=bech32$1.decode(e,Bech32MaxSize),a=new Uint8Array(bech32$1.fromWords(o));switch(s){case"nprofile":{let j=parseTLV(a);if(!((c=j[0])!=null&&c[0]))throw new Error("missing TLV 0 for nprofile");if(j[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:bytesToHex$2(j[0][0]),relays:j[1]?j[1].map(et=>utf8Decoder.decode(et)):[]}}}case"nevent":{let j=parseTLV(a);if(!((h=j[0])!=null&&h[0]))throw new Error("missing TLV 0 for nevent");if(j[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(j[2]&&j[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(j[3]&&j[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:bytesToHex$2(j[0][0]),relays:j[1]?j[1].map(et=>utf8Decoder.decode(et)):[],author:(g=j[2])!=null&&g[0]?bytesToHex$2(j[2][0]):void 0,kind:(_=j[3])!=null&&_[0]?parseInt(bytesToHex$2(j[3][0]),16):void 0}}}case"naddr":{let j=parseTLV(a);if(!((b=j[0])!=null&&b[0]))throw new Error("missing TLV 0 for naddr");if(!(($=j[2])!=null&&$[0]))throw new Error("missing TLV 2 for naddr");if(j[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((_e=j[3])!=null&&_e[0]))throw new Error("missing TLV 3 for naddr");if(j[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:utf8Decoder.decode(j[0][0]),pubkey:bytesToHex$2(j[2][0]),kind:parseInt(bytesToHex$2(j[3][0]),16),relays:j[1]?j[1].map(et=>utf8Decoder.decode(et)):[]}}}case"nsec":return{type:s,data:a};case"npub":case"note":return{type:s,data:bytesToHex$2(a)};default:throw new Error(`unknown prefix ${s}`)}}function parseTLV(e){let s={},o=e;for(;o.length>0;){let a=o[0],c=o[1],h=o.slice(2,2+c);if(o=o.slice(2+c),h.length<c)throw new Error(`not enough data to read on TLV ${a}`);s[a]=s[a]||[],s[a].push(h)}return s}function nsecEncode(e){return encodeBytes("nsec",e)}function npubEncode(e){return encodeBytes("npub",hexToBytes$2(e))}function noteEncode(e){return encodeBytes("note",hexToBytes$2(e))}function encodeBech32(e,s){let o=bech32$1.toWords(s);return bech32$1.encode(e,o,Bech32MaxSize)}function encodeBytes(e,s){return encodeBech32(e,s)}function nprofileEncode(e){let s=encodeTLV({0:[hexToBytes$2(e.pubkey)],1:(e.relays||[]).map(o=>utf8Encoder.encode(o))});return encodeBech32("nprofile",s)}function neventEncode(e){let s;e.kind!==void 0&&(s=integerToUint8Array(e.kind));let o=encodeTLV({0:[hexToBytes$2(e.id)],1:(e.relays||[]).map(a=>utf8Encoder.encode(a)),2:e.author?[hexToBytes$2(e.author)]:[],3:s?[new Uint8Array(s)]:[]});return encodeBech32("nevent",o)}function naddrEncode(e){let s=new ArrayBuffer(4);new DataView(s).setUint32(0,e.kind,!1);let o=encodeTLV({0:[utf8Encoder.encode(e.identifier)],1:(e.relays||[]).map(a=>utf8Encoder.encode(a)),2:[hexToBytes$2(e.pubkey)],3:[new Uint8Array(s)]});return encodeBech32("naddr",o)}function encodeTLV(e){let s=[];return Object.entries(e).reverse().forEach(([o,a])=>{a.forEach(c=>{let h=new Uint8Array(c.length+2);h.set([parseInt(o)],0),h.set([c.length],1),h.set(c,2),s.push(h)})}),concatBytes$2(...s)}var nip04_exports={};__export(nip04_exports,{decrypt:()=>decrypt$1,encrypt:()=>encrypt$1});async function encrypt$1(e,s,o){const a=e instanceof Uint8Array?bytesToHex$2(e):e,c=secp256k1$1.getSharedSecret(a,"02"+s),h=getNormalizedX(c);let g=Uint8Array.from(randomBytes$1(16)),_=utf8Encoder.encode(o),b=cbc(h,g).encrypt(_),$=base64.encode(new Uint8Array(b)),_e=base64.encode(new Uint8Array(g.buffer));return`${$}?iv=${_e}`}async function decrypt$1(e,s,o){const a=e instanceof Uint8Array?bytesToHex$2(e):e;let[c,h]=o.split("?iv="),g=secp256k1$1.getSharedSecret(a,"02"+s),_=getNormalizedX(g),b=base64.decode(h),$=base64.decode(c),_e=cbc(_,b).decrypt($);return utf8Decoder.decode(_e)}function getNormalizedX(e){return e.slice(1,33)}var nip05_exports={};__export(nip05_exports,{NIP05_REGEX:()=>NIP05_REGEX$1,isNip05:()=>isNip05,isValid:()=>isValid,queryProfile:()=>queryProfile,searchDomain:()=>searchDomain,useFetchImplementation:()=>useFetchImplementation});var NIP05_REGEX$1=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,isNip05=e=>NIP05_REGEX$1.test(e||""),_fetch;try{_fetch=fetch}catch{}function useFetchImplementation(e){_fetch=e}async function searchDomain(e,s=""){try{const o=`https://${e}/.well-known/nostr.json?name=${s}`;return(await(await _fetch(o,{redirect:"error"})).json()).names}catch{return{}}}async function queryProfile(e){var h;const s=e.match(NIP05_REGEX$1);if(!s)return null;const[o,a="_",c]=s;try{const g=`https://${c}/.well-known/nostr.json?name=${a}`,_=await(await _fetch(g,{redirect:"error"})).json();let b=_.names[a];return b?{pubkey:b,relays:(h=_.relays)==null?void 0:h[b]}:null}catch{return null}}async function isValid(e,s){let o=await queryProfile(s);return o?o.pubkey===e:!1}var nip10_exports={};__export(nip10_exports,{parse:()=>parse});function parse(e){const s={reply:void 0,root:void 0,mentions:[],profiles:[]},o=[];for(const a of e.tags)a[0]==="e"&&a[1]&&o.push(a),a[0]==="p"&&a[1]&&s.profiles.push({pubkey:a[1],relays:a[2]?[a[2]]:[]});for(let a=0;a<o.length;a++){const c=o[a],[h,g,_,b]=c,$={id:g,relays:_?[_]:[]},_e=a===0,j=a===o.length-1;if(b==="root"){s.root=$;continue}if(b==="reply"){s.reply=$;continue}if(b==="mention"){s.mentions.push($);continue}if(_e){s.root=$;continue}if(j){s.reply=$;continue}s.mentions.push($)}return s}var nip11_exports={};__export(nip11_exports,{fetchRelayInformation:()=>fetchRelayInformation,useFetchImplementation:()=>useFetchImplementation2});var _fetch2;try{_fetch2=fetch}catch{}function useFetchImplementation2(e){_fetch2=e}async function fetchRelayInformation(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var nip13_exports={};__export(nip13_exports,{getPow:()=>getPow,minePow:()=>minePow});function getPow(e){let s=0;for(let o=0;o<e.length;o++){const a=parseInt(e[o],16);if(a===0)s+=4;else{s+=Math.clz32(a)-28;break}}return s}function minePow(e,s){let o=0;const a=e,c=["nonce",o.toString(),s.toString()];for(a.tags.push(c);;){const h=Math.floor(new Date().getTime()/1e3);if(h!==a.created_at&&(o=0,a.created_at=h),c[1]=(++o).toString(),a.id=getEventHash$1(a),getPow(a.id)>=s)break}return a}var nip18_exports={};__export(nip18_exports,{finishRepostEvent:()=>finishRepostEvent,getRepostedEvent:()=>getRepostedEvent,getRepostedEventPointer:()=>getRepostedEventPointer});function finishRepostEvent(e,s,o,a){return finalizeEvent({kind:Repost,tags:[...e.tags??[],["e",s.id,o],["p",s.pubkey]],content:e.content===""?"":JSON.stringify(s),created_at:e.created_at},a)}function getRepostedEventPointer(e){if(e.kind!==Repost)return;let s,o;for(let a=e.tags.length-1;a>=0&&(s===void 0||o===void 0);a--){const c=e.tags[a];c.length>=2&&(c[0]==="e"&&s===void 0?s=c:c[0]==="p"&&o===void 0&&(o=c))}if(s!==void 0)return{id:s[1],relays:[s[2],o==null?void 0:o[2]].filter(a=>typeof a=="string"),author:o==null?void 0:o[1]}}function getRepostedEvent(e,{skipVerification:s}={}){const o=getRepostedEventPointer(e);if(o===void 0||e.content==="")return;let a;try{a=JSON.parse(e.content)}catch{return}if(a.id===o.id&&!(!s&&!verifyEvent(a)))return a}var nip21_exports={};__export(nip21_exports,{NOSTR_URI_REGEX:()=>NOSTR_URI_REGEX,parse:()=>parse2,test:()=>test});var NOSTR_URI_REGEX=new RegExp(`nostr:(${BECH32_REGEX$1.source})`);function test(e){return typeof e=="string"&&new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(e)}function parse2(e){const s=e.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));if(!s)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:s[0],value:s[1],decoded:decode(s[1])}}var nip25_exports={};__export(nip25_exports,{finishReactionEvent:()=>finishReactionEvent,getReactedEventPointer:()=>getReactedEventPointer});function finishReactionEvent(e,s,o){const a=s.tags.filter(c=>c.length>=2&&(c[0]==="e"||c[0]==="p"));return finalizeEvent({...e,kind:Reaction,tags:[...e.tags??[],...a,["e",s.id],["p",s.pubkey]],content:e.content??"+"},o)}function getReactedEventPointer(e){if(e.kind!==Reaction)return;let s,o;for(let a=e.tags.length-1;a>=0&&(s===void 0||o===void 0);a--){const c=e.tags[a];c.length>=2&&(c[0]==="e"&&s===void 0?s=c:c[0]==="p"&&o===void 0&&(o=c))}if(!(s===void 0||o===void 0))return{id:s[1],relays:[s[2],o[2]].filter(a=>a!==void 0),author:o[1]}}var nip27_exports={};__export(nip27_exports,{matchAll:()=>matchAll,regex:()=>regex,replaceAll:()=>replaceAll});var regex=()=>new RegExp(`\\b${NOSTR_URI_REGEX.source}\\b`,"g");function*matchAll(e){const s=e.matchAll(regex());for(const o of s)try{const[a,c]=o;yield{uri:a,value:c,decoded:decode(c),start:o.index,end:o.index+a.length}}catch{}}function replaceAll(e,s){return e.replaceAll(regex(),(o,a)=>s({uri:o,value:a,decoded:decode(a)}))}var nip28_exports={};__export(nip28_exports,{channelCreateEvent:()=>channelCreateEvent,channelHideMessageEvent:()=>channelHideMessageEvent,channelMessageEvent:()=>channelMessageEvent,channelMetadataEvent:()=>channelMetadataEvent,channelMuteUserEvent:()=>channelMuteUserEvent});var channelCreateEvent=(e,s)=>{let o;if(typeof e.content=="object")o=JSON.stringify(e.content);else if(typeof e.content=="string")o=e.content;else return;return finalizeEvent({kind:ChannelCreation,tags:[...e.tags??[]],content:o,created_at:e.created_at},s)},channelMetadataEvent=(e,s)=>{let o;if(typeof e.content=="object")o=JSON.stringify(e.content);else if(typeof e.content=="string")o=e.content;else return;return finalizeEvent({kind:ChannelMetadata,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:o,created_at:e.created_at},s)},channelMessageEvent=(e,s)=>{const o=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&o.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),finalizeEvent({kind:ChannelMessage,tags:[...o,...e.tags??[]],content:e.content,created_at:e.created_at},s)},channelHideMessageEvent=(e,s)=>{let o;if(typeof e.content=="object")o=JSON.stringify(e.content);else if(typeof e.content=="string")o=e.content;else return;return finalizeEvent({kind:ChannelHideMessage,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:o,created_at:e.created_at},s)},channelMuteUserEvent=(e,s)=>{let o;if(typeof e.content=="object")o=JSON.stringify(e.content);else if(typeof e.content=="string")o=e.content;else return;return finalizeEvent({kind:ChannelMuteUser,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:o,created_at:e.created_at},s)},nip30_exports={};__export(nip30_exports,{EMOJI_SHORTCODE_REGEX:()=>EMOJI_SHORTCODE_REGEX,matchAll:()=>matchAll2,regex:()=>regex2,replaceAll:()=>replaceAll2});var EMOJI_SHORTCODE_REGEX=/:(\w+):/,regex2=()=>new RegExp(`\\B${EMOJI_SHORTCODE_REGEX.source}\\B`,"g");function*matchAll2(e){const s=e.matchAll(regex2());for(const o of s)try{const[a,c]=o;yield{shortcode:a,name:c,start:o.index,end:o.index+a.length}}catch{}}function replaceAll2(e,s){return e.replaceAll(regex2(),(o,a)=>s({shortcode:o,name:a}))}var nip39_exports={};__export(nip39_exports,{useFetchImplementation:()=>useFetchImplementation3,validateGithub:()=>validateGithub});var _fetch3;try{_fetch3=fetch}catch{}function useFetchImplementation3(e){_fetch3=e}async function validateGithub(e,s,o){try{return await(await _fetch3(`https://gist.github.com/${s}/${o}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var nip44_exports={};__export(nip44_exports,{decrypt:()=>decrypt2,encrypt:()=>encrypt2,getConversationKey:()=>getConversationKey,v2:()=>v2});var minPlaintextSize=1,maxPlaintextSize=65535;function getConversationKey(e,s){const o=secp256k1$1.getSharedSecret(e,"02"+s).subarray(1,33);return extract(sha256$1,o,"nip44-v2")}function getMessageKeys(e,s){const o=expand(sha256$1,e,s,76);return{chacha_key:o.subarray(0,32),chacha_nonce:o.subarray(32,44),hmac_key:o.subarray(44,76)}}function calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const s=1<<Math.floor(Math.log2(e-1))+1,o=s<=256?32:s/8;return o*(Math.floor((e-1)/o)+1)}function writeU16BE(e){if(!Number.isSafeInteger(e)||e<minPlaintextSize||e>maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const s=new Uint8Array(2);return new DataView(s.buffer).setUint16(0,e,!1),s}function pad(e){const s=utf8Encoder.encode(e),o=s.length,a=writeU16BE(o),c=new Uint8Array(calcPaddedLen(o)-o);return concatBytes$2(a,s,c)}function unpad(e){const s=new DataView(e.buffer).getUint16(0),o=e.subarray(2,2+s);if(s<minPlaintextSize||s>maxPlaintextSize||o.length!==s||e.length!==2+calcPaddedLen(s))throw new Error("invalid padding");return utf8Decoder.decode(o)}function hmacAad(e,s,o){if(o.length!==32)throw new Error("AAD associated data must be 32 bytes");const a=concatBytes$2(o,s);return hmac$1(sha256$1,e,a)}function decodePayload(e){if(typeof e!="string")throw new Error("payload must be a valid string");const s=e.length;if(s<132||s>87472)throw new Error("invalid payload length: "+s);if(e[0]==="#")throw new Error("unknown encryption version");let o;try{o=base64.decode(e)}catch(h){throw new Error("invalid base64: "+h.message)}const a=o.length;if(a<99||a>65603)throw new Error("invalid data length: "+a);const c=o[0];if(c!==2)throw new Error("unknown encryption version "+c);return{nonce:o.subarray(1,33),ciphertext:o.subarray(33,-32),mac:o.subarray(-32)}}function encrypt2(e,s,o=randomBytes$1(32)){const{chacha_key:a,chacha_nonce:c,hmac_key:h}=getMessageKeys(s,o),g=pad(e),_=chacha20(a,c,g),b=hmacAad(h,_,o);return base64.encode(concatBytes$2(new Uint8Array([2]),o,_,b))}function decrypt2(e,s){const{nonce:o,ciphertext:a,mac:c}=decodePayload(e),{chacha_key:h,chacha_nonce:g,hmac_key:_}=getMessageKeys(s,o),b=hmacAad(_,a,o);if(!equalBytes$1(b,c))throw new Error("invalid MAC");const $=chacha20(h,g,a);return unpad($)}var v2={utils:{getConversationKey,calcPaddedLen},encrypt:encrypt2,decrypt:decrypt2},nip47_exports={};__export(nip47_exports,{makeNwcRequestEvent:()=>makeNwcRequestEvent,parseConnectionString:()=>parseConnectionString});function parseConnectionString(e){const{pathname:s,searchParams:o}=new URL(e),a=s,c=o.get("relay"),h=o.get("secret");if(!a||!c||!h)throw new Error("invalid connection string");return{pubkey:a,relay:c,secret:h}}async function makeNwcRequestEvent(e,s,o){const c=await encrypt$1(s,e,JSON.stringify({method:"pay_invoice",params:{invoice:o}})),h={kind:NWCWalletRequest,created_at:Math.round(Date.now()/1e3),content:c,tags:[["p",e]]};return finalizeEvent(h,s)}var nip57_exports={};__export(nip57_exports,{getZapEndpoint:()=>getZapEndpoint,makeZapReceipt:()=>makeZapReceipt,makeZapRequest:()=>makeZapRequest,useFetchImplementation:()=>useFetchImplementation4,validateZapRequest:()=>validateZapRequest});var _fetch4;try{_fetch4=fetch}catch{}function useFetchImplementation4(e){_fetch4=e}async function getZapEndpoint(e){try{let s="",{lud06:o,lud16:a}=JSON.parse(e.content);if(o){let{words:g}=bech32$1.decode(o,1e3),_=bech32$1.fromWords(g);s=utf8Decoder.decode(_)}else if(a){let[g,_]=a.split("@");s=new URL(`/.well-known/lnurlp/${g}`,`https://${_}`).toString()}else return null;let h=await(await _fetch4(s)).json();if(h.allowsNostr&&h.nostrPubkey)return h.callback}catch{}return null}function makeZapRequest({profile:e,event:s,amount:o,relays:a,comment:c=""}){if(!o)throw new Error("amount not given");if(!e)throw new Error("profile not given");let h={kind:9734,created_at:Math.round(Date.now()/1e3),content:c,tags:[["p",e],["amount",o.toString()],["relays",...a]]};return s&&h.tags.push(["e",s]),h}function validateZapRequest(e){let s;try{s=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!validateEvent(s))return"Zap request is not a valid Nostr event.";if(!verifyEvent(s))return"Invalid signature on zap request.";let o=s.tags.find(([h,g])=>h==="p"&&g);if(!o)return"Zap request doesn't have a 'p' tag.";if(!o[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let a=s.tags.find(([h,g])=>h==="e"&&g);return a&&!a[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":s.tags.find(([h,g])=>h==="relays"&&g)?null:"Zap request doesn't have a 'relays' tag."}function makeZapReceipt({zapRequest:e,preimage:s,bolt11:o,paidAt:a}){let c=JSON.parse(e),h=c.tags.filter(([_])=>_==="e"||_==="p"||_==="a"),g={kind:9735,created_at:Math.round(a.getTime()/1e3),content:"",tags:[...h,["P",c.pubkey],["bolt11",o],["description",e]]};return s&&g.tags.push(["preimage",s]),g}var nip98_exports={};__export(nip98_exports,{getToken:()=>getToken,hashPayload:()=>hashPayload,unpackEventFromToken:()=>unpackEventFromToken,validateEvent:()=>validateEvent2,validateEventKind:()=>validateEventKind,validateEventMethodTag:()=>validateEventMethodTag,validateEventPayloadTag:()=>validateEventPayloadTag,validateEventTimestamp:()=>validateEventTimestamp,validateEventUrlTag:()=>validateEventUrlTag,validateToken:()=>validateToken});var _authorizationScheme="Nostr ";async function getToken(e,s,o,a=!1,c){const h={kind:HTTPAuth,tags:[["u",e],["method",s]],created_at:Math.round(new Date().getTime()/1e3),content:""};c&&h.tags.push(["payload",hashPayload(c)]);const g=await o(h);return(a?_authorizationScheme:"")+base64.encode(utf8Encoder.encode(JSON.stringify(g)))}async function validateToken(e,s,o){const a=await unpackEventFromToken(e).catch(h=>{throw h});return await validateEvent2(a,s,o).catch(h=>{throw h})}async function unpackEventFromToken(e){if(!e)throw new Error("Missing token");e=e.replace(_authorizationScheme,"");const s=utf8Decoder.decode(base64.decode(e));if(!s||s.length===0||!s.startsWith("{"))throw new Error("Invalid token");return JSON.parse(s)}function validateEventTimestamp(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function validateEventKind(e){return e.kind===HTTPAuth}function validateEventUrlTag(e,s){const o=e.tags.find(a=>a[0]==="u");return o?o.length>0&&o[1]===s:!1}function validateEventMethodTag(e,s){const o=e.tags.find(a=>a[0]==="method");return o?o.length>0&&o[1].toLowerCase()===s.toLowerCase():!1}function hashPayload(e){const s=sha256$1(utf8Encoder.encode(JSON.stringify(e)));return bytesToHex$2(s)}function validateEventPayloadTag(e,s){const o=e.tags.find(c=>c[0]==="payload");if(!o)return!1;const a=hashPayload(s);return o.length>0&&o[1]===a}async function validateEvent2(e,s,o,a){if(!verifyEvent(e))throw new Error("Invalid nostr event, signature invalid");if(!validateEventKind(e))throw new Error("Invalid nostr event, kind invalid");if(!validateEventTimestamp(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!validateEventUrlTag(e,s))throw new Error("Invalid nostr event, url tag invalid");if(!validateEventMethodTag(e,o))throw new Error("Invalid nostr event, method tag invalid");if(a&&typeof a=="object"&&Object.keys(a).length>0&&!validateEventPayloadTag(e,a))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var lib$1={},types={};Object.defineProperty(types,"__esModule",{value:!0});var ee={},taskCollection$1={},taskCollection={},utils$1={};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1._fast_remove_single=void 0;function _fast_remove_single(e,s){s!==-1&&(s===0?e.shift():s===e.length-1?e.length=e.length-1:e.splice(s,1))}utils$1._fast_remove_single=_fast_remove_single;var bakeCollection={};(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var s="";if(e===0)return s;for(var o=0;o<e-1;++o)s+="arg"+String(o)+", ";return s+="arg"+String(e-1),s}function generateBodyPartsCode(e,s){for(var o="",a="",c=0;c<s;++c)o+="var f".concat(c," = collection[").concat(c,`];
`),a+="f".concat(c,"(").concat(e,`)
`);return{funcDefCode:o,funcCallCode:a}}function generateBodyPartsVariadicCode(e){for(var s="",o="",a=0;a<e;++a)s+="var f".concat(a," = collection[").concat(a,`];
`),o+="f".concat(a,`.apply(undefined, arguments)
`);return{funcDefCode:s,funcCallCode:o}}function bakeCollection(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                `).concat(funcCallCode,`
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);collection.length%10===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 10) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                        collection[i+4](`).concat(argsDefCode,`);
                        collection[i+5](`).concat(argsDefCode,`);
                        collection[i+6](`).concat(argsDefCode,`);
                        collection[i+7](`).concat(argsDefCode,`);
                        collection[i+8](`).concat(argsDefCode,`);
                        collection[i+9](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%4===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 4) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%3===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 3) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                    }
                });
            })`):funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; ++i) {
                        collection[i](`).concat(argsDefCode,`);
                    }
                });
            })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollection=bakeCollection;function bakeCollectionAwait(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                return Promise.all([ `).concat(funcCallCode,` ]);
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=`(function(collection) {
            return (function(`.concat(argsDefCode,`) {
                var promises = Array(collection.length);
                for (var i = 0; i < collection.length; ++i) {
                    promises[i] = collection[i](`).concat(argsDefCode,`);
                }
                return Promise.all(promises);
            });
        })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionAwait=bakeCollectionAwait;function bakeCollectionVariadic(collection){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function() {
                `).concat(funcCallCode,`
            });
        })`)}else funcFactoryCode=`(function(collection) {
            return (function() {
                for (var i = 0; i < collection.length; ++i) {
                    collection[i].apply(undefined, arguments);
                }
            });
        })`;{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionVariadic=bakeCollectionVariadic})(bakeCollection);var __spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,s,o){if(o||arguments.length===2)for(var a=0,c=s.length,h;a<c;a++)(h||!(a in s))&&(h||(h=Array.prototype.slice.call(s,0,a)),h[a]=s[a]);return e.concat(h||Array.prototype.slice.call(s))};Object.defineProperty(taskCollection,"__esModule",{value:!0});taskCollection.TaskCollection=void 0;var utils_1$1=utils$1,bake_collection_1=bakeCollection;function push_norebuild(e,s){var o=this.length;if(o>1)if(s){var a;(a=this._tasks).push.apply(a,arguments),this.length+=arguments.length}else this._tasks.push(e),this.length++;else if(s){if(o===1){var c=Array(1+arguments.length);c.push(c),c.push.apply(c,arguments),this._tasks=c}else{var c=Array(arguments.length);c.push.apply(c,arguments),this._tasks=c}this.length+=arguments.length}else o===1?this._tasks=[this._tasks,e]:this._tasks=e,this.length++}function push_rebuild(e,s){var o=this.length;if(o>1)if(s){var a;(a=this._tasks).push.apply(a,arguments),this.length+=arguments.length}else this._tasks.push(e),this.length++;else if(s){if(o===1){var c=Array(1+arguments.length);c.push(c),c.push.apply(c,arguments),this._tasks=c}else{var c=Array(arguments.length);c.push.apply(c,arguments),this._tasks=c}this.length+=arguments.length}else o===1?this._tasks=[this._tasks,e]:this._tasks=e,this.length++;this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function removeLast_norebuild(e){this.length!==0&&(this.length===1?this._tasks===e&&(this.length=0):((0,utils_1$1._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function removeLast_rebuild(e){if(this.length!==0){if(this.length===1)if(this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy){this.call=bake_collection_1.BAKED_EMPTY_FUNC;return}else{this.rebuild();return}else(0,utils_1$1._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length;this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}}function insert_norebuild(e){for(var s,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];this.length===0?(this._tasks=o,this.length=1):this.length===1?(o.unshift(this._tasks),this._tasks=o,this.length=this._tasks.length):((s=this._tasks).splice.apply(s,__spreadArray$1([e,0],o,!1)),this.length=this._tasks.length)}function insert_rebuild(e){for(var s,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];this.length===0?(this._tasks=o,this.length=1):this.length===1?(o.unshift(this._tasks),this._tasks=o,this.length=this._tasks.length):((s=this._tasks).splice.apply(s,__spreadArray$1([e,0],o,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function rebuild_noawait(){this.length===0?this.call=bake_collection_1.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,bake_collection_1.bakeCollection)(this._tasks,this.argsNum)}function rebuild_await(){this.length===0?this.call=bake_collection_1.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,bake_collection_1.bakeCollectionAwait)(this._tasks,this.argsNum)}function rebuild_on_first_call(){this.rebuild(),this.call.apply(void 0,arguments)}var TaskCollection=function(){function e(s,o,a,c){o===void 0&&(o=!0),a===void 0&&(a=null),c===void 0&&(c=!1),this.awaitTasks=c,this.call=bake_collection_1.BAKED_EMPTY_FUNC,this.argsNum=s,this.firstEmitBuildStrategy=!0,c?this.rebuild=rebuild_await.bind(this):this.rebuild=rebuild_noawait.bind(this),this.setAutoRebuild(o),a?typeof a=="function"?(this._tasks=a,this.length=1):(this._tasks=a,this.length=a.length):(this._tasks=null,this.length=0),o&&this.rebuild()}return e}();taskCollection.TaskCollection=TaskCollection;function fastClear(){this._tasks=null,this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC}function clear(){this._tasks=null,this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC}function growArgsNum(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())}function setAutoRebuild(e){e?(this.push=push_rebuild.bind(this),this.insert=insert_rebuild.bind(this),this.removeLast=removeLast_rebuild.bind(this)):(this.push=push_norebuild.bind(this),this.insert=insert_norebuild.bind(this),this.removeLast=removeLast_norebuild.bind(this))}function tasksAsArray(){return this.length===0?[]:this.length===1?[this._tasks]:this._tasks}function setTasks(e){e.length===0?(this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC):e.length===1?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())}TaskCollection.prototype.fastClear=fastClear;TaskCollection.prototype.clear=clear;TaskCollection.prototype.growArgsNum=growArgsNum;TaskCollection.prototype.setAutoRebuild=setAutoRebuild;TaskCollection.prototype.tasksAsArray=tasksAsArray;TaskCollection.prototype.setTasks=setTasks;(function(e){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,h,g){g===void 0&&(g=h);var _=Object.getOwnPropertyDescriptor(c,h);(!_||("get"in _?!c.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return c[h]}}),Object.defineProperty(a,g,_)}:function(a,c,h,g){g===void 0&&(g=h),a[g]=c[h]}),o=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var h in a)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&s(c,a,h)};Object.defineProperty(e,"__esModule",{value:!0}),o(taskCollection,e)})(taskCollection$1);var utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.nullObj=void 0;function nullObj(){var e={};return e.__proto__=null,e}utils.nullObj=nullObj;var __spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,s,o){if(o||arguments.length===2)for(var a=0,c=s.length,h;a<c;a++)(h||!(a in s))&&(h||(h=Array.prototype.slice.call(s,0,a)),h[a]=s[a]);return e.concat(h||Array.prototype.slice.call(s))};Object.defineProperty(ee,"__esModule",{value:!0});ee.EventEmitter=void 0;var task_collection_1=taskCollection$1,utils_1=utils$1,utils_2=utils;function emit(e,s,o,a,c,h){var g=this.events[e];if(g){if(g.length===0)return!1;if(g.argsNum<6)g.call(s,o,a,c,h);else{for(var _=new Array(g.argsNum),b=0,$=_.length;b<$;++b)_[b]=arguments[b+1];g.call.apply(void 0,_)}return!0}return!1}function emitHasOnce(e,s,o,a,c,h){var g=this.events[e],_;if(g!==void 0){if(g.length===0)return!1;if(g.argsNum<6)g.call(s,o,a,c,h);else{_=new Array(g.argsNum);for(var b=0,$=_.length;b<$;++b)_[b]=arguments[b+1];g.call.apply(void 0,_)}}var _e=this.onceEvents[e];if(_e){if(typeof _e=="function")if(this.onceEvents[e]=void 0,arguments.length<6)_e(s,o,a,c,h);else{if(_===void 0){_=new Array(arguments.length-1);for(var b=0,$=_.length;b<$;++b)_[b]=arguments[b+1]}_e.apply(void 0,_)}else{var j=_e;if(this.onceEvents[e]=void 0,arguments.length<6)for(var b=0;b<j.length;++b)j[b](s,o,a,c,h);else{if(_===void 0){_=new Array(arguments.length-1);for(var b=0,$=_.length;b<$;++b)_[b]=arguments[b+1]}for(var b=0;b<j.length;++b)j[b].apply(void 0,_)}}return!0}return g!==void 0}var EventEmitter$1=function(){function e(){this.events=(0,utils_2.nullObj)(),this.onceEvents=(0,utils_2.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();ee.EventEmitter=EventEmitter$1;function once(e,s){switch(this.emit===emit&&(this.emit=emitHasOnce),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=s,typeof e=="symbol"&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],s];break;case"object":this.onceEvents[e].push(s)}return this}function addListener(e,s,o){if(o===void 0&&(o=s.length),typeof s!="function")throw new TypeError("The listener must be a function");var a=this.events[e];return a?(a.push(s),a.growArgsNum(o),this.maxListeners!==1/0&&this.maxListeners<=a.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new task_collection_1.TaskCollection(o,!0,s,!1),typeof e=="symbol"&&this._symbolKeys.add(e)),this}function removeListener(e,s){var o=this.events[e];o&&o.removeLast(s);var a=this.onceEvents[e];return a&&(typeof a=="function"?this.onceEvents[e]=void 0:typeof a=="object"&&(a.length===1&&a[0]===s?this.onceEvents[e]=void 0:(0,utils_1._fast_remove_single)(a,a.lastIndexOf(s)))),this}function addListenerBound(e,s,o,a){o===void 0&&(o=this),a===void 0&&(a=s.length),this.boundFuncs||(this.boundFuncs=new Map);var c=s.bind(o);return this.boundFuncs.set(s,c),this.addListener(e,c,a)}function removeListenerBound(e,s){var o,a,c=(o=this.boundFuncs)===null||o===void 0?void 0:o.get(s);return(a=this.boundFuncs)===null||a===void 0||a.delete(s),this.removeListener(e,c)}function hasListeners(e){return this.events[e]&&!!this.events[e].length}function prependListener(e,s,o){if(o===void 0&&(o=s.length),typeof s!="function")throw new TypeError("The listener must be a function");var a=this.events[e];return!a||!(a instanceof task_collection_1.TaskCollection)?(a=this.events[e]=new task_collection_1.TaskCollection(o,!0,s,!1),typeof e=="symbol"&&this._symbolKeys.add(e)):(a.insert(0,s),a.growArgsNum(o),this.maxListeners!==1/0&&this.maxListeners<=a.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))),this}function prependOnceListener(e,s){this.emit===emit&&(this.emit=emitHasOnce);var o=this.onceEvents[e];return o?typeof o!="object"?(this.onceEvents[e]=[s,o],typeof e=="symbol"&&this._symbolKeys.add(e)):(o.unshift(s),this.maxListeners!==1/0&&this.maxListeners<=o.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[s],typeof e=="symbol"&&this._symbolKeys.add(e)),this}function removeAllListeners(e){return e===void 0?(this.events=(0,utils_2.nullObj)(),this.onceEvents=(0,utils_2.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,typeof e=="symbol"&&this._symbolKeys.delete(e)),this}function setMaxListeners(e){return this.maxListeners=e,this}function getMaxListeners(){return this.maxListeners}function listeners(e){return this.emit===emit?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?__spreadArray(__spreadArray([],this.events[e].tasksAsArray(),!0),typeof this.onceEvents[e]=="function"?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?typeof this.onceEvents[e]=="function"?[this.onceEvents[e]]:this.onceEvents[e]:[]}function eventNames(){var e=this;if(this.emit===emit){var s=Object.keys(this.events);return __spreadArray(__spreadArray([],s,!0),Array.from(this._symbolKeys),!0).filter(function(a){return a in e.events&&e.events[a]&&e.events[a].length})}else{var s=Object.keys(this.events).filter(function(c){return e.events[c]&&e.events[c].length}),o=Object.keys(this.onceEvents).filter(function(c){return e.onceEvents[c]&&e.onceEvents[c].length});return __spreadArray(__spreadArray(__spreadArray([],s,!0),o,!0),Array.from(this._symbolKeys).filter(function(c){return c in e.events&&e.events[c]&&e.events[c].length||c in e.onceEvents&&e.onceEvents[c]&&e.onceEvents[c].length}),!0)}}function listenerCount(e){return this.emit===emit?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}EventEmitter$1.prototype.emit=emit;EventEmitter$1.prototype.on=addListener;EventEmitter$1.prototype.once=once;EventEmitter$1.prototype.addListener=addListener;EventEmitter$1.prototype.removeListener=removeListener;EventEmitter$1.prototype.addListenerBound=addListenerBound;EventEmitter$1.prototype.removeListenerBound=removeListenerBound;EventEmitter$1.prototype.hasListeners=hasListeners;EventEmitter$1.prototype.prependListener=prependListener;EventEmitter$1.prototype.prependOnceListener=prependOnceListener;EventEmitter$1.prototype.off=removeListener;EventEmitter$1.prototype.removeAllListeners=removeAllListeners;EventEmitter$1.prototype.setMaxListeners=setMaxListeners;EventEmitter$1.prototype.getMaxListeners=getMaxListeners;EventEmitter$1.prototype.listeners=listeners;EventEmitter$1.prototype.eventNames=eventNames;EventEmitter$1.prototype.listenerCount=listenerCount;(function(e){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,h,g){g===void 0&&(g=h);var _=Object.getOwnPropertyDescriptor(c,h);(!_||("get"in _?!c.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return c[h]}}),Object.defineProperty(a,g,_)}:function(a,c,h,g){g===void 0&&(g=h),a[g]=c[h]}),o=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var h in a)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&s(c,a,h)};Object.defineProperty(e,"__esModule",{value:!0}),o(types,e),o(ee,e)})(lib$1);var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,s=e*60,o=s*60,a=o*24,c=a*7,h=a*365.25;ms=function(_e,j){j=j||{};var et=typeof _e;if(et==="string"&&_e.length>0)return g(_e);if(et==="number"&&isFinite(_e))return j.long?b(_e):_(_e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_e))};function g(_e){if(_e=String(_e),!(_e.length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_e);if(j){var et=parseFloat(j[1]),tt=(j[2]||"ms").toLowerCase();switch(tt){case"years":case"year":case"yrs":case"yr":case"y":return et*h;case"weeks":case"week":case"w":return et*c;case"days":case"day":case"d":return et*a;case"hours":case"hour":case"hrs":case"hr":case"h":return et*o;case"minutes":case"minute":case"mins":case"min":case"m":return et*s;case"seconds":case"second":case"secs":case"sec":case"s":return et*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return et;default:return}}}}function _(_e){var j=Math.abs(_e);return j>=a?Math.round(_e/a)+"d":j>=o?Math.round(_e/o)+"h":j>=s?Math.round(_e/s)+"m":j>=e?Math.round(_e/e)+"s":_e+"ms"}function b(_e){var j=Math.abs(_e);return j>=a?$(_e,j,a,"day"):j>=o?$(_e,j,o,"hour"):j>=s?$(_e,j,s,"minute"):j>=e?$(_e,j,e,"second"):_e+" ms"}function $(_e,j,et,tt){var nt=j>=et*1.5;return Math.round(_e/et)+" "+tt+(nt?"s":"")}return ms}function setup(e){o.debug=o,o.default=o,o.coerce=b,o.disable=h,o.enable=c,o.enabled=g,o.humanize=requireMs(),o.destroy=$,Object.keys(e).forEach(_e=>{o[_e]=e[_e]}),o.names=[],o.skips=[],o.formatters={};function s(_e){let j=0;for(let et=0;et<_e.length;et++)j=(j<<5)-j+_e.charCodeAt(et),j|=0;return o.colors[Math.abs(j)%o.colors.length]}o.selectColor=s;function o(_e){let j,et=null,tt,nt;function rt(...ot){if(!rt.enabled)return;const it=rt,st=Number(new Date),at=st-(j||st);it.diff=at,it.prev=j,it.curr=st,j=st,ot[0]=o.coerce(ot[0]),typeof ot[0]!="string"&&ot.unshift("%O");let lt=0;ot[0]=ot[0].replace(/%([a-zA-Z%])/g,(gt,pt)=>{if(gt==="%%")return"%";lt++;const yt=o.formatters[pt];if(typeof yt=="function"){const St=ot[lt];gt=yt.call(it,St),ot.splice(lt,1),lt--}return gt}),o.formatArgs.call(it,ot),(it.log||o.log).apply(it,ot)}return rt.namespace=_e,rt.useColors=o.useColors(),rt.color=o.selectColor(_e),rt.extend=a,rt.destroy=o.destroy,Object.defineProperty(rt,"enabled",{enumerable:!0,configurable:!1,get:()=>et!==null?et:(tt!==o.namespaces&&(tt=o.namespaces,nt=o.enabled(_e)),nt),set:ot=>{et=ot}}),typeof o.init=="function"&&o.init(rt),rt}function a(_e,j){const et=o(this.namespace+(typeof j>"u"?":":j)+_e);return et.log=this.log,et}function c(_e){o.save(_e),o.namespaces=_e,o.names=[],o.skips=[];let j;const et=(typeof _e=="string"?_e:"").split(/[\s,]+/),tt=et.length;for(j=0;j<tt;j++)et[j]&&(_e=et[j].replace(/\*/g,".*?"),_e[0]==="-"?o.skips.push(new RegExp("^"+_e.slice(1)+"$")):o.names.push(new RegExp("^"+_e+"$")))}function h(){const _e=[...o.names.map(_),...o.skips.map(_).map(j=>"-"+j)].join(",");return o.enable(""),_e}function g(_e){if(_e[_e.length-1]==="*")return!0;let j,et;for(j=0,et=o.skips.length;j<et;j++)if(o.skips[j].test(_e))return!1;for(j=0,et=o.names.length;j<et;j++)if(o.names[j].test(_e))return!0;return!1}function _(_e){return _e.toString().substring(2,_e.toString().length-2).replace(/\.\*\?$/,"*")}function b(_e){return _e instanceof Error?_e.stack||_e.message:_e}function $(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}var common=setup;(function(e,s){var o={};s.formatArgs=c,s.save=h,s.load=g,s.useColors=a,s.storage=_(),s.destroy=(()=>{let $=!1;return()=>{$||($=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const _e="color: "+this.color;$.splice(1,0,_e,"color: inherit");let j=0,et=0;$[0].replace(/%[a-zA-Z%]/g,tt=>{tt!=="%%"&&(j++,tt==="%c"&&(et=j))}),$.splice(et,0,_e)}s.log=console.debug||console.log||(()=>{});function h($){try{$?s.storage.setItem("debug",$):s.storage.removeItem("debug")}catch{}}function g(){let $;try{$=s.storage.getItem("debug")}catch{}return!$&&typeof process<"u"&&"env"in process&&($=o.DEBUG),$}function _(){try{return localStorage}catch{}}e.exports=common(s);const{formatters:b}=e.exports;b.j=function($){try{return JSON.stringify($)}catch(_e){return"[UnexpectedJSONParseError]: "+_e.message}}})(browser,browser.exports);var browserExports=browser.exports;const debug7=getDefaultExportFromCjs(browserExports);function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function isBytes$2(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function bytes(e,...s){if(!isBytes$2(e))throw new Error("Uint8Array expected");if(s.length>0&&!s.includes(e.length))throw new Error(`Uint8Array expected of length ${s}, not of length=${e.length}`)}function hash(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}function exists(e,s=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(s&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,s){bytes(e);const o=s.outputLen;if(e.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr=(e,s)=>e<<32-s|e>>>s;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const hexes$1=Array.from({length:256},(e,s)=>s.toString(16).padStart(2,"0"));function bytesToHex$1(e){bytes(e);let s="";for(let o=0;o<e.length;o++)s+=hexes$1[e[o]];return s}const asciis$1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$1(e){if(e>=asciis$1._0&&e<=asciis$1._9)return e-asciis$1._0;if(e>=asciis$1._A&&e<=asciis$1._F)return e-(asciis$1._A-10);if(e>=asciis$1._a&&e<=asciis$1._f)return e-(asciis$1._a-10)}function hexToBytes$1(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const s=e.length,o=s/2;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const a=new Uint8Array(o);for(let c=0,h=0;c<o;c++,h+=2){const g=asciiToBase16$1(e.charCodeAt(h)),_=asciiToBase16$1(e.charCodeAt(h+1));if(g===void 0||_===void 0){const b=e[h]+e[h+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+h)}a[c]=g*16+_}return a}function utf8ToBytes$1(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function toBytes(e){return typeof e=="string"&&(e=utf8ToBytes$1(e)),bytes(e),e}function concatBytes$1(...e){let s=0;for(let a=0;a<e.length;a++){const c=e[a];bytes(c),s+=c.length}const o=new Uint8Array(s);for(let a=0,c=0;a<e.length;a++){const h=e[a];o.set(h,c),c+=h.length}return o}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(e){const s=a=>e().update(toBytes(a)).digest(),o=e();return s.outputLen=o.outputLen,s.blockLen=o.blockLen,s.create=()=>e(),s}function randomBytes(e=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(e));if(crypto$1&&typeof crypto$1.randomBytes=="function")return crypto$1.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(e,s,o,a){if(typeof e.setBigUint64=="function")return e.setBigUint64(s,o,a);const c=BigInt(32),h=BigInt(4294967295),g=Number(o>>c&h),_=Number(o&h),b=a?4:0,$=a?0:4;e.setUint32(s+b,g,a),e.setUint32(s+$,_,a)}const Chi=(e,s,o)=>e&s^~e&o,Maj=(e,s,o)=>e&s^e&o^s&o;class HashMD extends Hash{constructor(s,o,a,c){super(),this.blockLen=s,this.outputLen=o,this.padOffset=a,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=createView(this.buffer)}update(s){exists(this);const{view:o,buffer:a,blockLen:c}=this;s=toBytes(s);const h=s.length;for(let g=0;g<h;){const _=Math.min(c-this.pos,h-g);if(_===c){const b=createView(s);for(;c<=h-g;g+=c)this.process(b,g);continue}a.set(s.subarray(g,g+_),this.pos),this.pos+=_,g+=_,this.pos===c&&(this.process(o,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){exists(this),output(s,this),this.finished=!0;const{buffer:o,view:a,blockLen:c,isLE:h}=this;let{pos:g}=this;o[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>c-g&&(this.process(a,0),g=0);for(let j=g;j<c;j++)o[j]=0;setBigUint64(a,c-8,BigInt(this.length*8),h),this.process(a,0);const _=createView(s),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const $=b/4,_e=this.get();if($>_e.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<$;j++)_.setUint32(4*j,_e[j],h)}digest(){const{buffer:s,outputLen:o}=this;this.digestInto(s);const a=s.slice(0,o);return this.destroy(),a}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:o,buffer:a,length:c,finished:h,destroyed:g,pos:_}=this;return s.length=c,s.pos=_,s.finished=h,s.destroyed=g,c%o&&s.buffer.set(a),s}}const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:s,B:o,C:a,D:c,E:h,F:g,G:_,H:b}=this;return[s,o,a,c,h,g,_,b]}set(s,o,a,c,h,g,_,b){this.A=s|0,this.B=o|0,this.C=a|0,this.D=c|0,this.E=h|0,this.F=g|0,this.G=_|0,this.H=b|0}process(s,o){for(let j=0;j<16;j++,o+=4)SHA256_W[j]=s.getUint32(o,!1);for(let j=16;j<64;j++){const et=SHA256_W[j-15],tt=SHA256_W[j-2],nt=rotr(et,7)^rotr(et,18)^et>>>3,rt=rotr(tt,17)^rotr(tt,19)^tt>>>10;SHA256_W[j]=rt+SHA256_W[j-7]+nt+SHA256_W[j-16]|0}let{A:a,B:c,C:h,D:g,E:_,F:b,G:$,H:_e}=this;for(let j=0;j<64;j++){const et=rotr(_,6)^rotr(_,11)^rotr(_,25),tt=_e+et+Chi(_,b,$)+SHA256_K[j]+SHA256_W[j]|0,rt=(rotr(a,2)^rotr(a,13)^rotr(a,22))+Maj(a,c,h)|0;_e=$,$=b,b=_,_=g+tt|0,g=h,h=c,c=a,a=tt+rt|0}a=a+this.A|0,c=c+this.B|0,h=h+this.C|0,g=g+this.D|0,_=_+this.E|0,b=b+this.F|0,$=$+this.G|0,_e=_e+this.H|0,this.set(a,c,h,g,_,b,$,_e)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);class HMAC extends Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,hash(s);const a=toBytes(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,h=new Uint8Array(c);h.set(a.length>c?s.create().update(a).digest():a);for(let g=0;g<h.length;g++)h[g]^=54;this.iHash.update(h),this.oHash=s.create();for(let g=0;g<h.length;g++)h[g]^=106;this.oHash.update(h),h.fill(0)}update(s){return exists(this),this.iHash.update(s),this}digestInto(s){exists(this),bytes(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:h,blockLen:g,outputLen:_}=this;return s=s,s.finished=c,s.destroyed=h,s.blockLen=g,s.outputLen=_,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,s,o)=>new HMAC(e,s).update(o).digest();hmac.create=(e,s)=>new HMAC(e,s);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$4=BigInt(1),_2n$2=BigInt(2);function isBytes$1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function abytes(e){if(!isBytes$1(e))throw new Error("Uint8Array expected")}function abool(e,s){if(typeof s!="boolean")throw new Error(`${e} must be valid boolean, got "${s}".`)}const hexes=Array.from({length:256},(e,s)=>s.toString(16).padStart(2,"0"));function bytesToHex(e){abytes(e);let s="";for(let o=0;o<e.length;o++)s+=hexes[e[o]];return s}function numberToHexUnpadded(e){const s=e.toString(16);return s.length&1?`0${s}`:s}function hexToNumber(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){if(e>=asciis._0&&e<=asciis._9)return e-asciis._0;if(e>=asciis._A&&e<=asciis._F)return e-(asciis._A-10);if(e>=asciis._a&&e<=asciis._f)return e-(asciis._a-10)}function hexToBytes(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const s=e.length,o=s/2;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const a=new Uint8Array(o);for(let c=0,h=0;c<o;c++,h+=2){const g=asciiToBase16(e.charCodeAt(h)),_=asciiToBase16(e.charCodeAt(h+1));if(g===void 0||_===void 0){const b=e[h]+e[h+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+h)}a[c]=g*16+_}return a}function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}function bytesToNumberLE(e){return abytes(e),hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,s){return hexToBytes(e.toString(16).padStart(s*2,"0"))}function numberToBytesLE(e,s){return numberToBytesBE(e,s).reverse()}function numberToVarBytesBE(e){return hexToBytes(numberToHexUnpadded(e))}function ensureBytes(e,s,o){let a;if(typeof s=="string")try{a=hexToBytes(s)}catch(h){throw new Error(`${e} must be valid hex string, got "${s}". Cause: ${h}`)}else if(isBytes$1(s))a=Uint8Array.from(s);else throw new Error(`${e} must be hex string or Uint8Array`);const c=a.length;if(typeof o=="number"&&c!==o)throw new Error(`${e} expected ${o} bytes, got ${c}`);return a}function concatBytes(...e){let s=0;for(let a=0;a<e.length;a++){const c=e[a];abytes(c),s+=c.length}const o=new Uint8Array(s);for(let a=0,c=0;a<e.length;a++){const h=e[a];o.set(h,c),c+=h.length}return o}function equalBytes(e,s){if(e.length!==s.length)return!1;let o=0;for(let a=0;a<e.length;a++)o|=e[a]^s[a];return o===0}function utf8ToBytes(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}const isPosBig=e=>typeof e=="bigint"&&_0n$4<=e;function inRange(e,s,o){return isPosBig(e)&&isPosBig(s)&&isPosBig(o)&&s<=e&&e<o}function aInRange(e,s,o,a){if(!inRange(s,o,a))throw new Error(`expected valid ${e}: ${o} <= n < ${a}, got ${typeof s} ${s}`)}function bitLen(e){let s;for(s=0;e>_0n$4;e>>=_1n$4,s+=1);return s}function bitGet(e,s){return e>>BigInt(s)&_1n$4}function bitSet(e,s,o){return e|(o?_1n$4:_0n$4)<<BigInt(s)}const bitMask=e=>(_2n$2<<BigInt(e-1))-_1n$4,u8n=e=>new Uint8Array(e),u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,s,o){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof s!="number"||s<2)throw new Error("qByteLen must be a number");if(typeof o!="function")throw new Error("hmacFn must be a function");let a=u8n(e),c=u8n(e),h=0;const g=()=>{a.fill(1),c.fill(0),h=0},_=(...j)=>o(c,a,...j),b=(j=u8n())=>{c=_(u8fr([0]),j),a=_(),j.length!==0&&(c=_(u8fr([1]),j),a=_())},$=()=>{if(h++>=1e3)throw new Error("drbg: tried 1000 values");let j=0;const et=[];for(;j<s;){a=_();const tt=a.slice();et.push(tt),j+=a.length}return concatBytes(...et)};return(j,et)=>{g(),b(j);let tt;for(;!(tt=et($()));)b();return g(),tt}}const validatorFns={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||isBytes$1(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,s)=>s.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function validateObject(e,s,o={}){const a=(c,h,g)=>{const _=validatorFns[h];if(typeof _!="function")throw new Error(`Invalid validator "${h}", expected function`);const b=e[c];if(!(g&&b===void 0)&&!_(b,e))throw new Error(`Invalid param ${String(c)}=${b} (${typeof b}), expected ${h}`)};for(const[c,h]of Object.entries(s))a(c,h,!1);for(const[c,h]of Object.entries(o))a(c,h,!0);return e}const notImplemented=()=>{throw new Error("not implemented")};function memoized(e){const s=new WeakMap;return(o,...a)=>{const c=s.get(o);if(c!==void 0)return c;const h=e(o,...a);return s.set(o,h),h}}const ut=Object.freeze(Object.defineProperty({__proto__:null,aInRange,abool,abytes,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,inRange,isBytes:isBytes$1,memoized,notImplemented,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$3=BigInt(1),_2n$1=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);BigInt(9);BigInt(16);function mod(e,s){const o=e%s;return o>=_0n$3?o:s+o}function pow(e,s,o){if(o<=_0n$3||s<_0n$3)throw new Error("Expected power/modulo > 0");if(o===_1n$3)return _0n$3;let a=_1n$3;for(;s>_0n$3;)s&_1n$3&&(a=a*e%o),e=e*e%o,s>>=_1n$3;return a}function pow2(e,s,o){let a=e;for(;s-- >_0n$3;)a*=a,a%=o;return a}function invert(e,s){if(e===_0n$3||s<=_0n$3)throw new Error(`invert: expected positive integers, got n=${e} mod=${s}`);let o=mod(e,s),a=s,c=_0n$3,h=_1n$3;for(;o!==_0n$3;){const _=a/o,b=a%o,$=c-h*_;a=o,o=b,c=h,h=$}if(a!==_1n$3)throw new Error("invert: does not exist");return mod(c,s)}function tonelliShanks(e){const s=(e-_1n$3)/_2n$1;let o,a,c;for(o=e-_1n$3,a=0;o%_2n$1===_0n$3;o/=_2n$1,a++);for(c=_2n$1;c<e&&pow(c,s,e)!==e-_1n$3;c++);if(a===1){const g=(e+_1n$3)/_4n;return function(b,$){const _e=b.pow($,g);if(!b.eql(b.sqr(_e),$))throw new Error("Cannot find square root");return _e}}const h=(o+_1n$3)/_2n$1;return function(_,b){if(_.pow(b,s)===_.neg(_.ONE))throw new Error("Cannot find square root");let $=a,_e=_.pow(_.mul(_.ONE,c),o),j=_.pow(b,h),et=_.pow(b,o);for(;!_.eql(et,_.ONE);){if(_.eql(et,_.ZERO))return _.ZERO;let tt=1;for(let rt=_.sqr(et);tt<$&&!_.eql(rt,_.ONE);tt++)rt=_.sqr(rt);const nt=_.pow(_e,_1n$3<<BigInt($-tt-1));_e=_.sqr(nt),j=_.mul(j,nt),et=_.mul(et,_e),$=tt}return j}}function FpSqrt(e){if(e%_4n===_3n$1){const s=(e+_1n$3)/_4n;return function(a,c){const h=a.pow(c,s);if(!a.eql(a.sqr(h),c))throw new Error("Cannot find square root");return h}}if(e%_8n===_5n){const s=(e-_5n)/_8n;return function(a,c){const h=a.mul(c,_2n$1),g=a.pow(h,s),_=a.mul(c,g),b=a.mul(a.mul(_,_2n$1),g),$=a.mul(_,a.sub(b,a.ONE));if(!a.eql(a.sqr($),c))throw new Error("Cannot find square root");return $}}return tonelliShanks(e)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){const s={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},o=FIELD_FIELDS.reduce((a,c)=>(a[c]="function",a),s);return validateObject(e,o)}function FpPow(e,s,o){if(o<_0n$3)throw new Error("Expected power > 0");if(o===_0n$3)return e.ONE;if(o===_1n$3)return s;let a=e.ONE,c=s;for(;o>_0n$3;)o&_1n$3&&(a=e.mul(a,c)),c=e.sqr(c),o>>=_1n$3;return a}function FpInvertBatch(e,s){const o=new Array(s.length),a=s.reduce((h,g,_)=>e.is0(g)?h:(o[_]=h,e.mul(h,g)),e.ONE),c=e.inv(a);return s.reduceRight((h,g,_)=>e.is0(g)?h:(o[_]=e.mul(h,o[_]),e.mul(h,g)),c),o}function nLength(e,s){const o=s!==void 0?s:e.toString(2).length,a=Math.ceil(o/8);return{nBitLength:o,nByteLength:a}}function Field(e,s,o=!1,a={}){if(e<=_0n$3)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:c,nByteLength:h}=nLength(e,s);if(h>2048)throw new Error("Field lengths over 2048 bytes are not supported");const g=FpSqrt(e),_=Object.freeze({ORDER:e,BITS:c,BYTES:h,MASK:bitMask(c),ZERO:_0n$3,ONE:_1n$3,create:b=>mod(b,e),isValid:b=>{if(typeof b!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof b}`);return _0n$3<=b&&b<e},is0:b=>b===_0n$3,isOdd:b=>(b&_1n$3)===_1n$3,neg:b=>mod(-b,e),eql:(b,$)=>b===$,sqr:b=>mod(b*b,e),add:(b,$)=>mod(b+$,e),sub:(b,$)=>mod(b-$,e),mul:(b,$)=>mod(b*$,e),pow:(b,$)=>FpPow(_,b,$),div:(b,$)=>mod(b*invert($,e),e),sqrN:b=>b*b,addN:(b,$)=>b+$,subN:(b,$)=>b-$,mulN:(b,$)=>b*$,inv:b=>invert(b,e),sqrt:a.sqrt||(b=>g(_,b)),invertBatch:b=>FpInvertBatch(_,b),cmov:(b,$,_e)=>_e?$:b,toBytes:b=>o?numberToBytesLE(b,h):numberToBytesBE(b,h),fromBytes:b=>{if(b.length!==h)throw new Error(`Fp.fromBytes: expected ${h}, got ${b.length}`);return o?bytesToNumberLE(b):bytesToNumberBE(b)}});return Object.freeze(_)}function getFieldBytesLength(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const s=e.toString(2).length;return Math.ceil(s/8)}function getMinHashLength(e){const s=getFieldBytesLength(e);return s+Math.ceil(s/2)}function mapHashToField(e,s,o=!1){const a=e.length,c=getFieldBytesLength(s),h=getMinHashLength(s);if(a<16||a<h||a>1024)throw new Error(`expected ${h}-1024 bytes of input, got ${a}`);const g=o?bytesToNumberBE(e):bytesToNumberLE(e),_=mod(g,s-_1n$3)+_1n$3;return o?numberToBytesLE(_,c):numberToBytesBE(_,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$2=BigInt(1),pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function wNAF(e,s){const o=(h,g)=>{const _=g.negate();return h?_:g},a=h=>{if(!Number.isSafeInteger(h)||h<=0||h>s)throw new Error(`Wrong window size=${h}, should be [1..${s}]`)},c=h=>{a(h);const g=Math.ceil(s/h)+1,_=2**(h-1);return{windows:g,windowSize:_}};return{constTimeNegate:o,unsafeLadder(h,g){let _=e.ZERO,b=h;for(;g>_0n$2;)g&_1n$2&&(_=_.add(b)),b=b.double(),g>>=_1n$2;return _},precomputeWindow(h,g){const{windows:_,windowSize:b}=c(g),$=[];let _e=h,j=_e;for(let et=0;et<_;et++){j=_e,$.push(j);for(let tt=1;tt<b;tt++)j=j.add(_e),$.push(j);_e=j.double()}return $},wNAF(h,g,_){const{windows:b,windowSize:$}=c(h);let _e=e.ZERO,j=e.BASE;const et=BigInt(2**h-1),tt=2**h,nt=BigInt(h);for(let rt=0;rt<b;rt++){const ot=rt*$;let it=Number(_&et);_>>=nt,it>$&&(it-=tt,_+=_1n$2);const st=ot,at=ot+Math.abs(it)-1,lt=rt%2!==0,wt=it<0;it===0?j=j.add(o(lt,g[st])):_e=_e.add(o(wt,g[at]))}return{p:_e,f:j}},wNAFCached(h,g,_){const b=pointWindowSizes.get(h)||1;let $=pointPrecomputes.get(h);return $||($=this.precomputeWindow(h,b),b!==1&&pointPrecomputes.set(h,_($))),this.wNAF(b,$,g)},setWindowSize(h,g){a(g),pointWindowSizes.set(h,g),pointPrecomputes.delete(h)}}}function pippenger(e,s,o,a){if(!Array.isArray(o)||!Array.isArray(a)||a.length!==o.length)throw new Error("arrays of points and scalars must have equal length");a.forEach((_e,j)=>{if(!s.isValid(_e))throw new Error(`wrong scalar at index ${j}`)}),o.forEach((_e,j)=>{if(!(_e instanceof e))throw new Error(`wrong point at index ${j}`)});const c=bitLen(BigInt(o.length)),h=c>12?c-3:c>4?c-2:c?2:1,g=(1<<h)-1,_=new Array(g+1).fill(e.ZERO),b=Math.floor((s.BITS-1)/h)*h;let $=e.ZERO;for(let _e=b;_e>=0;_e-=h){_.fill(e.ZERO);for(let et=0;et<a.length;et++){const tt=a[et],nt=Number(tt>>BigInt(_e)&BigInt(g));_[nt]=_[nt].add(o[et])}let j=e.ZERO;for(let et=_.length-1,tt=e.ZERO;et>0;et--)tt=tt.add(_[et]),j=j.add(tt);if($=$.add(j),_e!==0)for(let et=0;et<h;et++)$=$.double()}return $}function validateBasic(e){return validateField(e.Fp),validateObject(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(e){e.lowS!==void 0&&abool("lowS",e.lowS),e.prehash!==void 0&&abool("prehash",e.prehash)}function validatePointOpts(e){const s=validateBasic(e);validateObject(s,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:o,Fp:a,a:c}=s;if(o){if(!a.eql(c,a.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof o!="object"||typeof o.beta!="bigint"||typeof o.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...s})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(s=""){super(s)}},_tlv:{encode:(e,s)=>{const{Err:o}=DER;if(e<0||e>256)throw new o("tlv.encode: wrong tag");if(s.length&1)throw new o("tlv.encode: unpadded data");const a=s.length/2,c=numberToHexUnpadded(a);if(c.length/2&128)throw new o("tlv.encode: long form length too big");const h=a>127?numberToHexUnpadded(c.length/2|128):"";return`${numberToHexUnpadded(e)}${h}${c}${s}`},decode(e,s){const{Err:o}=DER;let a=0;if(e<0||e>256)throw new o("tlv.encode: wrong tag");if(s.length<2||s[a++]!==e)throw new o("tlv.decode: wrong tlv");const c=s[a++],h=!!(c&128);let g=0;if(!h)g=c;else{const b=c&127;if(!b)throw new o("tlv.decode(long): indefinite length not supported");if(b>4)throw new o("tlv.decode(long): byte length is too big");const $=s.subarray(a,a+b);if($.length!==b)throw new o("tlv.decode: length bytes not complete");if($[0]===0)throw new o("tlv.decode(long): zero leftmost byte");for(const _e of $)g=g<<8|_e;if(a+=b,g<128)throw new o("tlv.decode(long): not minimal encoding")}const _=s.subarray(a,a+g);if(_.length!==g)throw new o("tlv.decode: wrong value length");return{v:_,l:s.subarray(a+g)}}},_int:{encode(e){const{Err:s}=DER;if(e<_0n$1)throw new s("integer: negative integers are not allowed");let o=numberToHexUnpadded(e);if(Number.parseInt(o[0],16)&8&&(o="00"+o),o.length&1)throw new s("unexpected assertion");return o},decode(e){const{Err:s}=DER;if(e[0]&128)throw new s("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new s("Invalid signature integer: unnecessary leading zero");return b2n(e)}},toSig(e){const{Err:s,_int:o,_tlv:a}=DER,c=typeof e=="string"?h2b(e):e;abytes(c);const{v:h,l:g}=a.decode(48,c);if(g.length)throw new s("Invalid signature: left bytes after parsing");const{v:_,l:b}=a.decode(2,h),{v:$,l:_e}=a.decode(2,b);if(_e.length)throw new s("Invalid signature: left bytes after parsing");return{r:o.decode(_),s:o.decode($)}},hexFromSig(e){const{_tlv:s,_int:o}=DER,a=`${s.encode(2,o.encode(e.r))}${s.encode(2,o.encode(e.s))}`;return s.encode(48,a)}},_0n$1=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(e){const s=validatePointOpts(e),{Fp:o}=s,a=Field(s.n,s.nBitLength),c=s.toBytes||((rt,ot,it)=>{const st=ot.toAffine();return concatBytes(Uint8Array.from([4]),o.toBytes(st.x),o.toBytes(st.y))}),h=s.fromBytes||(rt=>{const ot=rt.subarray(1),it=o.fromBytes(ot.subarray(0,o.BYTES)),st=o.fromBytes(ot.subarray(o.BYTES,2*o.BYTES));return{x:it,y:st}});function g(rt){const{a:ot,b:it}=s,st=o.sqr(rt),at=o.mul(st,rt);return o.add(o.add(at,o.mul(rt,ot)),it)}if(!o.eql(o.sqr(s.Gy),g(s.Gx)))throw new Error("bad generator point: equation left != right");function _(rt){return inRange(rt,_1n$1,s.n)}function b(rt){const{allowedPrivateKeyLengths:ot,nByteLength:it,wrapPrivateKey:st,n:at}=s;if(ot&&typeof rt!="bigint"){if(isBytes$1(rt)&&(rt=bytesToHex(rt)),typeof rt!="string"||!ot.includes(rt.length))throw new Error("Invalid key");rt=rt.padStart(it*2,"0")}let lt;try{lt=typeof rt=="bigint"?rt:bytesToNumberBE(ensureBytes("private key",rt,it))}catch{throw new Error(`private key must be ${it} bytes, hex or bigint, not ${typeof rt}`)}return st&&(lt=mod(lt,at)),aInRange("private key",lt,_1n$1,at),lt}function $(rt){if(!(rt instanceof et))throw new Error("ProjectivePoint expected")}const _e=memoized((rt,ot)=>{const{px:it,py:st,pz:at}=rt;if(o.eql(at,o.ONE))return{x:it,y:st};const lt=rt.is0();ot==null&&(ot=lt?o.ONE:o.inv(at));const wt=o.mul(it,ot),gt=o.mul(st,ot),pt=o.mul(at,ot);if(lt)return{x:o.ZERO,y:o.ZERO};if(!o.eql(pt,o.ONE))throw new Error("invZ was invalid");return{x:wt,y:gt}}),j=memoized(rt=>{if(rt.is0()){if(s.allowInfinityPoint&&!o.is0(rt.py))return;throw new Error("bad point: ZERO")}const{x:ot,y:it}=rt.toAffine();if(!o.isValid(ot)||!o.isValid(it))throw new Error("bad point: x or y not FE");const st=o.sqr(it),at=g(ot);if(!o.eql(st,at))throw new Error("bad point: equation left != right");if(!rt.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class et{constructor(ot,it,st){if(this.px=ot,this.py=it,this.pz=st,ot==null||!o.isValid(ot))throw new Error("x required");if(it==null||!o.isValid(it))throw new Error("y required");if(st==null||!o.isValid(st))throw new Error("z required");Object.freeze(this)}static fromAffine(ot){const{x:it,y:st}=ot||{};if(!ot||!o.isValid(it)||!o.isValid(st))throw new Error("invalid affine point");if(ot instanceof et)throw new Error("projective point not allowed");const at=lt=>o.eql(lt,o.ZERO);return at(it)&&at(st)?et.ZERO:new et(it,st,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(ot){const it=o.invertBatch(ot.map(st=>st.pz));return ot.map((st,at)=>st.toAffine(it[at])).map(et.fromAffine)}static fromHex(ot){const it=et.fromAffine(h(ensureBytes("pointHex",ot)));return it.assertValidity(),it}static fromPrivateKey(ot){return et.BASE.multiply(b(ot))}static msm(ot,it){return pippenger(et,a,ot,it)}_setWindowSize(ot){nt.setWindowSize(this,ot)}assertValidity(){j(this)}hasEvenY(){const{y:ot}=this.toAffine();if(o.isOdd)return!o.isOdd(ot);throw new Error("Field doesn't support isOdd")}equals(ot){$(ot);const{px:it,py:st,pz:at}=this,{px:lt,py:wt,pz:gt}=ot,pt=o.eql(o.mul(it,gt),o.mul(lt,at)),yt=o.eql(o.mul(st,gt),o.mul(wt,at));return pt&&yt}negate(){return new et(this.px,o.neg(this.py),this.pz)}double(){const{a:ot,b:it}=s,st=o.mul(it,_3n),{px:at,py:lt,pz:wt}=this;let gt=o.ZERO,pt=o.ZERO,yt=o.ZERO,St=o.mul(at,at),kt=o.mul(lt,lt),dt=o.mul(wt,wt),mt=o.mul(at,lt);return mt=o.add(mt,mt),yt=o.mul(at,wt),yt=o.add(yt,yt),gt=o.mul(ot,yt),pt=o.mul(st,dt),pt=o.add(gt,pt),gt=o.sub(kt,pt),pt=o.add(kt,pt),pt=o.mul(gt,pt),gt=o.mul(mt,gt),yt=o.mul(st,yt),dt=o.mul(ot,dt),mt=o.sub(St,dt),mt=o.mul(ot,mt),mt=o.add(mt,yt),yt=o.add(St,St),St=o.add(yt,St),St=o.add(St,dt),St=o.mul(St,mt),pt=o.add(pt,St),dt=o.mul(lt,wt),dt=o.add(dt,dt),St=o.mul(dt,mt),gt=o.sub(gt,St),yt=o.mul(dt,kt),yt=o.add(yt,yt),yt=o.add(yt,yt),new et(gt,pt,yt)}add(ot){$(ot);const{px:it,py:st,pz:at}=this,{px:lt,py:wt,pz:gt}=ot;let pt=o.ZERO,yt=o.ZERO,St=o.ZERO;const kt=s.a,dt=o.mul(s.b,_3n);let mt=o.mul(it,lt),bt=o.mul(st,wt),_t=o.mul(at,gt),ft=o.add(it,st),ht=o.add(lt,wt);ft=o.mul(ft,ht),ht=o.add(mt,bt),ft=o.sub(ft,ht),ht=o.add(it,at);let Et=o.add(lt,gt);return ht=o.mul(ht,Et),Et=o.add(mt,_t),ht=o.sub(ht,Et),Et=o.add(st,at),pt=o.add(wt,gt),Et=o.mul(Et,pt),pt=o.add(bt,_t),Et=o.sub(Et,pt),St=o.mul(kt,ht),pt=o.mul(dt,_t),St=o.add(pt,St),pt=o.sub(bt,St),St=o.add(bt,St),yt=o.mul(pt,St),bt=o.add(mt,mt),bt=o.add(bt,mt),_t=o.mul(kt,_t),ht=o.mul(dt,ht),bt=o.add(bt,_t),_t=o.sub(mt,_t),_t=o.mul(kt,_t),ht=o.add(ht,_t),mt=o.mul(bt,ht),yt=o.add(yt,mt),mt=o.mul(Et,ht),pt=o.mul(ft,pt),pt=o.sub(pt,mt),mt=o.mul(ft,bt),St=o.mul(Et,St),St=o.add(St,mt),new et(pt,yt,St)}subtract(ot){return this.add(ot.negate())}is0(){return this.equals(et.ZERO)}wNAF(ot){return nt.wNAFCached(this,ot,et.normalizeZ)}multiplyUnsafe(ot){aInRange("scalar",ot,_0n$1,s.n);const it=et.ZERO;if(ot===_0n$1)return it;if(ot===_1n$1)return this;const{endo:st}=s;if(!st)return nt.unsafeLadder(this,ot);let{k1neg:at,k1:lt,k2neg:wt,k2:gt}=st.splitScalar(ot),pt=it,yt=it,St=this;for(;lt>_0n$1||gt>_0n$1;)lt&_1n$1&&(pt=pt.add(St)),gt&_1n$1&&(yt=yt.add(St)),St=St.double(),lt>>=_1n$1,gt>>=_1n$1;return at&&(pt=pt.negate()),wt&&(yt=yt.negate()),yt=new et(o.mul(yt.px,st.beta),yt.py,yt.pz),pt.add(yt)}multiply(ot){const{endo:it,n:st}=s;aInRange("scalar",ot,_1n$1,st);let at,lt;if(it){const{k1neg:wt,k1:gt,k2neg:pt,k2:yt}=it.splitScalar(ot);let{p:St,f:kt}=this.wNAF(gt),{p:dt,f:mt}=this.wNAF(yt);St=nt.constTimeNegate(wt,St),dt=nt.constTimeNegate(pt,dt),dt=new et(o.mul(dt.px,it.beta),dt.py,dt.pz),at=St.add(dt),lt=kt.add(mt)}else{const{p:wt,f:gt}=this.wNAF(ot);at=wt,lt=gt}return et.normalizeZ([at,lt])[0]}multiplyAndAddUnsafe(ot,it,st){const at=et.BASE,lt=(gt,pt)=>pt===_0n$1||pt===_1n$1||!gt.equals(at)?gt.multiplyUnsafe(pt):gt.multiply(pt),wt=lt(this,it).add(lt(ot,st));return wt.is0()?void 0:wt}toAffine(ot){return _e(this,ot)}isTorsionFree(){const{h:ot,isTorsionFree:it}=s;if(ot===_1n$1)return!0;if(it)return it(et,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:ot,clearCofactor:it}=s;return ot===_1n$1?this:it?it(et,this):this.multiplyUnsafe(s.h)}toRawBytes(ot=!0){return abool("isCompressed",ot),this.assertValidity(),c(et,this,ot)}toHex(ot=!0){return abool("isCompressed",ot),bytesToHex(this.toRawBytes(ot))}}et.BASE=new et(s.Gx,s.Gy,o.ONE),et.ZERO=new et(o.ZERO,o.ONE,o.ZERO);const tt=s.nBitLength,nt=wNAF(et,s.endo?Math.ceil(tt/2):tt);return{CURVE:s,ProjectivePoint:et,normPrivateKeyToScalar:b,weierstrassEquation:g,isWithinCurveOrder:_}}function validateOpts(e){const s=validateBasic(e);return validateObject(s,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...s})}function weierstrass(e){const s=validateOpts(e),{Fp:o,n:a}=s,c=o.BYTES+1,h=2*o.BYTES+1;function g(_t){return mod(_t,a)}function _(_t){return invert(_t,a)}const{ProjectivePoint:b,normPrivateKeyToScalar:$,weierstrassEquation:_e,isWithinCurveOrder:j}=weierstrassPoints({...s,toBytes(_t,ft,ht){const Et=ft.toAffine(),vt=o.toBytes(Et.x),xt=concatBytes;return abool("isCompressed",ht),ht?xt(Uint8Array.from([ft.hasEvenY()?2:3]),vt):xt(Uint8Array.from([4]),vt,o.toBytes(Et.y))},fromBytes(_t){const ft=_t.length,ht=_t[0],Et=_t.subarray(1);if(ft===c&&(ht===2||ht===3)){const vt=bytesToNumberBE(Et);if(!inRange(vt,_1n$1,o.ORDER))throw new Error("Point is not on curve");const xt=_e(vt);let Rt;try{Rt=o.sqrt(xt)}catch(Nt){const At=Nt instanceof Error?": "+Nt.message:"";throw new Error("Point is not on curve"+At)}const $t=(Rt&_1n$1)===_1n$1;return(ht&1)===1!==$t&&(Rt=o.neg(Rt)),{x:vt,y:Rt}}else if(ft===h&&ht===4){const vt=o.fromBytes(Et.subarray(0,o.BYTES)),xt=o.fromBytes(Et.subarray(o.BYTES,2*o.BYTES));return{x:vt,y:xt}}else throw new Error(`Point of length ${ft} was invalid. Expected ${c} compressed bytes or ${h} uncompressed bytes`)}}),et=_t=>bytesToHex(numberToBytesBE(_t,s.nByteLength));function tt(_t){const ft=a>>_1n$1;return _t>ft}function nt(_t){return tt(_t)?g(-_t):_t}const rt=(_t,ft,ht)=>bytesToNumberBE(_t.slice(ft,ht));class ot{constructor(ft,ht,Et){this.r=ft,this.s=ht,this.recovery=Et,this.assertValidity()}static fromCompact(ft){const ht=s.nByteLength;return ft=ensureBytes("compactSignature",ft,ht*2),new ot(rt(ft,0,ht),rt(ft,ht,2*ht))}static fromDER(ft){const{r:ht,s:Et}=DER.toSig(ensureBytes("DER",ft));return new ot(ht,Et)}assertValidity(){aInRange("r",this.r,_1n$1,a),aInRange("s",this.s,_1n$1,a)}addRecoveryBit(ft){return new ot(this.r,this.s,ft)}recoverPublicKey(ft){const{r:ht,s:Et,recovery:vt}=this,xt=gt(ensureBytes("msgHash",ft));if(vt==null||![0,1,2,3].includes(vt))throw new Error("recovery id invalid");const Rt=vt===2||vt===3?ht+s.n:ht;if(Rt>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const $t=vt&1?"03":"02",Ct=b.fromHex($t+et(Rt)),Nt=_(Rt),At=g(-xt*Nt),Pt=g(Et*Nt),Tt=b.BASE.multiplyAndAddUnsafe(Ct,At,Pt);if(!Tt)throw new Error("point at infinify");return Tt.assertValidity(),Tt}hasHighS(){return tt(this.s)}normalizeS(){return this.hasHighS()?new ot(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return et(this.r)+et(this.s)}}const it={isValidPrivateKey(_t){try{return $(_t),!0}catch{return!1}},normPrivateKeyToScalar:$,randomPrivateKey:()=>{const _t=getMinHashLength(s.n);return mapHashToField(s.randomBytes(_t),s.n)},precompute(_t=8,ft=b.BASE){return ft._setWindowSize(_t),ft.multiply(BigInt(3)),ft}};function st(_t,ft=!0){return b.fromPrivateKey(_t).toRawBytes(ft)}function at(_t){const ft=isBytes$1(_t),ht=typeof _t=="string",Et=(ft||ht)&&_t.length;return ft?Et===c||Et===h:ht?Et===2*c||Et===2*h:_t instanceof b}function lt(_t,ft,ht=!0){if(at(_t))throw new Error("first arg must be private key");if(!at(ft))throw new Error("second arg must be public key");return b.fromHex(ft).multiply($(_t)).toRawBytes(ht)}const wt=s.bits2int||function(_t){const ft=bytesToNumberBE(_t),ht=_t.length*8-s.nBitLength;return ht>0?ft>>BigInt(ht):ft},gt=s.bits2int_modN||function(_t){return g(wt(_t))},pt=bitMask(s.nBitLength);function yt(_t){return aInRange(`num < 2^${s.nBitLength}`,_t,_0n$1,pt),numberToBytesBE(_t,s.nByteLength)}function St(_t,ft,ht=kt){if(["recovered","canonical"].some(Bt=>Bt in ht))throw new Error("sign() legacy options not supported");const{hash:Et,randomBytes:vt}=s;let{lowS:xt,prehash:Rt,extraEntropy:$t}=ht;xt==null&&(xt=!0),_t=ensureBytes("msgHash",_t),validateSigVerOpts(ht),Rt&&(_t=ensureBytes("prehashed msgHash",Et(_t)));const Ct=gt(_t),Nt=$(ft),At=[yt(Nt),yt(Ct)];if($t!=null&&$t!==!1){const Bt=$t===!0?vt(o.BYTES):$t;At.push(ensureBytes("extraEntropy",Bt))}const Pt=concatBytes(...At),Tt=Ct;function Lt(Bt){const jt=wt(Bt);if(!j(jt))return;const Ut=_(jt),Mt=b.BASE.multiply(jt).toAffine(),It=g(Mt.x);if(It===_0n$1)return;const Ot=g(Ut*g(Tt+It*Nt));if(Ot===_0n$1)return;let Dt=(Mt.x===It?0:2)|Number(Mt.y&_1n$1),Kt=Ot;return xt&&tt(Ot)&&(Kt=nt(Ot),Dt^=1),new ot(It,Kt,Dt)}return{seed:Pt,k2sig:Lt}}const kt={lowS:s.lowS,prehash:!1},dt={lowS:s.lowS,prehash:!1};function mt(_t,ft,ht=kt){const{seed:Et,k2sig:vt}=St(_t,ft,ht),xt=s;return createHmacDrbg(xt.hash.outputLen,xt.nByteLength,xt.hmac)(Et,vt)}b.BASE._setWindowSize(8);function bt(_t,ft,ht,Et=dt){var Mt;const vt=_t;if(ft=ensureBytes("msgHash",ft),ht=ensureBytes("publicKey",ht),"strict"in Et)throw new Error("options.strict was renamed to lowS");validateSigVerOpts(Et);const{lowS:xt,prehash:Rt}=Et;let $t,Ct;try{if(typeof vt=="string"||isBytes$1(vt))try{$t=ot.fromDER(vt)}catch(It){if(!(It instanceof DER.Err))throw It;$t=ot.fromCompact(vt)}else if(typeof vt=="object"&&typeof vt.r=="bigint"&&typeof vt.s=="bigint"){const{r:It,s:Ot}=vt;$t=new ot(It,Ot)}else throw new Error("PARSE");Ct=b.fromHex(ht)}catch(It){if(It.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(xt&&$t.hasHighS())return!1;Rt&&(ft=s.hash(ft));const{r:Nt,s:At}=$t,Pt=gt(ft),Tt=_(At),Lt=g(Pt*Tt),Bt=g(Nt*Tt),jt=(Mt=b.BASE.multiplyAndAddUnsafe(Ct,Lt,Bt))==null?void 0:Mt.toAffine();return jt?g(jt.x)===Nt:!1}return{CURVE:s,getPublicKey:st,getSharedSecret:lt,sign:mt,verify:bt,ProjectivePoint:b,Signature:ot,utils:it}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(e){return{hash:e,hmac:(s,...o)=>hmac(e,s,concatBytes$1(...o)),randomBytes}}function createCurve(e,s){const o=a=>weierstrass({...e,...getHash(a)});return Object.freeze({...o(s),create:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(e,s)=>(e+s/_2n)/s;function sqrtMod(e){const s=secp256k1P,o=BigInt(3),a=BigInt(6),c=BigInt(11),h=BigInt(22),g=BigInt(23),_=BigInt(44),b=BigInt(88),$=e*e*e%s,_e=$*$*e%s,j=pow2(_e,o,s)*_e%s,et=pow2(j,o,s)*_e%s,tt=pow2(et,_2n,s)*$%s,nt=pow2(tt,c,s)*tt%s,rt=pow2(nt,h,s)*nt%s,ot=pow2(rt,_,s)*rt%s,it=pow2(ot,b,s)*ot%s,st=pow2(it,_,s)*rt%s,at=pow2(st,o,s)*_e%s,lt=pow2(at,g,s)*nt%s,wt=pow2(lt,a,s)*$%s,gt=pow2(wt,_2n,s);if(!Fp.eql(Fp.sqr(gt),e))throw new Error("Cannot find square root");return gt}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const s=secp256k1N,o=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),c=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),h=o,g=BigInt("0x100000000000000000000000000000000"),_=divNearest(h*e,s),b=divNearest(-a*e,s);let $=mod(e-_*o-b*c,s),_e=mod(-_*a-b*h,s);const j=$>g,et=_e>g;if(j&&($=s-$),et&&(_e=s-_e),$>g||_e>g)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:j,k1:$,k2neg:et,k2:_e}}}},sha256),_0n=BigInt(0),TAGGED_HASH_PREFIXES={};function taggedHash(e,...s){let o=TAGGED_HASH_PREFIXES[e];if(o===void 0){const a=sha256(Uint8Array.from(e,c=>c.charCodeAt(0)));o=concatBytes(a,a),TAGGED_HASH_PREFIXES[e]=o}return sha256(concatBytes(o,...s))}const pointToBytes=e=>e.toRawBytes(!0).slice(1),numTo32b=e=>numberToBytesBE(e,32),modP=e=>mod(e,secp256k1P),modN=e=>mod(e,secp256k1N),Point=secp256k1.ProjectivePoint,GmulAdd=(e,s,o)=>Point.BASE.multiplyAndAddUnsafe(e,s,o);function schnorrGetExtPubKey(e){let s=secp256k1.utils.normPrivateKeyToScalar(e),o=Point.fromPrivateKey(s);return{scalar:o.hasEvenY()?s:modN(-s),bytes:pointToBytes(o)}}function lift_x(e){aInRange("x",e,_1n,secp256k1P);const s=modP(e*e),o=modP(s*e+BigInt(7));let a=sqrtMod(o);a%_2n!==_0n&&(a=modP(-a));const c=new Point(e,a,_1n);return c.assertValidity(),c}const num=bytesToNumberBE;function challenge(...e){return modN(num(taggedHash("BIP0340/challenge",...e)))}function schnorrGetPublicKey(e){return schnorrGetExtPubKey(e).bytes}function schnorrSign(e,s,o=randomBytes(32)){const a=ensureBytes("message",e),{bytes:c,scalar:h}=schnorrGetExtPubKey(s),g=ensureBytes("auxRand",o,32),_=numTo32b(h^num(taggedHash("BIP0340/aux",g))),b=taggedHash("BIP0340/nonce",_,c,a),$=modN(num(b));if($===_0n)throw new Error("sign failed: k is zero");const{bytes:_e,scalar:j}=schnorrGetExtPubKey($),et=challenge(_e,c,a),tt=new Uint8Array(64);if(tt.set(_e,0),tt.set(numTo32b(modN(j+et*h)),32),!schnorrVerify(tt,a,c))throw new Error("sign: Invalid signature produced");return tt}function schnorrVerify(e,s,o){const a=ensureBytes("signature",e,64),c=ensureBytes("message",s),h=ensureBytes("publicKey",o,32);try{const g=lift_x(num(h)),_=num(a.subarray(0,32));if(!inRange(_,_1n,secp256k1P))return!1;const b=num(a.subarray(32,64));if(!inRange(b,_1n,secp256k1N))return!1;const $=challenge(numTo32b(_),pointToBytes(g),c),_e=GmulAdd(g,b,modN(-$));return!(!_e||!_e.hasEvenY()||_e.toAffine().x!==_)}catch{return!1}}const schnorr={getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:secp256k1.utils.randomPrivateKey,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE,taggedHash,mod}};var dist={},LRUCache$1={},LRUCacheNode$1={};Object.defineProperty(LRUCacheNode$1,"__esModule",{value:!0});LRUCacheNode$1.LRUCacheNode=void 0;class LRUCacheNode{constructor(s,o,a){const{entryExpirationTimeInMS:c=null,next:h=null,prev:g=null,onEntryEvicted:_,onEntryMarkedAsMostRecentlyUsed:b,clone:$,cloneFn:_e}=a??{};if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=$??!1,this.cloneFn=_e??this.defaultClone,this.key=s,this.internalValue=this.clone?this.cloneFn(o):o,this.created=Date.now(),this.entryExpirationTimeInMS=c,this.next=h,this.prev=g,this.onEntryEvicted=_,this.onEntryMarkedAsMostRecentlyUsed=b}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return typeof this.entryExpirationTimeInMS=="number"&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:s,value:o,isExpired:a}=this;this.onEntryEvicted({key:s,value:o,isExpired:a})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:s,value:o}=this;this.onEntryMarkedAsMostRecentlyUsed({key:s,value:o})}}defaultClone(s){return typeof s=="boolean"||typeof s=="string"||typeof s=="number"?s:JSON.parse(JSON.stringify(s))}}LRUCacheNode$1.LRUCacheNode=LRUCacheNode;Object.defineProperty(LRUCache$1,"__esModule",{value:!0});LRUCache$1.LRUCache=void 0;const LRUCacheNode_1=LRUCacheNode$1;class LRUCache{constructor(s){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:o=25,entryExpirationTimeInMS:a=null,onEntryEvicted:c,onEntryMarkedAsMostRecentlyUsed:h,cloneFn:g,clone:_}=s??{};if(Number.isNaN(o)||o<=0)throw new Error("maxSize must be greater than 0.");if(typeof a=="number"&&(a<=0||Number.isNaN(a)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=o,this.entryExpirationTimeInMS=a,this.onEntryEvicted=c,this.onEntryMarkedAsMostRecentlyUsed=h,this.clone=_,this.cloneFn=g}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(s){if(Number.isNaN(s)||s<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=s,this.enforceSizeLimit()}set(s,o,a){const c=this.lookupTable.get(s);c&&this.removeNodeFromListAndLookupTable(c);const h=new LRUCacheNode_1.LRUCacheNode(s,o,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...a});return this.setNodeAsHead(h),this.lookupTable.set(s,h),this.enforceSizeLimit(),this}get(s){const o=this.lookupTable.get(s);return o?o.isExpired?(this.removeNodeFromListAndLookupTable(o),null):(this.setNodeAsHead(o),o.value):null}peek(s){const o=this.lookupTable.get(s);return o?o.isExpired?(this.removeNodeFromListAndLookupTable(o),null):o.value:null}delete(s){const o=this.lookupTable.get(s);return o?this.removeNodeFromListAndLookupTable(o):!1}has(s){const o=this.lookupTable.get(s);return o?o.isExpired?(this.removeNodeFromListAndLookupTable(o),!1):!0:!1}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(s){let o=this.head;for(;o;){if(o.isExpired){const c=o.next;this.removeNodeFromListAndLookupTable(o),o=c;continue}const a=this.mapNodeToEntry(o);if(s(a))return this.setNodeAsHead(o),a;o=o.next}return null}forEach(s){let o=this.head,a=0;for(;o;){if(o.isExpired){const c=o.next;this.removeNodeFromListAndLookupTable(o),o=c;continue}s(o.value,o.key,a),o=o.next,a++}}*values(){let s=this.head;for(;s;){if(s.isExpired){const o=s.next;this.removeNodeFromListAndLookupTable(s),s=o;continue}yield s.value,s=s.next}}*keys(){let s=this.head;for(;s;){if(s.isExpired){const o=s.next;this.removeNodeFromListAndLookupTable(s),s=o;continue}yield s.key,s=s.next}}*entries(){let s=this.head;for(;s;){if(s.isExpired){const o=s.next;this.removeNodeFromListAndLookupTable(s),s=o;continue}yield this.mapNodeToEntry(s),s=s.next}}*[Symbol.iterator](){let s=this.head;for(;s;){if(s.isExpired){const o=s.next;this.removeNodeFromListAndLookupTable(s),s=o;continue}yield this.mapNodeToEntry(s),s=s.next}}enforceSizeLimit(){let s=this.tail;for(;s!==null&&this.size>this.maxSizeInternal;){const o=s.prev;this.removeNodeFromListAndLookupTable(s),s=o}}mapNodeToEntry({key:s,value:o}){return{key:s,value:o}}setNodeAsHead(s){this.removeNodeFromList(s),this.head?(s.next=this.head,this.head.prev=s,this.head=s):(this.head=s,this.tail=s),s.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(s){s.prev!==null&&(s.prev.next=s.next),s.next!==null&&(s.next.prev=s.prev),this.head===s&&(this.head=s.next),this.tail===s&&(this.tail=s.prev),s.next=null,s.prev=null}removeNodeFromListAndLookupTable(s){return s.invokeOnEvicted(),this.removeNodeFromList(s),this.lookupTable.delete(s.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const s=[];for(const o of this.lookupTable.values())o.isExpired&&s.push(o);s.forEach(o=>this.removeNodeFromListAndLookupTable(o))}}LRUCache$1.LRUCache=LRUCache;(function(e){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,h,g){g===void 0&&(g=h);var _=Object.getOwnPropertyDescriptor(c,h);(!_||("get"in _?!c.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return c[h]}}),Object.defineProperty(a,g,_)}:function(a,c,h,g){g===void 0&&(g=h),a[g]=c[h]}),o=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var h in a)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&s(c,a,h)};Object.defineProperty(e,"__esModule",{value:!0}),o(LRUCache$1,e)})(dist);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function chain(...e){const s=h=>h,o=(h,g)=>_=>h(g(_)),a=e.map(h=>h.encode).reduceRight(o,s),c=e.map(h=>h.decode).reduce(o,s);return{encode:a,decode:c}}function alphabet(e){return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return s.map(o=>{if(o<0||o>=e.length)throw new Error(`Digit index outside alphabet: ${o} (alphabet: ${e.length})`);return e[o]})},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("alphabet.decode input should be array of strings");return s.map(o=>{if(typeof o!="string")throw new Error(`alphabet.decode: not string element=${o}`);const a=e.indexOf(o);if(a===-1)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return a})}}}function join(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("join.encode input should be array of strings");for(let o of s)if(typeof o!="string")throw new Error(`join.encode: non-string input=${o}`);return s.join(e)},decode:s=>{if(typeof s!="string")throw new Error("join.decode input should be string");return s.split(e)}}}const gcd=(e,s)=>s?gcd(s,e%s):e,radix2carry=(e,s)=>e+(s-gcd(e,s));function convertRadix2(e,s,o,a){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(s<=0||s>32)throw new Error(`convertRadix2: wrong from=${s}`);if(o<=0||o>32)throw new Error(`convertRadix2: wrong to=${o}`);if(radix2carry(s,o)>32)throw new Error(`convertRadix2: carry overflow from=${s} to=${o} carryBits=${radix2carry(s,o)}`);let c=0,h=0;const g=2**o-1,_=[];for(const b of e){if(b>=2**s)throw new Error(`convertRadix2: invalid data word=${b} from=${s}`);if(c=c<<s|b,h+s>32)throw new Error(`convertRadix2: carry overflow pos=${h} from=${s}`);for(h+=s;h>=o;h-=o)_.push((c>>h-o&g)>>>0);c&=2**h-1}if(c=c<<o-h&g,!a&&h>=s)throw new Error("Excess padding");if(!a&&c)throw new Error(`Non-zero padding: ${c}`);return a&&h>0&&_.push(c>>>0),_}function radix2(e,s=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:o=>{if(!isBytes(o))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(o),8,e,!s)},decode:o=>{if(!Array.isArray(o)||o.length&&typeof o[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(convertRadix2(o,e,8,s))}}}function unsafeWrapper(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...s){try{return e.apply(null,s)}catch{}}}const BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const s=e>>25;let o=(e&33554431)<<5;for(let a=0;a<POLYMOD_GENERATORS.length;a++)(s>>a&1)===1&&(o^=POLYMOD_GENERATORS[a]);return o}function bechChecksum(e,s,o=1){const a=e.length;let c=1;for(let h=0;h<a;h++){const g=e.charCodeAt(h);if(g<33||g>126)throw new Error(`Invalid prefix (${e})`);c=bech32Polymod(c)^g>>5}c=bech32Polymod(c);for(let h=0;h<a;h++)c=bech32Polymod(c)^e.charCodeAt(h)&31;for(let h of s)c=bech32Polymod(c)^h;for(let h=0;h<6;h++)c=bech32Polymod(c);return c^=o,BECH_ALPHABET.encode(convertRadix2([c%2**30],30,5,!1))}function genBech32(e){const s=e==="bech32"?1:734539939,o=radix2(5),a=o.decode,c=o.encode,h=unsafeWrapper(a);function g(j,et,tt=90){if(typeof j!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof j}`);if(et instanceof Uint8Array&&(et=Array.from(et)),!Array.isArray(et)||et.length&&typeof et[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof et}`);if(j.length===0)throw new TypeError(`Invalid prefix length ${j.length}`);const nt=j.length+7+et.length;if(tt!==!1&&nt>tt)throw new TypeError(`Length ${nt} exceeds limit ${tt}`);const rt=j.toLowerCase(),ot=bechChecksum(rt,et,s);return`${rt}1${BECH_ALPHABET.encode(et)}${ot}`}function _(j,et=90){if(typeof j!="string")throw new Error(`bech32.decode input should be string, not ${typeof j}`);if(j.length<8||et!==!1&&j.length>et)throw new TypeError(`Wrong string length: ${j.length} (${j}). Expected (8..${et})`);const tt=j.toLowerCase();if(j!==tt&&j!==j.toUpperCase())throw new Error("String must be lowercase or uppercase");const nt=tt.lastIndexOf("1");if(nt===0||nt===-1)throw new Error('Letter "1" must be present between prefix and data only');const rt=tt.slice(0,nt),ot=tt.slice(nt+1);if(ot.length<6)throw new Error("Data must be at least 6 characters long");const it=BECH_ALPHABET.decode(ot).slice(0,-6),st=bechChecksum(rt,it,s);if(!ot.endsWith(st))throw new Error(`Invalid checksum in ${j}: expected "${st}"`);return{prefix:rt,words:it}}const b=unsafeWrapper(_);function $(j){const{prefix:et,words:tt}=_(j,!1);return{prefix:et,words:tt,bytes:a(tt)}}function _e(j,et){return g(j,c(et))}return{encode:g,decode:_,encodeFromBytes:_e,decodeToBytes:$,decodeUnsafe:b,fromWords:a,fromWordsUnsafe:h,toWords:c}}const bech32=genBech32("bech32");var lib={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function s(dt){if(!Number.isSafeInteger(dt))throw new Error(`Wrong integer: ${dt}`)}e.assertNumber=s;function o(...dt){const mt=(ft,ht)=>Et=>ft(ht(Et)),bt=Array.from(dt).reverse().reduce((ft,ht)=>ft?mt(ft,ht.encode):ht.encode,void 0),_t=dt.reduce((ft,ht)=>ft?mt(ft,ht.decode):ht.decode,void 0);return{encode:bt,decode:_t}}function a(dt){return{encode:mt=>{if(!Array.isArray(mt)||mt.length&&typeof mt[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return mt.map(bt=>{if(s(bt),bt<0||bt>=dt.length)throw new Error(`Digit index outside alphabet: ${bt} (alphabet: ${dt.length})`);return dt[bt]})},decode:mt=>{if(!Array.isArray(mt)||mt.length&&typeof mt[0]!="string")throw new Error("alphabet.decode input should be array of strings");return mt.map(bt=>{if(typeof bt!="string")throw new Error(`alphabet.decode: not string element=${bt}`);const _t=dt.indexOf(bt);if(_t===-1)throw new Error(`Unknown letter: "${bt}". Allowed: ${dt}`);return _t})}}}function c(dt=""){if(typeof dt!="string")throw new Error("join separator should be string");return{encode:mt=>{if(!Array.isArray(mt)||mt.length&&typeof mt[0]!="string")throw new Error("join.encode input should be array of strings");for(let bt of mt)if(typeof bt!="string")throw new Error(`join.encode: non-string input=${bt}`);return mt.join(dt)},decode:mt=>{if(typeof mt!="string")throw new Error("join.decode input should be string");return mt.split(dt)}}}function h(dt,mt="="){if(s(dt),typeof mt!="string")throw new Error("padding chr should be string");return{encode(bt){if(!Array.isArray(bt)||bt.length&&typeof bt[0]!="string")throw new Error("padding.encode input should be array of strings");for(let _t of bt)if(typeof _t!="string")throw new Error(`padding.encode: non-string input=${_t}`);for(;bt.length*dt%8;)bt.push(mt);return bt},decode(bt){if(!Array.isArray(bt)||bt.length&&typeof bt[0]!="string")throw new Error("padding.encode input should be array of strings");for(let ft of bt)if(typeof ft!="string")throw new Error(`padding.decode: non-string input=${ft}`);let _t=bt.length;if(_t*dt%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;_t>0&&bt[_t-1]===mt;_t--)if(!((_t-1)*dt%8))throw new Error("Invalid padding: string has too much padding");return bt.slice(0,_t)}}}function g(dt){if(typeof dt!="function")throw new Error("normalize fn should be function");return{encode:mt=>mt,decode:mt=>dt(mt)}}function _(dt,mt,bt){if(mt<2)throw new Error(`convertRadix: wrong from=${mt}, base cannot be less than 2`);if(bt<2)throw new Error(`convertRadix: wrong to=${bt}, base cannot be less than 2`);if(!Array.isArray(dt))throw new Error("convertRadix: data should be array");if(!dt.length)return[];let _t=0;const ft=[],ht=Array.from(dt);for(ht.forEach(Et=>{if(s(Et),Et<0||Et>=mt)throw new Error(`Wrong integer: ${Et}`)});;){let Et=0,vt=!0;for(let xt=_t;xt<ht.length;xt++){const Rt=ht[xt],$t=mt*Et+Rt;if(!Number.isSafeInteger($t)||mt*Et/mt!==Et||$t-Rt!==mt*Et)throw new Error("convertRadix: carry overflow");if(Et=$t%bt,ht[xt]=Math.floor($t/bt),!Number.isSafeInteger(ht[xt])||ht[xt]*bt+Et!==$t)throw new Error("convertRadix: carry overflow");if(vt)ht[xt]?vt=!1:_t=xt;else continue}if(ft.push(Et),vt)break}for(let Et=0;Et<dt.length-1&&dt[Et]===0;Et++)ft.push(0);return ft.reverse()}const b=(dt,mt)=>mt?b(mt,dt%mt):dt,$=(dt,mt)=>dt+(mt-b(dt,mt));function _e(dt,mt,bt,_t){if(!Array.isArray(dt))throw new Error("convertRadix2: data should be array");if(mt<=0||mt>32)throw new Error(`convertRadix2: wrong from=${mt}`);if(bt<=0||bt>32)throw new Error(`convertRadix2: wrong to=${bt}`);if($(mt,bt)>32)throw new Error(`convertRadix2: carry overflow from=${mt} to=${bt} carryBits=${$(mt,bt)}`);let ft=0,ht=0;const Et=2**bt-1,vt=[];for(const xt of dt){if(s(xt),xt>=2**mt)throw new Error(`convertRadix2: invalid data word=${xt} from=${mt}`);if(ft=ft<<mt|xt,ht+mt>32)throw new Error(`convertRadix2: carry overflow pos=${ht} from=${mt}`);for(ht+=mt;ht>=bt;ht-=bt)vt.push((ft>>ht-bt&Et)>>>0);ft&=2**ht-1}if(ft=ft<<bt-ht&Et,!_t&&ht>=mt)throw new Error("Excess padding");if(!_t&&ft)throw new Error(`Non-zero padding: ${ft}`);return _t&&ht>0&&vt.push(ft>>>0),vt}function j(dt){return s(dt),{encode:mt=>{if(!(mt instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return _(Array.from(mt),2**8,dt)},decode:mt=>{if(!Array.isArray(mt)||mt.length&&typeof mt[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(_(mt,dt,2**8))}}}function et(dt,mt=!1){if(s(dt),dt<=0||dt>32)throw new Error("radix2: bits should be in (0..32]");if($(8,dt)>32||$(dt,8)>32)throw new Error("radix2: carry overflow");return{encode:bt=>{if(!(bt instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return _e(Array.from(bt),8,dt,!mt)},decode:bt=>{if(!Array.isArray(bt)||bt.length&&typeof bt[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(_e(bt,dt,8,mt))}}}function tt(dt){if(typeof dt!="function")throw new Error("unsafeWrapper fn should be function");return function(...mt){try{return dt.apply(null,mt)}catch{}}}function nt(dt,mt){if(s(dt),typeof mt!="function")throw new Error("checksum fn should be function");return{encode(bt){if(!(bt instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const _t=mt(bt).slice(0,dt),ft=new Uint8Array(bt.length+dt);return ft.set(bt),ft.set(_t,bt.length),ft},decode(bt){if(!(bt instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const _t=bt.slice(0,-dt),ft=mt(_t).slice(0,dt),ht=bt.slice(-dt);for(let Et=0;Et<dt;Et++)if(ft[Et]!==ht[Et])throw new Error("Invalid checksum");return _t}}}e.utils={alphabet:a,chain:o,checksum:nt,radix:j,radix2:et,join:c,padding:h},e.base16=o(et(4),a("0123456789ABCDEF"),c("")),e.base32=o(et(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h(5),c("")),e.base32hex=o(et(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h(5),c("")),e.base32crockford=o(et(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),c(""),g(dt=>dt.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=o(et(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h(6),c("")),e.base64url=o(et(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(6),c(""));const rt=dt=>o(j(58),a(dt),c(""));e.base58=rt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=rt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=rt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const ot=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(dt){let mt="";for(let bt=0;bt<dt.length;bt+=8){const _t=dt.subarray(bt,bt+8);mt+=e.base58.encode(_t).padStart(ot[_t.length],"1")}return mt},decode(dt){let mt=[];for(let bt=0;bt<dt.length;bt+=11){const _t=dt.slice(bt,bt+11),ft=ot.indexOf(_t.length),ht=e.base58.decode(_t);for(let Et=0;Et<ht.length-ft;Et++)if(ht[Et]!==0)throw new Error("base58xmr: wrong padding");mt=mt.concat(Array.from(ht.slice(ht.length-ft)))}return Uint8Array.from(mt)}};const it=dt=>o(nt(4,mt=>dt(dt(mt))),e.base58);e.base58check=it;const st=o(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),c("")),at=[996825010,642813549,513874426,1027748829,705979059];function lt(dt){const mt=dt>>25;let bt=(dt&33554431)<<5;for(let _t=0;_t<at.length;_t++)(mt>>_t&1)===1&&(bt^=at[_t]);return bt}function wt(dt,mt,bt=1){const _t=dt.length;let ft=1;for(let ht=0;ht<_t;ht++){const Et=dt.charCodeAt(ht);if(Et<33||Et>126)throw new Error(`Invalid prefix (${dt})`);ft=lt(ft)^Et>>5}ft=lt(ft);for(let ht=0;ht<_t;ht++)ft=lt(ft)^dt.charCodeAt(ht)&31;for(let ht of mt)ft=lt(ft)^ht;for(let ht=0;ht<6;ht++)ft=lt(ft);return ft^=bt,st.encode(_e([ft%2**30],30,5,!1))}function gt(dt){const mt=dt==="bech32"?1:734539939,bt=et(5),_t=bt.decode,ft=bt.encode,ht=tt(_t);function Et($t,Ct,Nt=90){if(typeof $t!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof $t}`);if(!Array.isArray(Ct)||Ct.length&&typeof Ct[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Ct}`);const At=$t.length+7+Ct.length;if(Nt!==!1&&At>Nt)throw new TypeError(`Length ${At} exceeds limit ${Nt}`);return $t=$t.toLowerCase(),`${$t}1${st.encode(Ct)}${wt($t,Ct,mt)}`}function vt($t,Ct=90){if(typeof $t!="string")throw new Error(`bech32.decode input should be string, not ${typeof $t}`);if($t.length<8||Ct!==!1&&$t.length>Ct)throw new TypeError(`Wrong string length: ${$t.length} (${$t}). Expected (8..${Ct})`);const Nt=$t.toLowerCase();if($t!==Nt&&$t!==$t.toUpperCase())throw new Error("String must be lowercase or uppercase");$t=Nt;const At=$t.lastIndexOf("1");if(At===0||At===-1)throw new Error('Letter "1" must be present between prefix and data only');const Pt=$t.slice(0,At),Tt=$t.slice(At+1);if(Tt.length<6)throw new Error("Data must be at least 6 characters long");const Lt=st.decode(Tt).slice(0,-6),Bt=wt(Pt,Lt,mt);if(!Tt.endsWith(Bt))throw new Error(`Invalid checksum in ${$t}: expected "${Bt}"`);return{prefix:Pt,words:Lt}}const xt=tt(vt);function Rt($t){const{prefix:Ct,words:Nt}=vt($t,!1);return{prefix:Ct,words:Nt,bytes:_t(Nt)}}return{encode:Et,decode:vt,decodeToBytes:Rt,decodeUnsafe:xt,fromWords:_t,fromWordsUnsafe:ht,toWords:ft}}e.bech32=gt("bech32"),e.bech32m=gt("bech32m"),e.utf8={encode:dt=>new TextDecoder().decode(dt),decode:dt=>new TextEncoder().encode(dt)},e.hex=o(et(4),a("0123456789abcdef"),c(""),g(dt=>{if(typeof dt!="string"||dt.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof dt} with length ${dt.length}`);return dt.toLowerCase()}));const pt={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},yt=`Invalid encoding type. Available types: ${Object.keys(pt).join(", ")}`,St=(dt,mt)=>{if(typeof dt!="string"||!pt.hasOwnProperty(dt))throw new TypeError(yt);if(!(mt instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return pt[dt].encode(mt)};e.bytesToString=St,e.str=e.bytesToString;const kt=(dt,mt)=>{if(!pt.hasOwnProperty(dt))throw new TypeError(yt);if(typeof mt!="string")throw new TypeError("stringToBytes() expects string");return pt[dt].decode(mt)};e.stringToBytes=kt,e.bytes=e.stringToBytes})(lib);BigInt(1e3),BigInt(1e6),BigInt(1e9),BigInt(1e12);BigInt("2100000000000000000");BigInt(1e11);const TAGCODES={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(let e=0,s=Object.keys(TAGCODES);e<s.length;e++)s[e],TAGCODES[s[e]].toString();function getRelaysForSync(e,s,o="write"){if(!e.outboxTracker)return;const a=e.outboxTracker.data.get(s);if(a)return o==="write"?a.writeRelays:a.readRelays}async function getWriteRelaysFor(e,s,o="write"){if(e.outboxTracker)return e.outboxTracker.data.has(s)||await e.outboxTracker.trackUsers([s]),getRelaysForSync(e,s,o)}function getTopRelaysForAuthors(e,s){const o=new Map;return s.forEach(c=>{const h=getRelaysForSync(e,c);h&&h.forEach(g=>{const _=o.get(g)||0;o.set(g,_+1)})}),Array.from(o.entries()).sort((c,h)=>h[1]-c[1]).map(c=>c[0])}function getAllRelaysForAllPubkeys(e,s,o="read"){const a=new Map,c=new Set;return s.forEach(h=>{const g=getRelaysForSync(e,h,o);g&&g.size>0?(g.forEach(_=>{(a.get(_)||new Set).add(h)}),a.set(h,g)):c.add(h)}),{pubkeysToRelays:a,authorsMissingRelays:c}}function chooseRelayCombinationForPubkeys(e,s,o,{count:a,preferredRelays:c}={}){a??(a=2),c??(c=new Set);const h=e.pool,g=h.connectedRelays();g.forEach(et=>{c.add(et.url)});const _=new Map,{pubkeysToRelays:b,authorsMissingRelays:$}=getAllRelaysForAllPubkeys(e,s,o),_e=getTopRelaysForAuthors(e,s),j=(et,tt)=>{const nt=_.get(tt)||[];nt.push(et),_.set(tt,nt)};for(const[et,tt]of b.entries()){let nt=a;for(const rt of g)tt.has(rt.url)&&(j(et,rt.url),nt--);for(const rt of tt)_.has(rt)&&(j(et,rt),nt--);if(!(nt<=0))for(const rt of _e){if(nt<=0)break;tt.has(rt)&&(j(et,rt),nt--)}}for(const et of $)h.permanentAndConnectedRelays().forEach(tt=>{const nt=_.get(tt.url)||[];nt.push(et),_.set(tt.url,nt)});return _}function getRelaysForFilterWithAuthors(e,s,o=2){return chooseRelayCombinationForPubkeys(e,s,"write",{count:o})}function tryNormalizeRelayUrl(e){try{return normalizeRelayUrl(e)}catch{return}}function normalizeRelayUrl(e){let s=normalizeUrl(e.toLowerCase(),{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return s.endsWith("/")||(s+="/"),s}function normalize(e){const s=new Set;for(const o of e)try{s.add(normalizeRelayUrl(o))}catch{}return Array.from(s)}var DATA_URL_DEFAULT_MIME_TYPE="text/plain",DATA_URL_DEFAULT_CHARSET="us-ascii",testParameter=(e,s)=>s.some(o=>o instanceof RegExp?o.test(e):o===e),supportedProtocols=new Set(["https:","http:","file:"]),hasCustomProtocol=e=>{try{const{protocol:s}=new URL(e);return s.endsWith(":")&&!s.includes(".")&&!supportedProtocols.has(s)}catch{return!1}},normalizeDataURL=(e,{stripHash:s})=>{var j,et,tt,nt;const o=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!o)throw new Error(`Invalid URL: ${e}`);let a=((j=o.groups)==null?void 0:j.type)??"",c=((et=o.groups)==null?void 0:et.data)??"",h=((tt=o.groups)==null?void 0:tt.hash)??"";const g=a.split(";");h=s?"":h;let _=!1;g[g.length-1]==="base64"&&(g.pop(),_=!0);const b=((nt=g.shift())==null?void 0:nt.toLowerCase())??"",_e=[...g.map(rt=>{let[ot,it=""]=rt.split("=").map(st=>st.trim());return ot==="charset"&&(it=it.toLowerCase(),it===DATA_URL_DEFAULT_CHARSET)?"":`${ot}${it?`=${it}`:""}`}).filter(Boolean)];return _&&_e.push("base64"),(_e.length>0||b&&b!==DATA_URL_DEFAULT_MIME_TYPE)&&_e.unshift(b),`data:${_e.join(";")},${_?c.trim():c}${h?`#${h}`:""}`};function normalizeUrl(e,s){if(s={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...s},typeof s.defaultProtocol=="string"&&!s.defaultProtocol.endsWith(":")&&(s.defaultProtocol=`${s.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return normalizeDataURL(e,s);if(hasCustomProtocol(e))return e;const o=e.startsWith("//");!o&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,s.defaultProtocol));const c=new URL(e);if(s.forceHttp&&s.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(s.forceHttp&&c.protocol==="https:"&&(c.protocol="http:"),s.forceHttps&&c.protocol==="http:"&&(c.protocol="https:"),s.stripAuthentication&&(c.username="",c.password=""),s.stripHash?c.hash="":s.stripTextFragment&&(c.hash=c.hash.replace(/#?:~:text.*?$/i,"")),c.pathname){const g=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let _=0,b="";for(;;){const _e=g.exec(c.pathname);if(!_e)break;const j=_e[0],et=_e.index,tt=c.pathname.slice(_,et);b+=tt.replace(/\/{2,}/g,"/"),b+=j,_=et+j.length}const $=c.pathname.slice(_,c.pathname.length);b+=$.replace(/\/{2,}/g,"/"),c.pathname=b}if(c.pathname)try{c.pathname=decodeURI(c.pathname)}catch{}if(s.removeDirectoryIndex===!0&&(s.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(s.removeDirectoryIndex)&&s.removeDirectoryIndex.length>0){let g=c.pathname.split("/");const _=g[g.length-1];testParameter(_,s.removeDirectoryIndex)&&(g=g.slice(0,-1),c.pathname=g.slice(1).join("/")+"/")}if(c.hostname&&(c.hostname=c.hostname.replace(/\.$/,""),s.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(c.hostname)&&(c.hostname=c.hostname.replace(/^www\./,""))),Array.isArray(s.removeQueryParameters))for(const g of[...c.searchParams.keys()])testParameter(g,s.removeQueryParameters)&&c.searchParams.delete(g);if(!Array.isArray(s.keepQueryParameters)&&s.removeQueryParameters===!0&&(c.search=""),Array.isArray(s.keepQueryParameters)&&s.keepQueryParameters.length>0)for(const g of[...c.searchParams.keys()])testParameter(g,s.keepQueryParameters)||c.searchParams.delete(g);if(s.sortQueryParameters){c.searchParams.sort();try{c.search=decodeURIComponent(c.search)}catch{}}s.removeTrailingSlash&&(c.pathname=c.pathname.replace(/\/$/,"")),s.removeExplicitPort&&c.port&&(c.port="");const h=e;return e=c.toString(),!s.removeSingleSlash&&c.pathname==="/"&&!h.endsWith("/")&&c.hash===""&&(e=e.replace(/\/$/,"")),(s.removeTrailingSlash||c.pathname==="/")&&c.hash===""&&s.removeSingleSlash&&(e=e.replace(/\/$/,"")),o&&!s.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),s.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var MAX_RECONNECT_ATTEMPTS=5,FLAPPING_THRESHOLD_MS=1e3,NDKRelayConnectivity=class{constructor(e,s){ct(this,"ndkRelay");ct(this,"ws");ct(this,"_status");ct(this,"timeoutMs");ct(this,"connectedAt");ct(this,"_connectionStats",{attempts:0,success:0,durations:[]});ct(this,"debug");ct(this,"connectTimeout");ct(this,"reconnectTimeout");ct(this,"ndk");ct(this,"openSubs",new Map);ct(this,"openCountRequests",new Map);ct(this,"openEventPublishes",new Map);ct(this,"serial",0);ct(this,"baseEoseTimeout",4400);ct(this,"updateConnectionStats",{connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}});this.ndkRelay=e,this._status=1;const o=Math.floor(Math.random()*1e3);this.debug=this.ndkRelay.debug.extend("connectivity"+o),this.ndk=s}async connect(e,s=!0){if(this._status!==1||this.reconnectTimeout){this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);return}this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),e??(e=this.timeoutMs),!this.timeoutMs&&e&&(this.timeoutMs=e),this.timeoutMs&&(this.connectTimeout=setTimeout(()=>this.onConnectionError(s),this.timeoutMs));try{this.updateConnectionStats.attempt(),this._status===1?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(o){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,o),this._status=1,s?this.handleReconnection():this.ndkRelay.emit("delayed-connect",2*24*60*60*1e3),o}}disconnect(){var e;this._status=0;try{(e=this.ws)==null||e.close()}catch(s){this.debug("Failed to disconnect",s),this._status=1}}onConnectionError(e){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),e&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){this.updateConnectionStats.disconnected(),this._status=1}onMessage(e){try{const s=JSON.parse(e.data),[o,a,...c]=s;switch(o){case"EVENT":{const h=this.openSubs.get(a),g=s[2];if(!h){this.debug(`Received event for unknown subscription ${a}`);return}h.onevent(g);return}case"COUNT":{const h=s[2],g=this.openCountRequests.get(a);g&&(g.resolve(h.count),this.openCountRequests.delete(a));return}case"EOSE":{const h=this.openSubs.get(a);if(!h)return;h.oneose(a);return}case"OK":{const h=s[2],g=s[3],_=this.openEventPublishes.get(a),b=_==null?void 0:_.pop();if(!_||!b){this.debug("Received OK for unknown event publish",a);return}h?b.resolve(g):b.reject(new Error(g)),_.length===0?this.openEventPublishes.delete(a):this.openEventPublishes.set(a,_);return}case"CLOSED":{const h=this.openSubs.get(a);if(!h)return;h.onclosed(s[2]);return}case"NOTICE":this.onNotice(s[1]);return;case"AUTH":{this.onAuthRequested(s[1]);return}}}catch(s){this.debug(`Error parsing message from ${this.ndkRelay.url}: ${s.message}`,s==null?void 0:s.stack);return}}async onAuthRequested(e){var o,a,c;const s=this.ndkRelay.authPolicy??((o=this.ndk)==null?void 0:o.relayAuthDefaultPolicy);if(this.debug("Relay requested authentication",{havePolicy:!!s}),this._status===7){this.debug("Already authenticating, ignoring");return}if(this._status=6,s){if(this._status>=5){this._status=7;let h;try{h=await s(this.ndkRelay,e)}catch(g){this.debug("Authentication policy threw an error",g),h=!1}if(this.debug("Authentication policy returned",!!h),h instanceof NDKEvent||h===!0){h instanceof NDKEvent&&await this.auth(h);const g=async()=>{if(this._status>=5&&this._status<8){const _=new NDKEvent(this.ndk);_.kind=22242,_.tags=[["relay",this.ndkRelay.url],["challenge",e]],await _.sign(),this.auth(_).then(()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")}).catch(b=>{this._status=6,this.ndkRelay.emit("auth:failed",b),this.debug("Authentication failed",b)})}else this.debug("Authentication failed, it changed status, status is %d",this._status)};h===!0&&((a=this.ndk)!=null&&a.signer?g().catch(_=>{console.error("Error authenticating",_)}):(this.debug("No signer available for authentication localhost"),(c=this.ndk)==null||c.once("signer:ready",g))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",e)}onError(e){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,e)}get status(){return this._status}isAvailable(){return this._status===5}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!==0)return!1;const o=e.reduce((g,_)=>g+_,0)/e.length,a=e.map(g=>Math.pow(g-o,2)).reduce((g,_)=>g+_,0)/e.length;return Math.sqrt(a)<FLAPPING_THRESHOLD_MS}async onNotice(e){this.ndkRelay.emit("notice",e)}handleReconnection(e=0){if(this.reconnectTimeout)return;if(this.isFlapping()){this.ndkRelay.emit("flapping",this._connectionStats),this._status=3;return}const s=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch(o=>{e<MAX_RECONNECT_ATTEMPTS?setTimeout(()=>{this.handleReconnection(e+1)},1e3*(e+1)^4):this.debug("Reconnect failed")})},s),this.ndkRelay.emit("delayed-connect",s),this.debug("Reconnecting in",s),this._connectionStats.nextReconnectAt=Date.now()+s}async send(e){var s,o;this._status>=5&&((s=this.ws)==null?void 0:s.readyState)===WebSocket.OPEN?(o=this.ws)==null||o.send(e):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${e}`,this._status)}async auth(e){const s=new Promise((o,a)=>{const c=this.openEventPublishes.get(e.id)??[];c.push({resolve:o,reject:a}),this.openEventPublishes.set(e.id,c)});return this.send('["AUTH",'+JSON.stringify(e.rawEvent())+"]"),s}async publish(e){const s=new Promise((o,a)=>{const c=this.openEventPublishes.get(e.id)??[];c.length>0&&console.warn("Duplicate event publishing detected, you are publishing event "+e.id+" twice"),c.push({resolve:o,reject:a}),this.openEventPublishes.set(e.id,c)});return this.send('["EVENT",'+JSON.stringify(e)+"]"),s}async count(e,s){this.serial++;const o=(s==null?void 0:s.id)||"count:"+this.serial,a=new Promise((c,h)=>{this.openCountRequests.set(o,{resolve:c,reject:h})});return this.send('["COUNT","'+o+'",'+JSON.stringify(e).substring(1)),a}close(e,s){this.send('["CLOSE","'+e+'"]');const o=this.openSubs.get(e);this.openSubs.delete(e),o&&o.onclose(s)}req(e){this.send('["REQ","'+e.subId+'",'+JSON.stringify(e.executeFilters).substring(1))+"",this.openSubs.set(e.subId,e)}get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){var e;return this._status>=5&&((e=this.ws)==null?void 0:e.readyState)===WebSocket.OPEN}},NDKRelayPublisher=class{constructor(e){ct(this,"ndkRelay");ct(this,"debug");this.ndkRelay=e,this.debug=e.debug.extend("publisher")}async publish(e,s=2500){let o;const a=()=>new Promise((_e,j)=>{try{this.publishEvent(e).then(et=>{this.ndkRelay.emit("published",e),e.emit("relay:published",this.ndkRelay),_e(!0)}).catch(j)}catch(et){j(et)}}),c=new Promise((_e,j)=>{o=setTimeout(()=>{o=void 0,j(new Error("Timeout: "+s+"ms"))},s)}),h=()=>{a().then(_e=>g(_e)).catch(_e=>_(_e))};let g,_;const b=_e=>{throw this.ndkRelay.debug("Publish failed",_e,e.id),this.ndkRelay.emit("publish:failed",e,_e),e.emit("relay:publish:failed",this.ndkRelay,_e),_e},$=()=>{o&&clearTimeout(o),this.ndkRelay.removeListener("connect",h)};return this.ndkRelay.status>=5?Promise.race([a(),c]).catch(b).finally($):(this.ndkRelay.status<=1?(console.warn("Relay is disconnected, trying to connect to publish an event",this.ndkRelay.url),this.ndkRelay.connect()):console.warn("Relay not connected, waiting for connection to publish an event",this.ndkRelay.url),Promise.race([new Promise((_e,j)=>{g=_e,_=j,this.ndkRelay.once("connect",h)}),c]).catch(b).finally($))}async publishEvent(e){return this.ndkRelay.connectivity.publish(e.rawEvent())}};function filterFingerprint(e,s){const o=[];for(const c of e){if(c.since||c.until)return;const g=Object.keys(c||{}).sort().join("-");o.push(g)}let a=s?"+":"";return a+=o.join("|"),a}function mergeFilters(e){const s={};return e.forEach(o=>{Object.entries(o).forEach(([a,c])=>{Array.isArray(c)?s[a]===void 0?s[a]=[...c]:s[a]=Array.from(new Set([...s[a],...c])):s[a]=c})}),s}var NDKRelaySubscription=class{constructor(e,s){ct(this,"fingerprint");ct(this,"items",new Map);ct(this,"topSubscriptionManager");ct(this,"debug");ct(this,"status",0);ct(this,"onClose");ct(this,"relay");ct(this,"eosed",!1);ct(this,"itemsToRemoveAfterEose",[]);ct(this,"executionTimer");ct(this,"fireTime");ct(this,"delayType");ct(this,"executeFilters");ct(this,"eventIds",new Set);ct(this,"_subId");ct(this,"subIdParts",new Set);ct(this,"executeOnRelayReady",()=>{this.status===2&&(this.status=1,this.execute())});ct(this,"reExecuteAfterAuth",(()=>{const e=this.subId;this.debug("Re-executing after auth",this.items.size),this.eosed?this.relay.close(this.subId):this.debug("We are abandoning an opened subscription, once it EOSE's, the handler will close it",{oldSubId:e}),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s  %s",e,this.subId)}).bind(this));this.relay=e;const o=Math.random().toString(36).substring(7);this.debug=e.debug.extend("subscription-"+o),this.fingerprint=s||Math.random().toString(36).substring(7)}get subId(){return this._subId?this._subId:(this._subId=this.fingerprint.slice(0,15),this._subId)}addSubIdPart(e){this.subIdParts.add(e)}addItem(e,s){if(!this.items.has(e.internalId))switch(e.on("close",this.removeItem.bind(this,e)),this.items.set(e.internalId,{subscription:e,filters:s}),this.status!==3&&e.subId&&(!this._subId||this._subId.length<48)&&(this.status===0||this.status===1)&&this.addSubIdPart(e.subId),this.status){case 0:this.evaluateExecutionPlan(e);break;case 3:break;case 1:this.evaluateExecutionPlan(e);break;case 4:throw this.debug("Subscription is closed, cannot add new items %o (%o)",e,s),new Error("Cannot add new items to a closed subscription")}}removeItem(e){if(!this.eosed){this.itemsToRemoveAfterEose.push(e.internalId);return}this.items.delete(e.internalId),this.items.size===0&&this.close()}close(){if(this.status===4)return;const e=this.status;if(this.status=4,e===3)try{this.relay.close(this.subId)}catch(s){this.debug("Error closing subscription",s,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:e,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}catchUpSubscription(e,s){this.debug("TODO: catch up subscription",e,s)}evaluateExecutionPlan(e){if(!e.isGroupable()){this.status=1,this.execute();return}const s=e.groupableDelay,o=e.groupableDelayType;if(!s)throw new Error("Cannot group a subscription without a delay");if(this.status===0)this.schedule(s,o);else{const a=this.delayType,c=this.fireTime-Date.now();if(a==="at-least"&&o==="at-least")c<s&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(s,o));else if(a==="at-least"&&o==="at-most")c>s&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(s,o));else if(a==="at-most"&&o==="at-most")c>s&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(s,o));else if(a==="at-most"&&o==="at-least")c>s&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(s,o));else throw new Error("Unknown delay type combination "+a+" "+o)}}schedule(e,s){this.status=1;const o=Date.now();this.fireTime=o+e,this.delayType=s;const a=setTimeout(this.execute.bind(this),e);s==="at-least"&&(this.executionTimer=a)}finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+="-"+Math.random().toString(36).substring(2,7)}execute(){if(this.status===1){if(this.relay.connected)this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth);else{this.status=2,this.relay.once("ready",this.executeOnRelayReady);return}this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(e){var s;(s=this.topSubscriptionManager)==null||s.seenEvent(e.id,this.relay);for(const{subscription:o}of this.items.values())matchFilters(o.filters,e)&&o.eventReceived(e,this.relay,!1)}oneose(e){if(this.eosed=!0,e!==this.subId){this.debug("Received EOSE for an abandoned subscription",e,this.subId),this.relay.close(e);return}for(const{subscription:s}of this.items.values())s.eoseReceived(this.relay),s.closeOnEose&&this.removeItem(s)}onclose(e){this.status=4}onclosed(e){if(e)for(const{subscription:s}of this.items.values())s.closedReceived(this.relay,e)}compileFilters(){const e=[],s=Array.from(this.items.values()).map(a=>a.filters);s[0]||(this.debug(" No filters to merge",this.items),console.trace("No filters to merge"));const o=s[0].length;for(let a=0;a<o;a++){const c=s.map(h=>h[a]);e.push(mergeFilters(c))}return e}},NDKRelaySubscriptionManager=class{constructor(e,s){ct(this,"relay");ct(this,"subscriptions");ct(this,"topSubscriptionManager");ct(this,"debug");this.relay=e,this.subscriptions=new Map,this.debug=e.debug.extend("sub-manager"),this.topSubscriptionManager=s}addSubscription(e,s){let o;if(!e.isGroupable())o=this.createSubscription(e,s);else{const a=filterFingerprint(s,e.closeOnEose);a&&(o=this.subscriptions.get(a)),o??(o=this.createSubscription(e,s,a))}o.addItem(e,s)}createSubscription(e,s,o){const a=new NDKRelaySubscription(this.relay,o);return a.topSubscriptionManager=this.topSubscriptionManager,a.onClose=this.onRelaySubscriptionClose.bind(this),this.subscriptions.set(a.fingerprint,a),a}onRelaySubscriptionClose(e){this.subscriptions.delete(e.fingerprint)}},zt,NDKRelay=(zt=class extends lib$1.EventEmitter{constructor(o,a,c){super();ct(this,"url");ct(this,"scores");ct(this,"connectivity");ct(this,"subs");ct(this,"publisher");ct(this,"authPolicy");ct(this,"lowestValidationRatio");ct(this,"targetValidationRatio");ct(this,"validationRatioFn");ct(this,"validatedEventCount",0);ct(this,"nonValidatedEventCount",0);ct(this,"trusted",!1);ct(this,"complaining",!1);ct(this,"debug");ct(this,"req");ct(this,"close");this.url=normalizeRelayUrl(o),this.scores=new Map,this.debug=debug7(`ndk:relay:${o}`),this.connectivity=new NDKRelayConnectivity(this,c),this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new NDKRelaySubscriptionManager(this,c==null?void 0:c.subManager),this.publisher=new NDKRelayPublisher(this),this.authPolicy=a,this.targetValidationRatio=c==null?void 0:c.initialValidationRatio,this.lowestValidationRatio=c==null?void 0:c.lowestValidationRatio,this.validationRatioFn=((c==null?void 0:c.validationRatioFn)??zt.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),c||console.trace("relay created without ndk")}updateValidationRatio(){setTimeout(()=>{this.updateValidationRatio()},3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(o,a=!0){return this.connectivity.connect(o,a)}disconnect(){this.status!==1&&this.connectivity.disconnect()}subscribe(o,a){this.subs.addSubscription(o,a)}async publish(o,a=2500){return this.publisher.publish(o,a)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return this.nonValidatedEventCount===0?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return this.trusted?!1:this.targetValidationRatio===void 0?!0:this.validationRatio<this.targetValidationRatio}get connected(){return this.connectivity.connected}},ct(zt,"defaultValidationRatioUpdateFn",(o,a,c)=>{if(o.lowestValidationRatio===void 0||o.targetValidationRatio===void 0)return 1;let h=o.validationRatio;if(o.validationRatio>o.targetValidationRatio){const g=a/100;h=Math.max(o.lowestValidationRatio,o.validationRatio-g)}return h<o.validationRatio?h:o.validationRatio}),zt),NDKPublishError=class extends Error{constructor(s,o,a,c){super(s);ct(this,"errors");ct(this,"publishedToRelays");ct(this,"intendedRelaySet");this.errors=o,this.publishedToRelays=a,this.intendedRelaySet=c}get relayErrors(){const s=[];for(const[o,a]of this.errors)s.push(`${o.url}: ${a}`);return s.join(`
`)}},NDKRelaySet=class Gt{constructor(s,o){ct(this,"relays");ct(this,"debug");ct(this,"ndk");this.relays=s,this.ndk=o,this.debug=o.debug.extend("relayset")}addRelay(s){this.relays.add(s)}get relayUrls(){return Array.from(this.relays).map(s=>s.url)}static fromRelayUrls(s,o,a=!0){const c=new Set;for(const h of s){const g=o.pool.relays.get(normalizeRelayUrl(h));if(g)g.status<5&&a&&g.connect(),c.add(g);else{const _=new NDKRelay(normalizeRelayUrl(h),o==null?void 0:o.relayAuthDefaultPolicy,o);o.pool.useTemporaryRelay(_,void 0,"requested from fromRelayUrls "+s),c.add(_)}}return new Gt(new Set(c),o)}async publish(s,o,a=1){const c=new Set,h=new Map,g=s.isEphemeral();s.publishStatus="pending";const _=Array.from(this.relays).map(b=>new Promise($=>{b.publish(s,o).then(_e=>{c.add(b),$()}).catch(_e=>{g||h.set(b,_e),$()})}));if(await Promise.all(_),c.size<a){if(!g){const b=new NDKPublishError("Not enough relays received the event",h,c,this);throw s.publishStatus="error",s.publishError=b,this.ndk.emit("event:publish-failed",s,b,this.relayUrls),b}}else s.emit("published",{relaySet:this,publishedToRelays:c});return c}get size(){return this.relays.size}},d=debug7("ndk:outbox:calculate");async function calculateRelaySetFromEvent(e,s){var g;const o=new Set,a=await getWriteRelaysFor(e,s.pubkey);a&&a.forEach(_=>{var $;const b=($=e.pool)==null?void 0:$.getRelay(_);b&&o.add(b)});let c=s.tags.filter(_=>["a","e"].includes(_[0])).map(_=>_[2]).filter(_=>_&&_.startsWith("wss://")).filter(_=>{try{return new URL(_),!0}catch{return!1}}).map(_=>normalizeRelayUrl(_));c=Array.from(new Set(c)).slice(0,5),c.forEach(_=>{var $;const b=($=e.pool)==null?void 0:$.getRelay(_,!0,!0);b&&(d("Adding relay hint %s",_),o.add(b))});const h=s.getMatchingTags("p").map(_=>_[1]);return h.length<5?Array.from(chooseRelayCombinationForPubkeys(e,h,"read",{preferredRelays:new Set(a)}).keys()).forEach(b=>{var _e;const $=(_e=e.pool)==null?void 0:_e.getRelay(b,!1,!0);$&&(d("Adding p-tagged relay %s",b),o.add($))}):d("Too many p-tags to consider %d",h.length),(g=e.pool)==null||g.permanentAndConnectedRelays().forEach(_=>o.add(_)),new NDKRelaySet(o,e)}function calculateRelaySetsFromFilter(e,s,o){const a=new Map,c=new Set;if(s.forEach(h=>{h.authors&&h.authors.forEach(g=>c.add(g))}),c.size>0){const h=getRelaysForFilterWithAuthors(e,Array.from(c));for(const g of h.keys())a.set(g,[]);for(const g of s)if(g.authors)for(const[_,b]of h.entries()){const $=g.authors.filter(_e=>b.includes(_e));a.set(_,[...a.get(_),{...g,authors:$}])}else for(const _ of h.keys())a.set(_,[...a.get(_),g])}else e.explicitRelayUrls&&e.explicitRelayUrls.forEach(h=>{a.set(h,s)});return a.size===0&&o.permanentAndConnectedRelays().slice(0,5).forEach(h=>{a.set(h.url,s)}),a.size===0&&console.warn("No relays found for filter",s),a}function calculateRelaySetsFromFilters(e,s,o){return calculateRelaySetsFromFilter(e,s,o)}function mergeTags(e,s){const o=new Map,a=g=>g.join(","),c=(g,_)=>g.every((b,$)=>b===_[$]),h=g=>{for(const[_,b]of o)if(c(b,g)||c(g,b)){g.length>=b.length&&o.set(_,g);return}o.set(a(g),g)};return e.concat(s).forEach(h),Array.from(o.values())}async function generateContentTags(e,s=[]){const o=/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,a=new RegExp(`(?<=\\s|^)(#[^\\s!@#$%^&*()=+./,[{\\]};:'"?><]+)`,"g"),c=[],h=g=>{s.find(_=>["q",g[0]].includes(_[0])&&_[1]===g[1])||s.push(g)};return e=e.replace(o,g=>{try{const _=g.split(/(@|nostr:)/)[2],{type:b,data:$}=nip19_exports.decode(_);let _e;switch(b){case"npub":_e=["p",$];break;case"nprofile":_e=["p",$.pubkey];break;case"note":c.push(new Promise(async j=>{h(["e",$,await maybeGetEventRelayUrl(_),"mention"]),j()}));break;case"nevent":c.push(new Promise(async j=>{const{id:et,author:tt}=$;let{relays:nt}=$;(!nt||nt.length===0)&&(nt=[await maybeGetEventRelayUrl(_)]),h(["e",et,nt[0],"mention"]),tt&&h(["p",tt]),j()}));break;case"naddr":c.push(new Promise(async j=>{const et=[$.kind,$.pubkey,$.identifier].join(":");let tt=$.relays??[];tt.length===0&&(tt=[await maybeGetEventRelayUrl(_)]),h(["a",et,tt[0],"mention"]),h(["p",$.pubkey]),j()}));break;default:return g}return _e&&h(_e),`nostr:${_}`}catch{return g}}),await Promise.all(c),e=e.replace(a,(g,_)=>{const b=["t",_.slice(1)];return s.find($=>$[0]===b[0]&&$[1]===b[1])||s.push(b),g}),{content:e,tags:s}}async function maybeGetEventRelayUrl(e){return""}function isReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function isEphemeral(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function isParamReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}var DEFAULT_ENCRYPTION_SCHEME="nip04";async function encrypt(e,s,o=DEFAULT_ENCRYPTION_SCHEME){if(!this.ndk)throw new Error("No NDK instance found!");if(s||(await this.ndk.assertSigner(),s=this.ndk.signer),!e){const a=this.getMatchingTags("p");if(a.length!==1)throw new Error("No recipient could be determined and no explicit recipient was provided");e=this.ndk.getUser({pubkey:a[0][1]})}this.content=await(s==null?void 0:s.encrypt(e,this.content,o))}async function decrypt(e,s,o=DEFAULT_ENCRYPTION_SCHEME){if(!this.ndk)throw new Error("No NDK instance found!");s||(await this.ndk.assertSigner(),s=this.ndk.signer),e||(e=this.author),this.content=await(s==null?void 0:s.decrypt(e,this.content,o))}function encode(e=5){let s=[];return this.onRelays.length>0?s=this.onRelays.map(o=>o.url):this.relay&&(s=[this.relay.url]),s.length>e&&(s=s.slice(0,e)),this.isParamReplaceable()?nip19_exports.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:s}):s.length>0?nip19_exports.neventEncode({id:this.tagId(),relays:s,author:this.pubkey}):nip19_exports.noteEncode(this.tagId())}async function repost(e=!0,s){if(!s&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),s=this.ndk.signer}const o=new NDKEvent(this.ndk,{kind:getKind(this),content:""});return o.tag(this),o.kind===16?o.tags.push(["k",`${this.kind}`]):o.content=JSON.stringify(this.rawEvent()),s&&await o.sign(s),e&&await o.publish(),o}function getKind(e){return e.kind===1?6:16}function eventHasETagMarkers(e){return e.getMatchingTags("e").some(s=>s[3])}function getRootTag(e,s){s??(s=e.tagType());const o=e.tags.find(a=>a[3]==="root");if(!o){if(eventHasETagMarkers(e))return;const a=e.getMatchingTags(s);if(a.length<3)return a[0]}return o}function getReplyTag(e,s){s??(s=e.tagType());let o=e.tags.find(a=>a[3]==="reply");if(o)return o;if(o||(o=e.tags.find(a=>a[3]==="root")),!o){if(eventHasETagMarkers(e))return;const a=e.getMatchingTags(s);if(a.length===1)return a[0];if(a.length===2)return a[1]}}async function fetchTaggedEvent(e,s){if(!this.ndk)throw new Error("NDK instance not found");const o=this.getMatchingTags(e,s);if(o.length===0)return;const[a,c,h]=o[0];return await this.ndk.fetchEvent(c,{},void 0)}async function fetchRootEvent(e){if(!this.ndk)throw new Error("NDK instance not found");const s=getRootTag(this);if(s)return this.ndk.fetchEventFromTag(s,this,e)}async function fetchReplyEvent(e){if(!this.ndk)throw new Error("NDK instance not found");const s=getReplyTag(this);if(s)return this.ndk.fetchEventFromTag(s,this,e)}function serialize(e=!1,s=!1){const o=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return e&&o.push(this.sig),s&&o.push(this.id),JSON.stringify(o)}function deserialize(e){const s=JSON.parse(e),o={pubkey:s[1],created_at:s[2],kind:s[3],tags:s[4],content:s[5]};return s.length===7&&(o.sig=s[6]),s.length===8&&(o.id=s[7]),o}var worker,processingQueue={};function signatureVerificationInit(e){worker=e,worker.onmessage=s=>{const[o,a]=s.data,c=processingQueue[o];if(!c){console.error("No record found for event",o);return}delete processingQueue[o];for(const h of c.resolves)h(a)}}async function verifySignatureAsync(e,s){return new Promise(a=>{const c=e.serialize();let h=!1;processingQueue[e.id]||(processingQueue[e.id]={event:e,resolves:[]},h=!0),processingQueue[e.id].resolves.push(a),h&&worker.postMessage({serialized:c,id:e.id,sig:e.sig,pubkey:e.pubkey})})}var PUBKEY_REGEX=/^[a-f0-9]{64}$/;function validate(){if(typeof this.kind!="number"||typeof this.content!="string"||typeof this.created_at!="number"||typeof this.pubkey!="string"||!this.pubkey.match(PUBKEY_REGEX)||!Array.isArray(this.tags))return!1;for(let e=0;e<this.tags.length;e++){const s=this.tags[e];if(!Array.isArray(s))return!1;for(let o=0;o<s.length;o++)if(typeof s[o]=="object")return!1}return!0}var verifiedSignatures=new dist.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function verifySignature(e){var o;if(typeof this.signatureVerified=="boolean")return this.signatureVerified;const s=verifiedSignatures.get(this.id);if(s!==null)return this.signatureVerified=!!s;try{if((o=this.ndk)!=null&&o.asyncSigVerification)verifySignatureAsync(this,e).then(a=>{e&&(this.signatureVerified=a,a&&verifiedSignatures.set(this.id,this.sig)),a||(this.ndk.emit("event:invalid-sig",this),verifiedSignatures.set(this.id,!1))});else{const a=sha256(new TextEncoder().encode(this.serialize())),c=schnorr.verify(this.sig,a,this.pubkey);return c?verifiedSignatures.set(this.id,this.sig):verifiedSignatures.set(this.id,!1),this.signatureVerified=c}}catch{return this.signatureVerified=!1}}function getEventHash(){return getEventHashFromSerializedEvent(this.serialize())}function getEventHashFromSerializedEvent(e){const s=sha256(new TextEncoder().encode(e));return bytesToHex$1(s)}var skipClientTagOnKinds=[3],NDKEvent=class qt extends lib$1.EventEmitter{constructor(o,a){var c;super();ct(this,"ndk");ct(this,"created_at");ct(this,"content","");ct(this,"tags",[]);ct(this,"kind");ct(this,"id","");ct(this,"sig");ct(this,"pubkey","");ct(this,"signatureVerified");ct(this,"_author");ct(this,"relay");ct(this,"publishStatus","success");ct(this,"publishError");ct(this,"serialize",serialize.bind(this));ct(this,"getEventHash",getEventHash.bind(this));ct(this,"validate",validate.bind(this));ct(this,"verifySignature",verifySignature.bind(this));ct(this,"isReplaceable",isReplaceable.bind(this));ct(this,"isEphemeral",isEphemeral.bind(this));ct(this,"isParamReplaceable",isParamReplaceable.bind(this));ct(this,"encode",encode.bind(this));ct(this,"encrypt",encrypt.bind(this));ct(this,"decrypt",decrypt.bind(this));ct(this,"fetchTaggedEvent",fetchTaggedEvent.bind(this));ct(this,"fetchRootEvent",fetchRootEvent.bind(this));ct(this,"fetchReplyEvent",fetchReplyEvent.bind(this));ct(this,"repost",repost.bind(this));this.ndk=o,this.created_at=a==null?void 0:a.created_at,this.content=(a==null?void 0:a.content)||"",this.tags=(a==null?void 0:a.tags)||[],this.id=(a==null?void 0:a.id)||"",this.sig=a==null?void 0:a.sig,this.pubkey=(a==null?void 0:a.pubkey)||"",this.kind=a==null?void 0:a.kind,a instanceof qt&&(this.relay&&(this.relay=a.relay,(c=this.ndk)==null||c.subManager.seenEvent(a.id,this.relay)),this.publishStatus=a.publishStatus,this.publishError=a.publishError)}get onRelays(){let o=[];return this.ndk?o=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&o.push(this.relay),o}static deserialize(o,a){return new qt(o,deserialize(a))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(o){var a;this.pubkey=o.pubkey,this._author=o,(a=this._author).ndk??(a.ndk=this.ndk)}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const o=this.ndk.getUser({pubkey:this.pubkey});return this._author=o,o}tagExternal(o,a,c){let h=["i"],g=["k"];switch(a){case"url":const _=new URL(o);_.hash="",h.push(_.toString()),g.push(`${_.protocol}//${_.host}`);break;case"hashtag":h.push(`#${o.toLowerCase()}`),g.push("#");break;case"geohash":h.push(`geo:${o.toLowerCase()}`),g.push("geo");break;case"isbn":h.push(`isbn:${o.replace(/-/g,"")}`),g.push("isbn");break;case"podcast:guid":h.push(`podcast:guid:${o}`),g.push("podcast:guid");break;case"podcast:item:guid":h.push(`podcast:item:guid:${o}`),g.push("podcast:item:guid");break;case"podcast:publisher:guid":h.push(`podcast:publisher:guid:${o}`),g.push("podcast:publisher:guid");break;case"isan":h.push(`isan:${o.split("-").slice(0,4).join("-")}`),g.push("isan");break;case"doi":h.push(`doi:${o.toLowerCase()}`),g.push("doi");break;default:throw new Error(`Unsupported NIP-73 entity type: ${a}`)}c&&h.push(c),this.tags.push(h),this.tags.push(g)}tag(o,a,c,h){let g=[];if(o.fetchProfile!==void 0){h??(h="p");const b=[h,o.pubkey];a&&b.push("",a),g.push(b)}else if(o instanceof qt){const b=o;c??(c=(b==null?void 0:b.pubkey)===this.pubkey),g=b.referenceTags(a,c,h);for(const $ of b.getMatchingTags("p"))$[1]!==this.pubkey&&(this.tags.find(_e=>_e[0]==="p"&&_e[1]===$[1])||this.tags.push(["p",$[1]]))}else if(Array.isArray(o))g=[o];else throw new Error("Invalid argument",o);this.tags=mergeTags(this.tags,g)}async toNostrEvent(o){var h,g;if(!o&&this.pubkey===""){const _=await((g=(h=this.ndk)==null?void 0:h.signer)==null?void 0:g.user());this.pubkey=(_==null?void 0:_.pubkey)||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:a,tags:c}=await this.generateTags();this.content=a||"",this.tags=c;try{this.id=this.getEventHash()}catch{}return this.rawEvent()}getMatchingTags(o,a){const c=this.tags.filter(h=>h[0]===o);return a===void 0?c:c.filter(h=>h[3]===a)}hasTag(o,a){return this.tags.some(c=>c[0]===o&&(!a||c[3]===a))}tagValue(o){const a=this.getMatchingTags(o);if(a.length!==0)return a[0][1]}get alt(){return this.tagValue("alt")}set alt(o){this.removeTag("alt"),o&&this.tags.push(["alt",o])}get dTag(){return this.tagValue("d")}set dTag(o){this.removeTag("d"),o&&this.tags.push(["d",o])}removeTag(o){const a=Array.isArray(o)?o:[o];this.tags=this.tags.filter(c=>!a.includes(c[0]))}async sign(o){var c;o?this.author=await o.user():((c=this.ndk)==null||c.assertSigner(),o=this.ndk.signer);const a=await this.toNostrEvent();return this.sig=await o.sign(a),this.sig}async publishReplaceable(o,a,c){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(o,a,c)}async publish(o,a,c){var _,b;if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");o||(o=this.ndk.devWriteRelaySet||await calculateRelaySetFromEvent(this.ndk,this)),this.kind===5&&((_=this.ndk.cacheAdapter)!=null&&_.deleteEvent)&&this.ndk.cacheAdapter.deleteEvent(this);const h=this.rawEvent();if((b=this.ndk.cacheAdapter)!=null&&b.addUnpublishedEvent)try{this.ndk.cacheAdapter.addUnpublishedEvent(this,o.relayUrls)}catch($){console.error("Error adding unpublished event to cache",$)}this.ndk.subManager.subscriptions.forEach($=>{$.filters.some(_e=>matchFilter(_e,h))&&$.eventReceived(this,void 0,!1,!0)});const g=await o.publish(this,a,c);return g.forEach($=>{var _e;return(_e=this.ndk)==null?void 0:_e.subManager.seenEvent(this.id,$)}),g}async generateTags(){var h,g;let o=[];const a=await generateContentTags(this.content,this.tags),c=a.content;if(o=a.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const b=this.tagValue("title");let _e=[...Array(b?6:16)].map(()=>Math.random().toString(36)[2]).join("");b&&b.length>0&&(_e=b.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"-"+_e),o.push(["d",_e])}if(((h=this.ndk)!=null&&h.clientName||(g=this.ndk)!=null&&g.clientNip89)&&skipClientTagOnKinds.includes(this.kind)&&!this.tags.some(_=>_[0]==="client")){const _=["client",this.ndk.clientName??""];this.ndk.clientNip89&&_.push(this.ndk.clientNip89),o.push(_)}return{content:c||"",tags:o}}muted(){var h,g;const o=(h=this.ndk)==null?void 0:h.mutedIds.get(this.pubkey);if(o&&o==="p")return"author";const a=this.tagReference(),c=(g=this.ndk)==null?void 0:g.mutedIds.get(a[1]);return c&&c===a[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const o=this.getMatchingTags("d")[0];return o?o[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return this.kind===0||this.kind===3||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const o=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${o}`}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(o){let a;return this.isParamReplaceable()?a=["a",this.tagAddress()]:a=["e",this.tagId()],this.relay?a.push(this.relay.url):a.push(""),o&&a.push(o),a}referenceTags(o,a,c){var g;let h=[];return this.isParamReplaceable()?h=[[c??"a",this.tagAddress()],[c??"e",this.id]]:h=[[c??"e",this.id]],(g=this.relay)!=null&&g.url?h=h.map(_=>{var b;return _.push((b=this.relay)==null?void 0:b.url),_}):o&&(h=h.map(_=>(_.push(""),_))),o&&h.forEach(_=>_.push(o)),h=[...h,...this.getMatchingTags("h")],a||h.push(...this.author.referenceTags()),h}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async delete(o,a=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const c=new qt(this.ndk,{kind:5,content:o||""});return c.tag(this,void 0,!0),c.tags.push(["k",this.kind.toString()]),a&&await c.publish(),c}async react(o,a=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const c=new qt(this.ndk,{kind:7,content:o});return c.tag(this),a?await c.publish():await c.sign(),c}get isValid(){return this.validate()}};function queryFullyFilled(e){return!!(filterIncludesIds(e.filter)&&resultHasAllRequestedIds(e))}function filterIncludesIds(e){return!!e.ids}function resultHasAllRequestedIds(e){const s=e.filter.ids;return!!s&&s.length===e.eventFirstSeen.size}function filterFromId(e){let s;if(e.match(NIP33_A_REGEX)){const[o,a,c]=e.split(":"),h={authors:[a],kinds:[parseInt(o)]};return c&&(h["#d"]=[c]),h}if(e.match(BECH32_REGEX))try{switch(s=nip19_exports.decode(e),s.type){case"nevent":{const a={ids:[s.data.id]};return s.data.author&&(a.authors=[s.data.author]),s.data.kind&&(a.kinds=[s.data.kind]),a}case"note":return{ids:[s.data]};case"naddr":const o={authors:[s.data.pubkey],kinds:[s.data.kind]};return s.data.identifier&&(o["#d"]=[s.data.identifier]),o}}catch(o){console.error("Error decoding",e,o)}return{ids:[e]}}function isNip33AValue(e){return e.match(NIP33_A_REGEX)!==null}var NIP33_A_REGEX=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,BECH32_REGEX=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;function relaysFromBech32(e,s){try{const o=nip19_exports.decode(e);if(["naddr","nevent"].includes(o==null?void 0:o.type)){const a=o.data;if(a!=null&&a.relays)return a.relays.map(c=>new NDKRelay(c,s==null?void 0:s.relayAuthDefaultPolicy,s))}}catch{}return[]}var defaultOpts={closeOnEose:!1,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100,groupableDelayType:"at-most"},NDKSubscription=class extends lib$1.EventEmitter{constructor(s,o,a,c,h){super();ct(this,"subId");ct(this,"filters");ct(this,"opts");ct(this,"pool");ct(this,"skipVerification",!1);ct(this,"skipValidation",!1);ct(this,"relayFilters");ct(this,"relaySet");ct(this,"ndk");ct(this,"debug");ct(this,"eventFirstSeen",new Map);ct(this,"eosesSeen",new Set);ct(this,"lastEventReceivedAt");ct(this,"internalId");ct(this,"closeOnEose");ct(this,"poolMonitor");ct(this,"eoseTimeout");ct(this,"eosed",!1);if(this.ndk=s,this.pool=(a==null?void 0:a.pool)||s.pool,this.opts={...defaultOpts,...a||{}},this.filters=o instanceof Array?o:[o],this.subId=h||(a==null?void 0:a.subId),this.internalId=Math.random().toString(36).substring(7),this.relaySet=c,this.debug=s.debug.extend(`subscription[${(a==null?void 0:a.subId)??this.internalId}]`),this.skipVerification=(a==null?void 0:a.skipVerification)||!1,this.skipValidation=(a==null?void 0:a.skipValidation)||!1,this.closeOnEose=(a==null?void 0:a.closeOnEose)||!1,this.opts.cacheUsage==="ONLY_CACHE"&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}relaysMissingEose(){return this.relayFilters?Array.from(this.relayFilters.keys()).filter(o=>!this.eosesSeen.has(this.pool.getRelay(o,!1,!1))):[]}get filter(){return this.filters[0]}get groupableDelay(){var s;if(this.isGroupable())return(s=this.opts)==null?void 0:s.groupableDelay}get groupableDelayType(){var s;return((s=this.opts)==null?void 0:s.groupableDelayType)||"at-most"}isGroupable(){var s;return((s=this.opts)==null?void 0:s.groupable)||!1}shouldQueryCache(){var s;return((s=this.opts)==null?void 0:s.cacheUsage)!=="ONLY_RELAY"}shouldQueryRelays(){var s;return((s=this.opts)==null?void 0:s.cacheUsage)!=="ONLY_CACHE"}shouldWaitForCache(){var s;return this.opts.closeOnEose&&!!((s=this.ndk.cacheAdapter)!=null&&s.locking)&&this.opts.cacheUsage!=="PARALLEL"}async start(){let s;if(this.shouldQueryCache()&&(s=this.startWithCache(),this.shouldWaitForCache()&&(await s,queryFullyFilled(this)))){this.emit("eose",this);return}this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)}startPoolMonitor(){this.debug.extend("pool-monitor"),this.poolMonitor=s=>{var a,c;if((a=this.relayFilters)!=null&&a.has(s.url))return;calculateRelaySetsFromFilters(this.ndk,this.filters,this.pool).get(s.url)&&((c=this.relayFilters)==null||c.set(s.url,this.filters),s.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}stop(){this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),this.removeAllListeners()}hasAuthorsFilter(){return this.filters.some(s=>{var o;return(o=s.authors)==null?void 0:o.length})}async startWithCache(){var s;if((s=this.ndk.cacheAdapter)!=null&&s.query){const o=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await o}}startWithRelays(){if(!this.relaySet||this.relaySet.relays.size===0)this.relayFilters=calculateRelaySetsFromFilters(this.ndk,this.filters,this.pool);else{this.relayFilters=new Map;for(const s of this.relaySet.relays)this.relayFilters.set(s.url,this.filters)}if(!(!this.relayFilters||this.relayFilters.size===0))for(const[s,o]of this.relayFilters)this.pool.getRelay(s,!0,!0,o).subscribe(this,o)}eventReceived(s,o,a=!1,c=!1){const h=s.id,g=this.eventFirstSeen.has(h);let _;if(s instanceof NDKEvent&&(_=s),g){const b=Date.now()-(this.eventFirstSeen.get(h)||0);if(this.emit("event:dup",h,o,b,this),o){const $=verifiedSignatures.get(h);$&&typeof $=="string"&&s.sig===$&&o.addValidatedEvent()}}else{if(_??(_=new NDKEvent(this.ndk,s)),_.ndk=this.ndk,_.relay=o,!a&&!c){if(!this.skipValidation&&!_.isValid){this.debug("Event failed validation %s from relay %s",h,o==null?void 0:o.url);return}if(o)if((o==null?void 0:o.shouldValidateEvent())!==!1){if(!this.skipVerification)if(!_.verifySignature(!0)&&!this.ndk.asyncSigVerification){this.debug("Event failed signature validation",s);return}else o&&o.addValidatedEvent()}else o.addNonValidatedEvent();this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(_,this.filters,o)}!a&&o&&this.ndk.emit("event",_,o),this.emit("event",_,o,this),this.eventFirstSeen.set(h,Date.now())}this.lastEventReceivedAt=Date.now()}closedReceived(s,o){this.emit("closed",s,o)}eoseReceived(s){var g;this.debug("EOSE received from %s",s.url),this.eosesSeen.add(s);let o=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const a=this.eosesSeen.size===((g=this.relayFilters)==null?void 0:g.size),c=queryFullyFilled(this),h=_=>{var b;this.debug("Performing EOSE: %s %d",_,this.eosed),!this.eosed&&(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.emit("eose",this),this.eosed=!0,(b=this.opts)!=null&&b.closeOnEose&&this.stop())};if(c||a)h("query filled or seen all");else if(this.relayFilters){let _=1e3;const b=new Set(this.pool.connectedRelays().map(j=>j.url)),$=Array.from(this.relayFilters.keys()).filter(j=>b.has(j));if($.length===0)return;const _e=this.eosesSeen.size/$.length;if(this.eosesSeen.size>=2&&_e>=.5){if(_=_*(1-_e),_===0){h("tiem to wait was 0");return}this.eoseTimeout&&clearTimeout(this.eoseTimeout);const j=()=>{o=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,o!==void 0&&o<20?this.eoseTimeout=setTimeout(j,_):h("send eose timeout: "+_)};this.eoseTimeout=setTimeout(j,_)}}}};async function follows(e,s,o=3){var c,h;if(!this.ndk)throw new Error("NDK not set");const a=await this.ndk.fetchEvent({kinds:[o],authors:[this.pubkey]},e||{groupable:!1});if(a){const g=new Set;return a.tags.forEach(_=>{_[0]==="p"&&g.add(_[1])}),s&&((h=(c=this.ndk)==null?void 0:c.outboxTracker)==null||h.trackUsers(Array.from(g))),[...g].reduce((_,b)=>{const $=new NDKUser({pubkey:b});return $.ndk=this.ndk,_.add($),_},new Set)}return new Set}function profileFromEvent(e){const s={};let o;try{o=JSON.parse(e.content)}catch(a){throw new Error(`Failed to parse profile event: ${a}`)}return s.created_at=e.created_at,s.profileEvent=JSON.stringify(e.rawEvent()),Object.keys(o).forEach(a=>{switch(a){case"name":s.name=o.name;break;case"display_name":s.displayName=o.display_name;break;case"image":case"picture":s.image=o.picture||o.image;break;case"banner":s.banner=o.banner;break;case"bio":s.bio=o.bio;break;case"nip05":s.nip05=o.nip05;break;case"lud06":s.lud06=o.lud06;break;case"lud16":s.lud16=o.lud16;break;case"about":s.about=o.about;break;case"zapService":s.zapService=o.zapService;break;case"website":s.website=o.website;break;default:s[a]=o[a];break}}),s}function serializeProfile(e){const s={};for(const[o,a]of Object.entries(e))switch(o){case"username":case"name":s.name=a;break;case"displayName":s.display_name=a;break;case"image":case"picture":s.picture=a;break;case"bio":case"about":s.about=a;break;default:s[o]=a;break}return JSON.stringify(s)}var NIP05_REGEX=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function getNip05For(e,s,o=fetch,a={}){return await e.queuesNip05.add({id:s,func:async()=>{if(e.cacheAdapter&&e.cacheAdapter.loadNip05){const b=await e.cacheAdapter.loadNip05(s);if(b!=="missing"){if(b){const $=new NDKUser({pubkey:b.pubkey,relayUrls:b.relays,nip46Urls:b.nip46});return $.ndk=e,$}else if(a.cache!=="no-cache")return null}}const c=s.match(NIP05_REGEX);if(!c)return null;const[h,g="_",_]=c;try{const b=await o(`https://${_}/.well-known/nostr.json?name=${g}`,a),{names:$,relays:_e,nip46:j}=parseNIP05Result(await b.json()),et=$[g.toLowerCase()];let tt=null;return et&&(tt={pubkey:et,relays:_e==null?void 0:_e[et],nip46:j==null?void 0:j[et]}),e!=null&&e.cacheAdapter&&e.cacheAdapter.saveNip05&&e.cacheAdapter.saveNip05(s,tt),tt}catch(b){return e!=null&&e.cacheAdapter&&e.cacheAdapter.saveNip05&&(e==null||e.cacheAdapter.saveNip05(s,null)),console.error("Failed to fetch NIP05 for",s,b),null}}})}function parseNIP05Result(e){const s={names:{}};for(const[o,a]of Object.entries(e.names))typeof o=="string"&&typeof a=="string"&&(s.names[o.toLowerCase()]=a);if(e.relays){s.relays={};for(const[o,a]of Object.entries(e.relays))typeof o=="string"&&Array.isArray(a)&&(s.relays[o]=a.filter(c=>typeof c=="string"))}if(e.nip46){s.nip46={};for(const[o,a]of Object.entries(e.nip46))typeof o=="string"&&Array.isArray(a)&&(s.nip46[o]=a.filter(c=>typeof c=="string"))}return s}var Ft,NDKCashuMintList=(Ft=class extends NDKEvent{constructor(o,a){super(o,a);ct(this,"_p2pk");this.kind??(this.kind=10019)}static from(o){return new Ft(o.ndk,o)}set relays(o){this.tags=this.tags.filter(a=>a[0]!=="relay");for(const a of o)this.tags.push(["relay",a])}get relays(){const o=[];for(const a of this.tags)a[0]==="relay"&&o.push(a[1]);return o}set mints(o){this.tags=this.tags.filter(a=>a[0]!=="mint");for(const a of o)this.tags.push(["mint",a])}get mints(){const o=[];for(const a of this.tags)a[0]==="mint"&&o.push(a[1]);return Array.from(new Set(o))}get p2pk(){return this._p2pk?this._p2pk:(this._p2pk=this.tagValue("pubkey")??this.pubkey,this._p2pk)}set p2pk(o){this._p2pk=o,this.removeTag("pubkey"),o&&this.tags.push(["pubkey",o])}get relaySet(){return NDKRelaySet.fromRelayUrls(this.relays,this.ndk)}},ct(Ft,"kind",10019),ct(Ft,"kinds",[10019]),Ft),d2=debug7("ndk:zapper:ln");async function getNip57ZapSpecFromLud({lud06:e,lud16:s},o){let a;if(s&&!s.startsWith("LNURL")){const[c,h]=s.split("@");a=`https://${h}/.well-known/lnurlp/${c}`}else if(e){const{words:c}=bech32.decode(e,1e3),h=bech32.fromWords(c);a=new TextDecoder("utf-8").decode(h)}if(!a)throw d2("No zap endpoint found %o",{lud06:e,lud16:s}),new Error("No zap endpoint found");try{const h=await(o.httpFetch||fetch)(a);if(h.status!==200){const g=await h.text();throw new Error(`Unable to fetch zap endpoint ${a}: ${g}`)}return await h.json()}catch(c){throw new Error(`Unable to fetch zap endpoint ${a}: ${c}`)}}var NDKUser=class Wt{constructor(s){ct(this,"ndk");ct(this,"profile");ct(this,"_npub");ct(this,"_pubkey");ct(this,"relayUrls",[]);ct(this,"nip46Urls",[]);ct(this,"follows",follows.bind(this));s.npub&&(this._npub=s.npub),s.hexpubkey&&(this._pubkey=s.hexpubkey),s.pubkey&&(this._pubkey=s.pubkey),s.relayUrls&&(this.relayUrls=s.relayUrls),s.nip46Urls&&(this.nip46Urls=s.nip46Urls)}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=nip19_exports.npubEncode(this.pubkey)}return this._npub}set npub(s){this._npub=s}get hexpubkey(){return this.pubkey}set hexpubkey(s){this._pubkey=s}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=nip19_exports.decode(this.npub).data}return this._pubkey}set pubkey(s){this._pubkey=s}async getZapInfo(s=!0,o=["nip61","nip57"]){if(!this.ndk)throw new Error("No NDK instance found");const a=[];if(o.includes("nip61")&&a.push(10019),o.includes("nip57")&&a.push(0),a.length===0)return[];let c=await this.ndk.fetchEvents({kinds:a,authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",groupable:!1});c.size<o.length&&(c=await this.ndk.fetchEvents({kinds:a,authors:[this.pubkey]},{cacheUsage:"ONLY_RELAY"}));const h=[],g=Array.from(c).find(b=>b.kind===10019),_=Array.from(c).find(b=>b.kind===0);if(g){const b=NDKCashuMintList.from(g);if(b.mints.length>0&&h.push({type:"nip61",data:{mints:b.mints,relays:b.relays,p2pk:b.p2pk}}),!s)return h}if(_){const b=profileFromEvent(_),{lud06:$,lud16:_e}=b;try{const j=await getNip57ZapSpecFromLud({lud06:$,lud16:_e},this.ndk);j&&h.push({type:"nip57",data:j})}catch(j){console.error("Error getting NIP-57 zap spec",j)}}return h}async getZapConfiguration(s){if(s??(s=this.ndk),!s)throw new Error("No NDK instance found");const o=async()=>{var c,h,g,_;if((h=(c=this.ndk)==null?void 0:c.cacheAdapter)!=null&&h.loadUsersLNURLDoc){const b=await this.ndk.cacheAdapter.loadUsersLNURLDoc(this.pubkey);if(b!=="missing"){if(b===null)return;if(b)return b}}let a;try{if(await this.fetchProfile({groupable:!1}),this.profile){const{lud06:b,lud16:$}=this.profile;a=await getNip57ZapSpecFromLud({lud06:b,lud16:$},s)}}catch{}if((_=(g=this.ndk)==null?void 0:g.cacheAdapter)!=null&&_.saveUsersLNURLDoc&&this.ndk.cacheAdapter.saveUsersLNURLDoc(this.pubkey,a||null),!!a)return a};return await s.queuesZapConfig.add({id:this.pubkey,func:o})}async getZapperPubkey(){const s=await this.getZapConfiguration();return s==null?void 0:s.nostrPubkey}static async fromNip05(s,o,a=!1){if(!o)throw new Error("No NDK instance found");const c={};a&&(c.cache="no-cache");const h=await getNip05For(o,s,o==null?void 0:o.httpFetch,c);if(h){const g=new Wt({pubkey:h.pubkey,relayUrls:h.relays,nip46Urls:h.nip46});return g.ndk=o,g}}async fetchProfile(s,o=!1){if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});let a=null;if(this.ndk.cacheAdapter&&this.ndk.cacheAdapter.fetchProfile&&(s==null?void 0:s.cacheUsage)!=="ONLY_RELAY"){const g=await this.ndk.cacheAdapter.fetchProfile(this.pubkey);if(g)return this.profile=g,g}!s&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.locking&&(a=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",closeOnEose:!0,groupable:!1}),s={cacheUsage:"ONLY_RELAY",closeOnEose:!0,groupable:!0,groupableDelay:250}),(!a||a.size===0)&&(a=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},s));const c=Array.from(a).sort((g,_)=>g.created_at-_.created_at);if(c.length===0)return null;const h=c[0];return this.profile=profileFromEvent(h),o&&(this.profile.profileEvent=JSON.stringify(h)),this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile}tagReference(){return["p",this.pubkey]}referenceTags(s){const o=[["p",this.pubkey]];return s&&o[0].push("",s),o}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner(),await new NDKEvent(this.ndk,{kind:0,content:serializeProfile(this.profile)}).publish()}async follow(s,o,a=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),o||(o=await this.follows(void 0,void 0,a)),o.has(s))return!1;o.add(s);const c=new NDKEvent(this.ndk,{kind:a});for(const h of o)c.tag(h);return await c.publish(),!0}async unfollow(s,o,a=3){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),o||(o=await this.follows(void 0,void 0,a));const c=new Set;let h=!1;for(const _ of o)_.pubkey!==s.pubkey?c.add(_):h=!0;if(!h)return!1;const g=new NDKEvent(this.ndk,{kind:a});for(const _ of c)g.tag(_);return await g.publish()}async validateNip05(s){if(!this.ndk)throw new Error("No NDK instance found");const o=await getNip05For(this.ndk,s);return o===null?null:o.pubkey===this.pubkey}async zap(s,o,a,c){return new Promise((h,g)=>{var $;if(!this.ndk){g("No NDK instance found");return}let _=($=this.ndk.walletConfig)==null?void 0:$.onLnPay;_??(_=async({pr:_e})=>{h(_e)}),this.ndk.zap(this,s,{comment:o,tags:a,signer:c,onLnPay:_}).zap().then(h).catch(g)})}},NDKList=class Zt extends NDKEvent{constructor(o,a){super(o,a);ct(this,"_encryptedTags");ct(this,"encryptedTagsLength");this.kind??(this.kind=30001)}static from(o){return new Zt(o.ndk,o)}get title(){const o=this.tagValue("title")||this.tagValue("name");return o||(this.kind===3?"Contacts":this.kind===1e4?"Mute":this.kind===10001?"Pinned Notes":this.kind===10002?"Relay Metadata":this.kind===10003?"Bookmarks":this.kind===10004?"Communities":this.kind===10005?"Public Chats":this.kind===10006?"Blocked Relays":this.kind===10007?"Search Relays":this.kind===10050?"Direct Message Receive Relays":this.kind===10015?"Interests":this.kind===10030?"Emojis":this.tagValue("d"))}set title(o){this.removeTag(["title","name"]),o&&this.tags.push(["title",o])}get name(){return this.title}set name(o){this.title=o}get description(){return this.tagValue("description")}set description(o){this.removeTag("description"),o&&this.tags.push(["description",o])}get image(){return this.tagValue("image")}set image(o){this.removeTag("image"),o&&this.tags.push(["image",o])}isEncryptedTagsCacheValid(){return!!(this._encryptedTags&&this.encryptedTagsLength===this.content.length)}async encryptedTags(o=!0){if(o&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const a=await this.ndk.signer.user();try{if(this.content.length>0)try{const c=await this.ndk.signer.decrypt(a,this.content),h=JSON.parse(c);return h&&h[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=h):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch{console.log(`error decrypting ${this.content}`)}}catch{}return[]}validateTag(o){return!0}getItems(o){return this.tags.filter(a=>a[0]===o)}get items(){return this.tags.filter(o=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(o[0]))}async addItem(o,a=void 0,c=!1,h="bottom"){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let g;if(o instanceof NDKEvent)g=[o.tagReference(a)];else if(o instanceof NDKUser)g=o.referenceTags();else if(o instanceof NDKRelay)g=o.referenceTags();else if(Array.isArray(o))g=[o];else throw new Error("Invalid object type");if(a&&g[0].push(a),c){const _=await this.ndk.signer.user(),b=await this.encryptedTags();h==="top"?b.unshift(...g):b.push(...g),this._encryptedTags=b,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(b),await this.encrypt(_)}else h==="top"?this.tags.unshift(...g):this.tags.push(...g);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(o,a=!0){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const c=this.tags.findIndex(b=>b[1]===o);c>=0&&this.tags.splice(c,1);const h=await this.ndk.signer.user(),g=await this.encryptedTags(),_=g.findIndex(b=>b[1]===o);if(_>=0&&(g.splice(_,1),this._encryptedTags=g,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(g),await this.encrypt(h)),a)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(o,a){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(a){const c=await this.ndk.signer.user(),h=await this.encryptedTags();h.splice(o,1),this._encryptedTags=h,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(h),await this.encrypt(c)}else this.tags.splice(o,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(o){return this.items.some(a=>a[1]===o)}filterForItems(){const o=new Set,a=new Map,c=[];for(const h of this.items)if(h[0]==="e"&&h[1])o.add(h[1]);else if(h[0]==="a"&&h[1]){const[g,_,b]=h[1].split(":");if(!g||!_)continue;const $=`${g}:${_}`,_e=a.get($)||[];_e.push(b||""),a.set($,_e)}if(o.size>0&&c.push({ids:Array.from(o)}),a.size>0)for(const[h,g]of a.entries()){const[_,b]=h.split(":");c.push({kinds:[parseInt(_)],authors:[b],"#d":g})}return c}},lists_default=NDKList,READ_MARKER="read",WRITE_MARKER="write",NDKRelayList=class Yt extends NDKEvent{constructor(s,o){super(s,o),this.kind??(this.kind=10002)}static from(s){return new Yt(s.ndk,s.rawEvent())}get readRelayUrls(){return this.tags.filter(s=>s[0]==="r"||s[0]==="relay").filter(s=>!s[2]||s[2]&&s[2]===READ_MARKER).map(s=>tryNormalizeRelayUrl(s[1])).filter(s=>!!s)}set readRelayUrls(s){for(const o of s)this.tags.push(["r",o,READ_MARKER])}get writeRelayUrls(){return this.tags.filter(s=>s[0]==="r"||s[0]==="relay").filter(s=>!s[2]||s[2]&&s[2]===WRITE_MARKER).map(s=>tryNormalizeRelayUrl(s[1])).filter(s=>!!s)}set writeRelayUrls(s){for(const o of s)this.tags.push(["r",o,WRITE_MARKER])}get bothRelayUrls(){return this.tags.filter(s=>s[0]==="r"||s[0]==="relay").filter(s=>!s[2]).map(s=>s[1])}set bothRelayUrls(s){for(const o of s)this.tags.push(["r",o])}get relays(){return this.tags.filter(s=>s[0]==="r"||s[0]==="relay").map(s=>s[1])}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new NDKRelaySet(new Set(this.relays.map(s=>this.ndk.pool.getRelay(s))),this.ndk)}};function relayListFromKind3(e,s){try{const o=JSON.parse(s.content),a=new NDKRelayList(e),c=new Set,h=new Set;for(let[g,_]of Object.entries(o)){try{g=normalizeRelayUrl(g)}catch{continue}if(!_)c.add(g),h.add(g);else{const b=_;b.write&&h.add(g),b.read&&c.add(g)}}return a.readRelayUrls=Array.from(c),a.writeRelayUrls=Array.from(h),a}catch{}}var Ht,NDKNutzap=(Ht=class extends NDKEvent{constructor(o,a){super(o,a);ct(this,"debug");ct(this,"_proofs",[]);ct(this,"sender",this.author);this.kind??(this.kind=9321),this.debug=(o==null?void 0:o.debug.extend("nutzap"))??debug7("ndk:nutzap"),this.alt||(this.alt="This is a nutzap")}static from(o){const a=new this(o.ndk,o);try{const c=a.getMatchingTags("proof");c.length?a._proofs=c.map(h=>JSON.parse(h[1])):a._proofs=JSON.parse(a.content)}catch{return}if(!(!a._proofs||!a._proofs.length))return a}set comment(o){this.content=o??""}get comment(){const o=this.tagValue("comment");return o||this.content}set proofs(o){this._proofs=o,this.tags=this.tags.filter(a=>a[0]!=="proof");for(const a of o)this.tags.push(["proof",JSON.stringify(a)]);this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()])}get proofs(){return this._proofs}get p2pk(){var a;const o=this.proofs[0];try{const c=JSON.parse(o.secret);let h={};if(typeof c=="string"?(h=JSON.parse(c),this.debug("stringified payload",o.secret)):typeof c=="object"&&(h=c),h[0]==="P2PK"&&((a=h[1])==null?void 0:a.data)){const b=h[1].data.slice(2,-1);if(b)return b}}catch(c){this.debug("error parsing p2pk pubkey",c,this.proofs[0])}}get mint(){return this.tagValue("u")}set mint(o){this.removeTag("u"),this.tag(["u",o])}get unit(){return this.tagValue("unit")??"msat"}set unit(o){this.removeTag("unit"),o&&this.tag(["unit",o])}get amount(){return this.proofs.reduce((a,c)=>a+c.amount,0)*1e3}set target(o){this.tags=this.tags.filter(a=>a[0]!=="p"),o instanceof NDKEvent&&this.tags.push()}set recipientPubkey(o){this.removeTag("p"),this.tag(["p",o])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const o=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:o}):new NDKUser({pubkey:o})}get isValid(){let o=0,a=0;for(const c of this.tags)c[0]==="p"&&o++,c[0]==="u"&&a++;return o===1&&a===1&&this.proofs.length>0}},ct(Ht,"kind",9321),ct(Ht,"kinds",[Ht.kind]),Ht);async function payInvoice(e){return await this.sendReq("pay_invoice",{invoice:e})}var NDKPrivateKeySigner=class Qt{constructor(s){ct(this,"_user");ct(this,"_privateKey");if(s){if(typeof s=="string")if(s.startsWith("nsec1")){const{type:o,data:a}=nip19_exports.decode(s);o==="nsec"&&(this._privateKey=a)}else if(s.length===64)this._privateKey=hexToBytes$1(s);else throw new Error("Invalid private key provided.");else this._privateKey=s;this._privateKey&&(this._user=new NDKUser({pubkey:getPublicKey(this._privateKey)}))}}get privateKey(){if(this._privateKey)return bytesToHex$1(this._privateKey)}static generate(){const s=generateSecretKey();return new Qt(s)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(s){if(!this._privateKey)throw Error("Attempted to sign without a private key");return finalizeEvent(s,this._privateKey).sig}getConversationKey(s){if(!this._privateKey)throw Error("Attempted to get conversation key without a private key");const o=s.pubkey;return nip44_exports.getConversationKey(this._privateKey,o)}async nip44Encrypt(s,o){const a=this.getConversationKey(s);return await nip44_exports.encrypt(o,a)}async nip44Decrypt(s,o){const a=this.getConversationKey(s);return await nip44_exports.decrypt(o,a)}async encrypt(s,o,a=DEFAULT_ENCRYPTION_SCHEME){return a==="nip44"?this.nip44Encrypt(s,o):this.nip04Encrypt(s,o)}async decrypt(s,o,a=DEFAULT_ENCRYPTION_SCHEME){return a==="nip44"?this.nip44Decrypt(s,o):this.nip04Decrypt(s,o)}async nip04Encrypt(s,o){if(!this._privateKey)throw Error("Attempted to encrypt without a private key");const a=s.pubkey;return await nip04_exports.encrypt(this._privateKey,a,o)}async nip04Decrypt(s,o){if(!this._privateKey)throw Error("Attempted to decrypt without a private key");const a=s.pubkey;return await nip04_exports.decrypt(this._privateKey,a,o)}};async function sendReq(e,s){const o=new NDKEvent(this.ndk,{kind:23194,tags:[["p",this.walletService.pubkey]],content:JSON.stringify({method:e,params:s})});return this.debug("Sending request",o.content),await o.encrypt(this.walletService,this.signer),await o.sign(this.signer),this.debug("Request encrypted and signed"),new Promise(async(a,c)=>{try{const h=o.tagId();if(!h)throw new Error("Failed to get e-tag");const g=b=>{this.off(h,g),this.off("event",g),this.debug("Received response",b);try{const $=JSON.parse(b);$.error&&c($),a($)}catch($){this.debug("Failed to parse response",$),c({result_type:"error",error:{code:"failed_to_parse_response",message:$.message}})}},_=this.ndk.subscribe({kinds:[23195],"#e":[h],limit:1},{groupable:!1,subId:`nwc-${e}`},this.relaySet);_.on("event",async b=>{await b.decrypt(b.author,this.signer),g(b.content),_.stop()}),this.once(h,g),this.once("event",g),this.debug("Sending request to relay",o.rawEvent()),await o.publish(this.relaySet)}catch(h){this.debug("Failed to send request",h,h.relayErrors),c({result_type:"error",error:{code:"failed_to_send_request",message:h.message}})}})}async function getBalance(){return await this.sendReq("get_balance",{})}async function getInfo(){return await this.sendReq("get_info",{})}var NDKNwc=class Xt extends lib$1.EventEmitter{constructor({ndk:o,pubkey:a,relayUrls:c,secret:h}){super();ct(this,"ndk");ct(this,"debug");ct(this,"walletService");ct(this,"relaySet");ct(this,"signer");ct(this,"active",!1);ct(this,"getBalance",getBalance.bind(this));this.ndk=o,this.walletService=o.getUser({pubkey:a}),this.relaySet=new NDKRelaySet(new Set(c.map(g=>o.pool.getRelay(g))),o),this.signer=new NDKPrivateKeySigner(h instanceof Uint8Array?h:hexToBytes$1(h)),this.debug=o.debug.extend("nwc"),this.debug(`Starting with wallet service ${this.walletService.npub}`)}static async fromURI(o,a){const c=new URL(a);if(c.protocol!=="nostr+walletconnect:")throw new Error("Invalid protocol");return new Xt({ndk:o,pubkey:c.host??c.pathname,relayUrls:c.searchParams.getAll("relay")??[""],secret:c.searchParams.get("secret")??""})}async blockUntilReady(o){const a=await this.signer.user(),c=new Promise((_,b)=>{setTimeout(()=>{b(new Error("Timeout"))},o)}),g=[new Promise(_=>{const b=this.ndk.subscribe({kinds:[23195],"#p":[a.pubkey],limit:1},{groupable:!1,subId:"nwc"},this.relaySet);b.on("event",async $=>{this.debug("received response",$.rawEvent());const _e=$.tagValue("e");if(!_e){this.debug("Received an event without an e-tag");return}this.debug("received an event",_e);try{await $.decrypt($.author,this.signer),this.emit(_e,$.content)}catch(j){this.debug("Failed to decrypt event",j);return}}),b.on("eose",()=>{this.debug("Subscription ready"),this.active=!0,_()}),b.on("close",()=>{this.debug("Subscription closed"),this.active=!1})})];return o&&g.push(c),await Promise.race(g)}async sendReq(o,a){return await sendReq.call(this,o,a)}async payInvoice(o){return await payInvoice.call(this,o)}async getInfo(){return await getInfo.call(this)}};function dedup(e,s){return e.created_at>s.created_at?e:s}async function getRelayListForUser(e,s){return(await getRelayListForUsers([e],s)).get(e)}async function getRelayListForUsers(e,s,o=!1){var _e;const a=s.outboxPool||s.pool,c=new Set;for(const j of a.relays.values())c.add(j);const h=new Map,g=new Map,_=new NDKRelaySet(c,s);if((_e=s.cacheAdapter)!=null&&_e.locking&&!o){const j=await s.fetchEvents({kinds:[3,10002],authors:e},{cacheUsage:"ONLY_CACHE"});for(const et of j)et.kind===10002&&h.set(et.pubkey,NDKRelayList.from(et));for(const et of j)if(et.kind===3){if(h.has(et.pubkey))continue;const tt=relayListFromKind3(s,et);tt&&g.set(et.pubkey,tt)}e=e.filter(et=>!h.has(et)&&!g.has(et))}if(e.length===0)return h;const b=new Map,$=new Map;return new Promise(async j=>{const et=s.subscribe({kinds:[3,10002],authors:e},{closeOnEose:!0,pool:a,groupable:!0,cacheUsage:"ONLY_RELAY",subId:"ndk-relay-list-fetch"},_,!1);et.on("event",tt=>{if(tt.kind===10002){const nt=b.get(tt.pubkey);if(nt&&nt.created_at>tt.created_at)return;b.set(tt.pubkey,tt)}else if(tt.kind===3){const nt=$.get(tt.pubkey);if(nt&&nt.created_at>tt.created_at)return;$.set(tt.pubkey,tt)}}),et.on("eose",()=>{for(const tt of b.values())h.set(tt.pubkey,NDKRelayList.from(tt));for(const tt of e){if(h.has(tt))continue;const nt=$.get(tt);if(!nt)continue;const rt=relayListFromKind3(s,nt);rt&&h.set(tt,rt)}j(h)}),et.start()})}var OutboxItem=class{constructor(e){ct(this,"type");ct(this,"relayUrlScores");ct(this,"readRelays");ct(this,"writeRelays");this.type=e,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},OutboxTracker=class extends lib$1.EventEmitter{constructor(s){super();ct(this,"data");ct(this,"ndk");ct(this,"debug");this.ndk=s,this.debug=s.debug.extend("outbox-tracker"),this.data=new dist.LRUCache({maxSize:1e5,entryExpirationTimeInMS:2*60*1e3})}async trackUsers(s,o=!1){const a=[];for(let c=0;c<s.length;c+=400){const g=s.slice(c,c+400).map(_=>getKeyFromItem(_)).filter(_=>!this.data.has(_));if(g.length!==0){for(const _ of g)this.data.set(_,new OutboxItem("user"));a.push(new Promise(_=>{getRelayListForUsers(g,this.ndk,o).then(b=>{for(const[$,_e]of b){let j=this.data.get($);if(j??(j=new OutboxItem("user")),_e){j.readRelays=new Set(normalize(_e.readRelayUrls)),j.writeRelays=new Set(normalize(_e.writeRelayUrls));for(const et of j.readRelays)this.ndk.pool.blacklistRelayUrls.has(et)&&j.readRelays.delete(et);for(const et of j.writeRelays)this.ndk.pool.blacklistRelayUrls.has(et)&&j.writeRelays.delete(et);this.data.set($,j)}}}).finally(_)}))}}return Promise.all(a)}track(s,o,a=!0){const c=getKeyFromItem(s);o??(o=getTypeFromItem(s));let h=this.data.get(c);return h||(h=new OutboxItem(o),s instanceof NDKUser&&this.trackUsers([s])),h}};function getKeyFromItem(e){return e instanceof NDKUser?e.pubkey:e}function getTypeFromItem(e){return e instanceof NDKUser?"user":"kind"}var NDKPool=class extends lib$1.EventEmitter{constructor(s=[],o=[],a,c){super();ct(this,"_relays",new Map);ct(this,"autoConnectRelays",new Set);ct(this,"blacklistRelayUrls");ct(this,"debug");ct(this,"temporaryRelayTimers",new Map);ct(this,"flappingRelays",new Set);ct(this,"backoffTimes",new Map);ct(this,"ndk");this.debug=c??a.debug.extend("pool"),this.ndk=a,this.relayUrls=s,this.blacklistRelayUrls=new Set(o)}get relays(){return this._relays}set relayUrls(s){this._relays.clear();for(const o of s){const a=new NDKRelay(o,void 0,this.ndk);this.addRelay(a,!1)}}set name(s){this.debug=this.debug.extend(s)}useTemporaryRelay(s,o=3e4,a){const c=this.relays.has(s.url);c||(this.addRelay(s),this.debug("Adding temporary relay %s for filters %o",s.url,a));const h=this.temporaryRelayTimers.get(s.url);if(h&&clearTimeout(h),!c||h){const g=setTimeout(()=>{var _;(_=this.ndk.explicitRelayUrls)!=null&&_.includes(s.url)||this.removeRelay(s.url)},o);this.temporaryRelayTimers.set(s.url,g)}}addRelay(s,o=!0){var rt,ot;const a=this.relays.has(s.url),c=(rt=this.blacklistRelayUrls)==null?void 0:rt.has(s.url),h=s.url.includes("/npub1");let g=!0;const _=s.url;if(a)return;if(c){this.debug(`Refusing to add relay ${_}: blacklisted`);return}if(h){this.debug(`Refusing to add relay ${_}: is a filter relay`);return}if((ot=this.ndk.cacheAdapter)!=null&&ot.getRelayStatus){const it=this.ndk.cacheAdapter.getRelayStatus(_);if(it&&it.dontConnectBefore)if(it.dontConnectBefore>Date.now()){const st=it.dontConnectBefore-Date.now();this.debug(`Refusing to add relay ${_}: delayed connect for ${st}ms`),setTimeout(()=>{this.addRelay(s,o)},st);return}else g=!1}const b=it=>this.emit("notice",s,it),$=()=>this.handleRelayConnect(_),_e=()=>this.handleRelayReady(s),j=()=>this.emit("relay:disconnect",s),et=()=>this.handleFlapping(s),tt=it=>this.emit("relay:auth",s,it),nt=()=>this.emit("relay:authed",s);s.off("notice",b),s.off("connect",$),s.off("ready",_e),s.off("disconnect",j),s.off("flapping",et),s.off("auth",tt),s.off("authed",nt),s.on("notice",b),s.on("connect",$),s.on("ready",_e),s.on("disconnect",j),s.on("flapping",et),s.on("auth",tt),s.on("authed",nt),s.on("delayed-connect",it=>{var st;(st=this.ndk.cacheAdapter)!=null&&st.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(s.url,{dontConnectBefore:Date.now()+it})}),this.relays.set(_,s),o&&this.autoConnectRelays.add(_),o&&(this.emit("relay:connecting",s),s.connect(void 0,g).catch(it=>{this.debug(`Failed to connect to relay ${_}`,it)}))}removeRelay(s){const o=this.relays.get(s);if(o)return o.disconnect(),this.relays.delete(s),this.autoConnectRelays.delete(s),this.emit("relay:disconnect",o),!0;const a=this.temporaryRelayTimers.get(s);return a&&(clearTimeout(a),this.temporaryRelayTimers.delete(s)),!1}isRelayConnected(s){const o=normalizeRelayUrl(s),a=this.relays.get(o);return a?a.status===5:!1}getRelay(s,o=!0,a=!1,c){let h=this.relays.get(normalizeRelayUrl(s));return h||(h=new NDKRelay(s,void 0,this.ndk),a?this.useTemporaryRelay(h,3e4,c):this.addRelay(h,o)),h}handleRelayConnect(s){this.emit("relay:connect",this.relays.get(s)),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(s){this.emit("relay:ready",s)}async connect(s){var c;const o=[];this.debug(`Connecting to ${this.relays.size} relays${s?`, timeout ${s}...`:""}`);const a=new Set(this.autoConnectRelays.keys());(c=this.ndk.explicitRelayUrls)==null||c.forEach(h=>{const g=normalizeRelayUrl(h);a.add(g)});for(const h of a){const g=this.relays.get(h);if(!g)continue;const _=new Promise((b,$)=>(this.emit("relay:connecting",g),g.connect(s).then(b).catch($)));if(s){const b=new Promise(($,_e)=>{setTimeout(()=>_e(`Timed out after ${s}ms`),s)});o.push(Promise.race([_,b]).catch($=>{this.debug(`Failed to connect to relay ${g.url}: ${$??"No reason specified"}`)}))}else o.push(_)}s&&setTimeout(()=>{const h=this.stats().connected===this.relays.size,g=this.stats().connected>0;!h&&g&&this.emit("connect")},s),await Promise.all(o)}checkOnFlappingRelays(){const s=this.flappingRelays.size,o=this.relays.size;if(s/o>=.8)for(const a of this.flappingRelays)this.backoffTimes.set(a,0)}handleFlapping(s){this.debug(`Relay ${s.url} is flapping`);let o=this.backoffTimes.get(s.url)||5e3;o=o*2,this.backoffTimes.set(s.url,o),this.debug(`Backoff time for ${s.url} is ${o}ms`),setTimeout(()=>{this.debug(`Attempting to reconnect to ${s.url}`),this.emit("relay:connecting",s),s.connect(),this.checkOnFlappingRelays()},o),s.disconnect(),this.emit("flapping",s)}size(){return this.relays.size}stats(){const s={total:0,connected:0,disconnected:0,connecting:0};for(const o of this.relays.values())s.total++,o.status===5?s.connected++:o.status===1?s.disconnected++:o.status===4&&s.connecting++;return s}connectedRelays(){return Array.from(this.relays.values()).filter(s=>s.status===5)}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter(s=>s.status>=5&&!this.temporaryRelayTimers.has(s.url))}urls(){return Array.from(this.relays.keys())}};function correctRelaySet(e,s){const o=s.connectedRelays();if(!Array.from(e.relays).some(c=>o.map(h=>h.url).includes(c.url)))for(const c of o)e.addRelay(c);if(o.length===0)for(const c of s.relays.values())e.addRelay(c);return e}function isValidHint(e){if(!e||e==="")return!1;try{return new URL(e),!0}catch{return!1}}async function fetchEventFromTag(e,s,o,a={type:"timeout"}){const c=this.debug.extend("fetch-event-from-tag"),[h,g,_]=e;o={},c("fetching event from tag",e,o,a);const b=getRelaysForSync(this,s.pubkey);if(b&&b.size>0){c("fetching event from author relays %o",Array.from(b));const rt=NDKRelaySet.fromRelayUrls(Array.from(b),this),ot=await this.fetchEvent(g,o,rt);if(ot)return ot}else c("no author relays found for %s",s.pubkey,s);const $=calculateRelaySetsFromFilters(this,[{ids:[g]}],this.pool);c("fetching event without relay hint",$);const _e=await this.fetchEvent(g,o);if(_e)return _e;if(_&&_!==""){const rt=await this.fetchEvent(g,o,this.pool.getRelay(_,!0,!0,[{ids:[g]}]));if(rt)return rt}let j;const et=isValidHint(_)?this.pool.getRelay(_,!1,!0,[{ids:[g]}]):void 0,tt=new Promise(rt=>{this.fetchEvent(g,o,et).then(rt)});if(!isValidHint(_)||a.type==="none")return tt;const nt=new Promise(async rt=>{const ot=a.relaySet,it=a.timeout??1500,st=new Promise(at=>setTimeout(at,it));if(a.type==="timeout"&&await st,j)rt(j);else{c("fallback fetch triggered");const at=await this.fetchEvent(g,o,ot);rt(at)}});switch(a.type){case"timeout":return Promise.race([tt,nt]);case"eose":return j=await tt,j||nt}}var SPEC_PATH="/.well-known/nostr/nip96.json",Nip96=class{constructor(e,s){ct(this,"ndk");ct(this,"spec");ct(this,"url");ct(this,"nip98Required",!1);this.url=`https://${e}${SPEC_PATH}`,this.ndk=s}async prepareUpload(e,s="POST"){if(this.validateHttpFetch(),this.spec||await this.fetchSpec(),!this.spec)throw new Error("Failed to fetch NIP96 spec");let o={};return this.nip98Required&&(o={Authorization:await this.generateNip98Header(this.spec.api_url,s,e)}),{url:this.spec.api_url,headers:o}}async xhrUpload(e,s){const o="POST",{url:a,headers:c}=await this.prepareUpload(s,o);e.open(o,a,!0),c.Authorization&&e.setRequestHeader("Authorization",c.Authorization);const h=new FormData;return h.append("file",s),new Promise((g,_)=>{e.onload=function(){e.status>=200&&e.status<300?g(JSON.parse(e.responseText)):_(new Error(e.statusText))},e.onerror=function(){_(new Error("Network Error"))},e.send(h)})}async upload(e){const s="POST",{url:o,headers:a}=await this.prepareUpload(e,s),c=new FormData;c.append("file",e);const h=await this.ndk.httpFetch(this.spec.api_url,{method:s,headers:a,body:c});if(h.status!==200)throw new Error(`Failed to upload file to ${o}`);const g=await h.json();if(g.status!=="success")throw new Error(g.message);return g}validateHttpFetch(){if(!this.ndk)throw new Error("NDK is required to fetch NIP96 spec");if(!this.ndk.httpFetch)throw new Error("NDK must have an httpFetch method to fetch NIP96 spec")}async fetchSpec(){this.validateHttpFetch();const e=await this.ndk.httpFetch(this.url);if(e.status!==200)throw new Error(`Failed to fetch NIP96 spec from ${this.url}`);const s=await e.json();if(!s)throw new Error(`Failed to parse NIP96 spec from ${this.url}`);this.spec=s,this.nip98Required=this.spec.plans.free.is_nip98_required}async generateNip98Header(e,s,o){const a=new NDKEvent(this.ndk,{kind:27235,tags:[["u",e],["method",s]]});if(["POST","PUT","PATCH"].includes(s)){const h=await this.calculateSha256(o);a.tags.push(["payload",h])}return await a.sign(),`Nostr ${btoa(JSON.stringify(a.rawEvent()))}`}async calculateSha256(e){const s=await e.arrayBuffer(),o=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(o)).map(h=>h.toString(16).padStart(2,"0")).join("")}},Queue=class{constructor(e,s){ct(this,"queue",[]);ct(this,"maxConcurrency");ct(this,"processing",new Set);ct(this,"promises",new Map);this.maxConcurrency=s}add(e){if(this.promises.has(e.id))return this.promises.get(e.id);const s=new Promise((o,a)=>{this.queue.push({...e,func:()=>e.func().then(c=>(o(c),c),c=>{throw a(c),c})}),this.process()});return this.promises.set(e.id,s),s.finally(()=>{this.promises.delete(e.id),this.processing.delete(e.id),this.process()}),s}process(){if(this.processing.size>=this.maxConcurrency||this.queue.length===0)return;const e=this.queue.shift();!e||this.processing.has(e.id)||(this.processing.add(e.id),e.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},NDKSubscriptionManager=class{constructor(e){ct(this,"subscriptions");ct(this,"seenEvents",new Map);ct(this,"debug");this.subscriptions=new Map,this.debug=e.extend("sub-manager")}add(e){this.subscriptions.set(e.internalId,e),e.on("close",()=>{this.subscriptions.delete(e.internalId)})}seenEvent(e,s){const o=this.seenEvents.get(e)||[];o.push(s),this.seenEvents.set(e,o)}},debug6=debug7("ndk:active-user");async function getUserRelayList(e){if(!this.autoConnectUserRelays)return;const s=await getRelayListForUser(e.pubkey,this);if(s){for(const o of s.relays){let a=this.pool.relays.get(o);a||(a=new NDKRelay(o,this.relayAuthDefaultPolicy,this),this.pool.addRelay(a))}return s}}async function setActiveUser(e){const s=this.outboxPool||this.pool;s.connectedRelays.length>0?setActiveUserConnected.call(this,e):s.once("connect",()=>{setActiveUserConnected.call(this,e)})}async function setActiveUserConnected(e){const s=await getUserRelayList.call(this,e),o=[{kinds:[10006],authors:[e.pubkey]}];this.autoFetchUserMutelist&&o[0].kinds.push(1e4);const a=s?s.relaySet:void 0,c=this.subscribe(o,{subId:"active-user-settings",closeOnEose:!0},a,!1),h=new Map;c.on("event",g=>{const _=h.get(g.kind);_&&_.created_at>=g.created_at||h.set(g.kind,g)}),c.on("eose",()=>{for(const g of h.values())processEvent.call(this,g)}),c.start()}async function processEvent(e){e.kind===10006?processBlockRelayList.call(this,e):e.kind===1e4&&processMuteList.call(this,e)}function processBlockRelayList(e){const s=lists_default.from(e);for(const o of s.items)this.pool.blacklistRelayUrls.add(o[0]);debug6("Added %d relays to relay blacklist",s.items.length)}function processMuteList(e){const s=lists_default.from(e);for(const o of s.items)this.mutedIds.set(o[1],o[0]);debug6("Added %d users to mute list",s.items.length)}async function generateZapRequest(e,s,o,a,c,h,g,_,b){const $=o.callback,_e=nip57_exports.makeZapRequest({profile:a,event:null,amount:c,comment:g||"",relays:h.slice(0,4)});if(e instanceof NDKEvent){const tt=e.referenceTags().filter(nt=>nt[0]!=="p");_e.tags.push(...tt)}_e.tags.push(["lnurl",$]);const j=new NDKEvent(s,_e);return _&&(j.tags=j.tags.concat(_)),j.tags=j.tags.filter(et=>et[0]!=="p"),j.tags.push(["p",a]),await j.sign(b),j}var d3=debug7("ndk:zapper"),NDKZapper=class extends lib$1.EventEmitter{constructor(s,o,a="msat",c,h,g,_){super();ct(this,"target");ct(this,"ndk");ct(this,"comment");ct(this,"amount");ct(this,"unit");ct(this,"tags");ct(this,"signer");ct(this,"zapMethod");ct(this,"onLnPay");ct(this,"onCashuPay");ct(this,"onComplete");ct(this,"maxRelays",3);if(this.target=s,this.ndk=h||s.ndk,!this.ndk)throw new Error("No NDK instance provided");this.amount=o,this.comment=c,this.unit=a,this.tags=g,this.signer=_}async zap(){const s=this.getZapSplits(),o=new Map;return await Promise.all(s.map(async a=>{let c;try{c=await this.zapSplit(a)}catch(h){c=h}this.emit("split:complete",a,c),o.set(a,c)})),this.emit("complete",o),this.onComplete&&this.onComplete(o),o}async zapSplit(s){let o=await this.getZapMethods(this.ndk,s.pubkey),a;if(o.length===0)throw new Error("No zap method available for recipient");o=o.sort((h,g)=>h.type==="nip61"?-1:g.type==="nip61"?1:0);const c=await this.relays(s.pubkey);for(const h of o){d3("Zapping to %s with %d %s using %s",s.pubkey,s.amount,this.unit,h.type);try{switch(h.type){case"nip61":{const g=h.data;let _;if(_=await this.onCashuPay({target:this.target,comment:this.comment,tags:this.tags,recipientPubkey:s.pubkey,amount:s.amount,unit:this.unit,...g}),d3("NIP-61 Zap result: %o",_),_ instanceof Error)a=_;else if(_){const{proofs:b,mint:$}=_;if(!b||!$)throw new Error("Invalid zap confirmation: missing proofs or mint: "+_);const _e=NDKRelaySet.fromRelayUrls(c,this.ndk),j=new NDKNutzap(this.ndk);return j.tags=[...j.tags,...this.tags||[]],j.proofs=b,j.mint=$,j.comment=this.comment,j.unit=this.unit,j.recipientPubkey=s.pubkey,await j.sign(this.signer),await j.publish(_e),j}break}case"nip57":{const g=h.data,_=await generateZapRequest(this.target,this.ndk,g,s.pubkey,s.amount,c,this.comment,this.tags,this.signer);if(!_)throw d3("Unable to generate zap request"),new Error("Unable to generate zap request");const b=await this.getLnInvoice(_,s.amount,g);if(!b)throw d3("Unable to get payment request"),new Error("Unable to get payment request");a=await this.onLnPay({target:this.target,comment:this.comment,recipientPubkey:s.pubkey,amount:s.amount,unit:this.unit,pr:b});break}}}catch(g){g instanceof Error?a=g:a=new Error(g),d3("Error zapping to %s with %d %s using %s: %o",s.pubkey,s.amount,this.unit,h.type,g)}}if(a instanceof Error)throw a;return a}async getLnInvoice(s,o,a){const c=a.callback,h=JSON.stringify(s.rawEvent());d3(`Fetching invoice from ${c}?`+new URLSearchParams({amount:o.toString(),nostr:h}));const g=new URL(c);g.searchParams.append("amount",o.toString()),g.searchParams.append("nostr",h),d3(`Fetching invoice from ${g.toString()}`);const _=await fetch(g.toString());if(d3(`Got response from zap endpoint: ${c}`,{status:_.status}),_.status!==200){d3(`Received non-200 status from zap endpoint: ${c}`,{status:_.status,amount:o,nostr:h});const $=await _.text();throw new Error(`Unable to fetch zap endpoint ${c}: ${$}`)}return(await _.json()).pr}getZapSplits(){if(this.target instanceof NDKUser)return[{pubkey:this.target.pubkey,amount:this.amount}];const s=this.target.getMatchingTags("zap");if(s.length===0)return[{pubkey:this.target.pubkey,amount:this.amount}];const o=[],a=s.reduce((c,h)=>c+parseInt(h[2]),0);for(const c of s){const h=c[1],g=Math.floor(parseInt(c[2])/a*this.amount);o.push({pubkey:h,amount:g})}return o}async getZapMethods(s,o){const a=[];a.push("nip61"),a.push("nip57");const c=s.getUser({pubkey:o}),h=await c.getZapInfo(!1,a);return d3("Zap info for %s: %o",c.npub,h),h}async relays(s){var a,c,h;let o=[];if((a=this.ndk)!=null&&a.activeUser){const g=await getRelayListForUsers([this.ndk.activeUser.pubkey,s],this.ndk),_=new Map;for(const b of g.values())for(const $ of b.readRelayUrls){const _e=_.get($)||0;_.set($,_e+1)}o=Array.from(_.entries()).sort((b,$)=>$[1]-b[1]).map(([b])=>b).slice(0,this.maxRelays)}return(h=(c=this.ndk)==null?void 0:c.pool)!=null&&h.permanentAndConnectedRelays().length&&(o=this.ndk.pool.permanentAndConnectedRelays().map(g=>g.url)),o.length||(o=[]),o}},DEFAULT_OUTBOX_RELAYS=["wss://purplepag.es/","wss://nos.lol/"],DEFAULT_BLACKLISTED_RELAYS=["wss://brb.io/","wss://nostr.mutinywallet.com/"],NDK=class extends lib$1.EventEmitter{constructor(s={}){super();ct(this,"_explicitRelayUrls");ct(this,"pool");ct(this,"outboxPool");ct(this,"_signer");ct(this,"_activeUser");ct(this,"cacheAdapter");ct(this,"debug");ct(this,"devWriteRelaySet");ct(this,"outboxTracker");ct(this,"mutedIds");ct(this,"clientName");ct(this,"clientNip89");ct(this,"queuesZapConfig");ct(this,"queuesNip05");ct(this,"asyncSigVerification",!1);ct(this,"initialValidationRatio",1);ct(this,"lowestValidationRatio",1);ct(this,"validationRatioFn");ct(this,"subManager");ct(this,"publishingFailureHandled",!1);ct(this,"relayAuthDefaultPolicy");ct(this,"httpFetch");ct(this,"autoConnectUserRelays",!0);ct(this,"autoFetchUserMutelist",!0);ct(this,"walletConfig");ct(this,"fetchEventFromTag",fetchEventFromTag.bind(this));this.debug=s.debug||debug7("ndk"),this._explicitRelayUrls=s.explicitRelayUrls||[],this.subManager=new NDKSubscriptionManager(this.debug),this.pool=new NDKPool(s.explicitRelayUrls||[],s.blacklistRelayUrls||DEFAULT_BLACKLISTED_RELAYS,this),this.pool.name="main",this.pool.on("relay:auth",async(o,a)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(o,a)}),this.autoConnectUserRelays=s.autoConnectUserRelays??!0,this.autoFetchUserMutelist=s.autoFetchUserMutelist??!0,this.clientName=s.clientName,this.clientNip89=s.clientNip89,this.relayAuthDefaultPolicy=s.relayAuthDefaultPolicy,s.enableOutboxModel&&(this.outboxPool=new NDKPool(s.outboxRelayUrls||DEFAULT_OUTBOX_RELAYS,s.blacklistRelayUrls||DEFAULT_BLACKLISTED_RELAYS,this,this.debug.extend("outbox-pool")),this.outboxPool.name="outbox",this.outboxTracker=new OutboxTracker(this)),this.signer=s.signer,this.cacheAdapter=s.cacheAdapter,this.mutedIds=s.mutedIds||new Map,s.devWriteRelayUrls&&(this.devWriteRelaySet=NDKRelaySet.fromRelayUrls(s.devWriteRelayUrls,this)),this.queuesZapConfig=new Queue("zaps",3),this.queuesNip05=new Queue("nip05",10),this.signatureVerificationWorker=s.signatureVerificationWorker,this.initialValidationRatio=s.initialValidationRatio||1,this.lowestValidationRatio=s.lowestValidationRatio||1;try{this.httpFetch=fetch}catch{}}set explicitRelayUrls(s){this._explicitRelayUrls=s,this.pool.relayUrls=s}get explicitRelayUrls(){return this._explicitRelayUrls||[]}set signatureVerificationWorker(s){this.asyncSigVerification=!!s,s&&signatureVerificationInit(s)}addExplicitRelay(s,o,a=!0){let c;return typeof s=="string"?c=new NDKRelay(s,o,this):c=s,this.pool.addRelay(c,a),this.explicitRelayUrls.push(c.url),c}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(s){var a;const o=((a=this._activeUser)==null?void 0:a.pubkey)!==(s==null?void 0:s.pubkey);this._activeUser=s,s&&o?setActiveUser.call(this,s):s||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(s){this._signer=s,s&&this.emit("signer:ready",s),s==null||s.user().then(o=>{o.ndk=this,this.activeUser=o})}async connect(s){var a,c;this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer %o",await((c=(a=this._signer).relays)==null?void 0:c.call(a,this))),this._signer.relays&&(await this._signer.relays(this)).forEach(g=>this.pool.addRelay(g)));const o=[this.pool.connect(s)];return this.outboxPool&&o.push(this.outboxPool.connect(s)),this.debug("Connecting to relays %o",{timeoutMs:s}),Promise.allSettled(o).then(()=>{})}getUser(s){const o=new NDKUser(s);return o.ndk=this,o}async getUserFromNip05(s,o=!1){return NDKUser.fromNip05(s,this,o)}subscribe(s,o,a,c=!0){var g;const h=new NDKSubscription(this,s,o,a);if(this.subManager.add(h),a)for(const _ of a.relays)this.pool.useTemporaryRelay(_,void 0,h.filters);if(this.outboxPool&&h.hasAuthorsFilter()){const _=h.filters.filter(b=>{var $;return b.authors&&(($=b.authors)==null?void 0:$.length)>0}).map(b=>b.authors).flat();(g=this.outboxTracker)==null||g.trackUsers(_)}return c&&setTimeout(()=>h.start(),0),h}async publish(s,o,a){return this.debug("Deprecated: Use `event.publish()` instead"),s.publish(o,a)}async fetchEvent(s,o,a){let c,h;if(a instanceof NDKRelay?h=new NDKRelaySet(new Set([a]),this):a instanceof NDKRelaySet&&(h=a),!a&&typeof s=="string"&&!isNip33AValue(s)){const g=relaysFromBech32(s,this);g.length>0&&(h=new NDKRelaySet(new Set(g),this),h=correctRelaySet(h,this.pool))}if(typeof s=="string"?c=[filterFromId(s)]:Array.isArray(s)?c=s:c=[s],c.length===0)throw new Error(`Invalid filter: ${JSON.stringify(s)}`);return new Promise(g=>{let _=null;const b=this.subscribe(c,{...o||{},closeOnEose:!0},h,!1),$=setTimeout(()=>{b.stop(),g(_)},1e4);b.on("event",_e=>{_e.ndk=this,_e.isReplaceable()?(!_||_.created_at<_e.created_at)&&(_=_e):(clearTimeout($),g(_e))}),b.on("eose",()=>{clearTimeout($),g(_)}),b.start()})}async fetchEvents(s,o,a){return new Promise(c=>{const h=new Map,g=this.subscribe(s,{...o||{},closeOnEose:!0},a,!1),_=b=>{b instanceof NDKEvent||(b=new NDKEvent(void 0,b));const $=b.deduplicationKey(),_e=h.get($);_e&&(b=dedup(_e,b)),b.ndk=this,h.set($,b)};g.on("event",_),g.on("eose",()=>{c(new Set(h.values()))}),g.start()})}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}getNip96(s){return new Nip96(s,this)}async nwc(s,o=2e3){const a=await NDKNwc.fromURI(this,s);return o!==!1&&await a.blockUntilReady(o),a}zap(s,o,{comment:a,unit:c,signer:h,tags:g,onLnPay:_,onCashuPay:b,onComplete:$}){var j,et,tt;h||this.assertSigner();const _e=new NDKZapper(s,o,c,a,this,g,h);return _!==!1&&(_e.onLnPay=_??((j=this.walletConfig)==null?void 0:j.onLnPay)),b!==!1&&(_e.onCashuPay=b??((et=this.walletConfig)==null?void 0:et.onCashuPay)),_e.onComplete=$??((tt=this.walletConfig)==null?void 0:tt.onPaymentComplete),_&&_e.zap(),_e}};const RELAY_URLS=["wss://pablof7z.nostr1.com","wss://offchain.pub","wss://relay.f7z.io","wss://relay.damus.io","wss://relay.snort.social","wss://offchain.pub/","wss://nostr.mom","wss://nostr-pub.wellorder.net","wss://purplepag.es","wss://brb.io/"],RelayConnector=({onConnect:e})=>(reactExports.useEffect(()=>{(async()=>{const o=new NDK({explicitRelayUrls:[...RELAY_URLS],enableOutboxModel:!1});await o.connect(6e3),e(o),console.log("Connected to relays")})()},[e]),null),Nip1=()=>{const{t:e}=useTranslation("nip1"),[s,o]=reactExports.useState(null),[a,c]=reactExports.useState(null),[h,g]=reactExports.useState(""),_=async tt=>{if(a){const nt=await a.fetchEvent(tt);console.log(nt==null?void 0:nt.rawEvent()),o(nt==null?void 0:nt.rawEvent())}},b=async tt=>{tt.preventDefault(),_(h)},$=tt=>({id:tt.id,pubkey:tt.pubkey,created_at:tt.created_at,kind:tt.kind,tags:tt.tags,content:tt.content,sig:tt.sig}),_e=tt=>tt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),j=tt=>/^"/.test(tt)?/:$/.test(tt)?"json-key":"json-string":/true|false/.test(tt)?"json-boolean":/null/.test(tt)?"json-null":"json-number",et=tt=>(tt=_e(tt),tt.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:\s*)?|true|false|null|[0-9]+)/g,nt=>`<span class="${j(nt)}">${nt}</span>`));return jsxRuntimeExports.jsxs("div",{className:"nip1-container",children:[jsxRuntimeExports.jsx(RelayConnector,{onConnect:c}),jsxRuntimeExports.jsx("h2",{children:e("nip1_title")}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:e("key_protocol")}),": ",e("key_protocol_description")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:e("event_format")}),": ",e("event_format_description")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:e("filters_and_subscriptions")}),": ",e("filters_and_subscriptions_description")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:e("websocket_connections")}),": ",e("websocket_connections_description")]})]}),jsxRuntimeExports.jsx("h3",{children:e("example_usage")}),jsxRuntimeExports.jsx("p",{children:e("example_usage_intro")}),jsxRuntimeExports.jsx("p",{children:e("example_usage_scenario")}),jsxRuntimeExports.jsx("pre",{className:"formatted-text",dangerouslySetInnerHTML:{__html:et(JSON.stringify({id:"86885d03218abe92f1800fb2f0a306535710111d60e8c9aafd0179db11963ed7",pubkey:"user123",created_at:"1728888328",kind:"message",tags:["chat","example"],content:e("example_message_content"),signature:"abcdef1234567890"},null,2))}}),jsxRuntimeExports.jsx("p",{children:e("example_explanation")}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"id"}),": ",e("example_id")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"pubkey"}),": ",e("example_pubkey")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"created_at"}),": ",e("example_created_at")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"kind"}),": ",e("example_kind")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"tags"}),": ",e("example_tags")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"content"}),": ",e("example_content")]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"sig"}),": ",e("example_sig")]})]}),jsxRuntimeExports.jsx("p",{children:e("example_filters")}),jsxRuntimeExports.jsx("h3",{children:e("event_fetcher")}),jsxRuntimeExports.jsx("div",{className:"input-form-container",children:jsxRuntimeExports.jsxs("form",{onSubmit:b,children:[jsxRuntimeExports.jsxs("label",{children:["Event ID:",jsxRuntimeExports.jsx("input",{type:"text",value:h,onChange:tt=>g(tt.target.value)})]}),jsxRuntimeExports.jsx("button",{type:"submit",children:"Fetch Event"})]})}),s&&jsxRuntimeExports.jsxs("div",{className:"fetched-event json-container",children:[jsxRuntimeExports.jsx("h3",{children:e("fetched_event")}),jsxRuntimeExports.jsx("pre",{className:"formatted-text",dangerouslySetInnerHTML:{__html:et(JSON.stringify($(s),null,2))}})]}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("a",{className:"link",href:"https://github.com/nostr-protocol/nips/blob/master/01.md",target:"_blank",rel:"noopener noreferrer",children:e("detailed_github_page")})})]})},Nip2=()=>{const[e,s]=reactExports.useState(null),[o,a]=reactExports.useState(""),c=async g=>{if(console.log(`Fetching NIP-01 Profile Event for pubkey: ${g}`),e)try{const _={kinds:[0],authors:[g],limit:1};console.log("Subscribing with filter:",_);const b=e.subscribe(_);b.on("event",$=>{console.log("Event received:",$),console.log("Full JSON:",JSON.stringify($,null,2))}),b.on("eose",()=>{console.log("End of subscription events")}),b.on("close",$=>{console.error("Subscription closed with error:",$)})}catch(_){console.error("Error fetching event:",_)}else console.log("NDK instance is null")},h=async g=>{g.preventDefault(),c(o)};return jsxRuntimeExports.jsxs("div",{className:"nip1-container",children:[jsxRuntimeExports.jsx(RelayConnector,{onConnect:s}),jsxRuntimeExports.jsx("h2",{children:"NIP-01: Profile Event"}),jsxRuntimeExports.jsx("div",{className:"input-form-container",children:jsxRuntimeExports.jsxs("form",{onSubmit:h,children:[jsxRuntimeExports.jsxs("label",{children:["Pubkey:",jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:g=>a(g.target.value)})]}),jsxRuntimeExports.jsx("button",{type:"submit",children:"Fetch Event"})]})})]})},COMPONENTS={home:Home,nip1:Nip1,nip2:Nip2},App=()=>{const[e,s]=reactExports.useState("home"),o=COMPONENTS[e];return jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Navbar,{setActivePage:s,activePage:e}),jsxRuntimeExports.jsx("main",{className:"container",children:jsxRuntimeExports.jsx(o,{})})]})},consoleLogger={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,s){console&&console[e]&&console[e].apply(console,s)}};class Logger{constructor(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(s,o)}init(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=o.prefix||"i18next:",this.logger=s||consoleLogger,this.options=o,this.debug=o.debug}log(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return this.forward(o,"log","",!0)}warn(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return this.forward(o,"warn","",!0)}error(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return this.forward(o,"error","")}deprecate(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return this.forward(o,"warn","WARNING DEPRECATED: ",!0)}forward(s,o,a,c){return c&&!this.debug?null:(typeof s[0]=="string"&&(s[0]=`${a}${this.prefix} ${s[0]}`),this.logger[o](s))}create(s){return new Logger(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new Logger(this.logger,s)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(s,o){return s.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const c=this.observers[a].get(o)||0;this.observers[a].set(o,c+1)}),this}off(s,o){if(this.observers[s]){if(!o){delete this.observers[s];return}this.observers[s].delete(o)}}emit(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];this.observers[s]&&Array.from(this.observers[s].entries()).forEach(g=>{let[_,b]=g;for(let $=0;$<b;$++)_(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(g=>{let[_,b]=g;for(let $=0;$<b;$++)_.apply(_,[s,...a])})}}const defer=()=>{let e,s;const o=new Promise((a,c)=>{e=a,s=c});return o.resolve=e,o.reject=s,o},makeString=e=>e==null?"":""+e,copy=(e,s,o)=>{e.forEach(a=>{s[a]&&(o[a]=s[a])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=e=>e&&e.indexOf("###")>-1?e.replace(lastOfPathSeparatorRegExp,"."):e,canNotTraverseDeeper=e=>!e||typeof e=="string",getLastOfPath=(e,s,o)=>{const a=typeof s!="string"?s:s.split(".");let c=0;for(;c<a.length-1;){if(canNotTraverseDeeper(e))return{};const h=cleanKey(a[c]);!e[h]&&o&&(e[h]=new o),Object.prototype.hasOwnProperty.call(e,h)?e=e[h]:e={},++c}return canNotTraverseDeeper(e)?{}:{obj:e,k:cleanKey(a[c])}},setPath=(e,s,o)=>{const{obj:a,k:c}=getLastOfPath(e,s,Object);if(a!==void 0||s.length===1){a[c]=o;return}let h=s[s.length-1],g=s.slice(0,s.length-1),_=getLastOfPath(e,g,Object);for(;_.obj===void 0&&g.length;)h=`${g[g.length-1]}.${h}`,g=g.slice(0,g.length-1),_=getLastOfPath(e,g,Object),_&&_.obj&&typeof _.obj[`${_.k}.${h}`]<"u"&&(_.obj=void 0);_.obj[`${_.k}.${h}`]=o},pushPath=(e,s,o,a)=>{const{obj:c,k:h}=getLastOfPath(e,s,Object);c[h]=c[h]||[],c[h].push(o)},getPath=(e,s)=>{const{obj:o,k:a}=getLastOfPath(e,s);if(o)return o[a]},getPathWithDefaults=(e,s,o)=>{const a=getPath(e,o);return a!==void 0?a:getPath(s,o)},deepExtend=(e,s,o)=>{for(const a in s)a!=="__proto__"&&a!=="constructor"&&(a in e?typeof e[a]=="string"||e[a]instanceof String||typeof s[a]=="string"||s[a]instanceof String?o&&(e[a]=s[a]):deepExtend(e[a],s[a],o):e[a]=s[a]);return e},regexEscape=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=e=>typeof e=="string"?e.replace(/[&<>"'\/]/g,s=>_entityMap[s]):e;class RegExpCache{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const o=this.regExpMap.get(s);if(o!==void 0)return o;const a=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,a),this.regExpQueue.push(s),a}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(e,s,o)=>{s=s||"",o=o||"";const a=chars.filter(g=>s.indexOf(g)<0&&o.indexOf(g)<0);if(a.length===0)return!0;const c=looksLikeObjectPathRegExpCache.getRegExp(`(${a.map(g=>g==="?"?"\\?":g).join("|")})`);let h=!c.test(e);if(!h){const g=e.indexOf(o);g>0&&!c.test(e.substring(0,g))&&(h=!0)}return h},deepFind=function(e,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[s])return e[s];const a=s.split(o);let c=e;for(let h=0;h<a.length;){if(!c||typeof c!="object")return;let g,_="";for(let b=h;b<a.length;++b)if(b!==h&&(_+=o),_+=a[b],g=c[_],g!==void 0){if(["string","number","boolean"].indexOf(typeof g)>-1&&b<a.length-1)continue;h+=b-h+1;break}c=g}return c},getCleanedCode=e=>e&&e.replace("_","-");class ResourceStore extends EventEmitter{constructor(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=s||{},this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const o=this.options.ns.indexOf(s);o>-1&&this.options.ns.splice(o,1)}getResource(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const h=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,g=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure;let _;s.indexOf(".")>-1?_=s.split("."):(_=[s,o],a&&(Array.isArray(a)?_.push(...a):typeof a=="string"&&h?_.push(...a.split(h)):_.push(a)));const b=getPath(this.data,_);return!b&&!o&&!a&&s.indexOf(".")>-1&&(s=_[0],o=_[1],a=_.slice(2).join(".")),b||!g||typeof a!="string"?b:deepFind(this.data&&this.data[s]&&this.data[s][o],a,h)}addResource(s,o,a,c){let h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const g=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator;let _=[s,o];a&&(_=_.concat(g?a.split(g):a)),s.indexOf(".")>-1&&(_=s.split("."),c=o,o=_[1]),this.addNamespaces(o),setPath(this.data,_,c),h.silent||this.emit("added",s,o,a,c)}addResources(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const h in a)(typeof a[h]=="string"||Array.isArray(a[h]))&&this.addResource(s,o,h,a[h],{silent:!0});c.silent||this.emit("added",s,o,a)}addResourceBundle(s,o,a,c,h){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},_=[s,o];s.indexOf(".")>-1&&(_=s.split("."),c=a,a=o,o=_[1]),this.addNamespaces(o);let b=getPath(this.data,_)||{};g.skipCopy||(a=JSON.parse(JSON.stringify(a))),c?deepExtend(b,a,h):b={...b,...a},setPath(this.data,_,b),g.silent||this.emit("added",s,o,a)}removeResourceBundle(s,o){this.hasResourceBundle(s,o)&&delete this.data[s][o],this.removeNamespaces(o),this.emit("removed",s,o)}hasResourceBundle(s,o){return this.getResource(s,o)!==void 0}getResourceBundle(s,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(s,o)}:this.getResource(s,o)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const o=this.getDataByLanguage(s);return!!(o&&Object.keys(o)||[]).find(c=>o[c]&&Object.keys(o[c]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,s,o,a,c){return e.forEach(h=>{this.processors[h]&&(s=this.processors[h].process(s,o,a,c))}),s}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;const a=this.resolve(s,o);return a&&a.res!==void 0}extractFromKey(s,o){let a=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let h=o.ns||this.options.defaultNS||[];const g=a&&s.indexOf(a)>-1,_=!this.options.userDefinedKeySeparator&&!o.keySeparator&&!this.options.userDefinedNsSeparator&&!o.nsSeparator&&!looksLikeObjectPath(s,a,c);if(g&&!_){const b=s.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:s,namespaces:h};const $=s.split(a);(a!==c||a===c&&this.options.ns.indexOf($[0])>-1)&&(h=$.shift()),s=$.join(c)}return typeof h=="string"&&(h=[h]),{key:s,namespaces:h}}translate(s,o,a){if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);const c=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,h=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:g,namespaces:_}=this.extractFromKey(s[s.length-1],o),b=_[_.length-1],$=o.lng||this.language,_e=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if($&&$.toLowerCase()==="cimode"){if(_e){const lt=o.nsSeparator||this.options.nsSeparator;return c?{res:`${b}${lt}${g}`,usedKey:g,exactUsedKey:g,usedLng:$,usedNS:b,usedParams:this.getUsedParamsDetails(o)}:`${b}${lt}${g}`}return c?{res:g,usedKey:g,exactUsedKey:g,usedLng:$,usedNS:b,usedParams:this.getUsedParamsDetails(o)}:g}const j=this.resolve(s,o);let et=j&&j.res;const tt=j&&j.usedKey||g,nt=j&&j.exactUsedKey||g,rt=Object.prototype.toString.apply(et),ot=["[object Number]","[object Function]","[object RegExp]"],it=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,st=!this.i18nFormat||this.i18nFormat.handleAsObject;if(st&&et&&(typeof et!="string"&&typeof et!="boolean"&&typeof et!="number")&&ot.indexOf(rt)<0&&!(typeof it=="string"&&Array.isArray(et))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const lt=this.options.returnedObjectHandler?this.options.returnedObjectHandler(tt,et,{...o,ns:_}):`key '${g} (${this.language})' returned an object instead of string.`;return c?(j.res=lt,j.usedParams=this.getUsedParamsDetails(o),j):lt}if(h){const lt=Array.isArray(et),wt=lt?[]:{},gt=lt?nt:tt;for(const pt in et)if(Object.prototype.hasOwnProperty.call(et,pt)){const yt=`${gt}${h}${pt}`;wt[pt]=this.translate(yt,{...o,joinArrays:!1,ns:_}),wt[pt]===yt&&(wt[pt]=et[pt])}et=wt}}else if(st&&typeof it=="string"&&Array.isArray(et))et=et.join(it),et&&(et=this.extendTranslation(et,s,o,a));else{let lt=!1,wt=!1;const gt=o.count!==void 0&&typeof o.count!="string",pt=Translator.hasDefaultValue(o),yt=gt?this.pluralResolver.getSuffix($,o.count,o):"",St=o.ordinal&&gt?this.pluralResolver.getSuffix($,o.count,{ordinal:!1}):"",kt=gt&&!o.ordinal&&o.count===0&&this.pluralResolver.shouldUseIntlApi(),dt=kt&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${yt}`]||o[`defaultValue${St}`]||o.defaultValue;!this.isValidLookup(et)&&pt&&(lt=!0,et=dt),this.isValidLookup(et)||(wt=!0,et=g);const bt=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&wt?void 0:et,_t=pt&&dt!==et&&this.options.updateMissing;if(wt||lt||_t){if(this.logger.log(_t?"updateKey":"missingKey",$,b,g,_t?dt:et),h){const vt=this.resolve(g,{...o,keySeparator:!1});vt&&vt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ft=[];const ht=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ht&&ht[0])for(let vt=0;vt<ht.length;vt++)ft.push(ht[vt]);else this.options.saveMissingTo==="all"?ft=this.languageUtils.toResolveHierarchy(o.lng||this.language):ft.push(o.lng||this.language);const Et=(vt,xt,Rt)=>{const $t=pt&&Rt!==et?Rt:bt;this.options.missingKeyHandler?this.options.missingKeyHandler(vt,b,xt,$t,_t,o):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(vt,b,xt,$t,_t,o),this.emit("missingKey",vt,b,xt,et)};this.options.saveMissing&&(this.options.saveMissingPlurals&&gt?ft.forEach(vt=>{const xt=this.pluralResolver.getSuffixes(vt,o);kt&&o[`defaultValue${this.options.pluralSeparator}zero`]&&xt.indexOf(`${this.options.pluralSeparator}zero`)<0&&xt.push(`${this.options.pluralSeparator}zero`),xt.forEach(Rt=>{Et([vt],g+Rt,o[`defaultValue${Rt}`]||dt)})}):Et(ft,g,dt))}et=this.extendTranslation(et,s,o,j,a),wt&&et===g&&this.options.appendNamespaceToMissingKey&&(et=`${b}:${g}`),(wt||lt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?et=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${b}:${g}`:g,lt?et:void 0):et=this.options.parseMissingKeyHandler(et))}return c?(j.res=et,j.usedParams=this.getUsedParamsDetails(o),j):et}extendTranslation(s,o,a,c,h){var g=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const $=typeof s=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let _e;if($){const et=s.match(this.interpolator.nestingRegexp);_e=et&&et.length}let j=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(j={...this.options.interpolation.defaultVariables,...j}),s=this.interpolator.interpolate(s,j,a.lng||this.language||c.usedLng,a),$){const et=s.match(this.interpolator.nestingRegexp),tt=et&&et.length;_e<tt&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&c&&c.res&&(a.lng=this.language||c.usedLng),a.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var et=arguments.length,tt=new Array(et),nt=0;nt<et;nt++)tt[nt]=arguments[nt];return h&&h[0]===tt[0]&&!a.context?(g.logger.warn(`It seems you are nesting recursively key: ${tt[0]} in key: ${o[0]}`),null):g.translate(...tt,o)},a)),a.interpolation&&this.interpolator.reset()}const _=a.postProcess||this.options.postProcess,b=typeof _=="string"?[_]:_;return s!=null&&b&&b.length&&a.applyPostProcessor!==!1&&(s=postProcessor.handle(b,s,o,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...c,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),s}resolve(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,c,h,g,_;return typeof s=="string"&&(s=[s]),s.forEach(b=>{if(this.isValidLookup(a))return;const $=this.extractFromKey(b,o),_e=$.key;c=_e;let j=$.namespaces;this.options.fallbackNS&&(j=j.concat(this.options.fallbackNS));const et=o.count!==void 0&&typeof o.count!="string",tt=et&&!o.ordinal&&o.count===0&&this.pluralResolver.shouldUseIntlApi(),nt=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",rt=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);j.forEach(ot=>{this.isValidLookup(a)||(_=ot,!checkedLoadedFor[`${rt[0]}-${ot}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(_)&&(checkedLoadedFor[`${rt[0]}-${ot}`]=!0,this.logger.warn(`key "${c}" for languages "${rt.join(", ")}" won't get resolved as namespace "${_}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),rt.forEach(it=>{if(this.isValidLookup(a))return;g=it;const st=[_e];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(st,_e,it,ot,o);else{let lt;et&&(lt=this.pluralResolver.getSuffix(it,o.count,o));const wt=`${this.options.pluralSeparator}zero`,gt=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(et&&(st.push(_e+lt),o.ordinal&&lt.indexOf(gt)===0&&st.push(_e+lt.replace(gt,this.options.pluralSeparator)),tt&&st.push(_e+wt)),nt){const pt=`${_e}${this.options.contextSeparator}${o.context}`;st.push(pt),et&&(st.push(pt+lt),o.ordinal&&lt.indexOf(gt)===0&&st.push(pt+lt.replace(gt,this.options.pluralSeparator)),tt&&st.push(pt+wt))}}let at;for(;at=st.pop();)this.isValidLookup(a)||(h=at,a=this.getResource(it,ot,at,o))}))})}),{res:a,usedKey:c,exactUsedKey:h,usedLng:g,usedNS:_}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,o,a,c):this.resourceStore.getResource(s,o,a,c)}getUsedParamsDetails(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=s.replace&&typeof s.replace!="string";let c=a?s.replace:s;if(a&&typeof s.count<"u"&&(c.count=s.count),this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),!a){c={...c};for(const h of o)delete c[h]}return c}static hasDefaultValue(s){const o="defaultValue";for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&o===a.substring(0,o.length)&&s[a]!==void 0)return!0;return!1}}const capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1);class LanguageUtil{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return null;const o=s.split("-");return o.length===2||(o.pop(),o[o.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(o.join("-"))}getLanguagePartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return s;const o=s.split("-");return this.formatLanguageCode(o[0])}formatLanguageCode(s){if(typeof s=="string"&&s.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let c=Intl.getCanonicalLocales(s)[0];if(c&&this.options.lowerCaseLng&&(c=c.toLowerCase()),c)return c}catch{}const o=["hans","hant","latn","cyrl","cans","mong","arab"];let a=s.split("-");return this.options.lowerCaseLng?a=a.map(c=>c.toLowerCase()):a.length===2?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),o.indexOf(a[1].toLowerCase())>-1&&(a[1]=capitalize(a[1].toLowerCase()))):a.length===3&&(a[0]=a[0].toLowerCase(),a[1].length===2&&(a[1]=a[1].toUpperCase()),a[0]!=="sgn"&&a[2].length===2&&(a[2]=a[2].toUpperCase()),o.indexOf(a[1].toLowerCase())>-1&&(a[1]=capitalize(a[1].toLowerCase())),o.indexOf(a[2].toLowerCase())>-1&&(a[2]=capitalize(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let o;return s.forEach(a=>{if(o)return;const c=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(c))&&(o=c)}),!o&&this.options.supportedLngs&&s.forEach(a=>{if(o)return;const c=this.getLanguagePartFromCode(a);if(this.isSupportedCode(c))return o=c;o=this.options.supportedLngs.find(h=>{if(h===c)return h;if(!(h.indexOf("-")<0&&c.indexOf("-")<0)&&(h.indexOf("-")>0&&c.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===c||h.indexOf(c)===0&&c.length>1))return h})}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}getFallbackCodes(s,o){if(!s)return[];if(typeof s=="function"&&(s=s(o)),typeof s=="string"&&(s=[s]),Array.isArray(s))return s;if(!o)return s.default||[];let a=s[o];return a||(a=s[this.getScriptPartFromCode(o)]),a||(a=s[this.formatLanguageCode(o)]),a||(a=s[this.getLanguagePartFromCode(o)]),a||(a=s.default),a||[]}toResolveHierarchy(s,o){const a=this.getFallbackCodes(o||this.options.fallbackLng||[],s),c=[],h=g=>{g&&(this.isSupportedCode(g)?c.push(g):this.logger.warn(`rejecting language code not found in supportedLngs: ${g}`))};return typeof s=="string"&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&h(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&h(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&h(this.getLanguagePartFromCode(s))):typeof s=="string"&&h(this.formatLanguageCode(s)),a.forEach(g=>{c.indexOf(g)<0&&h(this.formatLanguageCode(g))}),c}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const e={};return sets.forEach(s=>{s.lngs.forEach(o=>{e[o]={numbers:s.nr,plurals:_rulesPluralsTypes[s.fc]}})}),e};class PluralResolver{constructor(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=s,this.options=o,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(s,o){this.rules[s]=o}clearCache(){this.pluralRulesCache={}}getRule(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const a=getCleanedCode(s==="dev"?"en":s),c=o.ordinal?"ordinal":"cardinal",h=JSON.stringify({cleanedCode:a,type:c});if(h in this.pluralRulesCache)return this.pluralRulesCache[h];const g=new Intl.PluralRules(a,{type:c});return this.pluralRulesCache[h]=g,g}catch{return}return this.rules[s]||this.rules[this.languageUtils.getLanguagePartFromCode(s)]}needsPlural(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(s,o);return this.shouldUseIntlApi()?a&&a.resolvedOptions().pluralCategories.length>1:a&&a.numbers.length>1}getPluralFormsOfKey(s,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(s,a).map(c=>`${o}${c}`)}getSuffixes(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(s,o);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort((c,h)=>suffixesOrder[c]-suffixesOrder[h]).map(c=>`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${c}`):a.numbers.map(c=>this.getSuffix(s,c,o)):[]}getSuffix(s,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=this.getRule(s,a);return c?this.shouldUseIntlApi()?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${c.select(o)}`:this.getSuffixRetroCompatible(c,o):(this.logger.warn(`no plural rule found for: ${s}`),"")}getSuffixRetroCompatible(s,o){const a=s.noAbs?s.plurals(o):s.plurals(Math.abs(o));let c=s.numbers[a];this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1&&(c===2?c="plural":c===1&&(c=""));const h=()=>this.options.prepend&&c.toString()?this.options.prepend+c.toString():c.toString();return this.options.compatibilityJSON==="v1"?c===1?"":typeof c=="number"?`_plural_${c.toString()}`:h():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1?h():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(e,s,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,h=getPathWithDefaults(e,s,o);return!h&&c&&typeof o=="string"&&(h=deepFind(e,o,a),h===void 0&&(h=deepFind(s,o,a))),h},regexSafe=e=>e.replace(/\$/g,"$$$$");class Interpolator{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||(o=>o),this.init(s)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s.interpolation||(s.interpolation={escapeValue:!0});const{escape:o,escapeValue:a,useRawValueToEscape:c,prefix:h,prefixEscaped:g,suffix:_,suffixEscaped:b,formatSeparator:$,unescapeSuffix:_e,unescapePrefix:j,nestingPrefix:et,nestingPrefixEscaped:tt,nestingSuffix:nt,nestingSuffixEscaped:rt,nestingOptionsSeparator:ot,maxReplaces:it,alwaysFormat:st}=s.interpolation;this.escape=o!==void 0?o:escape,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=c!==void 0?c:!1,this.prefix=h?regexEscape(h):g||"{{",this.suffix=_?regexEscape(_):b||"}}",this.formatSeparator=$||",",this.unescapePrefix=_e?"":j||"-",this.unescapeSuffix=this.unescapePrefix?"":_e||"",this.nestingPrefix=et?regexEscape(et):tt||regexEscape("$t("),this.nestingSuffix=nt?regexEscape(nt):rt||regexEscape(")"),this.nestingOptionsSeparator=ot||",",this.maxReplaces=it||1e3,this.alwaysFormat=st!==void 0?st:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(o,a)=>o&&o.source===a?(o.lastIndex=0,o):new RegExp(a,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(s,o,a,c){let h,g,_;const b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},$=tt=>{if(tt.indexOf(this.formatSeparator)<0){const it=deepFindWithDefaults(o,b,tt,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(it,void 0,a,{...c,...o,interpolationkey:tt}):it}const nt=tt.split(this.formatSeparator),rt=nt.shift().trim(),ot=nt.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(o,b,rt,this.options.keySeparator,this.options.ignoreJSONStructure),ot,a,{...c,...o,interpolationkey:rt})};this.resetRegExp();const _e=c&&c.missingInterpolationHandler||this.options.missingInterpolationHandler,j=c&&c.interpolation&&c.interpolation.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:tt=>regexSafe(tt)},{regex:this.regexp,safeValue:tt=>this.escapeValue?regexSafe(this.escape(tt)):regexSafe(tt)}].forEach(tt=>{for(_=0;h=tt.regex.exec(s);){const nt=h[1].trim();if(g=$(nt),g===void 0)if(typeof _e=="function"){const ot=_e(s,h,c);g=typeof ot=="string"?ot:""}else if(c&&Object.prototype.hasOwnProperty.call(c,nt))g="";else if(j){g=h[0];continue}else this.logger.warn(`missed to pass in variable ${nt} for interpolating ${s}`),g="";else typeof g!="string"&&!this.useRawValueToEscape&&(g=makeString(g));const rt=tt.safeValue(g);if(s=s.replace(h[0],rt),j?(tt.regex.lastIndex+=g.length,tt.regex.lastIndex-=h[0].length):tt.regex.lastIndex=0,_++,_>=this.maxReplaces)break}}),s}nest(s,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c,h,g;const _=(b,$)=>{const _e=this.nestingOptionsSeparator;if(b.indexOf(_e)<0)return b;const j=b.split(new RegExp(`${_e}[ ]*{`));let et=`{${j[1]}`;b=j[0],et=this.interpolate(et,g);const tt=et.match(/'/g),nt=et.match(/"/g);(tt&&tt.length%2===0&&!nt||nt.length%2!==0)&&(et=et.replace(/'/g,'"'));try{g=JSON.parse(et),$&&(g={...$,...g})}catch(rt){return this.logger.warn(`failed parsing options string in nesting for key ${b}`,rt),`${b}${_e}${et}`}return g.defaultValue&&g.defaultValue.indexOf(this.prefix)>-1&&delete g.defaultValue,b};for(;c=this.nestingRegexp.exec(s);){let b=[];g={...a},g=g.replace&&typeof g.replace!="string"?g.replace:g,g.applyPostProcessor=!1,delete g.defaultValue;let $=!1;if(c[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(c[1])){const _e=c[1].split(this.formatSeparator).map(j=>j.trim());c[1]=_e.shift(),b=_e,$=!0}if(h=o(_.call(this,c[1].trim(),g),g),h&&c[0]===s&&typeof h!="string")return h;typeof h!="string"&&(h=makeString(h)),h||(this.logger.warn(`missed to resolve ${c[1]} for nesting ${s}`),h=""),$&&(h=b.reduce((_e,j)=>this.format(_e,j,a.lng,{...a,interpolationkey:c[1].trim()}),h.trim())),s=s.replace(c[0],h),this.regexp.lastIndex=0}return s}}const parseFormatStr=e=>{let s=e.toLowerCase().trim();const o={};if(e.indexOf("(")>-1){const a=e.split("(");s=a[0].toLowerCase().trim();const c=a[1].substring(0,a[1].length-1);s==="currency"&&c.indexOf(":")<0?o.currency||(o.currency=c.trim()):s==="relativetime"&&c.indexOf(":")<0?o.range||(o.range=c.trim()):c.split(";").forEach(g=>{if(g){const[_,...b]=g.split(":"),$=b.join(":").trim().replace(/^'+|'+$/g,""),_e=_.trim();o[_e]||(o[_e]=$),$==="false"&&(o[_e]=!1),$==="true"&&(o[_e]=!0),isNaN($)||(o[_e]=parseInt($,10))}})}return{formatName:s,formatOptions:o}},createCachedFormatter=e=>{const s={};return(o,a,c)=>{let h=c;c&&c.interpolationkey&&c.formatParams&&c.formatParams[c.interpolationkey]&&c[c.interpolationkey]&&(h={...h,[c.interpolationkey]:void 0});const g=a+JSON.stringify(h);let _=s[g];return _||(_=e(getCleanedCode(a),c),s[g]=_),_(o)}};class Formatter{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=s,this.formats={number:createCachedFormatter((o,a)=>{const c=new Intl.NumberFormat(o,{...a});return h=>c.format(h)}),currency:createCachedFormatter((o,a)=>{const c=new Intl.NumberFormat(o,{...a,style:"currency"});return h=>c.format(h)}),datetime:createCachedFormatter((o,a)=>{const c=new Intl.DateTimeFormat(o,{...a});return h=>c.format(h)}),relativetime:createCachedFormatter((o,a)=>{const c=new Intl.RelativeTimeFormat(o,{...a});return h=>c.format(h,a.range||"day")}),list:createCachedFormatter((o,a)=>{const c=new Intl.ListFormat(o,{...a});return h=>c.format(h)})},this.init(s)}init(s){const a=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||","}add(s,o){this.formats[s.toLowerCase().trim()]=o}addCached(s,o){this.formats[s.toLowerCase().trim()]=createCachedFormatter(o)}format(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const h=o.split(this.formatSeparator);if(h.length>1&&h[0].indexOf("(")>1&&h[0].indexOf(")")<0&&h.find(_=>_.indexOf(")")>-1)){const _=h.findIndex(b=>b.indexOf(")")>-1);h[0]=[h[0],...h.splice(1,_)].join(this.formatSeparator)}return h.reduce((_,b)=>{const{formatName:$,formatOptions:_e}=parseFormatStr(b);if(this.formats[$]){let j=_;try{const et=c&&c.formatParams&&c.formatParams[c.interpolationkey]||{},tt=et.locale||et.lng||c.locale||c.lng||a;j=this.formats[$](_,tt,{..._e,...c,...et})}catch(et){this.logger.warn(et)}return j}else this.logger.warn(`there was no format function for ${$}`);return _},s)}}const removePending=(e,s)=>{e.pending[s]!==void 0&&(delete e.pending[s],e.pendingCount--)};class Connector extends EventEmitter{constructor(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=s,this.store=o,this.services=a,this.languageUtils=a.languageUtils,this.options=c,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=c.maxParallelReads||10,this.readingCalls=0,this.maxRetries=c.maxRetries>=0?c.maxRetries:5,this.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(a,c.backend,c)}queueLoad(s,o,a,c){const h={},g={},_={},b={};return s.forEach($=>{let _e=!0;o.forEach(j=>{const et=`${$}|${j}`;!a.reload&&this.store.hasResourceBundle($,j)?this.state[et]=2:this.state[et]<0||(this.state[et]===1?g[et]===void 0&&(g[et]=!0):(this.state[et]=1,_e=!1,g[et]===void 0&&(g[et]=!0),h[et]===void 0&&(h[et]=!0),b[j]===void 0&&(b[j]=!0)))}),_e||(_[$]=!0)}),(Object.keys(h).length||Object.keys(g).length)&&this.queue.push({pending:g,pendingCount:Object.keys(g).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(h),pending:Object.keys(g),toLoadLanguages:Object.keys(_),toLoadNamespaces:Object.keys(b)}}loaded(s,o,a){const c=s.split("|"),h=c[0],g=c[1];o&&this.emit("failedLoading",h,g,o),!o&&a&&this.store.addResourceBundle(h,g,a,void 0,void 0,{skipCopy:!0}),this.state[s]=o?-1:2,o&&a&&(this.state[s]=0);const _={};this.queue.forEach(b=>{pushPath(b.loaded,[h],g),removePending(b,s),o&&b.errors.push(o),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach($=>{_[$]||(_[$]={});const _e=b.loaded[$];_e.length&&_e.forEach(j=>{_[$][j]===void 0&&(_[$][j]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",_),this.queue=this.queue.filter(b=>!b.done)}read(s,o,a){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,g=arguments.length>5?arguments[5]:void 0;if(!s.length)return g(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:o,fcName:a,tried:c,wait:h,callback:g});return}this.readingCalls++;const _=($,_e)=>{if(this.readingCalls--,this.waitingReads.length>0){const j=this.waitingReads.shift();this.read(j.lng,j.ns,j.fcName,j.tried,j.wait,j.callback)}if($&&_e&&c<this.maxRetries){setTimeout(()=>{this.read.call(this,s,o,a,c+1,h*2,g)},h);return}g($,_e)},b=this.backend[a].bind(this.backend);if(b.length===2){try{const $=b(s,o);$&&typeof $.then=="function"?$.then(_e=>_(null,_e)).catch(_):_(null,$)}catch($){_($)}return}return b(s,o,_)}prepareLoading(s,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof o=="string"&&(o=[o]);const h=this.queueLoad(s,o,a,c);if(!h.toLoad.length)return h.pending.length||c(),null;h.toLoad.forEach(g=>{this.loadOne(g)})}load(s,o,a){this.prepareLoading(s,o,{},a)}reload(s,o,a){this.prepareLoading(s,o,{reload:!0},a)}loadOne(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const a=s.split("|"),c=a[0],h=a[1];this.read(c,h,"read",void 0,void 0,(g,_)=>{g&&this.logger.warn(`${o}loading namespace ${h} for language ${c} failed`,g),!g&&_&&this.logger.log(`${o}loaded namespace ${h} for language ${c}`,_),this.loaded(s,g,_)})}saveMissing(s,o,a,c,h){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},_=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn(`did not save key "${a}" as the namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){const b={...g,isUpdate:h},$=this.backend.create.bind(this.backend);if($.length<6)try{let _e;$.length===5?_e=$(s,o,a,c,b):_e=$(s,o,a,c),_e&&typeof _e.then=="function"?_e.then(j=>_(null,j)).catch(_):_(null,_e)}catch(_e){_(_e)}else $(s,o,a,c,_,b)}!s||!s[0]||this.store.addResource(s[0],o,a,c)}}}const get=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let s={};if(typeof e[1]=="object"&&(s=e[1]),typeof e[1]=="string"&&(s.defaultValue=e[1]),typeof e[2]=="string"&&(s.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const o=e[3]||e[2];Object.keys(o).forEach(a=>{s[a]=o[a]})}return s},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=e=>(typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),noop=()=>{},bindMemberFunctions=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(o=>{typeof e[o]=="function"&&(e[o]=e[o].bind(e))})};class I18n extends EventEmitter{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(s),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),o&&!this.isInitialized&&!s.isClone){if(!this.options.initImmediate)return this.init(s,o),this;setTimeout(()=>{this.init(s,o)},0)}}init(){var s=this;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof o=="function"&&(a=o,o={}),!o.defaultNS&&o.defaultNS!==!1&&o.ns&&(typeof o.ns=="string"?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));const c=get();this.options={...c,...this.options,...transformOptions(o)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...c.interpolation,...this.options.interpolation}),o.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=o.keySeparator),o.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=o.nsSeparator);const h=_e=>_e?typeof _e=="function"?new _e:_e:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(h(this.modules.logger),this.options):baseLogger.init(null,this.options);let _e;this.modules.formatter?_e=this.modules.formatter:typeof Intl<"u"&&(_e=Formatter);const j=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const et=this.services;et.logger=baseLogger,et.resourceStore=this.store,et.languageUtils=j,et.pluralResolver=new PluralResolver(j,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),_e&&(!this.options.interpolation.format||this.options.interpolation.format===c.interpolation.format)&&(et.formatter=h(_e),et.formatter.init(et,this.options),this.options.interpolation.format=et.formatter.format.bind(et.formatter)),et.interpolator=new Interpolator(this.options),et.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},et.backendConnector=new Connector(h(this.modules.backend),et.resourceStore,et,this.options),et.backendConnector.on("*",function(tt){for(var nt=arguments.length,rt=new Array(nt>1?nt-1:0),ot=1;ot<nt;ot++)rt[ot-1]=arguments[ot];s.emit(tt,...rt)}),this.modules.languageDetector&&(et.languageDetector=h(this.modules.languageDetector),et.languageDetector.init&&et.languageDetector.init(et,this.options.detection,this.options)),this.modules.i18nFormat&&(et.i18nFormat=h(this.modules.i18nFormat),et.i18nFormat.init&&et.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(tt){for(var nt=arguments.length,rt=new Array(nt>1?nt-1:0),ot=1;ot<nt;ot++)rt[ot-1]=arguments[ot];s.emit(tt,...rt)}),this.modules.external.forEach(tt=>{tt.init&&tt.init(this)})}if(this.format=this.options.interpolation.format,a||(a=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const _e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);_e.length>0&&_e[0]!=="dev"&&(this.options.lng=_e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(_e=>{this[_e]=function(){return s.store[_e](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(_e=>{this[_e]=function(){return s.store[_e](...arguments),s}});const b=defer(),$=()=>{const _e=(j,et)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),b.resolve(et),a(j,et)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return _e(null,this.t.bind(this));this.changeLanguage(this.options.lng,_e)};return this.options.resources||!this.options.initImmediate?$():setTimeout($,0),b}loadResources(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const c=typeof s=="string"?s:this.language;if(typeof s=="function"&&(a=s),!this.options.resources||this.options.partialBundledLanguages){if(c&&c.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const h=[],g=_=>{if(!_||_==="cimode")return;this.services.languageUtils.toResolveHierarchy(_).forEach($=>{$!=="cimode"&&h.indexOf($)<0&&h.push($)})};c?g(c):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>g(b)),this.options.preload&&this.options.preload.forEach(_=>g(_)),this.services.backendConnector.load(h,this.options.ns,_=>{!_&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(_)})}else a(null)}reloadResources(s,o,a){const c=defer();return typeof s=="function"&&(a=s,s=void 0),typeof o=="function"&&(a=o,o=void 0),s||(s=this.languages),o||(o=this.options.ns),a||(a=noop),this.services.backendConnector.reload(s,o,h=>{c.resolve(),a(h)}),c}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&postProcessor.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(let o=0;o<this.languages.length;o++){const a=this.languages[o];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}changeLanguage(s,o){var a=this;this.isLanguageChangingTo=s;const c=defer();this.emit("languageChanging",s);const h=b=>{this.language=b,this.languages=this.services.languageUtils.toResolveHierarchy(b),this.resolvedLanguage=void 0,this.setResolvedLanguage(b)},g=(b,$)=>{$?(h($),this.translator.changeLanguage($),this.isLanguageChangingTo=void 0,this.emit("languageChanged",$),this.logger.log("languageChanged",$)):this.isLanguageChangingTo=void 0,c.resolve(function(){return a.t(...arguments)}),o&&o(b,function(){return a.t(...arguments)})},_=b=>{!s&&!b&&this.services.languageDetector&&(b=[]);const $=typeof b=="string"?b:this.services.languageUtils.getBestMatchFromCodes(b);$&&(this.language||h($),this.translator.language||this.translator.changeLanguage($),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage($)),this.loadResources($,_e=>{g(_e,$)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?_(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(_):this.services.languageDetector.detect(_):_(s),c}getFixedT(s,o,a){var c=this;const h=function(g,_){let b;if(typeof _!="object"){for(var $=arguments.length,_e=new Array($>2?$-2:0),j=2;j<$;j++)_e[j-2]=arguments[j];b=c.options.overloadTranslationOptionHandler([g,_].concat(_e))}else b={..._};b.lng=b.lng||h.lng,b.lngs=b.lngs||h.lngs,b.ns=b.ns||h.ns,b.keyPrefix!==""&&(b.keyPrefix=b.keyPrefix||a||h.keyPrefix);const et=c.options.keySeparator||".";let tt;return b.keyPrefix&&Array.isArray(g)?tt=g.map(nt=>`${b.keyPrefix}${et}${nt}`):tt=b.keyPrefix?`${b.keyPrefix}${et}${g}`:g,c.t(tt,b)};return typeof s=="string"?h.lng=s:h.lngs=s,h.ns=o,h.keyPrefix=a,h}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=o.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,h=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const g=(_,b)=>{const $=this.services.backendConnector.state[`${_}|${b}`];return $===-1||$===0||$===2};if(o.precheck){const _=o.precheck(this,g);if(_!==void 0)return _}return!!(this.hasResourceBundle(a,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||g(a,s)&&(!c||g(h,s)))}loadNamespaces(s,o){const a=defer();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(c=>{this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}),this.loadResources(c=>{a.resolve(),o&&o(c)}),a):(o&&o(),Promise.resolve())}loadLanguages(s,o){const a=defer();typeof s=="string"&&(s=[s]);const c=this.options.preload||[],h=s.filter(g=>c.indexOf(g)<0&&this.services.languageUtils.isSupportedCode(g));return h.length?(this.options.preload=c.concat(h),this.loadResources(g=>{a.resolve(),o&&o(g)}),a):(o&&o(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";const o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new LanguageUtil(get());return o.indexOf(a.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return new I18n(s,o)}cloneInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const a=s.forkResourceStore;a&&delete s.forkResourceStore;const c={...this.options,...s,isClone:!0},h=new I18n(c);return(s.debug!==void 0||s.prefix!==void 0)&&(h.logger=h.logger.clone(s)),["store","services","language"].forEach(_=>{h[_]=this[_]}),h.services={...this.services},h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},a&&(h.store=new ResourceStore(this.store.data,c),h.services.resourceStore=h.store),h.translator=new Translator(h.services,c),h.translator.on("*",function(_){for(var b=arguments.length,$=new Array(b>1?b-1:0),_e=1;_e<b;_e++)$[_e-1]=arguments[_e];h.emit(_,...$)}),h.init(c,o),h.translator.options=c,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const{slice,forEach}=[];function defaults(e){return forEach.call(slice.call(arguments,1),s=>{if(s)for(const o in s)e[o]===void 0&&(e[o]=s[o])}),e}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=(e,s,o)=>{const a=o||{};a.path=a.path||"/";const c=encodeURIComponent(s);let h=`${e}=${c}`;if(a.maxAge>0){const g=a.maxAge-0;if(Number.isNaN(g))throw new Error("maxAge should be a Number");h+=`; Max-Age=${Math.floor(g)}`}if(a.domain){if(!fieldContentRegExp.test(a.domain))throw new TypeError("option domain is invalid");h+=`; Domain=${a.domain}`}if(a.path){if(!fieldContentRegExp.test(a.path))throw new TypeError("option path is invalid");h+=`; Path=${a.path}`}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");h+=`; Expires=${a.expires.toUTCString()}`}if(a.httpOnly&&(h+="; HttpOnly"),a.secure&&(h+="; Secure"),a.sameSite)switch(typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite){case!0:h+="; SameSite=Strict";break;case"lax":h+="; SameSite=Lax";break;case"strict":h+="; SameSite=Strict";break;case"none":h+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return h},cookie={create(e,s,o,a){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};o&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+o*60*1e3)),a&&(c.domain=a),document.cookie=serializeCookie(e,encodeURIComponent(s),c)},read(e){const s=`${e}=`,o=document.cookie.split(";");for(let a=0;a<o.length;a++){let c=o[a];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return c.substring(s.length,c.length)}return null},remove(e){this.create(e,"",-1)}};var cookie$1={name:"cookie",lookup(e){let{lookupCookie:s}=e;if(s&&typeof document<"u")return cookie.read(s)||void 0},cacheUserLanguage(e,s){let{lookupCookie:o,cookieMinutes:a,cookieDomain:c,cookieOptions:h}=s;o&&typeof document<"u"&&cookie.create(o,e,a,c,h)}},querystring={name:"querystring",lookup(e){var a;let{lookupQuerystring:s}=e,o;if(typeof window<"u"){let{search:c}=window.location;!window.location.search&&((a=window.location.hash)==null?void 0:a.indexOf("?"))>-1&&(c=window.location.hash.substring(window.location.hash.indexOf("?")));const g=c.substring(1).split("&");for(let _=0;_<g.length;_++){const b=g[_].indexOf("=");b>0&&g[_].substring(0,b)===s&&(o=g[_].substring(b+1))}}return o}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(e){let{lookupLocalStorage:s}=e;if(s&&localStorageAvailable())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupLocalStorage:o}=s;o&&localStorageAvailable()&&window.localStorage.setItem(o,e)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(e){let{lookupSessionStorage:s}=e;if(s&&sessionStorageAvailable())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupSessionStorage:o}=s;o&&sessionStorageAvailable()&&window.sessionStorage.setItem(o,e)}},navigator$1={name:"navigator",lookup(e){const s=[];if(typeof navigator<"u"){const{languages:o,userLanguage:a,language:c}=navigator;if(o)for(let h=0;h<o.length;h++)s.push(o[h]);a&&s.push(a),c&&s.push(c)}return s.length>0?s:void 0}},htmlTag={name:"htmlTag",lookup(e){let{htmlTag:s}=e,o;const a=s||(typeof document<"u"?document.documentElement:null);return a&&typeof a.getAttribute=="function"&&(o=a.getAttribute("lang")),o}},path={name:"path",lookup(e){var c;let{lookupFromPathIndex:s}=e;if(typeof window>"u")return;const o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(c=o[typeof s=="number"?s:0])==null?void 0:c.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(e){var c,h;let{lookupFromSubdomainIndex:s}=e;const o=typeof s=="number"?s+1:1,a=typeof window<"u"&&((h=(c=window.location)==null?void 0:c.hostname)==null?void 0:h.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(a)return a[o]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class Browser{constructor(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,o)}init(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s||{languageUtils:{}},this.options=defaults(o,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=c=>c.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}addDetector(s){return this.detectors[s.name]=s,this}detect(s){s||(s=this.options.order);let o=[];return s.forEach(a=>{if(this.detectors[a]){let c=this.detectors[a].lookup(this.options);c&&typeof c=="string"&&(c=[c]),c&&(o=o.concat(c))}}),o=o.map(a=>this.options.convertDetectedLanguage(a)),this.services.languageUtils.getBestMatchFromCodes?o:o.length>0?o[0]:null}cacheUserLanguage(s,o){o||(o=this.options.caches),o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||o.forEach(a=>{this.detectors[a]&&this.detectors[a].cacheUserLanguage(s,this.options)}))}}Browser.type="languageDetector";const home$1={welcome:"NIPs Explorer",nostr_intro:"Nostr is an open protocol designed for decentralized communication. It allows users to send and receive messages and other data over a network of relays.",what_are_nips:"What are NIPs?",nips_intro:"NIPs (Nostr Implementation Possibilities) are proposals and standards that describe how various aspects of the Nostr protocol can be implemented. They help developers create compatible and interoperable applications.",nips_docs:"NIPs are documents that describe various aspects of the Nostr protocol. They can propose new features, improve existing features, or provide best practices for implementing the protocol.",nips_website:"On this website, you will find explanations and examples of various NIPs to help you better understand and use the Nostr protocol.",what_are_relays:"What are Relays?",relays_intro:"Relays are servers that forward messages and other data in the Nostr network. They act as intermediaries between clients, ensuring that messages are delivered to the correct recipients. Anyone can operate a relay server, and users can connect to multiple relays to increase the availability and reliability of communication.",what_are_clients:"What are Clients?",clients_intro:"Clients are applications that users use to interact with the Nostr network. They allow users to send and receive messages, publish data, and access information shared by other users. Clients can come in various forms, including web applications, mobile apps, and desktop programs.",summary:"Summary",summary_text:"Nostr is a decentralized communication protocol based on relays and clients. NIPs provide the standards and proposals that help developers implement and extend the protocol. This website offers an introduction to Nostr and NIPs, as well as examples and explanations to help you better understand and use the protocol."},nip1$1={nip1_title:"NIP-01",key_protocol:"Key Protocol",key_protocol_description:"This NIP defines the basic protocol that should be implemented by all. It describes the structure and flow of events.",event_format:"Event Format",event_format_description:"Events have a specific format that includes a type, tags, content, and signature. The signature is based on the SHA-256 hash of the serialized event data.",filters_and_subscriptions:"Filters and Subscriptions",filters_and_subscriptions_description:"Clients can use filters to subscribe to specific events from relays. Filters can be specified by IDs, authors, types, and timestamps.",websocket_connections:"WebSocket Connections",websocket_connections_description:"Relays provide WebSocket endpoints that clients can connect to. Clients should use a single WebSocket connection per relay.",example_usage:"Example Usage",example_usage_intro:"Here is a simple example of using events in a protocol:",example_usage_scenario:"Imagine you want to create an event that represents a message from a user. The event might look like this:",example_message_content:"Hello, how are you?",example_explanation:"In this example:",example_id:"A unique identifier for the event.",example_pubkey:"The username or ID of the author.",example_created_at:"The creation date of the event in Unix timestamp.",example_kind:"The type of event, in this case, a message.",example_tags:"A list of tags that categorize the event.",example_content:"The actual content of the message.",example_sig:"A digital signature that ensures the integrity and authenticity of the event.",example_filters:"Clients can then use filters to subscribe to only specific events, e.g., all messages from 'user123' or all events with the tag 'chat'.",event_fetcher:"Event Fetcher",fetched_event:"Fetched Event",detailed_github_page:"Detailed GitHub Page"},nip2$1={nip2_title:"NIP-02",description:"This NIP describes the second implementation possibility for the Nostr protocol.",details:"Here is a detailed explanation of NIP-02.",example_usage:"Example Usage",example_usage_intro:"Here is a simple example of using NIP-02 in a protocol:",example_usage_scenario:"Imagine you want to create an event that represents a user action. The event might look like this:",example_message_content:"User action example content",example_explanation:"In this example:",example_id:"A unique identifier for the event.",example_pubkey:"The username or ID of the author.",example_created_at:"The creation date of the event in Unix timestamp.",example_kind:"The type of event, in this case, a user action.",example_tags:"A list of tags that categorize the event.",example_content:"The actual content of the user action.",example_sig:"A digital signature that ensures the integrity and authenticity of the event.",example_filters:"Clients can then use filters to subscribe to only specific events, e.g., all actions from 'user123' or all events with the tag 'action'.",event_fetcher:"Event Fetcher",fetched_event:"Fetched Event",detailed_github_page:"Detailed GitHub Page"},translationEN={home:home$1,nip1:nip1$1,nip2:nip2$1},home={welcome:"NIPs Explorer",nostr_intro:"Nostr ist ein offenes Protokoll fr dezentrale Kommunikation. Es ermglicht Benutzern, Nachrichten und andere Daten ber ein Netzwerk von Relays zu senden und zu empfangen.",what_are_nips:"Was sind NIPs?",nips_intro:"NIPs (Nostr Implementation Possibilities) sind Vorschlge und Standards, die beschreiben, wie verschiedene Aspekte des Nostr-Protokolls implementiert werden knnen. Sie helfen Entwicklern, kompatible und interoperable Anwendungen zu erstellen.",nips_docs:"NIPs sind Dokumente, die verschiedene Aspekte des Nostr-Protokolls beschreiben. Sie knnen neue Funktionen vorschlagen, bestehende Funktionen verbessern oder bewhrte Verfahren zur Implementierung des Protokolls bereitstellen.",nips_website:"Auf dieser Website finden Sie Erklrungen und Beispiele zu verschiedenen NIPs, die Ihnen helfen, das Nostr-Protokoll besser zu verstehen und zu nutzen.",what_are_relays:"Was sind Relays?",relays_intro:"Relays sind Server, die Nachrichten und andere Daten im Nostr-Netzwerk weiterleiten. Sie fungieren als Vermittler zwischen Clients und stellen sicher, dass Nachrichten an die richtigen Empfnger zugestellt werden. Jeder kann einen Relay-Server betreiben, und Benutzer knnen sich mit mehreren Relays verbinden, um die Verfgbarkeit und Zuverlssigkeit der Kommunikation zu erhhen.",what_are_clients:"Was sind Clients?",clients_intro:"Clients sind Anwendungen, die Benutzer verwenden, um mit dem Nostr-Netzwerk zu interagieren. Sie ermglichen es Benutzern, Nachrichten zu senden und zu empfangen, Daten zu verffentlichen und auf Informationen zuzugreifen, die von anderen Benutzern geteilt werden. Clients knnen in verschiedenen Formen vorliegen, einschlielich Webanwendungen, mobilen Apps und Desktop-Programmen.",summary:"Zusammenfassung",summary_text:"Nostr ist ein dezentrales Kommunikationsprotokoll, das auf Relays und Clients basiert. NIPs bieten die Standards und Vorschlge, die Entwicklern helfen, das Protokoll zu implementieren und zu erweitern. Diese Website bietet eine Einfhrung in Nostr und NIPs sowie Beispiele und Erklrungen, die Ihnen helfen, das Protokoll besser zu verstehen und zu nutzen."},nip1={nip1_title:"NIP-01",key_protocol:"Grundprotokoll",key_protocol_description:"Dieses NIP definiert das grundlegende Protokoll, das von allen implementiert werden sollte. Es beschreibt die Struktur und den Ablauf von Ereignissen.",event_format:"Ereignisformat",event_format_description:"Ereignisse haben ein bestimmtes Format, das eine Art, Tags, Inhalt und Signatur umfasst. Die Signatur basiert auf dem SHA-256-Hash der serialisierten Ereignisdaten.",filters_and_subscriptions:"Filter und Abonnements",filters_and_subscriptions_description:"Clients knnen Filter verwenden, um bestimmte Ereignisse von Relays zu abonnieren. Filter knnen nach IDs, Autoren, Arten und Zeitstempeln spezifiziert werden.",websocket_connections:"WebSocket-Verbindungen",websocket_connections_description:"Relays stellen WebSocket-Endpunkte bereit, an die sich Clients verbinden knnen. Clients sollten eine einzelne WebSocket-Verbindung pro Relay verwenden.",example_usage:"Beispiel fr die Verwendung",example_usage_intro:"Hier ist ein einfaches Beispiel fr die Verwendung von Ereignissen in einem Protokoll:",example_usage_scenario:"Stell dir vor, du mchtest ein Ereignis erstellen, das eine Nachricht von einem Benutzer darstellt. Das Ereignis knnte so aussehen:",example_message_content:"Hallo, wie geht's?",example_explanation:"In diesem Beispiel:",example_id:"Eine eindeutige Kennung fr das Ereignis.",example_pubkey:"Der Benutzername oder die ID des Autors.",example_created_at:"Das Erstellungsdatum des Ereignisses in Unix-Zeitstempel.",example_kind:"Die Art des Ereignisses, in diesem Fall eine Nachricht.",example_tags:"Eine Liste von Tags, die das Ereignis kategorisieren.",example_content:"Der eigentliche Inhalt der Nachricht.",example_sig:"Eine digitale Signatur, die die Integritt und Authentizitt des Ereignisses sicherstellt.",example_filters:"Clients knnen dann Filter verwenden, um nur bestimmte Ereignisse zu abonnieren, z.B. alle Nachrichten von 'user123' oder alle Ereignisse mit Tag 'chat'.",event_fetcher:"Event Fetcher",fetched_event:"Fetched Event",detailed_github_page:"Detaillierte GitHub-Seite"},nip2={nip2_title:"NIP-02",description:"Dieses NIP beschreibt die zweite Implementierungsmglichkeit fr das Nostr-Protokoll.",details:"Hier ist eine detaillierte Erklrung von NIP-02.",example_usage:"Beispiel fr die Verwendung",example_usage_intro:"Hier ist ein einfaches Beispiel fr die Verwendung von NIP-02 in einem Protokoll:",example_usage_scenario:"Stell dir vor, du mchtest ein Ereignis erstellen, das eine Benutzeraktion darstellt. Das Ereignis knnte so aussehen:",example_message_content:"Beispielinhalt fr Benutzeraktion",example_explanation:"In diesem Beispiel:",example_id:"Eine eindeutige Kennung fr das Ereignis.",example_pubkey:"Der Benutzername oder die ID des Autors.",example_created_at:"Das Erstellungsdatum des Ereignisses in Unix-Zeitstempel.",example_kind:"Die Art des Ereignisses, in diesem Fall eine Benutzeraktion.",example_tags:"Eine Liste von Tags, die das Ereignis kategorisieren.",example_content:"Der eigentliche Inhalt der Benutzeraktion.",example_sig:"Eine digitale Signatur, die die Integritt und Authentizitt des Ereignisses sicherstellt.",example_filters:"Clients knnen dann Filter verwenden, um nur bestimmte Ereignisse zu abonnieren, z.B. alle Aktionen von 'user123' oder alle Ereignisse mit dem Tag 'action'.",event_fetcher:"Event Fetcher",fetched_event:"Fetched Event",detailed_github_page:"Detaillierte GitHub-Seite"},translationDE={home,nip1,nip2},resources={en:{home:translationEN.home,nip1:translationEN.nip1,nip2:translationEN.nip2},de:{home:translationDE.home,nip1:translationDE.nip1,nip2:translationDE.nip2}};instance.use(Browser).use(initReactI18next).init({resources,fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,defaultNS:"home",ns:["home","nip1","nip2"],detection:{order:["localStorage","navigator"],caches:["localStorage"]}});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
