var Ki=Object.defineProperty;var zi=(t,e,n)=>e in t?Ki(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ne=(t,e,n)=>zi(t,typeof e!="symbol"?e+"":e,n);var dr={exports:{}},hr={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(y,x){var A=y.length;y.push(x);e:for(;0<A;){var N=A-1>>>1,B=y[N];if(0<i(B,x))y[N]=x,y[A]=B,A=N;else break e}}function n(y){return y.length===0?null:y[0]}function r(y){if(y.length===0)return null;var x=y[0],A=y.pop();if(A!==x){y[0]=A;e:for(var N=0,B=y.length,K=B>>>1;N<K;){var z=2*(N+1)-1,re=y[z],Y=z+1,X=y[Y];if(0>i(re,A))Y<B&&0>i(X,re)?(y[N]=X,y[Y]=A,N=Y):(y[N]=re,y[z]=A,N=z);else if(Y<B&&0>i(X,A))y[N]=X,y[Y]=A,N=Y;else break e}}return x}function i(y,x){var A=y.sortIndex-x.sortIndex;return A!==0?A:y.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,u=null,d=3,p=!1,m=!1,h=!1,g=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(y){for(var x=n(c);x!==null;){if(x.callback===null)r(c);else if(x.startTime<=y)r(c),x.sortIndex=x.expirationTime,e(a,x);else break;x=n(c)}}function k(y){if(h=!1,C(y),!m)if(n(a)!==null)m=!0,v(I);else{var x=n(c);x!==null&&$(k,x.startTime-y)}}function I(y,x){m=!1,h&&(h=!1,w(O),O=-1),p=!0;var A=d;try{for(C(x),u=n(a);u!==null&&(!(u.expirationTime>x)||y&&!R());){var N=u.callback;if(typeof N=="function"){u.callback=null,d=u.priorityLevel;var B=N(u.expirationTime<=x);x=t.unstable_now(),typeof B=="function"?u.callback=B:u===n(a)&&r(a),C(x)}else r(a);u=n(a)}if(u!==null)var K=!0;else{var z=n(c);z!==null&&$(k,z.startTime-x),K=!1}return K}finally{u=null,d=A,p=!1}}var E=!1,L=null,O=-1,H=5,T=-1;function R(){return!(t.unstable_now()-T<H)}function P(){if(L!==null){var y=t.unstable_now();T=y;var x=!0;try{x=L(!0,y)}finally{x?U():(E=!1,L=null)}}else E=!1}var U;if(typeof S=="function")U=function(){S(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,b=D.port2;D.port1.onmessage=P,U=function(){b.postMessage(null)}}else U=function(){g(P,0)};function v(y){L=y,E||(E=!0,U())}function $(y,x){O=g(function(){y(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(y){y.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,v(I))},t.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<y?Math.floor(1e3/y):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(y){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var A=d;d=x;try{return y()}finally{d=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(y,x){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var A=d;d=y;try{return x()}finally{d=A}},t.unstable_scheduleCallback=function(y,x,A){var N=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?N+A:N):A=N,y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=A+B,y={id:f++,callback:x,priorityLevel:y,startTime:A,expirationTime:B,sortIndex:-1},A>N?(y.sortIndex=A,e(c,y),n(a)===null&&y===n(c)&&(h?(w(O),O=-1):h=!0,$(k,A-N))):(y.sortIndex=B,e(a,y),m||p||(m=!0,v(I))),y},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(y){var x=d;return function(){var A=d;d=x;try{return y.apply(this,arguments)}finally{d=A}}}})(hr);dr.exports=hr;var lu=dr.exports;const qi={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class rt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||qi,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new rt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new rt(this.logger,e)}}var oe=new rt;class dt{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,a]=o;for(let c=0;c<a;c++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,a]=o;for(let c=0;c<a;c++)l.apply(l,[e,...r])})}}const Ke=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},Tn=t=>t==null?"":""+t,Wi=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Zi=/###/g,Un=t=>t&&t.indexOf("###")>-1?t.replace(Zi,"."):t,Pn=t=>!t||typeof t=="string",Je=(t,e,n)=>{const r=typeof e!="string"?e:e.split(".");let i=0;for(;i<r.length-1;){if(Pn(t))return{};const s=Un(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return Pn(t)?{}:{obj:t,k:Un(r[i])}},_n=(t,e,n)=>{const{obj:r,k:i}=Je(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),l=Je(t,o,Object);for(;l.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),l=Je(t,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n},Ji=(t,e,n,r)=>{const{obj:i,k:s}=Je(t,e,Object);i[s]=i[s]||[],i[s].push(n)},it=(t,e)=>{const{obj:n,k:r}=Je(t,e);if(n)return n[r]},Gi=(t,e,n)=>{const r=it(t,n);return r!==void 0?r:it(e,n)},gr=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):gr(t[r],e[r],n):t[r]=e[r]);return t},Be=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xi=t=>typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>Yi[e]):t;class Qi{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const es=[" ",",","?","!",";"],ts=new Qi(20),ns=(t,e,n)=>{e=e||"",n=n||"";const r=es.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=ts.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},Mt=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let a=s;a<r.length;++a)if(a!==s&&(l+=n),l+=r[a],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&a<r.length-1)continue;s+=a-s+1;break}i=o}return i},st=t=>t&&t.replace("_","-");class Hn extends dt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],r&&(Array.isArray(r)?l.push(...r):typeof r=="string"&&s?l.push(...r.split(s)):l.push(r)));const a=it(this.data,l);return!a&&!n&&!r&&e.indexOf(".")>-1&&(e=l[0],n=l[1],r=l.slice(2).join(".")),a||!o||typeof r!="string"?a:Mt(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,n];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),i=n,n=l[1]),this.addNamespaces(n),_n(this.data,l,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=n,n=l[1]),this.addNamespaces(n);let a=it(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?gr(a,r,s):a={...a,...r},_n(this.data,l,a),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var pr={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const Dn={};class ot extends dt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Wi(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=oe.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ns(e,r,i);if(o&&!l){const a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],n),a=l[l.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(f){const k=n.nsSeparator||this.options.nsSeparator;return i?{res:`${a}${k}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:`${a}${k}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:o}const u=this.resolve(e,n);let d=u&&u.res;const p=u&&u.usedKey||o,m=u&&u.exactUsedKey||o,h=Object.prototype.toString.apply(d),g=["[object Number]","[object Function]","[object RegExp]"],w=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject;if(S&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&g.indexOf(h)<0&&!(typeof w=="string"&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...n,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(u.res=k,u.usedParams=this.getUsedParamsDetails(n),u):k}if(s){const k=Array.isArray(d),I=k?[]:{},E=k?m:p;for(const L in d)if(Object.prototype.hasOwnProperty.call(d,L)){const O=`${E}${s}${L}`;I[L]=this.translate(O,{...n,joinArrays:!1,ns:l}),I[L]===O&&(I[L]=d[L])}d=I}}else if(S&&typeof w=="string"&&Array.isArray(d))d=d.join(w),d&&(d=this.extendTranslation(d,e,n,r));else{let k=!1,I=!1;const E=n.count!==void 0&&typeof n.count!="string",L=ot.hasDefaultValue(n),O=E?this.pluralResolver.getSuffix(c,n.count,n):"",H=n.ordinal&&E?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",T=E&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),R=T&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${O}`]||n[`defaultValue${H}`]||n.defaultValue;!this.isValidLookup(d)&&L&&(k=!0,d=R),this.isValidLookup(d)||(I=!0,d=o);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:d,D=L&&R!==d&&this.options.updateMissing;if(I||k||D){if(this.logger.log(D?"updateKey":"missingKey",c,a,o,D?R:d),s){const y=this.resolve(o,{...n,keySeparator:!1});y&&y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let b=[];const v=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&v&&v[0])for(let y=0;y<v.length;y++)b.push(v[y]);else this.options.saveMissingTo==="all"?b=this.languageUtils.toResolveHierarchy(n.lng||this.language):b.push(n.lng||this.language);const $=(y,x,A)=>{const N=L&&A!==d?A:U;this.options.missingKeyHandler?this.options.missingKeyHandler(y,a,x,N,D,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(y,a,x,N,D,n),this.emit("missingKey",y,a,x,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?b.forEach(y=>{const x=this.pluralResolver.getSuffixes(y,n);T&&n[`defaultValue${this.options.pluralSeparator}zero`]&&x.indexOf(`${this.options.pluralSeparator}zero`)<0&&x.push(`${this.options.pluralSeparator}zero`),x.forEach(A=>{$([y],o+A,n[`defaultValue${A}`]||R)})}):$(b,o,R))}d=this.extendTranslation(d,e,n,u,r),I&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${o}`),(I||k)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${o}`:o,k?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(u.res=d,u.usedParams=this.getUsedParamsDetails(n),u):d}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(c){const d=e.match(this.interpolator.nestingRegexp);f=d&&d.length}let u=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,r.lng||this.language||i.usedLng,r),c){const d=e.match(this.interpolator.nestingRegexp),p=d&&d.length;f<p&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,p=new Array(d),m=0;m<d;m++)p[m]=arguments[m];return s&&s[0]===p[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):o.translate(...p,n)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,a=typeof l=="string"?[l]:l;return e!=null&&a&&a.length&&r.applyPostProcessor!==!1&&(e=pr.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,l;return typeof e=="string"&&(e=[e]),e.forEach(a=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(a,n),f=c.key;i=f;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=n.count!==void 0&&typeof n.count!="string",p=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",h=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);u.forEach(g=>{this.isValidLookup(r)||(l=g,!Dn[`${h[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Dn[`${h[0]}-${g}`]=!0,this.logger.warn(`key "${i}" for languages "${h.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(w=>{if(this.isValidLookup(r))return;o=w;const S=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(S,f,w,g,n);else{let k;d&&(k=this.pluralResolver.getSuffix(w,n.count,n));const I=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(S.push(f+k),n.ordinal&&k.indexOf(E)===0&&S.push(f+k.replace(E,this.options.pluralSeparator)),p&&S.push(f+I)),m){const L=`${f}${this.options.contextSeparator}${n.context}`;S.push(L),d&&(S.push(L+k),n.ordinal&&k.indexOf(E)===0&&S.push(L+k.replace(E,this.options.pluralSeparator)),p&&S.push(L+I))}}let C;for(;C=S.pop();)this.isValidLookup(r)||(s=C,r=this.getResource(w,g,C,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Ot=t=>t.charAt(0).toUpperCase()+t.slice(1);class Mn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=oe.create("languageUtils")}getScriptPartFromCode(e){if(e=st(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=st(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ot(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ot(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ot(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let rs=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],is={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const ss=["v1","v2","v3"],os=["v4"],jn={zero:0,one:1,two:2,few:3,many:4,other:5},as=()=>{const t={};return rs.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:is[e.fc]}})}),t};class ls{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=oe.create("pluralResolver"),(!this.options.compatibilityJSON||os.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=as(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=st(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];const o=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[s]=o,o}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>jn[i]-jn[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!ss.includes(this.options.compatibilityJSON)}}const Fn=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Gi(t,e,n);return!s&&i&&typeof n=="string"&&(s=Mt(t,n,r),s===void 0&&(s=Mt(e,n,r))),s},$t=t=>t.replace(/\$/g,"$$$$");class cs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=oe.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:l,suffixEscaped:a,formatSeparator:c,unescapeSuffix:f,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:h,nestingOptionsSeparator:g,maxReplaces:w,alwaysFormat:S}=e.interpolation;this.escape=n!==void 0?n:Xi,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Be(s):o||"{{",this.suffix=l?Be(l):a||"}}",this.formatSeparator=c||",",this.unescapePrefix=f?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=d?Be(d):p||Be("$t("),this.nestingSuffix=m?Be(m):h||Be(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=w||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,l;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=p=>{if(p.indexOf(this.formatSeparator)<0){const w=Fn(n,a,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...i,...n,interpolationkey:p}):w}const m=p.split(this.formatSeparator),h=m.shift().trim(),g=m.join(this.formatSeparator).trim();return this.format(Fn(n,a,h,this.options.keySeparator,this.options.ignoreJSONStructure),g,r,{...i,...n,interpolationkey:h})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,u=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>$t(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?$t(this.escape(p)):$t(p)}].forEach(p=>{for(l=0;s=p.regex.exec(e);){const m=s[1].trim();if(o=c(m),o===void 0)if(typeof f=="function"){const g=f(e,s,i);o=typeof g=="string"?g:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(u){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=Tn(o));const h=p.safeValue(o);if(e=e.replace(s[0],h),u?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const l=(a,c)=>{const f=this.nestingOptionsSeparator;if(a.indexOf(f)<0)return a;const u=a.split(new RegExp(`${f}[ ]*{`));let d=`{${u[1]}`;a=u[0],d=this.interpolate(d,o);const p=d.match(/'/g),m=d.match(/"/g);(p&&p.length%2===0&&!m||m.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),c&&(o={...c,...o})}catch(h){return this.logger.warn(`failed parsing options string in nesting for key ${a}`,h),`${a}${f}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,a};for(;i=this.nestingRegexp.exec(e);){let a=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const f=i[1].split(this.formatSeparator).map(u=>u.trim());i[1]=f.shift(),a=f,c=!0}if(s=n(l.call(this,i[1].trim(),o),o),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=Tn(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=a.reduce((f,u)=>this.format(f,u,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const us=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...a]=o.split(":"),c=a.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();n[f]||(n[f]=c),c==="false"&&(n[f]=!1),c==="true"&&(n[f]=!0),isNaN(c)||(n[f]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Te=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let l=e[o];return l||(l=t(st(r),i),e[o]=l),l(n)}};class fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=oe.create("formatter"),this.options=e,this.formats={number:Te((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:Te((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:Te((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:Te((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:Te((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Te(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(a=>a.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,a)=>{const{formatName:c,formatOptions:f}=us(a);if(this.formats[c]){let u=l;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=d.locale||d.lng||i.locale||i.lng||r;u=this.formats[c](l,p,{...f,...i,...d})}catch(d){this.logger.warn(d)}return u}else this.logger.warn(`there was no format function for ${c}`);return l},e)}}const ds=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class hs extends dt{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=oe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},l={},a={};return e.forEach(c=>{let f=!0;n.forEach(u=>{const d=`${c}|${u}`;!r.reload&&this.store.hasResourceBundle(c,u)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,f=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),a[u]===void 0&&(a[u]=!0)))}),f||(l[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(a)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const l={};this.queue.forEach(a=>{Ji(a.loaded,[s],o),ds(a,e),n&&a.errors.push(n),a.pendingCount===0&&!a.done&&(Object.keys(a.loaded).forEach(c=>{l[c]||(l[c]={});const f=a.loaded[c];f.length&&f.forEach(u=>{l[c][u]===void 0&&(l[c][u]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(a=>!a.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const l=(c,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(c&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,f)},a=this.backend[r].bind(this.backend);if(a.length===2){try{const c=a(e,n);c&&typeof c.then=="function"?c.then(f=>l(null,f)).catch(l):l(null,c)}catch(c){l(c)}return}return a(e,n,l)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,l),this.loaded(e,o,l)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const a={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let f;c.length===5?f=c(e,n,r,i,a):f=c(e,n,r,i),f&&typeof f.then=="function"?f.then(u=>l(null,u)).catch(l):l(null,f)}catch(f){l(f)}else c(e,n,r,i,l,a)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const Vn=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Kn=t=>(typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),et=()=>{},gs=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ge extends dt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Kn(e),this.services={},this.logger=oe,this.modules={external:[]},gs(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=Vn();this.options={...i,...this.options,...Kn(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?oe.init(s(this.modules.logger),this.options):oe.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=fs);const u=new Mn(this.options);this.store=new Hn(this.options.resources,this.options);const d=this.services;d.logger=oe,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new ls(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(f),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new cs(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new hs(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(p){for(var m=arguments.length,h=new Array(m>1?m-1:0),g=1;g<m;g++)h[g-1]=arguments[g];e.emit(p,...h)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new ot(this.services,this.options),this.translator.on("*",function(p){for(var m=arguments.length,h=new Array(m>1?m-1:0),g=1;g<m;g++)h[g-1]=arguments[g];e.emit(p,...h)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=et),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return e.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return e.store[f](...arguments),e}});const a=Ke(),c=()=>{const f=(u,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),r(u,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),a}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:et;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(a=>o(a)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){const i=Ke();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=et),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&pr.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Ke();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(a,function(){return r.t(...arguments)})},l=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=typeof a=="string"?a:this.services.languageUtils.getBestMatchFromCodes(a);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,f=>{o(f,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),i}getFixedT(e,n,r){var i=this;const s=function(o,l){let a;if(typeof l!="object"){for(var c=arguments.length,f=new Array(c>2?c-2:0),u=2;u<c;u++)f[u-2]=arguments[u];a=i.options.overloadTranslationOptionHandler([o,l].concat(f))}else a={...l};a.lng=a.lng||s.lng,a.lngs=a.lngs||s.lngs,a.ns=a.ns||s.ns,a.keyPrefix!==""&&(a.keyPrefix=a.keyPrefix||r||s.keyPrefix);const d=i.options.keySeparator||".";let p;return a.keyPrefix&&Array.isArray(o)?p=o.map(m=>`${a.keyPrefix}${d}${m}`):p=a.keyPrefix?`${a.keyPrefix}${d}${o}`:o,i.t(p,a)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,a)=>{const c=this.services.backendConnector.state[`${l}|${a}`];return c===-1||c===0||c===2};if(n.precheck){const l=n.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Ke();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Ke();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Mn(Vn());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Ge(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:et;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Ge(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new Hn(this.store.data,i),s.services.resourceStore=s.store),s.translator=new ot(s.services,i),s.translator.on("*",function(l){for(var a=arguments.length,c=new Array(a>1?a-1:0),f=1;f<a;f++)c[f-1]=arguments[f];s.emit(l,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const J=Ge.createInstance();J.createInstance=Ge.createInstance;J.createInstance;J.dir;J.init;J.loadResources;J.reloadResources;J.use;J.changeLanguage;J.getFixedT;J.t;J.exists;J.setDefaultNamespace;J.hasLoadedNamespace;J.loadNamespaces;J.loadLanguages;const{slice:ps,forEach:ms}=[];function ys(t){return ms.call(ps.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const zn=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ws=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!zn.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!zn.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},qn={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=ws(t,encodeURIComponent(e),i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t){this.create(t,"",-1)}};var bs={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return qn.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&qn.create(n,t,r,i,s)}},xs={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let l=0;l<o.length;l++){const a=o[l].indexOf("=");a>0&&o[l].substring(0,a)===e&&(n=o[l].substring(a+1))}}return n}};let ze=null;const Wn=()=>{if(ze!==null)return ze;try{ze=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{ze=!1}return ze};var vs={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Wn())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Wn()&&window.localStorage.setItem(n,t)}};let qe=null;const Zn=()=>{if(qe!==null)return qe;try{qe=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{qe=!1}return qe};var Es={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Zn())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Zn()&&window.sessionStorage.setItem(n,t)}},Ss={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},Ls={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},As={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},ks={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Os(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class $s{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=ys(n,this.options||{},Os()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(bs),this.addDetector(xs),this.addDetector(vs),this.addDetector(Es),this.addDetector(Ss),this.addDetector(Ls),this.addDetector(As),this.addDetector(ks)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}$s.type="languageDetector";function Jn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function mr(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Is(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jn(t.outputLen),Jn(t.blockLen)}function at(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cs(t,e){mr(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const It=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yr=t=>t instanceof Uint8Array,Ct=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ie=(t,e)=>t<<32-e|t>>>e,Rs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Rs)throw new Error("Non little-endian hardware is not supported");function Ns(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function en(t){if(typeof t=="string"&&(t=Ns(t)),!yr(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Bs(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!yr(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let wr=class{clone(){return this._cloneInto()}};function Ts(t){const e=r=>t().update(en(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function br(t=32){if(It&&typeof It.getRandomValues=="function")return It.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Us(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,c=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+c,l,r)}let Ps=class extends wr{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ct(this.buffer)}update(e){at(this);const{view:n,buffer:r,blockLen:i}=this;e=en(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=Ct(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){at(this),Cs(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let u=o;u<i;u++)n[u]=0;Us(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=Ct(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)l.setUint32(4*u,f[u],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const _s=(t,e,n)=>t&e^~t&n,Hs=(t,e,n)=>t&e^t&n^e&n,Ds=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ye=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),we=new Uint32Array(64);let Ms=class extends Ps{constructor(){super(64,32,8,!1),this.A=ye[0]|0,this.B=ye[1]|0,this.C=ye[2]|0,this.D=ye[3]|0,this.E=ye[4]|0,this.F=ye[5]|0,this.G=ye[6]|0,this.H=ye[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:l,H:a}=this;return[e,n,r,i,s,o,l,a]}set(e,n,r,i,s,o,l,a){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=a|0}process(e,n){for(let u=0;u<16;u++,n+=4)we[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const d=we[u-15],p=we[u-2],m=ie(d,7)^ie(d,18)^d>>>3,h=ie(p,17)^ie(p,19)^p>>>10;we[u]=h+we[u-7]+m+we[u-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:a,G:c,H:f}=this;for(let u=0;u<64;u++){const d=ie(l,6)^ie(l,11)^ie(l,25),p=f+d+_s(l,a,c)+Ds[u]+we[u]|0,h=(ie(r,2)^ie(r,13)^ie(r,22))+Hs(r,i,s)|0;f=c,c=a,a=l,l=o+p|0,o=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,a=a+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,i,s,o,l,a,c,f)}roundClean(){we.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const jt=Ts(()=>new Ms);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xr=BigInt(0),ht=BigInt(1),js=BigInt(2),gt=t=>t instanceof Uint8Array,Fs=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _e(t){if(!gt(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Fs[t[n]];return e}function vr(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function tn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function He(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function G(t){return tn(_e(t))}function nn(t){if(!gt(t))throw new Error("Uint8Array expected");return tn(_e(Uint8Array.from(t).reverse()))}function Se(t,e){return He(t.toString(16).padStart(e*2,"0"))}function rn(t,e){return Se(t,e).reverse()}function Vs(t){return He(vr(t))}function q(t,e,n){let r;if(typeof e=="string")try{r=He(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(gt(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function $e(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!gt(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function Ks(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function zs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function qs(t){let e;for(e=0;t>xr;t>>=ht,e+=1);return e}function Ws(t,e){return t>>BigInt(e)&ht}const Zs=(t,e,n)=>t|(n?ht:xr)<<BigInt(e),sn=t=>(js<<BigInt(t-1))-ht,Rt=t=>new Uint8Array(t),Gn=t=>Uint8Array.from(t);function Er(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Rt(t),i=Rt(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},l=(...u)=>n(i,r,...u),a=(u=Rt())=>{i=l(Gn([0]),u),r=l(),u.length!==0&&(i=l(Gn([1]),u),r=l())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=l();const p=r.slice();d.push(p),u+=r.length}return $e(...d)};return(u,d)=>{o(),a(u);let p;for(;!(p=d(c()));)a();return o(),p}}const Js={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Qe(t,e,n={}){const r=(i,s,o)=>{const l=Js[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const a=t[i];if(!(o&&a===void 0)&&!l(a,t))throw new Error(`Invalid param ${String(i)}=${a} (${typeof a}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Gs=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ws,bitLen:qs,bitMask:sn,bitSet:Zs,bytesToHex:_e,bytesToNumberBE:G,bytesToNumberLE:nn,concatBytes:$e,createHmacDrbg:Er,ensureBytes:q,equalBytes:Ks,hexToBytes:He,hexToNumber:tn,numberToBytesBE:Se,numberToBytesLE:rn,numberToHexUnpadded:vr,numberToVarBytesBE:Vs,utf8ToBytes:zs,validateObject:Qe},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const F=BigInt(0),j=BigInt(1),ke=BigInt(2),Ys=BigInt(3),Ft=BigInt(4),Yn=BigInt(5),Xn=BigInt(8);BigInt(9);BigInt(16);function V(t,e){const n=t%e;return n>=F?n:e+n}function Xs(t,e,n){if(n<=F||e<F)throw new Error("Expected power/modulo > 0");if(n===j)return F;let r=j;for(;e>F;)e&j&&(r=r*t%n),t=t*t%n,e>>=j;return r}function Q(t,e,n){let r=t;for(;e-- >F;)r*=r,r%=n;return r}function Vt(t,e){if(t===F||e<=F)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=V(t,e),r=e,i=F,s=j;for(;n!==F;){const l=r/n,a=r%n,c=i-s*l;r=n,n=a,i=s,s=c}if(r!==j)throw new Error("invert: does not exist");return V(i,e)}function Qs(t){const e=(t-j)/ke;let n,r,i;for(n=t-j,r=0;n%ke===F;n/=ke,r++);for(i=ke;i<t&&Xs(i,e,t)!==t-j;i++);if(r===1){const o=(t+j)/Ft;return function(a,c){const f=a.pow(c,o);if(!a.eql(a.sqr(f),c))throw new Error("Cannot find square root");return f}}const s=(n+j)/ke;return function(l,a){if(l.pow(a,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let c=r,f=l.pow(l.mul(l.ONE,i),n),u=l.pow(a,s),d=l.pow(a,n);for(;!l.eql(d,l.ONE);){if(l.eql(d,l.ZERO))return l.ZERO;let p=1;for(let h=l.sqr(d);p<c&&!l.eql(h,l.ONE);p++)h=l.sqr(h);const m=l.pow(f,j<<BigInt(c-p-1));f=l.sqr(m),u=l.mul(u,m),d=l.mul(d,f),c=p}return u}}function eo(t){if(t%Ft===Ys){const e=(t+j)/Ft;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Xn===Yn){const e=(t-Yn)/Xn;return function(r,i){const s=r.mul(i,ke),o=r.pow(s,e),l=r.mul(i,o),a=r.mul(r.mul(l,ke),o),c=r.mul(l,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return Qs(t)}const to=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function no(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=to.reduce((r,i)=>(r[i]="function",r),e);return Qe(t,n)}function ro(t,e,n){if(n<F)throw new Error("Expected power > 0");if(n===F)return t.ONE;if(n===j)return e;let r=t.ONE,i=e;for(;n>F;)n&j&&(r=t.mul(r,i)),i=t.sqr(i),n>>=j;return r}function io(t,e){const n=new Array(e.length),r=e.reduce((s,o,l)=>t.is0(o)?s:(n[l]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,l)=>t.is0(o)?s:(n[l]=t.mul(s,n[l]),t.mul(s,o)),i),n}function Sr(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function so(t,e,n=!1,r={}){if(t<=F)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Sr(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=eo(t),l=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:sn(i),ZERO:F,ONE:j,create:a=>V(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return F<=a&&a<t},is0:a=>a===F,isOdd:a=>(a&j)===j,neg:a=>V(-a,t),eql:(a,c)=>a===c,sqr:a=>V(a*a,t),add:(a,c)=>V(a+c,t),sub:(a,c)=>V(a-c,t),mul:(a,c)=>V(a*c,t),pow:(a,c)=>ro(l,a,c),div:(a,c)=>V(a*Vt(c,t),t),sqrN:a=>a*a,addN:(a,c)=>a+c,subN:(a,c)=>a-c,mulN:(a,c)=>a*c,inv:a=>Vt(a,t),sqrt:r.sqrt||(a=>o(l,a)),invertBatch:a=>io(l,a),cmov:(a,c,f)=>f?c:a,toBytes:a=>n?rn(a,s):Se(a,s),fromBytes:a=>{if(a.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${a.length}`);return n?nn(a):G(a)}});return Object.freeze(l)}function Lr(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ar(t){const e=Lr(t);return e+Math.ceil(e/2)}function oo(t,e,n=!1){const r=t.length,i=Lr(e),s=Ar(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?G(t):nn(t),l=V(o,e-j)+j;return n?rn(l,i):Se(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ao=BigInt(0),Nt=BigInt(1);function lo(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,l=i;for(;s>ao;)s&Nt&&(o=o.add(l)),l=l.double(),s>>=Nt;return o},precomputeWindow(i,s){const{windows:o,windowSize:l}=r(s),a=[];let c=i,f=c;for(let u=0;u<o;u++){f=c,a.push(f);for(let d=1;d<l;d++)f=f.add(c),a.push(f);c=f.double()}return a},wNAF(i,s,o){const{windows:l,windowSize:a}=r(i);let c=t.ZERO,f=t.BASE;const u=BigInt(2**i-1),d=2**i,p=BigInt(i);for(let m=0;m<l;m++){const h=m*a;let g=Number(o&u);o>>=p,g>a&&(g-=d,o+=Nt);const w=h,S=h+Math.abs(g)-1,C=m%2!==0,k=g<0;g===0?f=f.add(n(C,s[w])):c=c.add(n(k,s[S]))}return{p:c,f}},wNAFCached(i,s,o,l){const a=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,a),a!==1&&s.set(i,l(c))),this.wNAF(a,c,o)}}}function kr(t){return no(t.Fp),Qe(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Sr(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function co(t){const e=kr(t);Qe(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:uo,hexToBytes:fo}=Gs,Oe={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Oe;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:uo(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Oe,n=typeof t=="string"?fo(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Oe._parseInt(n.subarray(2)),{d:o,l}=Oe._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const f=c.toString(16);return f.length&1?`0${f}`:f},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,l=n(s),a=n(o);return`30${n(o+s+4)}02${a}${i}02${l}${r}`}},ue=BigInt(0),ee=BigInt(1);BigInt(2);const Qn=BigInt(3);BigInt(4);function ho(t){const e=co(t),{Fp:n}=e,r=e.toBytes||((m,h,g)=>{const w=h.toAffine();return $e(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(m=>{const h=m.subarray(1),g=n.fromBytes(h.subarray(0,n.BYTES)),w=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:g,y:w}});function s(m){const{a:h,b:g}=e,w=n.sqr(m),S=n.mul(w,m);return n.add(n.add(S,n.mul(m,h)),g)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&ue<m&&m<e.n}function l(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(m){const{allowedPrivateKeyLengths:h,nByteLength:g,wrapPrivateKey:w,n:S}=e;if(h&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=_e(m)),typeof m!="string"||!h.includes(m.length))throw new Error("Invalid key");m=m.padStart(g*2,"0")}let C;try{C=typeof m=="bigint"?m:G(q("private key",m,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof m}`)}return w&&(C=V(C,S)),l(C),C}const c=new Map;function f(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(h,g,w){if(this.px=h,this.py=g,this.pz=w,h==null||!n.isValid(h))throw new Error("x required");if(g==null||!n.isValid(g))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(h){const{x:g,y:w}=h||{};if(!h||!n.isValid(g)||!n.isValid(w))throw new Error("invalid affine point");if(h instanceof u)throw new Error("projective point not allowed");const S=C=>n.eql(C,n.ZERO);return S(g)&&S(w)?u.ZERO:new u(g,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const g=n.invertBatch(h.map(w=>w.pz));return h.map((w,S)=>w.toAffine(g[S])).map(u.fromAffine)}static fromHex(h){const g=u.fromAffine(i(q("pointHex",h)));return g.assertValidity(),g}static fromPrivateKey(h){return u.BASE.multiply(a(h))}_setWindowSize(h){this._WINDOW_SIZE=h,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:g}=this.toAffine();if(!n.isValid(h)||!n.isValid(g))throw new Error("bad point: x or y not FE");const w=n.sqr(g),S=s(h);if(!n.eql(w,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){f(h);const{px:g,py:w,pz:S}=this,{px:C,py:k,pz:I}=h,E=n.eql(n.mul(g,I),n.mul(C,S)),L=n.eql(n.mul(w,I),n.mul(k,S));return E&&L}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:g}=e,w=n.mul(g,Qn),{px:S,py:C,pz:k}=this;let I=n.ZERO,E=n.ZERO,L=n.ZERO,O=n.mul(S,S),H=n.mul(C,C),T=n.mul(k,k),R=n.mul(S,C);return R=n.add(R,R),L=n.mul(S,k),L=n.add(L,L),I=n.mul(h,L),E=n.mul(w,T),E=n.add(I,E),I=n.sub(H,E),E=n.add(H,E),E=n.mul(I,E),I=n.mul(R,I),L=n.mul(w,L),T=n.mul(h,T),R=n.sub(O,T),R=n.mul(h,R),R=n.add(R,L),L=n.add(O,O),O=n.add(L,O),O=n.add(O,T),O=n.mul(O,R),E=n.add(E,O),T=n.mul(C,k),T=n.add(T,T),O=n.mul(T,R),I=n.sub(I,O),L=n.mul(T,H),L=n.add(L,L),L=n.add(L,L),new u(I,E,L)}add(h){f(h);const{px:g,py:w,pz:S}=this,{px:C,py:k,pz:I}=h;let E=n.ZERO,L=n.ZERO,O=n.ZERO;const H=e.a,T=n.mul(e.b,Qn);let R=n.mul(g,C),P=n.mul(w,k),U=n.mul(S,I),D=n.add(g,w),b=n.add(C,k);D=n.mul(D,b),b=n.add(R,P),D=n.sub(D,b),b=n.add(g,S);let v=n.add(C,I);return b=n.mul(b,v),v=n.add(R,U),b=n.sub(b,v),v=n.add(w,S),E=n.add(k,I),v=n.mul(v,E),E=n.add(P,U),v=n.sub(v,E),O=n.mul(H,b),E=n.mul(T,U),O=n.add(E,O),E=n.sub(P,O),O=n.add(P,O),L=n.mul(E,O),P=n.add(R,R),P=n.add(P,R),U=n.mul(H,U),b=n.mul(T,b),P=n.add(P,U),U=n.sub(R,U),U=n.mul(H,U),b=n.add(b,U),R=n.mul(P,b),L=n.add(L,R),R=n.mul(v,b),E=n.mul(D,E),E=n.sub(E,R),R=n.mul(D,P),O=n.mul(v,O),O=n.add(O,R),new u(E,L,O)}subtract(h){return this.add(h.negate())}is0(){return this.equals(u.ZERO)}wNAF(h){return p.wNAFCached(this,c,h,g=>{const w=n.invertBatch(g.map(S=>S.pz));return g.map((S,C)=>S.toAffine(w[C])).map(u.fromAffine)})}multiplyUnsafe(h){const g=u.ZERO;if(h===ue)return g;if(l(h),h===ee)return this;const{endo:w}=e;if(!w)return p.unsafeLadder(this,h);let{k1neg:S,k1:C,k2neg:k,k2:I}=w.splitScalar(h),E=g,L=g,O=this;for(;C>ue||I>ue;)C&ee&&(E=E.add(O)),I&ee&&(L=L.add(O)),O=O.double(),C>>=ee,I>>=ee;return S&&(E=E.negate()),k&&(L=L.negate()),L=new u(n.mul(L.px,w.beta),L.py,L.pz),E.add(L)}multiply(h){l(h);let g=h,w,S;const{endo:C}=e;if(C){const{k1neg:k,k1:I,k2neg:E,k2:L}=C.splitScalar(g);let{p:O,f:H}=this.wNAF(I),{p:T,f:R}=this.wNAF(L);O=p.constTimeNegate(k,O),T=p.constTimeNegate(E,T),T=new u(n.mul(T.px,C.beta),T.py,T.pz),w=O.add(T),S=H.add(R)}else{const{p:k,f:I}=this.wNAF(g);w=k,S=I}return u.normalizeZ([w,S])[0]}multiplyAndAddUnsafe(h,g,w){const S=u.BASE,C=(I,E)=>E===ue||E===ee||!I.equals(S)?I.multiplyUnsafe(E):I.multiply(E),k=C(this,g).add(C(h,w));return k.is0()?void 0:k}toAffine(h){const{px:g,py:w,pz:S}=this,C=this.is0();h==null&&(h=C?n.ONE:n.inv(S));const k=n.mul(g,h),I=n.mul(w,h),E=n.mul(S,h);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:k,y:I}}isTorsionFree(){const{h,isTorsionFree:g}=e;if(h===ee)return!0;if(g)return g(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:g}=e;return h===ee?this:g?g(u,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),r(u,this,h)}toHex(h=!0){return _e(this.toRawBytes(h))}}u.BASE=new u(e.Gx,e.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=lo(u,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:o}}function go(t){const e=kr(t);return Qe(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function po(t){const e=go(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(b){return ue<b&&b<n.ORDER}function l(b){return V(b,r)}function a(b){return Vt(b,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:d}=ho({...e,toBytes(b,v,$){const y=v.toAffine(),x=n.toBytes(y.x),A=$e;return $?A(Uint8Array.from([v.hasEvenY()?2:3]),x):A(Uint8Array.from([4]),x,n.toBytes(y.y))},fromBytes(b){const v=b.length,$=b[0],y=b.subarray(1);if(v===i&&($===2||$===3)){const x=G(y);if(!o(x))throw new Error("Point is not on curve");const A=u(x);let N=n.sqrt(A);const B=(N&ee)===ee;return($&1)===1!==B&&(N=n.neg(N)),{x,y:N}}else if(v===s&&$===4){const x=n.fromBytes(y.subarray(0,n.BYTES)),A=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x,y:A}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=b=>_e(Se(b,e.nByteLength));function m(b){const v=r>>ee;return b>v}function h(b){return m(b)?l(-b):b}const g=(b,v,$)=>G(b.slice(v,$));class w{constructor(v,$,y){this.r=v,this.s=$,this.recovery=y,this.assertValidity()}static fromCompact(v){const $=e.nByteLength;return v=q("compactSignature",v,$*2),new w(g(v,0,$),g(v,$,2*$))}static fromDER(v){const{r:$,s:y}=Oe.toSig(q("DER",v));return new w($,y)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const{r:$,s:y,recovery:x}=this,A=L(q("msgHash",v));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const N=x===2||x===3?$+e.n:$;if(N>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const B=x&1?"03":"02",K=c.fromHex(B+p(N)),z=a(N),re=l(-A*z),Y=l(y*z),X=c.BASE.multiplyAndAddUnsafe(K,re,Y);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return He(this.toDERHex())}toDERHex(){return Oe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return He(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const S={isValidPrivateKey(b){try{return f(b),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const b=Ar(e.n);return oo(e.randomBytes(b),e.n)},precompute(b=8,v=c.BASE){return v._setWindowSize(b),v.multiply(BigInt(3)),v}};function C(b,v=!0){return c.fromPrivateKey(b).toRawBytes(v)}function k(b){const v=b instanceof Uint8Array,$=typeof b=="string",y=(v||$)&&b.length;return v?y===i||y===s:$?y===2*i||y===2*s:b instanceof c}function I(b,v,$=!0){if(k(b))throw new Error("first arg must be private key");if(!k(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(f(b)).toRawBytes($)}const E=e.bits2int||function(b){const v=G(b),$=b.length*8-e.nBitLength;return $>0?v>>BigInt($):v},L=e.bits2int_modN||function(b){return l(E(b))},O=sn(e.nBitLength);function H(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(ue<=b&&b<O))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Se(b,e.nByteLength)}function T(b,v,$=R){if(["recovered","canonical"].some(Ae=>Ae in $))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:x}=e;let{lowS:A,prehash:N,extraEntropy:B}=$;A==null&&(A=!0),b=q("msgHash",b),N&&(b=q("prehashed msgHash",y(b)));const K=L(b),z=f(v),re=[H(z),H(K)];if(B!=null){const Ae=B===!0?x(n.BYTES):B;re.push(q("extraEntropy",Ae))}const Y=$e(...re),X=K;function kt(Ae){const Ie=E(Ae);if(!d(Ie))return;const Rn=a(Ie),Ce=c.BASE.multiply(Ie).toAffine(),te=l(Ce.x);if(te===ue)return;const Re=l(Rn*l(X+te*z));if(Re===ue)return;let Nn=(Ce.x===te?0:2)|Number(Ce.y&ee),Bn=Re;return A&&m(Re)&&(Bn=h(Re),Nn^=1),new w(te,Bn,Nn)}return{seed:Y,k2sig:kt}}const R={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function U(b,v,$=R){const{seed:y,k2sig:x}=T(b,v,$),A=e;return Er(A.hash.outputLen,A.nByteLength,A.hmac)(y,x)}c.BASE._setWindowSize(8);function D(b,v,$,y=P){var Ce;const x=b;if(v=q("msgHash",v),$=q("publicKey",$),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:A,prehash:N}=y;let B,K;try{if(typeof x=="string"||x instanceof Uint8Array)try{B=w.fromDER(x)}catch(te){if(!(te instanceof Oe.Err))throw te;B=w.fromCompact(x)}else if(typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint"){const{r:te,s:Re}=x;B=new w(te,Re)}else throw new Error("PARSE");K=c.fromHex($)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&B.hasHighS())return!1;N&&(v=e.hash(v));const{r:z,s:re}=B,Y=L(v),X=a(re),kt=l(Y*X),Ae=l(z*X),Ie=(Ce=c.BASE.multiplyAndAddUnsafe(K,kt,Ae))==null?void 0:Ce.toAffine();return Ie?l(Ie.x)===z:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:I,sign:U,verify:D,ProjectivePoint:c,Signature:w,utils:S}}let Or=class extends wr{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Is(e);const r=en(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return at(this),this.iHash.update(e),this}digestInto(e){at(this),mr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const $r=(t,e,n)=>new Or(t,e).update(n).digest();$r.create=(t,e)=>new Or(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mo(t){return{hash:t,hmac:(e,...n)=>$r(t,e,Bs(...n)),randomBytes:br}}function yo(t,e){const n=r=>po({...t,...mo(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ir=BigInt(1),ct=BigInt(2),er=(t,e)=>(t+e/ct)/e;function Cr(t){const e=pt,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),a=BigInt(88),c=t*t*t%e,f=c*c*t%e,u=Q(f,n,e)*f%e,d=Q(u,n,e)*f%e,p=Q(d,ct,e)*c%e,m=Q(p,i,e)*p%e,h=Q(m,s,e)*m%e,g=Q(h,l,e)*h%e,w=Q(g,a,e)*g%e,S=Q(w,l,e)*h%e,C=Q(S,n,e)*f%e,k=Q(C,o,e)*m%e,I=Q(k,r,e)*c%e,E=Q(I,ct,e);if(!Kt.eql(Kt.sqr(E),t))throw new Error("Cannot find square root");return E}const Kt=so(pt,void 0,void 0,{sqrt:Cr}),je=yo({a:BigInt(0),b:BigInt(7),Fp:Kt,n:lt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=lt,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ir*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),l=er(s*t,e),a=er(-r*t,e);let c=V(t-l*n-a*i,e),f=V(-l*r-a*s,e);const u=c>o,d=f>o;if(u&&(c=e-c),d&&(f=e-f),c>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:c,k2neg:d,k2:f}}}},jt),mt=BigInt(0),Rr=t=>typeof t=="bigint"&&mt<t&&t<pt,wo=t=>typeof t=="bigint"&&mt<t&&t<lt,tr={};function ut(t,...e){let n=tr[t];if(n===void 0){const r=jt(Uint8Array.from(t,i=>i.charCodeAt(0)));n=$e(r,r),tr[t]=n}return jt($e(n,...e))}const on=t=>t.toRawBytes(!0).slice(1),zt=t=>Se(t,32),Bt=t=>V(t,pt),Ye=t=>V(t,lt),an=je.ProjectivePoint,bo=(t,e,n)=>an.BASE.multiplyAndAddUnsafe(t,e,n);function qt(t){let e=je.utils.normPrivateKeyToScalar(t),n=an.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Ye(-e),bytes:on(n)}}function Nr(t){if(!Rr(t))throw new Error("bad x: need 0 < x < p");const e=Bt(t*t),n=Bt(e*t+BigInt(7));let r=Cr(n);r%ct!==mt&&(r=Bt(-r));const i=new an(t,r,Ir);return i.assertValidity(),i}function Br(...t){return Ye(G(ut("BIP0340/challenge",...t)))}function xo(t){return qt(t).bytes}function vo(t,e,n=br(32)){const r=q("message",t),{bytes:i,scalar:s}=qt(e),o=q("auxRand",n,32),l=zt(s^G(ut("BIP0340/aux",o))),a=ut("BIP0340/nonce",l,i,r),c=Ye(G(a));if(c===mt)throw new Error("sign failed: k is zero");const{bytes:f,scalar:u}=qt(c),d=Br(f,i,r),p=new Uint8Array(64);if(p.set(f,0),p.set(zt(Ye(u+d*s)),32),!Tr(p,r,i))throw new Error("sign: Invalid signature produced");return p}function Tr(t,e,n){const r=q("signature",t,64),i=q("message",e),s=q("publicKey",n,32);try{const o=Nr(G(s)),l=G(r.subarray(0,32));if(!Rr(l))return!1;const a=G(r.subarray(32,64));if(!wo(a))return!1;const c=Br(zt(l),on(o),i),f=bo(o,a,Ye(-c));return!(!f||!f.hasEvenY()||f.toAffine().x!==l)}catch{return!1}}const We={getPublicKey:xo,sign:vo,verify:Tr,utils:{randomPrivateKey:je.utils.randomPrivateKey,lift_x:Nr,pointToBytes:on,numberToBytesBE:Se,bytesToNumberBE:G,taggedHash:ut,mod:V}},Tt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ln=t=>t instanceof Uint8Array,Ut=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),se=(t,e)=>t<<32-e|t>>>e,Eo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Eo)throw new Error("Non little-endian hardware is not supported");const So=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Z(t){if(!ln(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=So[t[n]];return e}function De(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Lo(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xe(t){if(typeof t=="string"&&(t=Lo(t)),!ln(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function yt(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!ln(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class Ur{clone(){return this._cloneInto()}}function Pr(t){const e=r=>t().update(Xe(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function _r(t=32){if(Tt&&typeof Tt.getRandomValues=="function")return Tt.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Wt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ao(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Hr(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function ko(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wt(t.outputLen),Wt(t.blockLen)}function Oo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $o(t,e){Hr(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ae={number:Wt,bool:Ao,bytes:Hr,hash:ko,exists:Oo,output:$o};function Io(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,c=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+c,l,r)}class Co extends Ur{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ut(this.buffer)}update(e){ae.exists(this);const{view:n,buffer:r,blockLen:i}=this;e=Xe(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=Ut(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ae.exists(this),ae.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let u=o;u<i;u++)n[u]=0;Io(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=Ut(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)l.setUint32(4*u,f[u],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Ro=(t,e,n)=>t&e^~t&n,No=(t,e,n)=>t&e^t&n^e&n,Bo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),be=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xe=new Uint32Array(64);class Dr extends Co{constructor(){super(64,32,8,!1),this.A=be[0]|0,this.B=be[1]|0,this.C=be[2]|0,this.D=be[3]|0,this.E=be[4]|0,this.F=be[5]|0,this.G=be[6]|0,this.H=be[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:l,H:a}=this;return[e,n,r,i,s,o,l,a]}set(e,n,r,i,s,o,l,a){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=a|0}process(e,n){for(let u=0;u<16;u++,n+=4)xe[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const d=xe[u-15],p=xe[u-2],m=se(d,7)^se(d,18)^d>>>3,h=se(p,17)^se(p,19)^p>>>10;xe[u]=h+xe[u-7]+m+xe[u-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:a,G:c,H:f}=this;for(let u=0;u<64;u++){const d=se(l,6)^se(l,11)^se(l,25),p=f+d+Ro(l,a,c)+Bo[u]+xe[u]|0,h=(se(r,2)^se(r,13)^se(r,22))+No(r,i,s)|0;f=c,c=a,a=l,l=o+p|0,o=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,a=a+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,i,s,o,l,a,c,f)}roundClean(){xe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class To extends Dr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Fe=Pr(()=>new Dr);Pr(()=>new To);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ve(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function ge(...t){const e=(i,s)=>o=>i(s(o)),n=Array.from(t).reverse().reduce((i,s)=>i?e(i,s.encode):s.encode,void 0),r=t.reduce((i,s)=>i?e(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}function pe(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(Ve(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function me(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function wt(t,e="="){if(Ve(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Mr(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function nr(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],s=Array.from(t);for(s.forEach(o=>{if(Ve(o),o<0||o>=e)throw new Error(`Wrong integer: ${o}`)});;){let o=0,l=!0;for(let a=r;a<s.length;a++){const c=s[a],f=e*o+c;if(!Number.isSafeInteger(f)||e*o/e!==o||f-c!==e*o)throw new Error("convertRadix: carry overflow");if(o=f%n,s[a]=Math.floor(f/n),!Number.isSafeInteger(s[a])||s[a]*n+o!==f)throw new Error("convertRadix: carry overflow");if(l)s[a]?l=!1:r=a;else continue}if(i.push(o),l)break}for(let o=0;o<t.length-1&&t[o]===0;o++)i.push(0);return i.reverse()}const jr=(t,e)=>e?jr(e,t%e):t,ft=(t,e)=>t+(e-jr(t,e));function Zt(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ft(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${ft(e,n)}`);let i=0,s=0;const o=2**n-1,l=[];for(const a of t){if(Ve(a),a>=2**e)throw new Error(`convertRadix2: invalid data word=${a} from=${e}`);if(i=i<<e|a,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)l.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&l.push(i>>>0),l}function Uo(t){return Ve(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return nr(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(nr(e,t,2**8))}}}function Le(t,e=!1){if(Ve(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(ft(8,t)>32||ft(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Zt(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Zt(n,t,8,e))}}}function rr(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}const Po=ge(Le(4),pe("0123456789ABCDEF"),me("")),_o=ge(Le(5),pe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),wt(5),me(""));ge(Le(5),pe("0123456789ABCDEFGHIJKLMNOPQRSTUV"),wt(5),me(""));ge(Le(5),pe("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),me(""),Mr(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const he=ge(Le(6),pe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),wt(6),me("")),Ho=ge(Le(6),pe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),wt(6),me("")),cn=t=>ge(Uo(58),pe(t),me("")),Jt=cn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");cn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");cn("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const ir=[0,2,3,5,6,7,9,10,11],Do={encode(t){let e="";for(let n=0;n<t.length;n+=8){const r=t.subarray(n,n+8);e+=Jt.encode(r).padStart(ir[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){const r=t.slice(n,n+11),i=ir.indexOf(r.length),s=Jt.decode(r);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(e)}},Gt=ge(pe("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),me("")),sr=[996825010,642813549,513874426,1027748829,705979059];function Ze(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<sr.length;r++)(e>>r&1)===1&&(n^=sr[r]);return n}function or(t,e,n=1){const r=t.length;let i=1;for(let s=0;s<r;s++){const o=t.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);i=Ze(i)^o>>5}i=Ze(i);for(let s=0;s<r;s++)i=Ze(i)^t.charCodeAt(s)&31;for(let s of e)i=Ze(i)^s;for(let s=0;s<6;s++)i=Ze(i);return i^=n,Gt.encode(Zt([i%2**30],30,5,!1))}function Fr(t){const e=t==="bech32"?1:734539939,n=Le(5),r=n.decode,i=n.encode,s=rr(r);function o(f,u,d=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof u}`);const p=f.length+7+u.length;if(d!==!1&&p>d)throw new TypeError(`Length ${p} exceeds limit ${d}`);return f=f.toLowerCase(),`${f}1${Gt.encode(u)}${or(f,u,e)}`}function l(f,u=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||u!==!1&&f.length>u)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${u})`);const d=f.toLowerCase();if(f!==d&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=d;const p=f.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');const m=f.slice(0,p),h=f.slice(p+1);if(h.length<6)throw new Error("Data must be at least 6 characters long");const g=Gt.decode(h).slice(0,-6),w=or(m,g,e);if(!h.endsWith(w))throw new Error(`Invalid checksum in ${f}: expected "${w}"`);return{prefix:m,words:g}}const a=rr(l);function c(f){const{prefix:u,words:d}=l(f,!1);return{prefix:u,words:d,bytes:r(d)}}return{encode:o,decode:l,decodeToBytes:c,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:s,toWords:i}}const Me=Fr("bech32");Fr("bech32m");const Mo={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},jo=ge(Le(4),pe("0123456789abcdef"),me(""),Mr(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),Fo={utf8:Mo,hex:jo,base16:Po,base32:_o,base64:he,base64url:Ho,base58:Jt,base58xmr:Do};`${Object.keys(Fo).join(", ")}`;function Pt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function ar(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Vo(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function fe(t,...e){if(!Vo(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const W=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Ko=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ko)throw new Error("Non little-endian hardware is not supported");function zo(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function qo(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Wo=(t,e)=>(Object.assign(e,t),e),Ee=16,Zo=283;function un(t){return t<<1^Zo&-(t>>7)}function Pe(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(e&1),t=un(t);return n}const Yt=(()=>{let t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=un(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return e})(),Jo=Yt.map((t,e)=>Yt.indexOf(e)),Go=t=>t<<24|t>>>8,_t=t=>t<<8|t>>>24;function Vr(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((c,f)=>e(t[f])),r=n.map(_t),i=r.map(_t),s=i.map(_t),o=new Uint32Array(256*256),l=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let c=0;c<256;c++)for(let f=0;f<256;f++){const u=c*256+f;o[u]=n[c]^r[f],l[u]=i[c]^s[f],a[u]=t[c]<<8|t[f]}return{sbox:t,sbox2:a,T0:n,T1:r,T2:i,T3:s,T01:o,T23:l}}const fn=Vr(Yt,t=>Pe(t,3)<<24|t<<16|t<<8|Pe(t,2)),Kr=Vr(Jo,t=>Pe(t,11)<<24|Pe(t,13)<<16|Pe(t,9)<<8|Pe(t,14)),Yo=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=un(n))t[e]=n;return t})();function zr(t){fe(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=fn,r=W(t),i=r.length,s=l=>le(n,l,l,l,l),o=new Uint32Array(e+28);o.set(r);for(let l=i;l<o.length;l++){let a=o[l-1];l%i===0?a=s(Go(a))^Yo[l/i-1]:i>6&&l%i===4&&(a=s(a)),o[l]=o[l-i]^a}return o}function Xo(t){const e=zr(t),n=e.slice(),r=e.length,{sbox2:i}=fn,{T0:s,T1:o,T2:l,T3:a}=Kr;for(let c=0;c<r;c+=4)for(let f=0;f<4;f++)n[c+f]=e[r-c-4+f];e.fill(0);for(let c=4;c<r-4;c++){const f=n[c],u=le(i,f,f,f,f);n[c]=s[u&255]^o[u>>>8&255]^l[u>>>16&255]^a[u>>>24]}return n}function ve(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function le(t,e,n,r,i){return t[e&255|n&65280]|t[r>>>16&255|i>>>16&65280]<<16}function lr(t,e,n,r,i){const{sbox2:s,T01:o,T23:l}=fn;let a=0;e^=t[a++],n^=t[a++],r^=t[a++],i^=t[a++];const c=t.length/4-2;for(let m=0;m<c;m++){const h=t[a++]^ve(o,l,e,n,r,i),g=t[a++]^ve(o,l,n,r,i,e),w=t[a++]^ve(o,l,r,i,e,n),S=t[a++]^ve(o,l,i,e,n,r);e=h,n=g,r=w,i=S}const f=t[a++]^le(s,e,n,r,i),u=t[a++]^le(s,n,r,i,e),d=t[a++]^le(s,r,i,e,n),p=t[a++]^le(s,i,e,n,r);return{s0:f,s1:u,s2:d,s3:p}}function Qo(t,e,n,r,i){const{sbox2:s,T01:o,T23:l}=Kr;let a=0;e^=t[a++],n^=t[a++],r^=t[a++],i^=t[a++];const c=t.length/4-2;for(let m=0;m<c;m++){const h=t[a++]^ve(o,l,e,i,r,n),g=t[a++]^ve(o,l,n,e,i,r),w=t[a++]^ve(o,l,r,n,e,i),S=t[a++]^ve(o,l,i,r,n,e);e=h,n=g,r=w,i=S}const f=t[a++]^le(s,e,i,r,n),u=t[a++]^le(s,n,e,i,r),d=t[a++]^le(s,r,n,e,i),p=t[a++]^le(s,i,r,n,e);return{s0:f,s1:u,s2:d,s3:p}}function qr(t,e){if(!e)return new Uint8Array(t);if(fe(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);return e}function ea(t){if(fe(t),t.length%Ee!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Ee}`)}function ta(t,e,n){let r=t.length;const i=r%Ee;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=W(t);if(e){let a=Ee-i;a||(a=Ee),r=r+a}const o=qr(r,n),l=W(o);return{b:s,o:l,out:o}}function na(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function ra(t){const e=new Uint8Array(16),n=W(e);e.set(t);const r=Ee-t.length;for(let i=Ee-r;i<Ee;i++)e[i]=r;return n}const Wr=Wo({blockSize:16,nonceLength:16},function(e,n,r={}){fe(e),fe(n,16);const i=!r.disablePadding;return{encrypt:(s,o)=>{const l=zr(e),{b:a,o:c,out:f}=ta(s,i,o),u=W(n);let d=u[0],p=u[1],m=u[2],h=u[3],g=0;for(;g+4<=a.length;)d^=a[g+0],p^=a[g+1],m^=a[g+2],h^=a[g+3],{s0:d,s1:p,s2:m,s3:h}=lr(l,d,p,m,h),c[g++]=d,c[g++]=p,c[g++]=m,c[g++]=h;if(i){const w=ra(s.subarray(g*4));d^=w[0],p^=w[1],m^=w[2],h^=w[3],{s0:d,s1:p,s2:m,s3:h}=lr(l,d,p,m,h),c[g++]=d,c[g++]=p,c[g++]=m,c[g++]=h}return l.fill(0),f},decrypt:(s,o)=>{ea(s);const l=Xo(e),a=W(n),c=qr(s.length,o),f=W(s),u=W(c);let d=a[0],p=a[1],m=a[2],h=a[3];for(let g=0;g+4<=f.length;){const w=d,S=p,C=m,k=h;d=f[g+0],p=f[g+1],m=f[g+2],h=f[g+3];const{s0:I,s1:E,s2:L,s3:O}=Qo(l,d,p,m,h);u[g++]=I^w,u[g++]=E^S,u[g++]=L^C,u[g++]=O^k}return l.fill(0),na(c,i)}}}),Zr=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),ia=Zr("expand 16-byte k"),sa=Zr("expand 32-byte k"),oa=W(ia),Jr=W(sa);Jr.slice();function _(t,e){return t<<e|t>>>32-e}function Xt(t){return t.byteOffset%4===0}const tt=64,aa=16,Gr=2**32-1,cr=new Uint32Array;function la(t,e,n,r,i,s,o,l){const a=i.length,c=new Uint8Array(tt),f=W(c),u=Xt(i)&&Xt(s),d=u?W(i):cr,p=u?W(s):cr;for(let m=0;m<a;o++){if(t(e,n,r,f,o,l),o>=Gr)throw new Error("arx: counter overflow");const h=Math.min(tt,a-m);if(u&&h===tt){const g=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let w=0,S;w<aa;w++)S=g+w,p[S]=d[S]^f[w];m+=tt;continue}for(let g=0,w;g<h;g++)w=m+g,s[w]=i[w]^c[g];m+=h}}function ca(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=zo({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Pt(i),Pt(o),ar(s),ar(n),(l,a,c,f,u=0)=>{fe(l),fe(a),fe(c);const d=c.length;if(f||(f=new Uint8Array(d)),fe(f),Pt(u),u<0||u>=Gr)throw new Error("arx: counter overflow");if(f.length<d)throw new Error(`arx: output (${f.length}) is shorter than data (${d})`);const p=[];let m=l.length,h,g;if(m===32)h=l.slice(),p.push(h),g=Jr;else if(m===16&&n)h=new Uint8Array(32),h.set(l),h.set(l,16),g=oa,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);Xt(a)||(a=a.slice(),p.push(a));const w=W(h);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,w,W(a.subarray(0,16)),w),a=a.subarray(16)}const S=16-i;if(S!==a.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const k=new Uint8Array(12);k.set(a,s?0:12-a.length),a=k,p.push(a)}const C=W(a);for(la(t,g,w,C,c,f,u,o);p.length>0;)p.pop().fill(0);return f}}function ua(t,e,n,r,i,s=20){let o=t[0],l=t[1],a=t[2],c=t[3],f=e[0],u=e[1],d=e[2],p=e[3],m=e[4],h=e[5],g=e[6],w=e[7],S=i,C=n[0],k=n[1],I=n[2],E=o,L=l,O=a,H=c,T=f,R=u,P=d,U=p,D=m,b=h,v=g,$=w,y=S,x=C,A=k,N=I;for(let K=0;K<s;K+=2)E=E+T|0,y=_(y^E,16),D=D+y|0,T=_(T^D,12),E=E+T|0,y=_(y^E,8),D=D+y|0,T=_(T^D,7),L=L+R|0,x=_(x^L,16),b=b+x|0,R=_(R^b,12),L=L+R|0,x=_(x^L,8),b=b+x|0,R=_(R^b,7),O=O+P|0,A=_(A^O,16),v=v+A|0,P=_(P^v,12),O=O+P|0,A=_(A^O,8),v=v+A|0,P=_(P^v,7),H=H+U|0,N=_(N^H,16),$=$+N|0,U=_(U^$,12),H=H+U|0,N=_(N^H,8),$=$+N|0,U=_(U^$,7),E=E+R|0,N=_(N^E,16),v=v+N|0,R=_(R^v,12),E=E+R|0,N=_(N^E,8),v=v+N|0,R=_(R^v,7),L=L+P|0,y=_(y^L,16),$=$+y|0,P=_(P^$,12),L=L+P|0,y=_(y^L,8),$=$+y|0,P=_(P^$,7),O=O+U|0,x=_(x^O,16),D=D+x|0,U=_(U^D,12),O=O+U|0,x=_(x^O,8),D=D+x|0,U=_(U^D,7),H=H+T|0,A=_(A^H,16),b=b+A|0,T=_(T^b,12),H=H+T|0,A=_(A^H,8),b=b+A|0,T=_(T^b,7);let B=0;r[B++]=o+E|0,r[B++]=l+L|0,r[B++]=a+O|0,r[B++]=c+H|0,r[B++]=f+T|0,r[B++]=u+R|0,r[B++]=d+P|0,r[B++]=p+U|0,r[B++]=m+D|0,r[B++]=h+b|0,r[B++]=g+v|0,r[B++]=w+$|0,r[B++]=S+y|0,r[B++]=C+x|0,r[B++]=k+A|0,r[B++]=I+N|0}const Yr=ca(ua,{counterRight:!1,counterLength:4,allowShortKeys:!1});class Xr extends Ur{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ae.hash(e);const r=Xe(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ae.exists(this),this.iHash.update(e),this}digestInto(e){ae.exists(this),ae.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bt=(t,e,n)=>new Xr(t,e).update(n).digest();bt.create=(t,e)=>new Xr(t,e);function fa(t,e,n){return ae.hash(t),bt(t,Xe(n),Xe(e))}const Ht=new Uint8Array([0]),ur=new Uint8Array;function da(t,e,n,r=32){if(ae.hash(t),ae.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=ur);const s=new Uint8Array(i*t.outputLen),o=bt.create(t,e),l=o._cloneInto(),a=new Uint8Array(o.outputLen);for(let c=0;c<i;c++)Ht[0]=c+1,l.update(c===0?ur:a).update(n).update(Ht).digestInto(a),s.set(a,t.outputLen*c),o._cloneInto(l);return o.destroy(),l.destroy(),a.fill(0),Ht.fill(0),s.slice(0,r)}var ha=Object.defineProperty,M=(t,e)=>{for(var n in e)ha(t,n,{get:e[n],enumerable:!0})},Ue=Symbol("verified"),ga=t=>t instanceof Object;function dn(t){if(!ga(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var pa={};M(pa,{Queue:()=>ba,QueueNode:()=>Qr,binarySearch:()=>hn,insertEventIntoAscendingList:()=>wa,insertEventIntoDescendingList:()=>ya,normalizeURL:()=>ma,utf8Decoder:()=>de,utf8Encoder:()=>ne});var de=new TextDecoder("utf-8"),ne=new TextEncoder;function ma(t){t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function ya(t,e){const[n,r]=hn(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:i.created_at-e.created_at);return r||t.splice(n,0,e),t}function wa(t,e){const[n,r]=hn(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:e.created_at-i.created_at);return r||t.splice(n,0,e),t}function hn(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=e(t[i]);if(s===0)return[i,!0];s<0?r=i-1:n=i+1}return[n,!1]}var Qr=class{constructor(t){Ne(this,"value");Ne(this,"next",null);Ne(this,"prev",null);this.value=t}},ba=class{constructor(){Ne(this,"first");Ne(this,"last");this.first=null,this.last=null}enqueue(t){const e=new Qr(t);return this.last?this.last===this.first?(this.last=e,this.last.prev=this.first,this.first.next=e):(e.prev=this.last,this.last.next=e,this.last=e):(this.first=e,this.last=e),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const t=this.first;return this.first=t.next,t.value}},xa=class{generateSecretKey(){return We.utils.randomPrivateKey()}getPublicKey(t){return Z(We.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=Z(We.getPublicKey(e)),n.id=nt(n),n.sig=Z(We.sign(nt(n),e)),n[Ue]=!0,n}verifyEvent(t){if(typeof t[Ue]=="boolean")return t[Ue];const e=nt(t);if(e!==t.id)return t[Ue]=!1,!1;try{const n=We.verify(t.sig,e,t.pubkey);return t[Ue]=n,n}catch{return t[Ue]=!1,!1}}};function va(t){if(!dn(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function nt(t){let e=Fe(ne.encode(va(t)));return Z(e)}var xt=new xa,Ea=xt.generateSecretKey,ei=xt.getPublicKey,ce=xt.finalizeEvent,gn=xt.verifyEvent,Sa={};M(Sa,{Application:()=>Al,BadgeAward:()=>Na,BadgeDefinition:()=>wl,BlockedRelaysList:()=>nl,BookmarkList:()=>Qa,Bookmarksets:()=>pl,Calendar:()=>Nl,CalendarEventRSVP:()=>Bl,ChannelCreation:()=>oi,ChannelHideMessage:()=>ci,ChannelMessage:()=>li,ChannelMetadata:()=>ai,ChannelMuteUser:()=>ui,ClassifiedListing:()=>$l,ClientAuth:()=>di,CommunitiesList:()=>el,CommunityDefinition:()=>Pl,CommunityPostApproval:()=>Fa,Contacts:()=>Ia,CreateOrUpdateProduct:()=>vl,CreateOrUpdateStall:()=>xl,Curationsets:()=>ml,Date:()=>Cl,DirectMessageRelaysList:()=>ol,DraftClassifiedListing:()=>Il,DraftLong:()=>Sl,Emojisets:()=>Ll,EncryptedDirectMessage:()=>Ca,EventDeletion:()=>Ra,FileMetadata:()=>Pa,FileServerPreference:()=>al,Followsets:()=>dl,GenericRepost:()=>Ta,Genericlists:()=>hl,GiftWrap:()=>fi,HTTPAuth:()=>yn,Handlerinformation:()=>Ul,Handlerrecommendation:()=>Tl,Highlights:()=>Ja,InterestsList:()=>il,Interestsets:()=>bl,JobFeedback:()=>za,JobRequest:()=>Va,JobResult:()=>Ka,Label:()=>ja,LightningPubRPC:()=>cl,LiveChatMessage:()=>_a,LiveEvent:()=>kl,LongFormArticle:()=>El,Metadata:()=>ka,Mutelist:()=>Ga,NWCWalletInfo:()=>ll,NWCWalletRequest:()=>hi,NWCWalletResponse:()=>ul,NostrConnect:()=>fl,OpenTimestamps:()=>Ua,Pinlist:()=>Ya,PrivateDirectMessage:()=>Ba,ProblemTracker:()=>Ha,ProfileBadges:()=>yl,PublicChatsList:()=>tl,Reaction:()=>mn,RecommendRelay:()=>$a,RelayList:()=>Xa,Relaysets:()=>gl,Report:()=>Da,Reporting:()=>Ma,Repost:()=>pn,Seal:()=>si,SearchRelaysList:()=>rl,ShortTextNote:()=>Oa,Time:()=>Rl,UserEmojiList:()=>sl,UserStatuses:()=>Ol,Zap:()=>Za,ZapGoal:()=>qa,ZapRequest:()=>Wa,classifyKind:()=>La,isEphemeralKind:()=>ri,isKind:()=>Aa,isParameterizedReplaceableKind:()=>ii,isRegularKind:()=>ti,isReplaceableKind:()=>ni});function ti(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function ni(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function ri(t){return 2e4<=t&&t<3e4}function ii(t){return 3e4<=t&&t<4e4}function La(t){return ti(t)?"regular":ni(t)?"replaceable":ri(t)?"ephemeral":ii(t)?"parameterized":"unknown"}function Aa(t,e){const n=e instanceof Array?e:[e];return dn(t)&&n.includes(t.kind)||!1}var ka=0,Oa=1,$a=2,Ia=3,Ca=4,Ra=5,pn=6,mn=7,Na=8,si=13,Ba=14,Ta=16,oi=40,ai=41,li=42,ci=43,ui=44,Ua=1040,fi=1059,Pa=1063,_a=1311,Ha=1971,Da=1984,Ma=1984,ja=1985,Fa=4550,Va=5999,Ka=6999,za=7e3,qa=9041,Wa=9734,Za=9735,Ja=9802,Ga=1e4,Ya=10001,Xa=10002,Qa=10003,el=10004,tl=10005,nl=10006,rl=10007,il=10015,sl=10030,ol=10050,al=10096,ll=13194,cl=21e3,di=22242,hi=23194,ul=23195,fl=24133,yn=27235,dl=3e4,hl=30001,gl=30002,pl=30003,ml=30004,yl=30008,wl=30009,bl=30015,xl=30017,vl=30018,El=30023,Sl=30024,Ll=30030,Al=30078,kl=30311,Ol=30315,$l=30402,Il=30403,Cl=31922,Rl=31923,Nl=31924,Bl=31925,Tl=31989,Ul=31990,Pl=34550,_l={};M(_l,{getHex64:()=>wn,getInt:()=>gi,getSubscriptionId:()=>Hl,matchEventId:()=>Dl,matchEventKind:()=>jl,matchEventPubkey:()=>Ml});function wn(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function gi(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Hl(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return t.slice(r+1,s)}function Dl(t,e){return e===wn(t,"id")}function Ml(t,e){return e===wn(t,"pubkey")}function jl(t,e){return e===gi(t,"kind")}var Fl={};M(Fl,{makeAuthEvent:()=>Vl});function Vl(t,e){return{kind:di,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}var Kl;try{Kl=WebSocket}catch{}var zl;try{zl=WebSocket}catch{}var ql={};M(ql,{BECH32_REGEX:()=>pi,Bech32MaxSize:()=>bn,NostrTypeGuard:()=>Wl,decode:()=>vt,encodeBytes:()=>St,naddrEncode:()=>ec,neventEncode:()=>Ql,noteEncode:()=>Yl,nprofileEncode:()=>Xl,npubEncode:()=>Gl,nsecEncode:()=>Jl});var Wl={isNProfile:t=>/^nprofile1[a-z\d]+$/.test(t||""),isNEvent:t=>/^nevent1[a-z\d]+$/.test(t||""),isNAddr:t=>/^naddr1[a-z\d]+$/.test(t||""),isNSec:t=>/^nsec1[a-z\d]{58}$/.test(t||""),isNPub:t=>/^npub1[a-z\d]{58}$/.test(t||""),isNote:t=>/^note1[a-z\d]+$/.test(t||""),isNcryptsec:t=>/^ncryptsec1[a-z\d]+$/.test(t||"")},bn=5e3,pi=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Zl(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=t&255,e}function vt(t){var i,s,o,l,a,c,f;let{prefix:e,words:n}=Me.decode(t,bn),r=new Uint8Array(Me.fromWords(n));switch(e){case"nprofile":{let u=Dt(r);if(!((i=u[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(u[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Z(u[0][0]),relays:u[1]?u[1].map(d=>de.decode(d)):[]}}}case"nevent":{let u=Dt(r);if(!((s=u[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(u[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(u[2]&&u[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(u[3]&&u[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Z(u[0][0]),relays:u[1]?u[1].map(d=>de.decode(d)):[],author:(o=u[2])!=null&&o[0]?Z(u[2][0]):void 0,kind:(l=u[3])!=null&&l[0]?parseInt(Z(u[3][0]),16):void 0}}}case"naddr":{let u=Dt(r);if(!((a=u[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((c=u[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(u[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((f=u[3])!=null&&f[0]))throw new Error("missing TLV 3 for naddr");if(u[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:de.decode(u[0][0]),pubkey:Z(u[2][0]),kind:parseInt(Z(u[3][0]),16),relays:u[1]?u[1].map(d=>de.decode(d)):[]}}}case"nsec":return{type:e,data:r};case"npub":case"note":return{type:e,data:Z(r)};default:throw new Error(`unknown prefix ${e}`)}}function Dt(t){let e={},n=t;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);e[r]=e[r]||[],e[r].push(s)}return e}function Jl(t){return St("nsec",t)}function Gl(t){return St("npub",De(t))}function Yl(t){return St("note",De(t))}function Et(t,e){let n=Me.toWords(e);return Me.encode(t,n,bn)}function St(t,e){return Et(t,e)}function Xl(t){let e=xn({0:[De(t.pubkey)],1:(t.relays||[]).map(n=>ne.encode(n))});return Et("nprofile",e)}function Ql(t){let e;t.kind!==void 0&&(e=Zl(t.kind));let n=xn({0:[De(t.id)],1:(t.relays||[]).map(r=>ne.encode(r)),2:t.author?[De(t.author)]:[],3:e?[new Uint8Array(e)]:[]});return Et("nevent",n)}function ec(t){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,t.kind,!1);let n=xn({0:[ne.encode(t.identifier)],1:(t.relays||[]).map(r=>ne.encode(r)),2:[De(t.pubkey)],3:[new Uint8Array(e)]});return Et("naddr",n)}function xn(t){let e=[];return Object.entries(t).reverse().forEach(([n,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(n)],0),s.set([i.length],1),s.set(i,2),e.push(s)})}),yt(...e)}var tc={};M(tc,{decrypt:()=>nc,encrypt:()=>mi});async function mi(t,e,n){const r=t instanceof Uint8Array?Z(t):t,i=je.getSharedSecret(r,"02"+e),s=yi(i);let o=Uint8Array.from(_r(16)),l=ne.encode(n),a=Wr(s,o).encrypt(l),c=he.encode(new Uint8Array(a)),f=he.encode(new Uint8Array(o.buffer));return`${c}?iv=${f}`}async function nc(t,e,n){const r=t instanceof Uint8Array?Z(t):t;let[i,s]=n.split("?iv="),o=je.getSharedSecret(r,"02"+e),l=yi(o),a=he.decode(s),c=he.decode(i),f=Wr(l,a).decrypt(c);return de.decode(f)}function yi(t){return t.slice(1,33)}var rc={};M(rc,{NIP05_REGEX:()=>vn,isNip05:()=>ic,isValid:()=>ac,queryProfile:()=>wi,searchDomain:()=>oc,useFetchImplementation:()=>sc});var vn=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,ic=t=>vn.test(t||""),Lt;try{Lt=fetch}catch{}function sc(t){Lt=t}async function oc(t,e=""){try{const n=`https://${t}/.well-known/nostr.json?name=${e}`,r=await Lt(n,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function wi(t){var i;const e=t.match(vn);if(!e)return null;const[,n="_",r]=e;try{const s=`https://${r}/.well-known/nostr.json?name=${n}`,o=await Lt(s,{redirect:"manual"});if(o.status!==200)throw Error("Wrong response code");const l=await o.json(),a=l.names[n];return a?{pubkey:a,relays:(i=l.relays)==null?void 0:i[a]}:null}catch{return null}}async function ac(t,e){const n=await wi(e);return n?n.pubkey===t:!1}var lc={};M(lc,{parse:()=>cc});function cc(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let i=t.tags.length-1;i>=0;i--){const s=t.tags[i];if(s[0]==="e"&&s[1]){const[o,l,a,c,f]=s,u={id:l,relays:a?[a]:[],author:f};if(c==="root"){e.root=u;continue}if(c==="reply"){e.reply=u;continue}if(c==="mention"){e.mentions.push(u);continue}n?r=u:n=u,e.mentions.push(u);continue}if(s[0]==="q"&&s[1]){const[o,l,a]=s;e.quotes.push({id:l,relays:a?[a]:[]})}if(s[0]==="p"&&s[1]){e.profiles.push({pubkey:s[1],relays:s[2]?[s[2]]:[]});continue}}return e.root||(e.root=r||n||e.reply),e.reply||(e.reply=n||e.root),[e.reply,e.root].forEach(i=>{if(!i)return;let s=e.mentions.indexOf(i);if(s!==-1&&e.mentions.splice(s,1),i.author){let o=e.profiles.find(l=>l.pubkey===i.author);o&&o.relays&&(i.relays||(i.relays=[]),o.relays.forEach(l=>{var a;((a=i.relays)==null?void 0:a.indexOf(l))===-1&&i.relays.push(l)}),o.relays=i.relays)}}),e.mentions.forEach(i=>{if(i.author){let s=e.profiles.find(o=>o.pubkey===i.author);s&&s.relays&&(i.relays||(i.relays=[]),s.relays.forEach(o=>{i.relays.indexOf(o)===-1&&i.relays.push(o)}),s.relays=i.relays)}}),e}var uc={};M(uc,{fetchRelayInformation:()=>dc,useFetchImplementation:()=>fc});var bi;try{bi=fetch}catch{}function fc(t){bi=t}async function dc(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var hc={};M(hc,{fastEventHash:()=>vi,getPow:()=>xi,minePow:()=>gc});function xi(t){let e=0;for(let n=0;n<64;n+=8){const r=parseInt(t.substring(n,n+8),16);if(r===0)e+=32;else{e+=Math.clz32(r);break}}return e}function gc(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),i[1]=(++n).toString(),r.id=vi(r),xi(r.id)>=e)break}return r}function vi(t){return Z(Fe(ne.encode(JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]))))}var pc={};M(pc,{finishRepostEvent:()=>mc,getRepostedEvent:()=>yc,getRepostedEventPointer:()=>Ei});function mc(t,e,n,r){return ce({kind:pn,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:t.content===""?"":JSON.stringify(e),created_at:t.created_at},r)}function Ei(t){if(t.kind!==pn)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(e!==void 0)return{id:e[1],relays:[e[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function yc(t,{skipVerification:e}={}){const n=Ei(t);if(n===void 0||t.content==="")return;let r;try{r=JSON.parse(t.content)}catch{return}if(r.id===n.id&&!(!e&&!gn(r)))return r}var wc={};M(wc,{NOSTR_URI_REGEX:()=>At,parse:()=>xc,test:()=>bc});var At=new RegExp(`nostr:(${pi.source})`);function bc(t){return typeof t=="string"&&new RegExp(`^${At.source}$`).test(t)}function xc(t){const e=t.match(new RegExp(`^${At.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:vt(e[1])}}var vc={};M(vc,{finishReactionEvent:()=>Ec,getReactedEventPointer:()=>Sc});function Ec(t,e,n){const r=e.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return ce({...t,kind:mn,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Sc(t){if(t.kind!==mn)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(e===void 0||n===void 0))return{id:e[1],relays:[e[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var Lc={};M(Lc,{matchAll:()=>Ac,regex:()=>En,replaceAll:()=>kc});var En=()=>new RegExp(`\\b${At.source}\\b`,"g");function*Ac(t){const e=t.matchAll(En());for(const n of e)try{const[r,i]=n;yield{uri:r,value:i,decoded:vt(i),start:n.index,end:n.index+r.length}}catch{}}function kc(t,e){return t.replaceAll(En(),(n,r)=>e({uri:n,value:r,decoded:vt(r)}))}var Oc={};M(Oc,{channelCreateEvent:()=>$c,channelHideMessageEvent:()=>Rc,channelMessageEvent:()=>Cc,channelMetadataEvent:()=>Ic,channelMuteUserEvent:()=>Nc});var $c=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ce({kind:oi,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},Ic=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ce({kind:ai,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Cc=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),ce({kind:li,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Rc=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ce({kind:ci,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Nc=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return ce({kind:ui,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)},Bc={};M(Bc,{EMOJI_SHORTCODE_REGEX:()=>Si,matchAll:()=>Tc,regex:()=>Sn,replaceAll:()=>Uc});var Si=/:(\w+):/,Sn=()=>new RegExp(`\\B${Si.source}\\B`,"g");function*Tc(t){const e=t.matchAll(Sn());for(const n of e)try{const[r,i]=n;yield{shortcode:r,name:i,start:n.index,end:n.index+r.length}}catch{}}function Uc(t,e){return t.replaceAll(Sn(),(n,r)=>e({shortcode:n,name:r}))}var Pc={};M(Pc,{useFetchImplementation:()=>_c,validateGithub:()=>Hc});var Ln;try{Ln=fetch}catch{}function _c(t){Ln=t}async function Hc(t,e,n){try{return await(await Ln(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}}var Dc={};M(Dc,{decrypt:()=>$n,encrypt:()=>On,getConversationKey:()=>An,v2:()=>Kc});var Li=1,Ai=65535;function An(t,e){const n=je.getSharedSecret(t,"02"+e).subarray(1,33);return fa(Fe,n,"nip44-v2")}function ki(t,e){const n=da(Fe,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function kn(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)}function Mc(t){if(!Number.isSafeInteger(t)||t<Li||t>Ai)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e}function jc(t){const e=ne.encode(t),n=e.length,r=Mc(n),i=new Uint8Array(kn(n)-n);return yt(r,e,i)}function Fc(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<Li||e>Ai||n.length!==e||t.length!==2+kn(e))throw new Error("invalid padding");return de.decode(n)}function Oi(t,e,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=yt(n,e);return bt(Fe,t,r)}function Vc(t){if(typeof t!="string")throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(t[0]==="#")throw new Error("unknown encryption version");let n;try{n=he.decode(t)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(i!==2)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function On(t,e,n=_r(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:s}=ki(e,n),o=jc(t),l=Yr(r,i,o),a=Oi(s,l,n);return he.encode(yt(new Uint8Array([2]),n,l,a))}function $n(t,e){const{nonce:n,ciphertext:r,mac:i}=Vc(t),{chacha_key:s,chacha_nonce:o,hmac_key:l}=ki(e,n),a=Oi(l,r,n);if(!qo(a,i))throw new Error("invalid MAC");const c=Yr(s,o,r);return Fc(c)}var Kc={utils:{getConversationKey:An,calcPaddedLen:kn},encrypt:On,decrypt:$n},zc={};M(zc,{makeNwcRequestEvent:()=>Wc,parseConnectionString:()=>qc});function qc(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),s=n.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}async function Wc(t,e,n){const i=await mi(e,t,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:hi,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]};return ce(s,e)}var Zc={};M(Zc,{getZapEndpoint:()=>Gc,makeZapReceipt:()=>Qc,makeZapRequest:()=>Yc,useFetchImplementation:()=>Jc,validateZapRequest:()=>Xc});var In;try{In=fetch}catch{}function Jc(t){In=t}async function Gc(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:o}=Me.decode(n,1e3),l=Me.fromWords(o);e=de.decode(l)}else if(r){let[o,l]=r.split("@");e=new URL(`/.well-known/lnurlp/${o}`,`https://${l}`).toString()}else return null;let s=await(await In(e)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Yc({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&s.tags.push(["e",e]),s}function Xc(t){let e;try{e=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!dn(e))return"Zap request is not a valid Nostr event.";if(!gn(e))return"Invalid signature on zap request.";let n=e.tags.find(([s,o])=>s==="p"&&o);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find(([s,o])=>s==="e"&&o);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Qc({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t),s=i.tags.filter(([l])=>l==="e"||l==="p"||l==="a"),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",i.pubkey],["bolt11",n],["description",t]]};return e&&o.tags.push(["preimage",e]),o}var eu={};M(eu,{createRumor:()=>Ni,createSeal:()=>Bi,createWrap:()=>Ti,unwrapEvent:()=>Ui,unwrapManyEvents:()=>ru,wrapEvent:()=>Qt,wrapManyEvents:()=>nu});var tu=2*24*60*60,$i=()=>Math.round(Date.now()/1e3),Ii=()=>Math.round($i()-Math.random()*tu),Ci=(t,e)=>An(t,e),Ri=(t,e,n)=>On(JSON.stringify(t),Ci(e,n)),fr=(t,e)=>JSON.parse($n(t.content,Ci(e,t.pubkey)));function Ni(t,e){const n={created_at:$i(),content:"",tags:[],...t,pubkey:ei(e)};return n.id=nt(n),n}function Bi(t,e,n){return ce({kind:si,content:Ri(t,e,n),created_at:Ii(),tags:[]},e)}function Ti(t,e){const n=Ea();return ce({kind:fi,content:Ri(t,n,e),created_at:Ii(),tags:[["p",e]]},n)}function Qt(t,e,n){const r=Ni(t,e),i=Bi(r,e,n);return Ti(i,n)}function nu(t,e,n){if(!n||n.length===0)throw new Error("At least one recipient is required.");const r=ei(e),i=[Qt(t,e,r)];return n.forEach(s=>{i.push(Qt(t,e,s))}),i}function Ui(t,e){const n=fr(t,e);return fr(n,e)}function ru(t,e){let n=[];return t.forEach(r=>{n.push(Ui(r,e))}),n.sort((r,i)=>r.created_at-i.created_at),n}var iu={};M(iu,{getToken:()=>su,hashPayload:()=>Cn,unpackEventFromToken:()=>_i,validateEvent:()=>Vi,validateEventKind:()=>Di,validateEventMethodTag:()=>ji,validateEventPayloadTag:()=>Fi,validateEventTimestamp:()=>Hi,validateEventUrlTag:()=>Mi,validateToken:()=>ou});var Pi="Nostr ";async function su(t,e,n,r=!1,i){const s={kind:yn,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&s.tags.push(["payload",Cn(i)]);const o=await n(s);return(r?Pi:"")+he.encode(ne.encode(JSON.stringify(o)))}async function ou(t,e,n){const r=await _i(t).catch(s=>{throw s});return await Vi(r,e,n).catch(s=>{throw s})}async function _i(t){if(!t)throw new Error("Missing token");t=t.replace(Pi,"");const e=de.decode(he.decode(t));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function Hi(t){return t.created_at?Math.round(new Date().getTime()/1e3)-t.created_at<60:!1}function Di(t){return t.kind===yn}function Mi(t,e){const n=t.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===e:!1}function ji(t,e){const n=t.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===e.toLowerCase():!1}function Cn(t){const e=Fe(ne.encode(JSON.stringify(t)));return Z(e)}function Fi(t,e){const n=t.tags.find(i=>i[0]==="payload");if(!n)return!1;const r=Cn(e);return n.length>0&&n[1]===r}async function Vi(t,e,n,r){if(!gn(t))throw new Error("Invalid nostr event, signature invalid");if(!Di(t))throw new Error("Invalid nostr event, kind invalid");if(!Hi(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Mi(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!ji(t,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Fi(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}export{$s as B,ei as a,Ea as g,J as i,ql as n,lu as s};
